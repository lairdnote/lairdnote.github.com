<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="算法,数据结构," />










<meta name="description" content="服务目前每月会对搬家师傅进行评级，根据师傅的评级排名结果，我们将优先保证最优师傅的全天订单。">
<meta property="og:type" content="article">
<meta property="og:title" content="王者编程大赛之三 — 01背包">
<meta property="og:url" content="https://blog.feedscoin.com/2017/12/05/2017/12/2017-ziroom-king-3/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="服务目前每月会对搬家师傅进行评级，根据师傅的评级排名结果，我们将优先保证最优师傅的全天订单。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.fanhaobai.com/2017/12/2017-ziroom-king-3/9f4a2cb2-ab32-4b28-b054-b479c04270e5.png">
<meta property="og:image" content="https://www.fanhaobai.com/2017/12/2017-ziroom-king-3/18359c82-3ff9-48c7-825e-77fe17419621.png">
<meta property="og:image" content="https://www.fanhaobai.com/2017/12/2017-ziroom-king-3/366c6f00-35a1-46c6-ba98-76e3c7b3bae4.png">
<meta property="og:image" content="https://www.fanhaobai.com/2017/12/2017-ziroom-king-3/9f4a2cb2-ab32-4b28-b054-b479c04270e5.png">
<meta property="article:published_time" content="2017-12-05T15:12:00.000Z">
<meta property="article:modified_time" content="2024-01-15T07:29:51.000Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="算法">
<meta property="article:tag" content="数据结构">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.fanhaobai.com/2017/12/2017-ziroom-king-3/9f4a2cb2-ab32-4b28-b054-b479c04270e5.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/2017/12/05/2017/12/2017-ziroom-king-3/"/>





  <title>王者编程大赛之三 — 01背包 | 逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/12/05/2017/12/2017-ziroom-king-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">王者编程大赛之三 — 01背包</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-05T23:12:00+08:00">
                2017-12-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index">
                    <span itemprop="name">算法</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      

        <p>服务目前每月会对搬家师傅进行评级，根据师傅的评级排名结果，我们将优先保证最优师傅的全天订单。</p>
<p><img src="//www.fanhaobai.com/2017/12/2017-ziroom-king-3/9f4a2cb2-ab32-4b28-b054-b479c04270e5.png"><span id="more"></span></p>
<p>假设师傅每天工作 8 个小时，给定一天 n 个订单，每个订单其占用时间长为 $T_i$，挣取价值为 $V_i$，现请您为师傅安排订单，并保证师傅挣取价值最大。</p>
<p>输入格式<br>输入 n 组数据，每组以逗号分隔，并且每一个订单的编号、时长、挣取价值以空格分隔<br>输出格式<br>输出争取价值和订单编号，订单编号按照价值由大到小排序，争取价值相同，则按照每小时平均争取价值由大到小排序</p>
<p>示例：<br>输入：[MV10001 2 100,MV10008 2 30,MV10003 1 200,MV10009 6 500,MV10010 3 400]<br>输出：730 MV10010 MV10003 MV10001 MV10008<br>输入：[M10001 2 100,M10002 3 210,M10003 3 300,M10004 2 150,M10005 1 70,M10006 2 220,M10007 1 10,M10008 3 30,M10009 3 200,M10010 2 400]<br>输出：990 M10010 M10003 M10006 M10005</p>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>由于本题每个订单每天只被安排一次，是典型地采用 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">动态规划</a> 求解的 01 背包问题。</p>
<h3 id="动态规划概念"><a href="#动态规划概念" class="headerlink" title="动态规划概念"></a>动态规划概念</h3><p><a href="#">动态规划过程</a>：每次决策依赖于当前状态，又随即引起状态的转移。一个决策序列就是在变化的状态中产生出来的，所以，这种多阶段最优化决策解决问题的过程就称为动态规划。</p>
<p><a href="#">动态规划原理</a>：动态规划与分治法类似，都是把原问题拆分成不同规模相同特征的小问题，通过寻找特定的递推关系，先解决一个个小问题，最终达到解决原问题的效果。</p>
<h3 id="建立动态方程"><a href="#建立动态方程" class="headerlink" title="建立动态方程"></a>建立动态方程</h3><p>假设，师傅挣取价值最大时的订单为 $x_1$,$x_2$,$x_3$,…,$x_i$（其中 $x_i$ 取 1 或 0，表示第 i 个订单被安排或者不安排），$v_i$ 表示第 i 个订单的价值，$w_i$ 表示第 i 个订单的耗时时长，$wv(i,j)$ 表示安排了第 i 个订单，师傅总耗时为 j 时的最大价值。</p>
<p>可得订单价值和耗时的关系图：</p>
<table>
<thead>
<tr>
<th>i</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody><tr>
<td>w(i)</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>6</td>
<td>3</td>
</tr>
<tr>
<td>v(i)</td>
<td>100</td>
<td>30</td>
<td>200</td>
<td>500</td>
<td>400</td>
</tr>
</tbody></table>
<p>因此，可得 <a href="#">动态方程</a>：</p>
<p>$$wv(i,j) &#x3D; \begin{cases}<br>wv(i-1,j)(j &lt; w(i)) \<br>max(wx(i-1,j),wv(i-1,j-w(i))+v(i))(j \geq w(i))<br>\end{cases}$$</p>
<p>说明：$j&lt;w(i)$ 表示订单不被安排，$j \geq w(i)$ 表示订单被安排。</p>
<h3 id="确定边界"><a href="#确定边界" class="headerlink" title="确定边界"></a>确定边界</h3><p>可以确定边界条件 $wx(0,j) &#x3D; wx(i, 0) &#x3D; 0$，$wx(0,j)$ 表示一个订单都没安排，再怎么耗时价值都为 0，$wx(i,0)$ 表示没有耗时，安排多少订单价值都为 0。</p>
<p><img src="//www.fanhaobai.com/2017/12/2017-ziroom-king-3/18359c82-3ff9-48c7-825e-77fe17419621.png"></p>
<h3 id="求解"><a href="#求解" class="headerlink" title="求解"></a>求解</h3><p>求解过程，可以填表来进行模拟：</p>
<ol>
<li>如 i&#x3D;1,j&#x3D;1 时，有 $j&lt;w(i)$，故 $wx(1,1) &#x3D; wx(1-1,1) &#x3D; 0$；</li>
<li>又如 i&#x3D;1,j&#x3D;2 时，有 $j&#x3D;w(i)$，故 $wx(1,2) &#x3D; max(wx(1-1,1), wx(1-1,2-w(1)) + v(1) &#x3D; 100$；</li>
<li>如此下去，直至填到最后一个，i&#x3D;5,j&#x3D;8 时，有 $j&lt;w(i)$，故 $wx(5,8) &#x3D; max(wx(5-1,8), wx(5-1,8-w(5)) + v(5) &#x3D; 730$；</li>
<li>在耗时没有超过 8 小时的前提下，当前 5 个订单都被安排过时，$wx(5,8) &#x3D; 730$ 即为所求的最大价值；</li>
</ol>
<p><img src="//www.fanhaobai.com/2017/12/2017-ziroom-king-3/366c6f00-35a1-46c6-ba98-76e3c7b3bae4.png"></p>
<h3 id="解的组成"><a href="#解的组成" class="headerlink" title="解的组成"></a>解的组成</h3><p>尽管 <a href="#%E6%B1%82%E8%A7%A3">求解</a> 过程已经求出了最大价值，但是并没有得出哪些订单被安排了，也就是没有得出解的组成部分。</p>
<p>但是在求解的过程中不难发现，寻解方程满足如下定义：</p>
<p>$$x(i) &#x3D; \begin{cases}<br>wv(i,j) &#x3D; wv(i-1,j) \<br>wv(i,j) \neq wv(i-1,j)<br>\end{cases}$$</p>
<p>从表格右下到左上为寻解方向，寻解过程如下：</p>
<p><img src="//www.fanhaobai.com/2017/12/2017-ziroom-king-3/9f4a2cb2-ab32-4b28-b054-b479c04270e5.png"></p>
<ol>
<li>i&#x3D;5,j&#x3D;8 时，有 $wv(5,8) !&#x3D; wv(4,8)$，故 $x(5) &#x3D; 1$，此时 $j -&#x3D; w(5)$，$j &#x3D; 5$；</li>
<li>i&#x3D;4 时，无论 j 取何值，都有 $wv(4,j) &#x3D;&#x3D; wv(3,j)$，故 $x(5) &#x3D; 0$，此时 $j &#x3D; 5$；</li>
<li>i&#x3D;3,j&#x3D;5 时，有 $wv(3,5) !&#x3D; wv(2,5)$，故 $x(3) &#x3D; 1$，此时 $j -&#x3D; w(3)$，$j &#x3D; 4$；</li>
<li>i&#x3D;2,j&#x3D;4时，有 $wv(2,4) !&#x3D; wv(1,4)$，故 $x(2) &#x3D; 1$，此时 $j -&#x3D; w(2)$，$j &#x3D; 2$；</li>
<li>i&#x3D;1,j&#x3D;2时，有 $wv(1,2) !&#x3D; wv(1,2)$，故 $x(1) &#x3D; 1$，此时 $j -&#x3D; w(1)$，$j &#x3D; 0$，寻解结束；</li>
</ol>
<h2 id="编码实现"><a href="#编码实现" class="headerlink" title="编码实现"></a><a target="_blank" rel="noopener" href="https://github.com/fan-haobai/2017-ziroom-king/blob/master/src/5.php">编码实现</a></h2><p>实现的代码如下，并将一一详细说明。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Knapsack</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//物品重量,index从1开始表示第1个物品</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$w</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="comment">//物品价值,index从1开始表示第1个物品</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$v</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="comment">//最大价值,$wv[$i][$w]表示前i个物品重量为w时的最大价值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$wv</span> = <span class="keyword">array</span>();</span><br><span class="line">    <span class="comment">//物品总数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$n</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//物品总重量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$W</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//背包中的物品</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$goods</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Knapsack constructor.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> array $goods 物品信息,格式如下:</span></span><br><span class="line"><span class="comment">     * [</span></span><br><span class="line"><span class="comment">     *   [index, w, v]   //good1</span></span><br><span class="line"><span class="comment">     *   ...</span></span><br><span class="line"><span class="comment">     * ]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> $c</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$goods</span>, <span class="variable">$c</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;goods = <span class="variable">$goods</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;W = <span class="variable">$c</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;n = <span class="title function_ invoke__">count</span>(<span class="variable">$goods</span>);</span><br><span class="line">        <span class="comment">//初始化物品价值</span></span><br><span class="line">        <span class="variable">$v</span> = <span class="title function_ invoke__">array_column</span>(<span class="variable">$goods</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="title function_ invoke__">array_unshift</span>(<span class="variable">$v</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;v = <span class="variable">$v</span>;</span><br><span class="line">        <span class="comment">//初始化物品重量</span></span><br><span class="line">        <span class="variable">$w</span> = <span class="title function_ invoke__">array_column</span>(<span class="variable">$goods</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="title function_ invoke__">array_unshift</span>(<span class="variable">$w</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;w = <span class="variable">$w</span>;</span><br><span class="line">        <span class="comment">//初始化最大价值</span></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;wv = <span class="title function_ invoke__">array_fill</span>(<span class="number">0</span>, <span class="variable">$this</span>-&gt;n + <span class="number">1</span>, <span class="title function_ invoke__">array_fill</span>(<span class="number">0</span>, <span class="variable">$this</span>-&gt;W + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">pd</span>();</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">canPut</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getMaxPrice</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;wv[<span class="variable language_">$this</span>-&gt;n][<span class="variable language_">$this</span>-&gt;W];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>动态求解过程：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">pd</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt;= <span class="variable language_">$this</span>-&gt;W; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt;= <span class="variable language_">$this</span>-&gt;n; <span class="variable">$j</span>++) &#123;</span><br><span class="line">            <span class="comment">//未放入物品和重量为空时,价值为0</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$i</span> == <span class="number">0</span> || <span class="variable">$j</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//决策</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$i</span> &lt; <span class="variable language_">$this</span>-&gt;w[<span class="variable">$j</span>]) &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;wv[<span class="variable">$j</span>][<span class="variable">$i</span>] = <span class="variable language_">$this</span>-&gt;wv[<span class="variable">$j</span> - <span class="number">1</span>][<span class="variable">$i</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;wv[<span class="variable">$j</span>][<span class="variable">$i</span>] = <span class="title function_ invoke__">max</span>(<span class="variable">$this</span>-&gt;wv[<span class="variable">$j</span> - <span class="number">1</span>][<span class="variable">$i</span>], <span class="variable">$this</span>-&gt;wv[<span class="variable">$j</span> - <span class="number">1</span>][<span class="variable">$i</span> - <span class="variable">$this</span>-&gt;w[<span class="variable">$j</span>]] + <span class="variable">$this</span>-&gt;v[<span class="variable">$j</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>寻解过程：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">canPut</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$c</span> = <span class="variable language_">$this</span>-&gt;W;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="variable language_">$this</span>-&gt;n; <span class="variable">$i</span> &gt; <span class="number">0</span>; <span class="variable">$i</span>--) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//背包质量为c时,前i-1个和前i-1个物品价值不变,表示第1个物品未放入</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;wv[<span class="variable">$i</span>][<span class="variable">$c</span>] == <span class="variable language_">$this</span>-&gt;wv[<span class="variable">$i</span> - <span class="number">1</span>][<span class="variable">$c</span>]) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;goods[<span class="variable">$i</span> - <span class="number">1</span>][<span class="number">3</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;goods[<span class="variable">$i</span> - <span class="number">1</span>][<span class="number">3</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="variable">$c</span> = <span class="variable">$c</span> - <span class="variable language_">$this</span>-&gt;w[<span class="variable">$i</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>按照订单价值降序获取订单信息（若订单价值相同则按单位时间平均价值降序排列）：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getGoods</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$filter</span> = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$value</span>[<span class="number">3</span>];</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="variable">$goods</span> = <span class="title function_ invoke__">array_filter</span>(<span class="variable">$this</span>-&gt;goods, <span class="variable">$filter</span>);</span><br><span class="line">    <span class="title function_ invoke__">usort</span>(<span class="variable">$goods</span>, function(<span class="variable">$a</span>, <span class="variable">$b</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$a</span>[<span class="number">2</span>] == <span class="variable">$b</span>[<span class="number">2</span>]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$a</span>[<span class="number">2</span>] / <span class="variable">$a</span>[<span class="number">1</span>] &lt; <span class="variable">$b</span>[<span class="number">2</span>] / <span class="variable">$b</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span>[<span class="number">2</span>] &lt; <span class="variable">$b</span>[<span class="number">2</span>];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$goods</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接收标准输入处理并输出结果：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$arr</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$input</span>);</span><br><span class="line"><span class="variable">$filter</span> = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">explode</span>(<span class="string">&#x27; &#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable">$knapsack</span> = <span class="keyword">new</span> <span class="title class_">Knapsack</span>(<span class="title function_ invoke__">array_map</span>(<span class="variable">$filter</span>, <span class="variable">$arr</span>), <span class="number">8</span>);</span><br><span class="line"><span class="variable">$goods</span> = <span class="variable">$knapsack</span>-&gt;<span class="title function_ invoke__">getGoods</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$knapsack</span>-&gt;<span class="title function_ invoke__">getMaxPrice</span>(), <span class="string">&#x27; &#x27;</span>, <span class="title function_ invoke__">implode</span>(<span class="string">&#x27; &#x27;</span>, <span class="title function_ invoke__">array_column</span>(<span class="variable">$goods</span>, <span class="number">0</span>)), PHP_EOL;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>该题使用动态规划求解，算法的时间复杂度为 $O(nc)$，当然也可以采用其他方式求解。例如先将订单按照价值排序，然后依次尝试进行安排订单，直至剩余耗时不能再被安排订单。</p>
<p>有关动态规划的其他典型应用，请参考 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/wuyuegb2312/p/3281264.html">常见的动态规划问题分析与求解</a> 一文。</p>
<p><strong>相关文章 <a href="#">»</a></strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.fanhaobai.com/2017/12/2017-ziroom-king-1.html">王者编程大赛之一</a> <span>（2017-12-05）</span></li>
<li><a target="_blank" rel="noopener" href="https://www.fanhaobai.com/2017/12/2017-ziroom-king-2.html">王者编程大赛之二 — 蓄水池</a> <span>（2017-12-05）</span></li>
<li><a target="_blank" rel="noopener" href="https://www.fanhaobai.com/2017/12/2017-ziroom-king-4.html">王者编程大赛之四 — 约瑟夫环</a> <span>（2017-12-06）</span></li>
<li><a target="_blank" rel="noopener" href="https://www.fanhaobai.com/2017/12/2017-ziroom-king-5.html">王者编程大赛之五 — 最短路径</a> <span>（2017-12-06）</span></li>
</ul>

      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E7%AE%97%E6%B3%95/" rel="tag"># 算法</a>
          
            <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag"># 数据结构</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/05/2017-12-05-knowledge-business-model/" rel="next" title="知识付费时代的来临">
                <i class="fa fa-chevron-left"></i> 知识付费时代的来临
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/12/06/2017/12/2017-ziroom-king-4/" rel="prev" title="王者编程大赛之四 — 约瑟夫环">
                王者编程大赛之四 — 约瑟夫环 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1451</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF"><span class="nav-number">1.</span> <span class="nav-text">解题思路</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">动态规划概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E5%8A%A8%E6%80%81%E6%96%B9%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">建立动态方程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A1%AE%E5%AE%9A%E8%BE%B9%E7%95%8C"><span class="nav-number">1.3.</span> <span class="nav-text">确定边界</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B1%82%E8%A7%A3"><span class="nav-number">1.4.</span> <span class="nav-text">求解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%9A%84%E7%BB%84%E6%88%90"><span class="nav-number">1.5.</span> <span class="nav-text">解的组成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.</span> <span class="nav-text">编码实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">3.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
