<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="widgets," />










<meta name="description" content="What to use to embed a widget? Iframe or Javascript snippet? In this post I explain their pros and cons when deciding how you want users to embed your widget.">
<meta property="og:type" content="article">
<meta property="og:title" content="Tips to implement an embeddable widget">
<meta property="og:url" content="https://blog.feedscoin.com/embeddable-widget">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="What to use to embed a widget? Iframe or Javascript snippet? In this post I explain their pros and cons when deciding how you want users to embed your widget.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/youtube-subscribe-button.png">
<meta property="article:published_time" content="2013-12-19T09:41:06.000Z">
<meta property="article:modified_time" content="2024-01-15T07:11:20.000Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="widgets">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.feedscoin.com/assets/images/posts/youtube-subscribe-button.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/embeddable-widget"/>





  <title>Tips to implement an embeddable widget | 逐流小站</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'G-MW47YH6RH0', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/embeddable-widget">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Tips to implement an embeddable widget</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-12-19T17:41:06+08:00">
                2013-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  What to use to embed a widget? Iframe or Javascript snippet? In this post I explain their pros and cons when deciding how you want users to embed your widget.
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Embeddable widgets (or gadgets) allow users to easily include<br>functionality provided by another site. Some examples are <a target="_blank" rel="noopener" href="https://about.twitter.com/resources/buttons">Twitter<br>button</a> or the<br><a target="_blank" rel="noopener" href="https://developers.facebook.com/docs/plugins/like-button/">Facebook like button</a>,<br>but also more complex ones<br>like <a target="_blank" rel="noopener" href="https://disqus.com/websites/">Disqus comments</a>. They can be included on a site easily,<br>normally through an <code>iframe</code> or some JS snippet which will create an<br>iframe. Although at first sight these widgets seem basic, lots of things<br>need to be taken into account when implementing one.</p>
<span id="more"></span>

<h2 id="Embeddable-code"><a href="#Embeddable-code" class="headerlink" title="Embeddable code"></a>Embeddable code</h2><p>These widgets are meant to be easy to add to any site. And the style and functionality of the widget shouldn’t be affected by that from the page in which it is being embedded.</p>
<p>A natural solution for this problem is to use <code>iframe</code>s. The iframe can be included directly, or injected using a snippet of Javascript code. Using the Javascript code has several advantages:</p>
<ul>
<li>It can expose an API to manipulate the widget and subscribe to<br>events triggered by it more naturally (more on that later).</li>
<li>Users can control better when to show the iframe (lazy loading).<br>Although with iframes it is possible, it is more explicit when using<br>JS.</li>
<li>Passing parameters to the widget feels better than doing the same<br>through a <code>data</code> attribute. And it allows passing parameters such as<br>JSON objects or functions that more awkward to include as a <code>data</code><br>attribute.</li>
<li>The same JS code can add more functionalities, like generating other<br>types of buttons or even providing a whole Javascript SDK.</li>
<li>It allows listening to <code>resize</code> events and change the layout of the<br>widget accordingly.</li>
</ul>
<p>It also has some disadvantages:</p>
<ul>
<li>Sometimes it is not possible for users to include custom JS code<br>where they want to include the widget.</li>
<li>Includes an extra request for a script file. In most of the cases<br>the script will just be injecting the iframe, in a similar way as<br>other scripts for other widgets. Thus, a regular site can end up<br>requesting many JS files doing something very similar. I recommend<br>you to have a look at <a target="_blank" rel="noopener" href="https://www.phpied.com/c3po-common-3rd-party-objects/">C3PO</a><br>which explains a common loader for this kind of widgets.</li>
</ul>
<p>You can read more on the differences between providing an iframe code<br>snippet or a JS one on <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5359815/widget-design-what-is-better-iframes-or-javascript">StackOverflow</a>.</p>
<h2 id="Other-things-to-consider"><a href="#Other-things-to-consider" class="headerlink" title="Other things to consider"></a>Other things to consider</h2><p>There are a few things we need to keep in mind, like versioning, how we pass options or performance.</p>
<h3 id="Versioning"><a href="#Versioning" class="headerlink" title="Versioning"></a>Versioning</h3><p>Releasing a new version of the widget and see it automatically updated<br>on every site is a great experience. But if your change is a breaking<br>one (i.e. different attributes, different size…) then you need to<br>create a different version of the widget, or will break the sites using<br>it. So make sure you include an identifier for the version in the URL<br>for your iframe or the JS resource in the snippet.</p>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><p>Most widgets allows customisation through a set of options. These<br>usually include:</p>
<ul>
<li><strong>Target</strong>: If you are liking a page it will be the URL of the page.<br>If you are following a user it will be the identifier for the user.</li>
<li><strong>Layout</strong>: Different layouts for different sizes of the button.</li>
<li><strong>Theme</strong>: Light &#x2F; dark. You might want your widget to have a<br>transparent background so it merges with that on the site. In that<br>case, be careful with the color of your text because it can become<br>unreadable.</li>
<li><strong>Locale</strong>: The language that will be used to localise the text of<br>the widget (see the <a href="#localisation">Localisation section</a> for more info).<br><img src="/assets/images/posts/youtube-subscribe-button.png" alt="Youtube Subscribe Button"></li>
</ul>
<p><em>Notice the light and dark themes and try to foresee what would happen if<br>you embed the light one in a dark site.</em></p>
<p>These options are normally specified as data attributes in the iframe, or passed to the JS function that creates the widget if using a JS snippet.</p>
<h3 id="Browser-compatibility"><a href="#Browser-compatibility" class="headerlink" title="Browser compatibility"></a>Browser compatibility</h3><p>Most basic widgets like buttons should not I would encourage you to support as many browsers as possible. You don’t have as much control on the device capabilities and the type of user as if you were coding a full web page, so try to make your widget work in every possible scenario.</p>
<h3 id="Performance-and-making-it-async"><a href="#Performance-and-making-it-async" class="headerlink" title="Performance (and making it async)"></a>Performance (and making it async)</h3><p>Your widget will affect the performance of the sites using it. Thus, it<br>is important to follow the usual rules (see PageSpeed, YSlow). Try also<br>to use scarcely large libraries. In addition, you should not use<br><code>document.write</code>, or the page using it will block rendering. If your<br>snippet needs to load a JS file, do it in a async way. If not, if the<br>request for your file fails, it will become a <a target="_blank" rel="noopener" href="https://www.stevesouders.com/blog/2011/10/13/frontend-spof-survery/">SPOF</a>.</p>
<p>The best way is using an <a target="_blank" rel="noopener" href="https://calendar.perfplanet.com/2013/browser-wishlist-2013/#async3pc">async snippet</a>. The general pattern is:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="variable language_">document</span>,</span><br><span class="line">    h = d.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;head&#x27;</span>)[<span class="number">0</span>],</span><br><span class="line">    s = d.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  s.<span class="property">type</span> = <span class="string">&#x27;text/javascript&#x27;</span>;</span><br><span class="line">  s.<span class="property">async</span> = <span class="literal">true</span>;</span><br><span class="line">  s.<span class="property">src</span> = <span class="string">&#x27;/js/myfile.js&#x27;</span>;</span><br><span class="line">  h.<span class="title function_">appendChild</span>(s);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>You can find plenty of examples on <a target="_blank" rel="noopener" href="https://web.archive.org/web/20170106194526/https://developers.google.com/speed/docs/insights/UseAsync">this list of<br>popular scripts with async loading</a>.</p>
<h3 id="Localisation"><a href="#Localisation" class="headerlink" title="Localisation"></a>Localisation</h3><p>If you want to localise your widget, there are several options. You can detect the language by reading the HTTP <code>Accept-Language</code> header sent in the request, and localise your widget accordingly. Thus, it will be rendered using the preferred user’s language, and you could default to English if you can’t provide a localisation for the languages listed in the header.</p>
<p>Even though that is a good solution, the widget can still be rendered in a language different from the language of the rest of the page in which your widget has been embedded, which is not optimal. A better solution is to support an option in the embed code so the page can force a specific locale for the widget.</p>
<p>You may need to adjust the width of the widget to accommodate different languages.</p>
<p>The localisation also applies to numbers. If your widget shows a quantity (i.e. the amount of likes, followers, subscribers) take into account the localisation for the number. Also, you may consider rounding the number, which also should be localised. Thus, 24,356,000 could become ‘24M’ in English, or ‘24 millones’ in Spanish, where ‘24M’ would be ambiguous.</p>
<p>If you are interested in rounding, <a target="_blank" rel="noopener" href="http://jsfiddle.net/sUVFC/">here you have a jsFiddle showing the algorithm used in Twitter’s Follow Button</a>.</p>
<h2 id="Useful-resources"><a href="#Useful-resources" class="headerlink" title="Useful resources"></a>Useful resources</h2><p>If you are thinking of using a SDK, I definitely recommend checking out <a target="_blank" rel="noopener" href="https://github.com/hueitan/javascript-sdk-design">this JavaScript SDK design guide</a>.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Build widgets that don’t affect the performance of the sites using it,<br>and strive for compatibility.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/widgets/" rel="tag"># widgets</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2013/12/17/2013/2013-12-17#%E8%AF%BB%E4%B9%A6%EF%BC%9A%E6%B5%B7%E4%B8%8A%E7%81%B5%E5%85%89/" rel="next" title="读书：海上灵光">
                <i class="fa fa-chevron-left"></i> 读书：海上灵光
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2013/12/22/2013-12-22-the-secret-of-xcode-debugger-icon/" rel="prev" title="Xcode Debugger中的Icon符号的意义">
                Xcode Debugger中的Icon符号的意义 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1579</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">64</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Embeddable-code"><span class="nav-number">1.</span> <span class="nav-text">Embeddable code</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-things-to-consider"><span class="nav-number">2.</span> <span class="nav-text">Other things to consider</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Versioning"><span class="nav-number">2.1.</span> <span class="nav-text">Versioning</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Options"><span class="nav-number">2.2.</span> <span class="nav-text">Options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Browser-compatibility"><span class="nav-number">2.3.</span> <span class="nav-text">Browser compatibility</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Performance-and-making-it-async"><span class="nav-number">2.4.</span> <span class="nav-text">Performance (and making it async)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Localisation"><span class="nav-number">2.5.</span> <span class="nav-text">Localisation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Useful-resources"><span class="nav-number">3.</span> <span class="nav-text">Useful resources</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion"><span class="nav-number">4.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
