<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="codeva-HZoIBm8yNp" />
<meta name="bytedance-verification-code" content="xa6iZeY+/XCOJvarHaDY" />








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Liunx Python Rust Goalng DevOPS" />










<meta name="description" content="个人随想，瞎子的世界. Linux Python Rust React Nextjs are my love.">
<meta property="og:type" content="website">
<meta property="og:title" content="逐流小站">
<meta property="og:url" content="https://blog.feedscoin.com/page/46/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="个人随想，瞎子的世界. Linux Python Rust React Nextjs are my love.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="Liunx Python Rust Goalng DevOPS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/page/46/"/>





  <title>逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/solution-for-artisan-call-migrate-not-working-when-app-env-is-production/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/solution-for-artisan-call-migrate-not-working-when-app-env-is-production/" itemprop="url">Artisan::call('migrate') 在 APP_ENV 为 production 时不工作的解决方法</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-13T14:44:11+00:00">
                2016-12-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>最近把版本库里 <code>.env.example</code> 的 <code>APP_ENV</code> 字段值从原来的 <code>local</code> 改为了 <code>production</code>，原意是为了更好的区分开发和生产环境。</p>
<p>然而今天在主机壳的虚拟主机上测试我的程序的时候（准备把演示站搬过去），却出现了奇怪的问题——数据库 Migration  不管用了。</p>
<p>我是在控制器里通过调用 <code>Artisan::call(&#39;migrate&#39;)</code> 来执行数据库迁移操作的（毕竟虚拟主机哪来的 shell 访问），但是这次这条命令竟然没有执行任何事务。</p>
<p>通过 <code>Artisan</code> 执行 <code>Command</code> 的简化流程大概是像这样的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Illuminate\Foundation\Console\Kernel</span><br><span class="line">↓</span><br><span class="line">Illuminate\Console\Application</span><br><span class="line">↓</span><br><span class="line">Illuminate\Console\Command</span><br><span class="line">↓</span><br><span class="line">Illuminate\Container\Container</span><br><span class="line">↓</span><br><span class="line">// 这个就是执行 Artisan::call(&#x27;migrate&#x27;) 时调用的类</span><br><span class="line">Illuminate\Database\Console\Migrations\MigrateCommand</span><br><span class="line">↓</span><br><span class="line">……</span><br></pre></td></tr></table></figure>

<p>经过一段时间的排查，最后锁定了是在 <code>MigrateCommand</code> 这个类停止继续往下执行的，即接下来的脚本都没有被执行到，也就是说问题就出在 <code>MigrateCommand</code> 这里。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/solution-for-artisan-call-migrate-not-working-when-app-env-is-production/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/SECCON-CTF-2016-Quals-jmper-300/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/SECCON-CTF-2016-Quals-jmper-300/" itemprop="url">[SECCON CTF 2016 Quals] jmper 300</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-12T03:44:00+00:00">
                2016-12-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: pwn<br>Point: 300<br>Solver: Naetw @ BambooFox</p>
</blockquote>
<p>這題跟 cheer_msg 其實差不多，然後解法發現也跟以前解過的 <a target="_blank" rel="noopener" href="http://train.cs.nctu.edu.tw/problems/16">applestore</a> 很像，有紀錄以前的 writeup 真是太好了，記憶障礙的時候可以回顧一下</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/SECCON-CTF-2016-Quals-jmper-300/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/SECCON-CTF-2016-Quals-Cheer-msg-100/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/SECCON-CTF-2016-Quals-Cheer-msg-100/" itemprop="url">[SECCON CTF 2016 Quals] Cheer_msg 100</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-12T00:24:00+00:00">
                2016-12-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: pwn<br>Point: 100<br>Solver: Naetw @ BambooFox</p>
</blockquote>
<h2 id="Analyzing"><a href="#Analyzing" class="headerlink" title="Analyzing"></a>Analyzing</h2><p>32 bit ELF, Partial RELRO, 有 canary &amp; NX, 沒有 PIE</p>
<p>程式小小的，比較少見的部分是 <code>alloca</code> 的部分，不同於平常的 <code>malloc</code>，<code>alloca</code> 是從 caller 的 stack frame 上分配記憶體，在 function call 結束時，回收記憶體。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/SECCON-CTF-2016-Quals-Cheer-msg-100/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/2016-12-12-categories-of-languages/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/2016-12-12-categories-of-languages/" itemprop="url">强弱类型、动静类型、GC 和 VM</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-11T16:00:00+00:00">
                2016-12-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="强类型-Vs-弱类型"><a href="#强类型-Vs-弱类型" class="headerlink" title="强类型 Vs. 弱类型"></a>强类型 Vs. 弱类型</h2><ul>
<li>强和弱是一个相对的概念，强是指倾向于将未定义的行为视作错误（Java、Python），弱是指倾向于进行隐式的转换、忽略类型相关的错误（JavaScript）。</li>
<li>很多设计得不够严谨的语言，虽然大多数情况下（或者我们通常鼓励大家这么做）是强类型的，但也有弱类型的部分（PHP）</li>
<li>还有的语言因为提供的抽象能力很弱，我们不得不去用弱类型的部分（C）</li>
<li>鸭子类型（duck typing）是强弱类型的一个折中（常见于动态类型中，例如 Python），兼顾了灵活性和严谨性。</li>
<li>我们认为弱类型是为了方便，而强类型是为了尽早发现错误。</li>
</ul>
<h2 id="动态类型-Vs-静态类型"><a href="#动态类型-Vs-静态类型" class="headerlink" title="动态类型 Vs. 静态类型"></a>动态类型 Vs. 静态类型</h2><ul>
<li>静态类型的变量的类型是在编译时确定的（C++、Java）；动态类型的类型是在运行时确定的（JavaScript、Python），例如你可以在一个 if 的两个分支里给一个变量赋值不同的类型。</li>
<li>有的动态类型语言也会添加编译期的类型检查（TypeScript、Python），但因为语言本身的动态性，这些检查仅能覆盖一部分情况。</li>
<li>在动态类型的语言中因为类型不那么重要，所以很多时候甚至没有提供指定类型的语法（隐含了运行时的自动推导）；而在静态类型语言里通常需要为变量指定类型，所以才有了编译期自动类型推导来提供便利，而动态类型语言则做不到这一点（因为不能在编译期确定类型，更无从推导）。</li>
<li>我们认为静态类型有助于在编译时发现有关类型的错误，确定的类型也给了编译期更多的优化空间；而动态类型给了开发者更高的灵活度。</li>
</ul>
<h2 id="垃圾回收-Vs-无垃圾回收"><a href="#垃圾回收-Vs-无垃圾回收" class="headerlink" title="垃圾回收 Vs. 无垃圾回收"></a>垃圾回收 Vs. 无垃圾回收</h2><ul>
<li>无 GC 是指代码必须自行管理申请到的内存并在恰当的时机释放（Rust、C&#x2F;C++）；而有 GC 的语言会通过引用计数（PHP&lt;5.3）、标记复制（V8）等方式定期查找无用的内存进行释放。</li>
<li>标记复制的 GC 的过程通常会引起线程的暂停，也会花费额外的 CPU；但 GC 对于建立高层次的抽象又是必不可少的：异常、闭包等（虽然 C++ 在无 GC 的情况下也实现了这两个特性，但也引入了非常高的复杂度）。</li>
<li>我们认为有 GC 可以简化对内存的管理，建立复杂的抽象；而无 GC 可以得到更底层的对内存的控制，带来更好的性能，避免因为 GC 造成的卡顿。</li>
</ul>
<h2 id="虚拟机-VS-本地代码"><a href="#虚拟机-VS-本地代码" class="headerlink" title="虚拟机 VS. 本地代码"></a>虚拟机 VS. 本地代码</h2><ul>
<li>虚拟机是指在语言和 CPU 之间还有一个用于进行翻译的层次（JavaScript、Java）；无虚拟机是指编译器直接生成本地代码给 CPU 执行（C&#x2F;C++、Golang）。</li>
<li>虚拟机也提供了更为复杂的运行时的动态特性，但这些特性有的时候也可以在没有虚拟机的情况下实现（例如 C++ 的运行时类型识别、Go 的 GC）。</li>
<li>虚拟机可以以解释的方式执行（Python，将代码视作一种数据指令来执行），也可以即时编译（JIT）的方式来执行（V8，先将代码编译到本地代码然后执行），有时也会混合这两种方式（为了更快的启动速度）。</li>
<li>我们认为无虚拟机的语言可以在更低的层次和其他程序交互，同时也天然地有着更好的性能；而有虚拟机的语言则可以轻松地跨平台，针对特定的架构在运行时即时编译出更高性能的代码。</li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><table>
<thead>
<tr>
<th>语言</th>
<th>强类型</th>
<th>动态类型</th>
<th>垃圾回收</th>
<th>虚拟机</th>
</tr>
</thead>
<tbody><tr>
<td>C</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>C++</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Java</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Python</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>JavaScript</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>PHP</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Golang</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>Rust</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>参考来源：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19918532">https://www.zhihu.com/question/19918532</a></li>
<li><a target="_blank" rel="noopener" href="http://eli.thegreenplace.net/2006/11/25/a-taxonomy-of-typing-systems/">http://eli.thegreenplace.net/2006/11/25/a-taxonomy-of-typing-systems/</a></li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/use-certbot-to-renew-lets-encrypt-certificates/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/use-certbot-to-renew-lets-encrypt-certificates/" itemprop="url">使用 Certbot 更新 Let's Encrypt 证书</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-10T09:38:31+00:00">
                2016-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>Let’s Encrypt 证书即将过期时会给你发送邮件，这个还是比较贴心的。这样也就不会陷入证书过期却没发现的尴尬境地（Let’s Encrypt 的证书只有 90 天的有效期）。</p>
<p><img src="https://img.prin.studio/images/2017/06/11/2826714bc9645e4b9828433b8e674800.png" alt="2826714bc9645e4b9828433b8e674800.png"></p>
<p>以前我写过使用 Certbot 这个工具<a target="_blank" rel="noopener" href="https://prinzeugen.net/use-certbot-to-issue-lets-encrypt-certificates/">申请证书的文章</a>，而同样使用这个工具更新证书只需要一行命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot renew --post-hook &quot;service nginx reload&quot;</span><br></pre></td></tr></table></figure>

<p><code>certbot</code> 这个脚本的位置呀名称啥的自己看着改，对于我来说是 <code>./certbot-auto</code>。加了个钩子可以让它在证书更新更新完毕后重载 Nginx 配置来更新证书。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/use-certbot-to-renew-lets-encrypt-certificates/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/mediarecorder-api-screenflow">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/mediarecorder-api-screenflow" itemprop="url">Using MediaRecorder API for screen recording on the web</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-08T16:05:00+00:00">
                2016-12-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          Record your webcam and screen using Javascript to create screencast from your browser.
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/mediarecorder-api-screenflow">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016-12-03-liulishuo-dongni-english-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016-12-03-liulishuo-dongni-english-summary/" itemprop="url">流利说「懂你英语」体验报告</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-03T14:42:05+00:00">
                2016-12-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><p>最近报了流利说的 99 元一个月的「懂你英语」，之后又续了一个月，简单写一下体验报告。事先申明，这不是一个软文。</p>
<h2 id="什么是流利说的「懂你英语」"><a href="#什么是流利说的「懂你英语」" class="headerlink" title="什么是流利说的「懂你英语」"></a>什么是流利说的「懂你英语」</h2><p>「懂你英语」试图用最简单的、婴儿学语言的方式来学习英语，即：先盲听，即看不到什么单词，只有一张图片提示你说的内容。然后，你需要重复听和跟读，每次跟读时，可以判断跟读内容是否合格，如果合格，则会有 +1 的提示。</p>
<p>「懂你英语」是一种比较挣钱的商业模式，因为它完全依赖于机器来判分（而且是用户的手机），服务器只需要提供学习资源的下载服务即可，所以它的毛利率可以做到很高，我估计毛利率到 70% 是没问题的。</p>
<p>另外，「懂你英语」的产品设计是非常适合学习者的。因为它将学习任务进行了卡片式的任务拆解，所以你只需要关注于每天的任务完成就可以了。「懂你英语」要求每天练习口语 30 分钟，它在产品设计中通过每日学习统计，打卡，班主任督学，班级学习时长排名，学习效率分等各种细节来促使你坚持完成每天的学习任务。</p>
<p>这种任务式、关卡式的产品设计方案已经在很多产品设计中被采用，除了流利说外，像 Keep，洋葱数学也是这样。这样的设计使得大家能够专注于眼前的小任务，然后通过达成每一个小任务获得成熟感和激励，最终完成一个大的目标。</p>
<p>我现在认为，所有需要长久的学习任务，都应该拆分成小的阶段，以小任务的方式来完成。这就像我们工作的时候采用 Scrum，每个 Story 又拆分成一个个小的 Task 一样，让自己的工作即清晰，又可以在半天内完成。番茄钟的工作方式也是这样，将任务拆成若干个 45 分钟。产品的版本迭代也是这样，每个版本都有一个大的 Milestone，好的产品路线图既让人感觉目标清晰，又让人觉得目标可以达成。</p>
<h2 id="「懂你英语」附加的「服务」"><a href="#「懂你英语」附加的「服务」" class="headerlink" title="「懂你英语」附加的「服务」"></a>「懂你英语」附加的「服务」</h2><p>「懂你英语」比较好地做到了「服务」感，我个人认为这个是当前在线教育比较缺少的地方，这方面「懂你英语」值得被学习。说说我的体验吧：</p>
<ul>
<li>我报完名之后，App 会显示一个微信号，可以复制之后，关注公众号。</li>
<li>然后公众号进去之后，回复自己的帐号，可以获得班级群信息。</li>
<li>在班级群里面，班主任会主动和你沟通，帮你解答学习中的各种问题。</li>
<li>每天中午和晚上，班主任会发一条作业，很多时候是邀请大家一起来做，对于做了的同学，班主任会在群里解答。</li>
<li>每个周末，班主任会策划一个学习活动，有一些活动是小组活动，需要大家一起完成。</li>
<li>每天会有学习排行榜在群里，告诉大家哪些人学了，哪些人没学。</li>
<li>对于没有学习的人，班主任会在微信里面单独留言了解为什么没学。</li>
<li>班级快要结束的时候，班主任会一一私聊，问是否需要续费，并且介绍续费优惠活动。</li>
</ul>
<p>我从这个学习当中获得了：</p>
<p> 1、被老师服务的感觉<br> 2、一起学习的感觉（集体）<br> 3、竞争的感觉（排名）<br> 4、感情（同学，老师）</p>
<p>这些都使得我觉得「懂你英语」不是一个冷冰冰的机器服务，值得花 99 元来报名。</p>
<h2 id="「懂你英语」的问题"><a href="#「懂你英语」的问题" class="headerlink" title="「懂你英语」的问题"></a>「懂你英语」的问题</h2><p>夸完了「懂你英语」，再说说一些问题。这个课程依赖了两个很强的假设，但我认为这两者都还处于发展（或者不确定中）：</p>
<ul>
<li><p>假设一：成人像婴儿那样学语言，是更好的方式么？「懂你英语」称这个研究来自国外的某个教授，我没有深入查证。但是就我个人体验来说，明明知道一句话说的什么，但是完全无法知道这个单词如何拼写还是非常难受的。最终，一些用户甚至拿另一个手机打开 Google 的听写功能，用于识别这些内容的拼写。按理说，学完检测应该是一个很好的判断自己是否提高的方式，但是「懂你英语」考试的内容其实就是练习的内容，所以你也无从判断是因为自己熟悉这些内容说得好，还是自己真正口语得到提高了。</p>
</li>
<li><p>假设二：机器能够很好地判断发音是否正确。现在深度学习如火如荼，流利说做到了完全在本地就可以用人工智能算法判断发音是否准确，但是就我个人的体验来说，机器对于较短的单词发音过于严格，例如：<code>are</code>, <code>is</code>, <code>it</code>, <code>there</code>, <code>with</code> 这些单词，常常会显示成黑色（读得不好），而一些长的单词，比如 <code>comfortable</code>, <code>birthday</code>, 即使读得自己都感到有些错了，但是机器有时会显示成绿色（读得好）。我问了一下我们公司（猿辅导）的首席科学家邓博，他说这些简单的单词因为标注数据多，所以做得比较精确，而那些长的单词，因为标注数据要做多的话工作量很大，所以只能降低召回率，以便保证召回数据的正确率。</p>
</li>
</ul>
<p>但是这些问题其实都还好，因为口语练习最重要的就是说，即便你它判分不准，只要你天天坚持说 30 分钟，还是有效果的。</p>
<p>我之所以后来没有继续学，其实是因为「懂你英语」在通关的设计上，加了很多不合理地设计。比如到达 Level 4 之后，很多关卡的通关，依赖的是你背下前面的课程。我还记得 Level 4 的第二张卡片中的一个关卡，要求将文章的内容进行排序，除非你反复学习背下文章内容，否则是无法通关的。但是这其实并不能锻炼口语能力，只能练习记忆力。所以这让我感觉这个课程学习起来效率有些低下。类似的记忆考试挺多，有些考试直接就问：<code>How long did he stay in China? When did he graduated?</code> 这些都需要背。对于追求效率的我来说，我觉得背下课文通关没有意义，我需要的是练习口语，而不是熟悉并背下课文。即使要背下课文，我也希望是以高效地方式来背，而不是通过只听不看的方式来背诵。</p>
<p>最后，整个 App 的 Bug 还是挺多的，一些 Bug 让我甚至感觉到产品功能没有被仔细使用过，因为细心使用的话，明显就能体会到。不过相对于上面的产品问题，这些问题还不至于致命。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>就我个人感觉，「懂你英语」是一个差一点就成功的产品，很多地方可圈可点，它让我看到了未来在线教育产品的雏形。</p>
<p>如果未来它能够改进关卡设计上再进行打磨，同时机器在判断读音准确性上能够有再进一步的提升，那么确实有可能成为一个不错的语言自学服务。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016-12-03-talk-about-information-explosion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016-12-03-talk-about-information-explosion/" itemprop="url">信息的迷失</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-03T14:41:46+00:00">
                2016-12-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="信息的爆炸"><a href="#信息的爆炸" class="headerlink" title="信息的爆炸"></a>信息的爆炸</h2><p>还记得我读小学的时候，那个时候还没有互联网，所有人获取信息的渠道都来自传统的媒介：图书、报纸、广播、电视。那个时候，我无聊的时候可以把一本书反复翻，反复看，因为并没有什么别的书可以看。电视的普及应该是第一次将人们获取信息的能力进行了放大，电视除了让人们获取新闻之类的信息外，更多的是使得人们从中获得娱乐信息，即娱乐的方式从传统的纸媒和广播，变成了多媒体视频，进而产生了一个巨大的娱乐产业。</p>
<p>互联网的产生，除了让信息的获取成本变得极为容易外，同时也让信息经历了再一次的爆炸。由于信息实在太多了，所以有了搜索引擎，帮助我们检索需要的信息。另外，wikipedia、大学的 Mooc 视频，让大量优质的内容获得也变得极为容易。</p>
<h2 id="信息的触手可得"><a href="#信息的触手可得" class="headerlink" title="信息的触手可得"></a>信息的触手可得</h2><p>以前我们要接入互联网获得信息，我们通常需要打开电脑，这本身就是一个昂贵的成本。现在由于智能手机的普及，接入互联网变得极为容易，我们甚至不需要解锁输入密码或指纹，在手机的锁屏界面上就可以获得大量的信息。</p>
<p>移动互联网真正牛逼的地方就在于它改变了互联网的接入方式，它让每一个人都能做到随时在线，所以，10 年前的 QQ 有在线和离线的状态，而现在的微信则没有，所有人都始终是在线的。</p>
<h2 id="信息的迷失"><a href="#信息的迷失" class="headerlink" title="信息的迷失"></a>信息的迷失</h2><p>可是问题是：没有人能够消费完这么多的信息。我们有一款初高中生的题库 App：猿题库，到现在为止我们收录了百万级的题目，没有人能够做得完这么多题目。所以我们提供了智能的推荐算法，帮助学生找到最适合他练习的题目。</p>
<p>信息检索和推荐算法，某种程度上解决了海量信息的获取问题，但是却解决不了注意力被分散的问题。</p>
<p>让我们看看这个场景：某一天你 6 点钟回到家，打算做一件事情，突然你手机收到一条 Push，其实是一条网易新闻的推送，新闻的标题很吸引人，于是你打开了。看完这条新闻，你不自觉地又看起来别的新闻。看完新闻后，你又不自觉地打开微信，翻朋友圈的消息，给好友点赞，点完一圈赞后，你又打开微信订阅号，查看订阅的一些文章。等你突然觉得困了，你才发现本来要做的事情完全忘记掉了！</p>
<p>基本上，那些用于你打发碎片时间的应用，不但把你的碎片时间打发了，而且把你的主要时间也打发掉了。</p>
<p>是的，大部分在信息面前迷失掉了，我的母校北京师范大学心理学系曾经专门有人研究过人们在电脑和手机上注意力的转移，大部分人只要稍不加控制，大脑的注意力就轻易地被各种红点，通知提醒，QQ 消息或者浮窗广告吸引了。</p>
<h2 id="信息的屏蔽"><a href="#信息的屏蔽" class="headerlink" title="信息的屏蔽"></a>信息的屏蔽</h2><p>总会有一天，大家都会意识到信息太多也是问题，然后会学会屏蔽信息。</p>
<p>我发现的最简单的屏蔽信息的办法是将自己当天的 Todo List 写在一张小小的便签纸上，然后贴在屏幕的一角，做完一件事情则划掉进行下一项。如果因为各种原因（电话，短信，别人的打扰）而中断，我就可以通过这张小小的纸片找回自己的目标。</p>
<p>当然，我们也可以用更复杂的办法，例如使用番茄工作法，或者 GTD 中提到的任务处理方式，来使得自己更加容易专注地处理信息和任务。</p>
<p>大家太依赖手机了，甚至离开手机太久都会不舒服。不知道大家有没有试过将手机关机一整天？我相信你会感受到你就像被世界屏蔽了，失去了和整个世界的连接。但是其实，人们总是需要一些长时间的思考的，或许是解决工作上的问题，或许是个人的一些规划，或许是思考未来，这些时候，断开和世界的连接反倒是好的。</p>
<p>乔布斯在他的自传中提到他年轻的时候很喜欢禅修，在我看来，这其实就是一种放空大脑，让自己专注于思考的一种体验。一旦人们体验到专注思考的好处，就不会那么依赖网络了。</p>
<h2 id="自媒体的崛起和衰落"><a href="#自媒体的崛起和衰落" class="headerlink" title="自媒体的崛起和衰落"></a>自媒体的崛起和衰落</h2><p>在传统的年代，明星出名都是需要依赖传统媒体的，或许是报纸，或许是电视，而这些渠道有着极强的控制力，所以可以轻易对明星进行封杀或捧星。但是，互联网的出现，使得信息传播的渠道变得不但多样化而且免费，像新浪微博，微信公众号，知乎，一些论坛，都成为大 V 极好的成名渠道，而且这些大 V 的成名，基本上完全依赖于他们自己的本身的能力，靠本事吃饭，与渠道无关。</p>
<p>于是，这成为了自媒体人最好的年代，优质的内容可以在极短的时间内传播开来，帮助大 V 获得粉丝和影响力。</p>
<p>但是，人们的注意力终究是有限的，在早期的少量自媒体人享受到渠道开放的红利之后，由于信息的爆炸，更多的优秀内容反倒是被埋没在信息的汪洋之中。后期的自媒体人要获得足够的注意力，需要在内容质量上花费更多的心血。大部分无法创建出极度优秀的内容的自媒体人，在这样的年代完全没有了翻身的机会。</p>
<h2 id="渠道的再次崛起"><a href="#渠道的再次崛起" class="headerlink" title="渠道的再次崛起"></a>渠道的再次崛起</h2><p>信息的爆炸，自媒体的涌现，使得人们再一次需要一种内容筛选的服务，即便这种服务是付费的。于是我们看到，一些基于优质内容的付费服务再次得到人们地青睐，比如「得到」App，比如知乎Live，各种收费直播服务。这些付费服务的成功原因有很多：被服务感、直播的参与感与真实感，但不可否认，对于优质内容的价值认可，以及在海量信息中选择的无助，也是这些服务被认可的基础。</p>
<h2 id="未来"><a href="#未来" class="headerlink" title="未来"></a>未来</h2><p>未来的信息消费是更趋于集中还是分散，我没有定论。不过未来相比信息本身的价格，人们的时间成本会变得更加重要，因为每一个人的时间都是稀缺资源，没有人愿意拿自己的生命来「试错」。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/cssconf-au-2016">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/cssconf-au-2016" itemprop="url">Speaking at CSSConf Australia 2016</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-01T02:46:00+00:00">
                2016-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          I spoke at CSSConf AU 2016 in Melbourne about images on the web and what we can do to reduce their impact in our site's performance.
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/cssconf-au-2016">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/Juniors-CTF-2016-Gladly-the-cross-I-d-bear-500/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Juniors-CTF-2016-Gladly-the-cross-I-d-bear-500/" itemprop="url">[Juniors CTF 2016] Gladly the cross I'd bear 500</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-28T06:36:00+00:00">
                2016-11-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: ppc<br>Point: 500<br>Author: OAlienO @ BambooFox</p>
</blockquote>
<h2 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h2><p>就是解 hamming(15,11)<br>(15,11) 就是將 11 bits 的原始資料<br>加上 4 bits 的 parity<br>變成 15 bits 加了檢查碼的資料</p>
<p>題目要解的是 block data<br>也就是 bits 變成 bytes<br>上面的解釋就變成<br>(15,11) 就是將 11 bytes 的原始資料<br>加上 4 bytes 的 parity<br>變成 15 bytes 加了檢查碼的資料</p>
<p>看圖片比較清楚</p>
<p><img src="/img/hammingcode.png" alt="hamming code"></p>
<h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><p>他給你一個檔案<br>就照著 Hamming Code 的定義<br>把他修補回來<br>就變回正常的照片檔案了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bits</span>(<span class="params">f</span>):</span><br><span class="line">    <span class="built_in">bytes</span> = (<span class="built_in">ord</span>(b) <span class="keyword">for</span> b <span class="keyword">in</span> f.read())</span><br><span class="line">    array = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">    now = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> <span class="built_in">bytes</span>:</span><br><span class="line">        array[now] = b</span><br><span class="line">        <span class="keyword">if</span> now == <span class="number">14</span>:</span><br><span class="line">            <span class="keyword">yield</span> array</span><br><span class="line">        now = (now+<span class="number">1</span>)%<span class="number">15</span></span><br><span class="line"></span><br><span class="line">answer = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> b <span class="keyword">in</span> bits(<span class="built_in">open</span>(<span class="string">&#x27;image_with_flag_defect.jpg.hamming&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)):</span><br><span class="line">    ans = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">    multiply = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">8</span>):</span><br><span class="line">        parity = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> xrange(<span class="number">4</span>):</span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> xrange(<span class="number">1</span>,<span class="number">16</span>):</span><br><span class="line">                <span class="keyword">if</span> k&amp;(<span class="number">1</span>&lt;&lt;j):</span><br><span class="line">                    parity[j] ^= b[k-<span class="number">1</span>]%<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> parity[<span class="number">0</span>] <span class="keyword">or</span> parity[<span class="number">1</span>] <span class="keyword">or</span> parity[<span class="number">2</span>] <span class="keyword">or</span> parity[<span class="number">3</span>]:</span><br><span class="line">            b[parity[<span class="number">0</span>]*<span class="number">1</span>+parity[<span class="number">1</span>]*<span class="number">2</span>+parity[<span class="number">2</span>]*<span class="number">4</span>+parity[<span class="number">3</span>]*<span class="number">8</span>-<span class="number">1</span>] ^= <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> xrange(<span class="number">1</span>,<span class="number">16</span>):</span><br><span class="line">            ans[j-<span class="number">1</span>] += multiply*(b[j-<span class="number">1</span>]%<span class="number">2</span>)</span><br><span class="line">            b[j-<span class="number">1</span>] //= <span class="number">2</span></span><br><span class="line">        multiply *= <span class="number">2</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1</span>,<span class="number">16</span>):</span><br><span class="line">        <span class="keyword">if</span> i != <span class="number">1</span> <span class="keyword">and</span> i != <span class="number">2</span> <span class="keyword">and</span> i != <span class="number">4</span> <span class="keyword">and</span> i != <span class="number">8</span>:</span><br><span class="line">            answer += <span class="built_in">chr</span>(ans[i-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;flag&quot;</span>,<span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(answer)</span><br></pre></td></tr></table></figure>

<h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料 ( References )"></a>參考資料 ( References )</h2><p><a target="_blank" rel="noopener" href="https://oalieno.github.io/Hamming-Code/">https://oalieno.github.io/Hamming-Code/</a></p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/implement-of-php-remote-downloading-with-progress-bar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/implement-of-php-remote-downloading-with-progress-bar/" itemprop="url">PHP 远程文件下载的进度条实现</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-26T10:25:00+00:00">
                2016-11-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>PHP 实现远程下载文件到服务端并不是什么新鲜玩意，用 <code>cURL</code>、<code>file_get_contents</code>、<code>fopen</code> 等都能够轻易实现。</p>
<p>但是这几种常规的方法都是在一个线程内下载文件，等文件下载完毕以后才能返回 HTTP 响应。所造成的结果就是用户在页面上点击「下载到服务器」按钮后，会看到空白页和加载的小菊花转啊转，转好久之后才出现「下载成功」的页面。</p>
<p>当然，我上面所举例的情况是只使用纯粹的表单 POST 发送请求的情况。现在的话就算再不济也一般会使用 <code>ajax</code> 发送请求，然后在前台放个加载动画，等收到下载成功的回应之后再进行下一步操作。</p>
<p><strong>但是！</strong>即使是去掉了恶心的且需要等待的空白页，这样做还是对用户体验有不好的影响。没有具体的下载进度，只有一个一直转呀转的菊花图，估计挺多用户都无法坐和放宽吧<del>（至少对于我来说是这样的）</del></p>
<p>而我一个 PHP 项目的一键更新系统正好需要重构，遂研究了如何在 PHP 作为后端时显示远程文件下载进度条，并捣鼓出了个像样的解决方案，在这里分享一下。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/implement-of-php-remote-downloading-with-progress-bar/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/tips-for-fixing-audio-jack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/tips-for-fixing-audio-jack/" itemprop="url">耳机插头修理技巧</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-23T11:54:00+00:00">
                2016-11-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%B8%B8/" itemprop="url" rel="index">
                    <span itemprop="name">日常</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>群里大佬 pan爷低价出了我一个耳机插头附近断线的 ATH-ES55，这已经是挺久以前的事了。当时我去某宝上买了个耳机插头，刮掉耳机线的漆包草草焊上去就完事了<del>（好歹是挺不错的耳机你就这样对待啊喂）</del>。然而最近耳机插头接触不良了，我就寻思着重新焊下，在这里记录一下需要注意的地方。</p>
<p>虽然修耳机这种事我在小学的时候就鼓捣过了，但总归当时还是不专业，也没啥像样的工具。而且最近听的好歹也算是 HiFi 耳机，不能再用之前那种乡巴佬方法了（笑）。在网上搜了一些，学到了不少，在此记录一下。</p>
<p>下面几乎都是盗图，侵删w</p>
<h3 id="3-5mm-耳机插头接线图"><a href="#3-5mm-耳机插头接线图" class="headerlink" title="3.5mm 耳机插头接线图"></a>3.5mm 耳机插头接线图</h3><p><img src="https://img.prin.studio/images/2017/06/10/82f3a4e9e890e1d4ab91352def12f33a.png" alt="耳机插头示意"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/tips-for-fixing-audio-jack/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/laravel-plugin-system-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/laravel-plugin-system-1/" itemprop="url">Laravel 框架下的插件机制实现（一）—— 构建插件系统</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-20T07:41:25+00:00">
                2016-11-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>插件，即 Plug-in（又有外挂、Extension、Addon 等叫法），是一类特定的功能模块，通过和应用程序的互动，用来替应用程序增加一些所需要的特定的功能。插件的特点是：</p>
<ul>
<li>当你需要它的时候激活它，不需要它的时候禁用&#x2F;删除它；</li>
<li>无论是激活还是禁用都不影响系统核心模块的运行。</li>
</ul>
<p>也就是说插件是一种非侵入式的模块化设计，实现了核心程序与插件程序的松散耦合。上面的介绍部分摘自 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%8F%92%E4%BB%B6">中文 WikiPedia</a>。</p>
<p>虽然现在网上有很多 PHP 的插件机制的实现（当然我指的是英文内容，中文关于 PHP 插件机制的搜出来现在还是那么点破文章），譬如 <a target="_blank" rel="noopener" href="https://github.com/FoolCode/Plugin">FoolCode&#x2F;Plugin</a>，或者 WordPress 的插件实现。</p>
<p>不过我今天想介绍的是如何使用 Laravel 的服务容器、事件机制等功能来实现一个比较优雅的插件机制。</p>
<p>*Greatly inspired by <a target="_blank" rel="noopener" href="https://github.com/flarum/core/tree/master/src/Extension">Flarum</a>*，在此致谢 ヾ(´ωﾟ｀)</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/laravel-plugin-system-1/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/2016-11-20-thinking-about-my-20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/2016-11-20-thinking-about-my-20/" itemprop="url">20 岁的我在想些什么</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-19T16:00:00+00:00">
                2016-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>从年初开始我就希望今后每年写这样一篇文章，如果说「年度小结」和「年度小结（技术方面）」代表了我这一年做了什么事情的话，那么这个系列的文章会聊一聊我这一年在想些什么。</p>
<p>每当我生病或者身体不舒服的时候才会去注意一下自己的身体和健康，重新审视自己的生活状态，改变一些不健康的习惯。虽说不如早点这样做，不过现在也不晚吧，也许大家年轻的时候都是这样挥霍过来的吧。有一点可能是我之前没想过的，虽然公司不加班，但其实我做业余项目、写文章、准备演讲，和加班对身体的影响可能是差不多的。感觉自己赚那么多钱也没什么意义，也许应该放慢一点节奏，多出去走走，时不时请几天假来做自己喜欢的事情？</p>
<p>今年最令我担忧的是眼睛，虽然视力变化不明显，但总有一种感觉不如以前看得清楚了，眼睛也比以前更容易疲劳了。去医院也检查了两次，医生都说只是用眼过度，没什么大问题，要尽量减少看屏幕的时间。确实今年年末我也是这样做的 —— 碎片时间和晚上睡觉前不再看手机了，睡眠时间也增加了一个小时左右，但一想到将来的工作和娱乐都会非常依赖视力，还是感觉有一种非常大的压力。</p>
<p>收入高了之后也就适应了这样的生活，虽然我并没有在追求这些，但钱的确给了我很多自由：可以周末毫无目的地跑到另外一个城市闲逛，可以买一些即使自己用不上的东西而不必精打细算，可以用最好的猫粮来把皮蛋豆腐喂得油亮油亮的。</p>
<p>但赚钱的过程本身又是在限制自由，有时候也觉得自己的钱够多了，没必要为了工作那么努力，想休息一下。也觉得可能写代码并不能给我带来像以前那么多的成就感了，刚学习编程的时候，可能只需要花很短的时间学习一些东西就可以比很多人都「厉害」，也可以得到很大的成就感；但现在虽然我很清楚自己去提高哪方面会有比较好的效果，但要付出很多的时间和精力，才能和别人比起来进步一点点。也许是时候开拓一个新的领域，学习一些新的技能？但一旦停下来，又不好说今后能不能再重新捡起来。</p>
<p>有的时候一个人会有些空虚，所以一个人住的这一年我听了很多播客，路上在听、吃饭在听、洗澡在听、收拾房间的时候在听、睡不着的时候在听，后来也自己录了一档播客。一个人一旦闲下来就总想做一些「有意义的事情」，学学新技术、看看书、写写文章，没人打扰就会很长时间也不动一下身体，这就又回到了前面健康的话题。</p>
<p>想出去走走但想到没人陪，一个人就很无趣，结果除了做些「有意义的事情」、经营一下个人品牌之外感觉生活没有什么目标。但我真的准备好了接纳另外一个人么？其实我不确定，很多时候我还是希望能有一个私人的空间，就连皮蛋豆腐我还是有很多时候不希望它们靠近，把它们关在阳台，也从不允许它们进我的卧室。</p>
<p>现在想起来在番茄土豆的两年也许对我来说就好像是大学生活吧，和一群有趣的同龄人在一起，经历了很多的第一次，这一年我也时常想起那些经历。也许从职业规划的角度离开番茄土豆没有什么问题，当时也是觉得自己的生活状态需要调整，想换一个环境，但换来换去还是不知道自己想要什么，也许我明年还会去一个新的城市。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%9F%BA%E4%BA%8EMono%E5%92%8CVSCode%E6%89%93%E9%80%A0%E8%BD%BB%E9%87%8F%E7%BA%A7%E8%B7%A8%E5%B9%B3%E5%8F%B0IDE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%9F%BA%E4%BA%8EMono%E5%92%8CVSCode%E6%89%93%E9%80%A0%E8%BD%BB%E9%87%8F%E7%BA%A7%E8%B7%A8%E5%B9%B3%E5%8F%B0IDE/" itemprop="url">基于 Mono 和 VSCode 打造轻量级跨平台 IDE</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-18T12:23:44+00:00">
                2016-11-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          我们现在按 F5 进行调试，和编译时一样，如果用户没有为当前项目配置“任务调试程序”，VSCode 会提示我们去创建一个配置文件 launch.json，我们这里选择 mono，该选项在安装 Mono-Debug 插件以前是没有的，该配置文件如下，我们注意到这里需要修改 program 属性为 MainClass.exe:;现在，我们应该会得到一个 MainClass.exe 的文件，最初博主尝试直接去配置 launch.json，发现直接填写 type 为 mono 在 VSCode 中是无法识别的，最后决定去安装 mono-debug 的插件，安装插件在 VSCode 中是非常简单的，按下 Ctrl+Shift+X 打开插件界面，可以在这里查看最流行的插件列表、官方推荐的插件列表等等，我们直接搜索 mono-debug 然后安装插件即可;因为博主的计算机上安装了 Mono，所以在一开始使用 VSCode 的时候，就先入为主地认为在不安装插件的情况下，应该就可以直接在 VSCode 中编译和调试代码了
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%9F%BA%E4%BA%8EMono%E5%92%8CVSCode%E6%89%93%E9%80%A0%E8%BD%BB%E9%87%8F%E7%BA%A7%E8%B7%A8%E5%B9%B3%E5%8F%B0IDE/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%89%8D%E7%AB%AF%E4%B8%80%E9%94%AE%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%89%8D%E7%AB%AF%E4%B8%80%E9%94%AE%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83/" itemprop="url">前端一键打包发布</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-13T10:54:18+00:00">
                2016-11-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" itemprop="url" rel="index">
                    <span itemprop="name">前端工程化</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="安装gulp"><a href="#安装gulp" class="headerlink" title="安装gulp"></a>安装gulp</h2><p>全局安装 gulp</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ npm install --global gulp</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>作为项目的开发依赖（devDependencies）安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ npm install --save-dev gulp</span><br><span class="line"></span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%89%8D%E7%AB%AF%E4%B8%80%E9%94%AE%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%9C%A8Kindle%E4%B8%8A%E9%98%85%E8%AF%BBMarkdown%E6%96%87%E6%A1%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%9C%A8Kindle%E4%B8%8A%E9%98%85%E8%AF%BBMarkdown%E6%96%87%E6%A1%A3/" itemprop="url">在 Kindle 上阅读 Markdown 文档</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-13T05:58:35+00:00">
                2016-11-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          好了，这些就是基本的 Markdown 语法所定义的元素啦，我觉得这是一种非常优雅的标记语言，如果你觉得纯文本的内容太单调，如果你觉得 Word 使用起来太复杂，那么 Markdown 就在这两者间找到一个平衡点，我没有劝大家放弃 Word 然后转而投身 Markdown 写作，可是作为一个经常码字的博客作者，我可以负责任的说，Markdown 是一种可以让你专注写作的工具，而且作为一名工程师，你会发现 StackOverflow、Segmentfault、Github 等知名技术社区，无一例外地都在支持 Markdown 语法，所以 Markdown 其实是开源社区里除了英语以外的第二大通用语言，所以如果你喜欢写作或者是喜欢开源，Markdown 都会是你不错的选择，而它的语法相信你此时已然学会了;我不太喜欢这个编辑器的一个重要原因是，我喜欢在离线环境下写文章，然后将其发布在我的个人博客上面，而这款编辑器和社区耦合过紧，虽然提供了离线版本的 Markdown 编辑器，但是对我而言功能上略显臃肿，我在这里推荐这个 Markdown 编辑器的原因是，它提供了 HTML/PDF 的导出功能，当我们在线编辑 Markdown 文档时即可通过浏览器导出 HTML/PDF，如果你不需要经常导出 Markdown 为其它的文档格式，我会推荐你使用 Sublime、VSCode、马克飞象、为知笔记、小书匠等编辑器，虽然 Markdown 语法对使用者的要求并不高，但我相信有一个体验良好的 Markdown 编辑器，会让我们的写作过程更为开心，从而达到事半功倍的效果;所以，当我们尝试对自我进行知识管理的时候，我们就需要一种良好的方式来管理这些零散的知识，在这里 Markdown 和 Kindle 会成为我们的强力工具，来帮助我们收集和整理各种各样的信息，正如我在写这篇博客的时候，我需要 Markdown 文档撰写和 Kindle 电子书格式的相关内容，我可以快速地从我的为知笔记中找到参考内容
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%9C%A8Kindle%E4%B8%8A%E9%98%85%E8%AF%BBMarkdown%E6%96%87%E6%A1%A3/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%BF%AB%E9%80%9F%E7%90%86%E8%A7%A3%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8A%A0%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%BF%AB%E9%80%9F%E7%90%86%E8%A7%A3%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8A%A0%E8%BD%BD/" itemprop="url">快速理解模块化加载</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-13T04:44:25+00:00">
                2016-11-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="Javascript模块化"><a href="#Javascript模块化" class="headerlink" title="Javascript模块化"></a>Javascript模块化</h2><p>在了解这些规范之前，还是先了解一下什么是模块化。</p>
<blockquote>
<p>模块化是指在解决某一个复杂问题或者一系列的杂糅问题时，依照一种分类的思维把问题进行系统性的分解以之处理。模块化是一种处理复杂系统分解为代码结构更合理，可维护性更高的可管理的模块的方式。可以想象一个巨大的系统代码，被整合优化分割成逻辑性很强的模块时，对于软件是一种何等意义的存在。对于软件行业来说：解耦软件系统的复杂性，使得不管多么大的系统，也可以将管理，开发，维护变得“有理可循”。</p>
</blockquote>
<blockquote>
<p>还有一些对于模块化一些专业的定义为：模块化是软件系统的属性，这个系统被分解为一组高内聚，低耦合的模块。那么在理想状态下我们只需要完成自己部分的核心业务逻辑代码，其他方面的依赖可以通过直接加载被人已经写好模块进行使用即可。</p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%BF%AB%E9%80%9F%E7%90%86%E8%A7%A3%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8A%A0%E8%BD%BD/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/2016-11-10-behind-atom/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/2016-11-10-behind-atom/" itemprop="url">Atom 背后的故事</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-09T16:00:00+00:00">
                2016-11-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <blockquote>
<p>这篇文章由我十月中旬在 <a target="_blank" rel="noopener" href="https://leancloud.cn/">LeanCloud</a> 和十月末在 <a target="_blank" rel="noopener" href="https://github.com/Hangzhou-Node-Party/slides">Node Patry 杭州</a> 进行的技术分享整理而来。</p>
</blockquote>
<p>Atom 是 GitHub 在 2014 年发布的一款基于 Web 技术构建的文本编辑器，我从 2014 年末开始使用 Atom 完成我的全部工作，对 Atom 很是喜爱，也创建了 Atom 的中文社区、翻译了一部分 Atom 的文档和博客。今天我将着重介绍 Atom 背后的故事，包括底层的 Electron、如何对 Atom 进行定制、Atom 的插件化机制、Atom 在启动速度和渲染性能方面的优化等。</p>
<p>GitHub 的联合创始人之一 Chris Wanstrath 自 2008 年便有一个想法，希望使用 Web 技术构建一个像 Emacs 一样赋予开发者充分定制的能力的编辑器。但当时他忙于他的主要工作 —— GitHub，所以 Atom 一度被搁置，直到 2011 年，GitHub 添加了一个使用 Ace 实现的在线编辑代码的功能，这重新点燃了 Chris Wanstrath 对 Atom 的热情，于是他开始在业余时间开发 Atom。在 2011 年末，Atom 成为了 GitHub 的正式项目，也有了一些全职的同事加入，最后在 2014 年初 Atom 正式发布了，并于 2015 年发布了 1.0 版本。</p>
<p>所以 Atom 有什么亮点呢，我总结了这样几点：</p>
<ul>
<li>像 Sublime Text 一样开箱即用</li>
<li>像 Emacs 一样允许开发者充分地定制</li>
<li>基于 JavaScript 和 Web 技术构建</li>
<li>开源且拥有一个活跃的社区</li>
</ul>
<p>虽然 Sublime Text 之类的编辑器已经足够好用了，第一天学习编程的新手也可以快速上手，但它们仅提供了非常有限的拓展性；而在另外一个极端，像 Vim 和 Emacs 这样的编辑器虽然赋予了开发者充分定制的能力，但却有着陡峭的学习曲线。虽然 Atom 的初衷可能并非如此，但 Atom 的确做到了兼顾易用性和可拓展性，在这两种极端中间找到了一个平衡。</p>
<p>就像 Java 开发者会使用基于 Java 构建的 Eclipse 或 IntelliJ IDEA、Clojure 开发者会使用基于 Lisp 的 Emacs 一样，作为 JavaScript 开发者我们也需要一款基于 JavaScript 和 Web 技术构建的编辑器。我觉得用自己熟悉的语言和技术去改造工具，并从工具的实现中得到启发这是很重要的一点，就像我后面介绍的那样，作为 Web 或 Node.js 开发者，我们都可以从了解 Atom 的设计和实现中受益。</p>
<p>Vim 和 Emacs 之所以能在过去几十年始终保持活力，很大程度上是因为只有「开源」才能构建一个持久的、具有生命力的社区。GitHub 当然也意识到了这一点，所以 Atom 同样是开源的，并且它现在已经有了一个活跃的社区。</p>
<h2 id="Electron"><a href="#Electron" class="headerlink" title="Electron"></a>Electron</h2><p>Atom 是基于 Electron，这是一个帮助开发者使用 Web 技术构建跨平台的桌面应用的工具，实际上 Electron 原本叫 Atom Shell，是专门为 Atom 设计的，后来才成为了一个独立的项目。Electron 将 Chromium 和 Node.js 结合到了一起：Chromium 提供了渲染页面和响应用户交互的能力，而 Node.js 提供了访问本地文件系统和网络的能力，也可以使用 NPM 上的几十万个第三方包。在此基础之上，Electron 还提供了 Mac、Windows、Linux 三个平台上的一些原生 API，例如全局快捷键、文件选择框、托盘图标和通知、剪贴板、菜单栏等等。</p>
<p><img src="https://r2-lc-cn.jysperm.me/thirdparty/atom-electron-overall.png"></p>
<p>基于 Electron 的应用往往会有很大的体积，即使在打包压缩之后通常也有 40MiB，这是因为 Electron 捆绑了整个 Chromium 和 Node.js。但这也意味着你的应用运行在一个十分确定的环境下 —— 你总是可以使用最新版本 Chromium 和 Node.js 中的特性而不必顾及兼容性，这些新的特性往往会有更好的性能同时提高你的开发效率。</p>
<p>我们来试着用 Electron 编写一个简单的 Hello World：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;app, <span class="title class_">BrowserWindow</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mainWindow</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;<span class="attr">width</span>: <span class="number">800</span>, <span class="attr">height</span>: <span class="number">600</span>&#125;)</span><br><span class="line">  mainWindow.<span class="title function_">loadURL</span>(<span class="string">`file://<span class="subst">$&#123;__dirname&#125;</span>/index.html`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>其中的 <code>index.html</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  We are using node <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">write</span>(process.<span class="property">versions</span>.<span class="property">node</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>,</span><br><span class="line">  Chrome <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">write</span>(process.<span class="property">versions</span>.<span class="property">chrome</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>,</span><br><span class="line">  and Electron <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">write</span>(process.<span class="property">versions</span>.<span class="property">electron</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>.</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以看到，我们就像在使用 NPM 上一个普通的包一样在使用 Electron 来控制 Chromium 来创建窗口、加载页面，你也可以控制 Chromium 来进行截图、管理 Cookie 和 Session 等操作；同时在页面中我们也可以使用 <code>process.versions</code> 这样的 Node.js API，最后我们的 Hello World 看起来是这样的：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/electron-helloworld.png"></p>
<p>我们都知道 Chromium 使用了一种多进程的架构，当你在使用 Chromium 浏览网页时，你所打开的每一个标签页和插件都对应着一个操作系统中的进程。在 Electron 中也沿用了这样的架构，Electron 程序的入口点是一个 JavaScript 文件，这个文件将会被运行在一个只有 Node.js 环境的主线程中：</p>
<p><img src="https://r2-lc-cn.jysperm.me/thirdparty/atom-electron-process.png"></p>
<p>由主进程创建出的每个窗口（页面）都在一个独立的进程（被称作渲染进程）中运行，有着自己的事件循环，和其他窗口互相隔离，渲染进程中同时有 Chromium 和 Node.js 环境，其中 Node.js 的事件循环被整合到了 Chromium 提供的 V8 中，两个环境间可以无缝地、无额外开销地相互调用。</p>
<p>而主进程的主要工作就是管理渲染进程，同时还负责调用 GUI 相关的原生 API（例如托盘图标），这是通常是来自操作系统的限制。渲染进程如果需要调用这些 API，或者渲染进程之间需要通讯也都需要通过和主进程之间的 IPC（进程间通讯）来实现，Electron 也提供了几个用于简化 IPC 的模块（<code>ipcMain</code>、<code>ipcRenderer</code>、<code>remote</code>），但今天我们就不详细介绍了。</p>
<p>目前已经有非常多基于 Electron 的应用了，下面是一些我目前正在使用的应用，借助于 Electron，这些应用大部分都是跨平台的：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/electron-apps.png"></p>
<ul>
<li>VS Code 是微软的一款文本编辑器，也可以说是 Atom 的主要竞争产品。</li>
<li>Slack 是一款即时通讯软件。</li>
<li>Postman 是一个 HTTP API 调试工具。</li>
<li>Hyper 是一个终端仿真器。</li>
<li>Nylas N1 是一个邮件客户端。</li>
<li>GitKraken 是一个 Git 的 GUI 客户端。</li>
<li>Medis 是一个 Redis 的 GUI 客户端。</li>
<li>Mongotron 是一个 MongoDB 的 GUI 客户端。</li>
</ul>
<h2 id="定制-Atom"><a href="#定制-Atom" class="headerlink" title="定制 Atom"></a>定制 Atom</h2><p>对 Electron 的介绍就到此为止了，毕竟今天的主角是 Atom。作为 JavaScript 开发者，当我们听说 Atom 是基于 Web 技术构建起来的，相信大家的第一个反应就是打开 Chromium 的 Developer Tools：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/developer-tools.png"></p>
<p>可以看到，整个 Atom 都是一个网页 —— 文本编辑区域也是通过大量的 DOM 模拟出来的。我们点开 Atom 的主菜单，可以看到几个简单的自定义入口：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/atom-menu.png"></p>
<ul>
<li><code>Config</code> 对应 <code>~/.atom/config.cson</code> 是 Atom 的主配置文件。</li>
<li><code>Init Script</code> 对应 <code>~/.atom/init.coffee</code> 其中的代码会在 Atom 启动时被执行。</li>
<li><code>Keymap</code> 对应 <code>~/.atom/keymap.cson</code> 用来定义按键映射。</li>
<li><code>Snippets</code> 对应 <code>~/.atom/snippets.cson</code> 可以定义一些代码补全片段。</li>
<li><code>Stylesheet</code> 对应 <code>~/.atom/styles.less</code> 可以通过 CSS 修改 Atom 的样式。</li>
</ul>
<p>Atom 最初是用 CoffeeScript 编写的，这是一个编译到 JavaScript 的语言，在当时弥补了 JavaScript 语言设计上的一些不足。但随着后来 ES2015 标准和 Babel 这样的预编译器的出现，CoffeeScript 的优势少了许多，因此 Atom 最近也开始逐步从 CoffeeScript 切换到了 Babel，但后文还是可能会出现一些 CoffeeScript 的代码。</p>
<p>我们可以在 Stylesheet 中先尝试用 Less —— 一种编译到 CSS 的语言来修改一下 Atom 的外观：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// To style other content in the text editor&#x27;s shadow DOM,</span></span><br><span class="line"><span class="comment">// use the ::shadow expression</span></span><br><span class="line">atom-text-editor::shadow .<span class="attribute">cursor &#123;</span></span><br><span class="line"><span class="attribute">  border-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们用 <code>atom-text-editor::shadow .cursor</code> 这个选择器指定了 Atom 的文本编辑区域中的光标，然后将边框颜色设置为了红色，保存后你马上就可以看到光标变成了红色：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/cursor-color.png"></p>
<p>我们也可以在 Init Script 中编写代码来给 Atom 添加功能。考虑这样一个需求，在写 Markdown 的时候我们经常需要添加一些链接，而链接通常是我们从浏览器上复制到剪贴板里的，如果有个命令可以把剪贴板中的链接自动添加到光标所选的文字上就好了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">atom.<span class="property">commands</span>.<span class="title function_">add</span>(<span class="string">&#x27;atom-text-editor&#x27;</span>, <span class="string">&#x27;markdown:paste-as-link&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> selection = atom.<span class="property">workspace</span>.<span class="title function_">getActiveTextEditor</span>().<span class="title function_">getLastSelection</span>()</span><br><span class="line">  <span class="keyword">let</span> clipboardText = atom.<span class="property">clipboard</span>.<span class="title function_">read</span>()</span><br><span class="line"></span><br><span class="line">  selection.<span class="title function_">insertText</span>(<span class="string">`[<span class="subst">$&#123;selection.getText()&#125;</span>](<span class="subst">$&#123;clipboardText&#125;</span>)`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在这段代码中，我们用 <code>atom.commands.add</code> 向 Atom 的文本编辑区域添加了一个名为 <code>markdown:paste-as-link</code> 的命令。我们先从当前激活的文本编辑区域（<code>getActiveTextEditor</code>）中获取当前选中的文字（<code>getLastSelection</code>），然后使用 Markdown 的语法将剪贴板中的链接插入到当前的位置：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/paste-as-link.png"></p>
<p>那我们如何执行这个命令呢，虽然 Atom 也提供了一个类似 Sublime Text 的命令面板：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/command-palette.png"></p>
<p>但在实际使用中，我们通常会通过快捷键来触发命令，我们可以在 Keymap 中为这个命令映射一个快捷键：</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;atom-workspace&#x27;</span>:</span><br><span class="line">  <span class="string">&#x27;ctrl-l&#x27;</span>: <span class="string">&#x27;markdown:paste-as-link&#x27;</span></span><br><span class="line">  <span class="string">&#x27;ctrl-m ctrl-l&#x27;</span>: <span class="string">&#x27;markdown:paste-as-link&#x27;</span></span><br></pre></td></tr></table></figure>

<p>我们可以使用 <code>ctrl-l</code> 这样的快捷键，也可以使用 <code>ctrl-m ctrl-l</code> 这种 Emacs 风格的快捷键。</p>
<h2 id="插件化架构"><a href="#插件化架构" class="headerlink" title="插件化架构"></a>插件化架构</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;packageDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;atom-dark-syntax&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.28.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;atom-dark-ui&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.53.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// themes ...</span></span><br><span class="line">  <span class="attr">&quot;about&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.7.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;archive-view&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.62.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autocomplete-atom-api&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.10.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autocomplete-css&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.14.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autocomplete-html&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.7.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autocomplete-plus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.33.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autocomplete-snippets&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.11.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autoflow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.27.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;autosave&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.23.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;background-tips&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.26.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bookmarks&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.43.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bracket-matcher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.82.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;command-palette&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.39.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;deprecation-cop&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.55.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dev-live-reload&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.47.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;encoding-selector&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.22.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>当我们打开 Atom 核心的 <code>package.json</code> 时，你可以看到 Atom 默认捆绑了多达 77 个插件来实现各种基础功能。没错，Atom 的核心是一个仅有不足两万行代码的骨架，任何「有意义」的功能都被以插件的形式实现。Atom 作为一个通用的编辑器，不太可能面面俱到地考虑各种需求，索性不如通过彻底的插件化来适应各种不同类型的开发任务。</p>
<p>实际上在 Atom 中插件被称为「Package（包）」，而不是「Plugin（插件）」或「Extension（拓展）」，但下文我们还会继续使用「插件」这个词。</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/workspace-packages.png"></p>
<p>在这张图中我标出了一些内建的插件：</p>
<ul>
<li>tree-view 实现了左侧的目录和文件树。</li>
<li>tabs 实现了上方的文件切换选项卡。</li>
<li>git-diff 实现了行号左侧用来表示文件修改状态的彩条。</li>
<li>find-and-replace 实现了查找和替换的功能。</li>
<li>status-bar 实现了下方的状态栏。</li>
<li>grammar-selector 实现了状态栏上的语言切换器。</li>
<li>one-dark-ui 实现了一个暗色调的编辑器主题。</li>
<li>one-dark-syntax 实现了一个暗色调的语法高亮主题。</li>
<li>language-coffee-script 实现了对 CoffeeScipt 的语法高亮方案。</li>
</ul>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/dialogs-packages.png"></p>
<ul>
<li>command-palette 实现了一个命令的模糊搜索器。</li>
<li>fuzzy-finder 实现了一个文件的模糊搜索器。</li>
<li>settings-view 实现了一个 Atom 的设置界面。</li>
</ul>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/autocomplete-packages.png"></p>
<ul>
<li>autocomplete-plus 实现了一个代码补全的列表。</li>
<li>autocomplete-css 实现了针对 CSS 的代码补全建议。</li>
</ul>
<p>这么多基础的功能都是以插件的方式实现的，这意味着第三方开发者在编写插件时所使用的 API 和这些内建的插件是完全相同的。而不像其他一些并非完全插件化的编辑器，第三方的插件很难得到与内建功能同样的 API，会受到并不完整的 API 的限制。</p>
<p>这也意味着如果一个内建的功能不够好，社区可以开发出新的插件去替换掉内建的插件。你可能会觉得这样的情况不太可能发生，但其实 Atom 的代码补全插件就是一个例子，Atom 一开始内建的代码补全插件叫 autocomplete，功能较为简陋，于是社区中出现了一个具有更强拓展性的 autocomplete-plus，受到了大家的好评，最后替换掉了之前的 autocomplete，成为了内建插件。</p>
<p>Atom 的插件之间是可以互相交互的，例如 grammar-selector 等很多插件都会调用状态栏的 API，来在状态栏上添加按钮或展示信息：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/status-bar-packages.png"></p>
<p>作为插件当然是可以独立地进行更新的，而一旦更新就会不可避免地引入不兼容的 API 修改，如果 grammar-selector 依赖了一个较旧版本的 status-bar 的 API，而在之后 status-bar 更新了，并且引入了不兼容的 API 调整，那么 grammar-selector 对 status-bar 的调用就会失败。</p>
<p>在 Node.js 中对于依赖版本的解决方案大家都很清楚 —— 每个包明确地声明自己的依赖的版本，然后为每个包的每个版本单独安装一次，保证每个包都可以引用到自己想要的版本的依赖。但在 Atom 里这样是行不通的，因为你的窗口上只有一个状态栏，而不可能同时存在一个 <code>0.58.0</code> 版本的 status-bar 和一个 <code>1.1.0</code> 版本的 status-bar。</p>
<p>因此 Atom 提供了一个服务（Service）API，将被调用方抽象为服务的提供者，而将调用方抽象为服务的消费者，插件可以声明自己同时提供一个服务的几个版本，通过 Semantic Versioning（语义化版本号）表示，例如 status-bar 的 <code>package.json</code> 中有：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;providedServices&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;status-bar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;A container for indicators at the bottom of the workspace&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;versions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;1.1.0&quot;</span><span class="punctuation">:</span> <span class="string">&quot;provideStatusBar&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;0.58.0&quot;</span><span class="punctuation">:</span> <span class="string">&quot;legacyProvideStatusBar&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>status-bar 同时提供了 status-bar 这项服务的两个版本 —— <code>0.58.0</code> 和 <code>1.1.0</code>，分别对应 <code>provideStatusBar</code> 和 <code>legacyProvideStatusBar</code> 这两个函数。</p>
<p>而 grammar-selector 的 <code>package.json</code> 中有：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;consumedServices&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;status-bar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;versions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;^1.0.0&quot;</span><span class="punctuation">:</span> <span class="string">&quot;consumeStatusBar&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>grammar-selector 声明自己依赖 <code>1.0.0</code> 版本以上的 status-bar 服务。Atom 会在这中间按照 Semantic Versioning 做一个匹配，最后选择 status-bar 提供的 <code>1.1.1</code> 版本，调用 status-bar 的 <code>provideStatusBar</code> 函数，然后将结果传入 grammar-selector 的 <code>consumeStatusBar</code> 函数。</p>
<p>通过服务 API，Atom 插件之间的交互被简化了 —— 一个插件不需要关心谁来消费自己的服务、消费哪个版本，也不需要关心谁来提供自己需要消费的服务，保证了插件能够独立地、平滑地进行版本更新和 API 的迭代，也允许实现了相同服务的插件相互替代；如果用户没有安装能够提供对应版本的服务的插件，那么就什么都不会发生。</p>
<p>正因如此，Atom 的很多插件甚至有了自己的小社区，例如 linter 插件提供了展示语法风格建议的功能，但针对具体语言和工具的只是则是由单独的插件来完成的：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/linter-community.png"></p>
<p>对于这样一个严重依赖插件的社区，插件质量的参差不齐也是一个严重的问题，在 Atom 中，如果一个插件抛出了异常，就会出现下面这样的提示：</p>
<p><img src="https://jysperm-blog.pek3a.qingstor.com/submit-exception.png" alt="submit-exception"></p>
<p>如果你点击创建「Create issue」的话，会自动在插件的仓库上创建一个包含调用栈、Atom 和操作系统版本、插件列表及版本、配置项、发生异常前的动作的 Issue，帮助作者重现和修复异常；如果已经有其他人提交过了这个异常，按钮便会变成「View issue」，你可以到其他人提交的 Issue 中附和一下。</p>
<h2 id="插件化-API"><a href="#插件化-API" class="headerlink" title="插件化 API"></a>插件化 API</h2><p>这一节我们将会介绍 Atom 是如何提供给插件定制的能力的，Atom 首先提供了很多全局的实例来管理特定对象的注册和查询，我们通常也称这种设计为「注册局模式（Registry Pattern）」，包括：</p>
<ul>
<li><code>atom.commands</code> 管理编辑器中的命令。</li>
<li><code>atom.grammars</code> 管理对语言的支持。</li>
<li><code>atom.views</code> 管理状态数据（Model）和用户界面之间的映射。</li>
<li><code>atom.keymaps</code> 管理快捷键映射。</li>
<li><code>atom.packages</code> 管理插件。</li>
<li><code>atom.deserializers</code> 管理状态数据的序列化和反序列化。</li>
</ul>
<p>例如我们前面的 Markdown 粘贴链接的例子中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">atom.<span class="property">commands</span>.<span class="title function_">add</span>(<span class="string">&#x27;atom-text-editor&#x27;</span>, <span class="string">&#x27;markdown:paste-as-link&#x27;</span>, someAction)</span><br></pre></td></tr></table></figure>

<p>我们通过 <code>atom.commands</code> 注册了一个叫 <code>markdown:paste-as-link</code> 的命令并关联到一个函数上；随后其他插件（例如 command-palette）会从 <code>atom.commands</code> 中检索并执行这个命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> target = atom.<span class="property">views</span>.<span class="title function_">getView</span>(atom.<span class="property">workspace</span>.<span class="title function_">getActiveTextEditor</span>())</span><br><span class="line">atom.<span class="property">commands</span>.<span class="title function_">dispatch</span>(target, <span class="string">&#x27;markdown:paste-as-link&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>从上面的代码中我们可以看到，<code>atom.commands.dispatch</code> 在执行一个命令时还需要指定一个 DOM 元素，结合前面注册命令和映射快捷键的例子，我们可以发现 Atom 中的快捷键和命令实际上都是被注册到一个 CSS 选择器上的。这是因为在 Atom 这样一个复杂的环境中，一个快捷键可能会被多次映射到不同的命令，例如下图，我在存在代码补全的选单的情况下按了一下 Tab 键：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/key-bindings.png"></p>
<p>Atom 内建的按键映射调试插件（keybinding-resolver）告诉我们 Tab 键被同时映射到了 8 个命令上，每个映射都有一个相关联的 CSS 选择器（上图中间一列）作为约束。Atom 会从当前焦点所在的元素，逐级冒泡，直到找到一个离焦点最近的按键映射，在上面的例子中，因为当前焦点在代码补全的选单上，所以 Tab 键最后被匹配到了 <code>autocomplete-plus:confirm</code> 这个命令；而如果当前没有代码补全的选单，Tab 键则会被映射到 <code>editor:indent</code>。</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/panes-and-panels.png"></p>
<p>我为 Atom 主界面中的各个可视组件画了一个示意图，Atom 中最核心的区域叫「窗格（Pane）」，窗格可以横向或纵向被切分为多个窗格，窗格中可以是自定义的 DOM 元素（例如右侧的设置界面），也可以是 TextEditor（当然其实这也是一个 DOM 元素）。在窗格构成的核心区域之外，插件可以从四个方向添加「面板（Panel）」来提供一些次要的功能，面板中包含的也是自定义的 DOM 元素。可以想象，上图中的那样一个界面，是在两个窗格的基础上，先从底部添加一个 find-and-replace 的面板，然后从左侧添加一个 tree-view 的面板，最后再从底部添加一个 status-bar 的面板。</p>
<p>Workspace 对应着 Atom 的一个窗口，TextEdtior 对应着窗格中的一个文本编辑区域，可以算是 Atom 较为核心的组件了，我们来看看它们的 API 文档：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/api-documents.png"></p>
<p>Workspace（工作区）和 TextEditor（文本编辑器）算是 Atom 的核心部分。从上图中可以看到，Workspace 和 TextEditor 上首先提供了大量的事件订阅函数（图中仅列出了很少一部分），让插件可以感知到用户在 Workspace 在 TextEditor 中进行的操作，例如 TextEditor 的 <code>onDidChange</code> 会在每次用户修改文本时进行回调；然后也提供了大量的函数让插件可以操作 TextEditor 中的文本，例如 <code>getSelectedText</code> 可以获取到用户当前选择的文本。</p>
<p>事件，或者说「订阅者模式（Publish–subscribe pattern）」，在 Node.js 开发中我们也经常用到，但和 Node.js 的 EventEmitter 略有不同，Atom 提供的 Emitter 提供了更方便地退订事件的功能，所有事件订阅函数都会返回一个 Disposable，用于退订这个事件订阅。例如在 Atom 中，大部分插件的结构是这样的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomePackage</span> &#123;</span><br><span class="line">  <span class="title function_">activate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">disposable</span> = workspace.<span class="title function_">observeTextEditors</span>( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;found a TextEditor&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">deactivate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">disposable</span>.<span class="title function_">dispose</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>activate</code> 会在插件被加载时调用，这个插件为当前和未来的每个 TextEditor 注册一个回调，并将返回的 <code>Disposable</code> 保存在一个实例变量上；<code>deactivate</code> 会在插件被禁用时调用，在这里我们调用了之前的 Disposable 的 <code>dispose</code> 方法来退订之前的事件。如果插件的每个事件订阅都这样实现，那么 Atom 便可以在不重启的情况下安装、卸载、更新插件，实际上绝大部分插件也是这样做的。</p>
<p>除此之外，Atom 还提供了很多其他的 API，但在此就不详细介绍了：</p>
<ul>
<li><code>atom.config</code>、<code>atom.clipboard</code>、<code>atom.project</code> 提供了对配置项、剪贴板、通知的管理。</li>
<li><code>Color</code>、<code>Selection</code>、<code>File</code>、<code>GitRepository</code> 提供了对颜色、文本选择、文件、Git 仓库的抽象。</li>
</ul>
<p>这也是我选择了 Atom 而不是它的主要竟品 —— VS Code 的原因：Atom 始终都将可定制性放在第一位，从一开始就是核心仅仅提供 API，而将大部分功能交由插件实现，插件和内建功能使用的是同样的 API，从 1.0 之后几乎没添加过新功能，我觉得这是一个非常优雅的设计；VS Code 还是 Visual Studio 的路线，提供一个对用户而言好用的、高性能的 IDE，后来才出现插件机制，而且很多功能都在核心中，有时第三方插件不能够得到和内建功能一样的对待。</p>
<h2 id="优化启动速度"><a href="#优化启动速度" class="headerlink" title="优化启动速度"></a>优化启动速度</h2><p>因为 Atom 插件化的架构，默认就捆绑了 77 个插件，大多数用户在实际使用时都会有超过一百个插件，加载这些插件就花费了启动阶段的大部分时间，让人觉得 Atom 启动缓慢。</p>
<p>Atom 也做了很多尝试来优化启动速度，首先比如延迟加载插件，对于像我们前面提到的为 Markdown 粘贴链接这样功能单一的插件，可以在 <code>package.json</code> 中声明自己提供的功能：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;markdown-link&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;activationCommands&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;atom-text-editor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;markdown:paste-as-link&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>这样 Atom 便可以延迟对这个插件的完整加载，只记录这个插件所提供的命令，<code>markdown:paste-as-link</code> 也会出现在命令面板中，但只有当这个命令第一次被用到的时候，Atom 才会完整地加载这个插件。</p>
<p>显然这个特性非常依赖于插件的作者，如果插件没有在 <code>package.json</code> 中做这样的声明，Atom 就不知道它提供了怎样的功能，也就不得不在启动时完整地加载这个插件。为此，Atom 默认捆绑了一个 timecop 插件，可以记录并展示启动阶段的耗时：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/timecop.png"></p>
<p>Atom 非常善于通过「社会化」的方式维护社区，因为有了 timecop，终端用户也可以感知到导致启动缓慢的插件，并在 GitHub 上向作者反馈（Atom 要求所有插件的源代码必须托管在 GitHub）。在 Atom 1.0 发布时，有一些 API 的行为有调整，Atom 也是通过类似的方式向终端用户展示未迁移到最新的 API 的插件，督促作者来进行修改。</p>
<p>作为 Node.js 开发者我们都知道 <code>node_modules</code> 中有着大量的小文件，读取这些小文件要比读取单个大文件慢得多，尤其对于非固态硬盘而言。我做了一个简单的统计，Atom 的代码目录（包括 <code>node_modules</code>）中有着 12068 个文件，这些文件的读取显然需要花费启动阶段的很多时间：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/node-modules.png"></p>
<p>于是 Atom 借助 Electron 提供的 ASAR 归档格式，将整个 <code>node_modules</code> 和其他的代码文件打包成了一个单个的文件，这样 Atom 在启动时只需要读取这一个文件，省下了很多的时间。</p>
<h2 id="优化渲染性能"><a href="#优化渲染性能" class="headerlink" title="优化渲染性能"></a>优化渲染性能</h2><p>在 Atom 的早期版本中，当你打开一个代码量较大的文件时，文本编辑区域就会出现卡顿。前面我们提到，Atom 的整个窗口其实就是一个网页，如果网页渲染速度达不到 60fps —— 也就是无法总是在 16 毫秒内完成一次渲染，就会出现人可以感受到的卡顿。所以我们下面介绍的渲染性能优化思路其实是适用于所有的 Web 应用的，只是很少有应用能够有着 Atom 这样复杂的页面。</p>
<p>在网页渲染的过程主要分为「重排（Reflow）」和「重绘（Repaint）」，重排就是重新计算页面中各元素的位置，重绘则是将元素在指定的位置绘制出来。这其中重排是绝大部分卡顿的原因，因为在一个复杂的页面中可能有几万甚至几十万个元素，它们的位置有着复杂的依赖关系，难以并行地进行计算。</p>
<p>众所周知 JavaScript 是基于事件循环单线程地运行的，每当事件循环中的一个函数执行完成，如果它修改了 DOM，浏览器就会尝试进行重排和重绘来更新页面的显示，如果我们将对 DOM 的修改分散在事件循环中的多个函数中，就会多次触发不必要的重排和重绘，所以优化渲染性能有两个关键的思路：</p>
<ul>
<li>避免直接地、频繁地、反复地操作 DOM</li>
<li>保持 DOM 树尽可能地小</li>
</ul>
<p>为了将对 DOM 的操作集中到一起，我们有必要引入一个抽象层，也就是所谓的 Virtual DOM，我们总是在 Virtual DOM 上进行修改，而后再由 Virtual DOM 将我们的多次修改合并，一起更新到真正的 DOM 上。Atom 一开始使用了 React 所提供的 Virtual DOM，不过后来为了更细粒度的控制，切换到了一个自行实现的 Virtual DOM 上：</p>
<p><img src="https://r2-lc-cn.jysperm.me/thirdparty/atom-virtual-dom.png"></p>
<p>在采用了 Virtual DOM 之后也意味着插件不能够直接操作 Atom 的文本编辑区域的 DOM 了，为此 Atom 提供了 Marker 和 Decoration 这两个机制来允许插件间接地与文本编辑区域交互，Marker 和 Decoration 相当于是对 Virtual DOM 的进一步封装：</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2016/markers.png"></p>
<p>Marker 是对一段文本的动态封装，所谓动态是说它并不是单纯地记录「行号」和「列数」，而是即使周围的文本被编辑，Marker 也可以维持在正确的位置，Atom 中文本编辑区域的很多功能都是基于 Marker 实现的，例如光标、选区、高亮、行号左侧 git-diff 的提示、行号右侧 linter 的提示等。</p>
<p>Marker 只是对一段文本的表示，而 Decoration 用来向 Marker 上添加自定义的样式即 CSS 的 class，以便插件通过样式表在编辑区域展示信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> range = editor.<span class="title function_">getSelectedBufferRange</span>()</span><br><span class="line"><span class="comment">// invalidate: never, surround, overlap, inside, touch</span></span><br><span class="line"><span class="keyword">let</span> marker = editor.<span class="title function_">markBufferRange</span>(range, &#123;<span class="attr">invalidate</span>: <span class="string">&#x27;overlap&#x27;</span>&#125;)</span><br><span class="line"><span class="comment">// type: line, line-number, highlight, overlay, gutter, block</span></span><br><span class="line">editor.<span class="title function_">decorateMarker</span>(marker, &#123;<span class="attr">type</span>: <span class="string">&#x27;highlight&#x27;</span>&#125;, &#123;<span class="attr">class</span>: <span class="string">&#x27;highlight-selected&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>在这段代码中，我们先从当前选择的文本创建了一个 Marker，<code>invalidate</code> 属性代表了它如何追踪对这段文本的修改；然后我们向这个 Marker 上创建了一个 Decoration，向这个 Marker 所表示的文本区域添加一个叫 <code>highlight-selected</code> 的 CSS class，<code>type</code> 属性代表了这个 CSS class 被添加到什么位置。</p>
<p>随后我们便可以添加一个样式表，为我们的 CSS class 添加样式：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.highlights</span> &#123;</span><br><span class="line">  <span class="selector-class">.highlight-selected</span> <span class="selector-class">.region</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Atom 通过 Marker 和 Decoration 这样高层次的抽象，避免了插件直接去操作最关键的性能瓶颈 —— 文本编辑区域的 DOM，避免了插件反复修改 DOM 引起的重排。</p>
<p>在之前版本的 Atom 中，当你打开一个大文件时，整个文件都会被渲染成 DOM 作为一个大的页面，供你在 Atom 的窗口中滚动地浏览文件。显然这样会额外渲染非常多的 DOM 元素，也不符合我们前面提到的「保持 DOM 尽可能小」的思路，导致 Atom 无法打开大文件。</p>
<p>因此 Atom 现在会将文本编辑区域的每若干行划分为一个块（Tile），仅去渲染可见的块，而不是渲染整个文件。当用户滚动编辑区域时，新的块会被绘制，不可见的块会被销毁：</p>
<p><img src="https://r2-lc-cn.jysperm.me/thirdparty/atom-tiles.gif"></p>
<p>除了渲染导致的卡顿之外，因为 JavaScript 是单线程的，如果进行 CPU 密集的操作（例如在大量文件中进行正则搜索），也会阻塞事件循环，导致卡顿。就像普通的 Node.js 程序一样，如果希望进行 CPU 密集的计算，最好放到单独的进程而不是主进程，Atom 内建的搜索功能就是这样实现的：</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">scan</span> = <span class="params">(regex, options=&#123;&#125;, iterator)</span> -&gt;</span></span><br><span class="line">  deferred = Q.defer()</span><br><span class="line"></span><br><span class="line">  task = Task.once <span class="built_in">require</span>.resolve(<span class="string">&#x27;./scan-handler&#x27;</span>), regex, options, <span class="function">-&gt;</span></span><br><span class="line">    task.<span class="literal">on</span> <span class="string">&#x27;scan:result-found&#x27;</span>, <span class="function"><span class="params">(result)</span> -&gt;</span></span><br><span class="line">      iterator(result)</span><br><span class="line"></span><br><span class="line">  deferred.promise</span><br></pre></td></tr></table></figure>

<p>那么今天的主要内容就这么多了，接下来我想推荐几个我觉得非常好用的插件：</p>
<ul>
<li>git-plus 可以让你在命令面板中直接执行 <code>git diff</code>、<code>git push</code> 这样的命令。</li>
<li>file-icons 可以给 tree-view 中的文件添加一个美观的图标。</li>
<li>local-history 可以在你每次保存或编辑器失去焦点时在特定目录保存一份快照，以防万一。</li>
<li>highlight-selected 可以像 Sublime Text 一样高亮当前文件中和你选择的单词一样的单词。</li>
<li>linter 是一个语法风格检查的框架，如果你写 JavaScript 的话可以使用 linter-eslint 进行检查。</li>
<li>对于特定语言有一些专门的代码补全插件，例如 JavaScript 可以使用 atom-ternjs，TypeScript 可以使用 atom-typescript，React 可以使用 react。</li>
</ul>
<p>Atom 本身是开源项目，也有着活跃的社区：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/atom/atom">https://github.com/atom/atom</a>（主仓库）</li>
<li><a target="_blank" rel="noopener" href="https://atom.io/docs">https://atom.io/docs</a>（文档）</li>
<li><a target="_blank" rel="noopener" href="http://electron.atom.io/docs">http://electron.atom.io/docs</a>（Electron 文档）</li>
<li><a target="_blank" rel="noopener" href="https://discuss.atom.io/">https://discuss.atom.io</a>（官方论坛）</li>
<li><a target="_blank" rel="noopener" href="http://blog.atom.io/">http://blog.atom.io</a>（官方博客）</li>
<li><a target="_blank" rel="noopener" href="https://atom-china.org/">https://atom-china.org</a>（中文论坛）</li>
<li><a target="_blank" rel="noopener" href="https://github.com/atom-china">https://github.com/atom-china</a>（文档和博客的中文翻译）</li>
</ul>
<p>其他参考链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.gnu.org/software/emacs/">https://www.gnu.org/software/emacs/</a>（<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Emacs">维基百科</a>）</li>
<li><a target="_blank" rel="noopener" href="http://electron.atom.io/docs/api/remote">Electron IPC: remote</a></li>
<li><a target="_blank" rel="noopener" href="http://jlord.us/essential-electron/">http://jlord.us/essential-electron/</a></li>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/building-a-desktop-application-with-electron">https://dzone.com/articles/building-a-desktop-application-with-electron</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.atom.io/2015/06/25/atom-1-0.html">http://blog.atom.io/2015/06/25/atom-1-0.html</a>（<a target="_blank" rel="noopener" href="https://github.com/atom-china/blog/blob/master/2015-06-25-atom-1-0.md">中文版</a>）</li>
<li><a target="_blank" rel="noopener" href="http://blog.atom.io/2015/05/15/new-autocomplete.html">http://blog.atom.io/2015/05/15/new-autocomplete.html</a> （<a target="_blank" rel="noopener" href="https://github.com/atom-china/blog/blob/master/2015-05-15-new-autocomplete.md">中文版</a>）</li>
<li><a target="_blank" rel="noopener" href="http://semver.org/">http://semver.org/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/electron/asar">https://github.com/electron/asar</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.atom.io/2014/07/02/moving-atom-to-react.html">http://blog.atom.io/2014/07/02/moving-atom-to-react.html</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/atom/etch">https://github.com/atom/etch</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.atom.io/2014/07/24/decorations.html">http://blog.atom.io/2014/07/24/decorations.html</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.atom.io/2015/06/24/rendering-improvements.html">http://blog.atom.io/2015/06/24/rendering-improvements.html</a></li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/pygobject-tutorial-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/pygobject-tutorial-1/" itemprop="url">pygobject-tutorial-1</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-08T08:55:47+00:00">
                2016-11-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><p>这章将会介绍GTK+比较重要的几个方面</p>
<h2 id="主循环和信号"><a href="#主循环和信号" class="headerlink" title="主循环和信号"></a>主循环和信号</h2><p>就像大部分GUI库一样，GTK+使用了一种事件驱动的编程模型。当用户什么都没做，GTK+让主循环处于就绪状态并等待用户的输入。如果用户做了一些动作，比如鼠标事件，主循环就会被唤醒，然后将这个事件传递给GTK+程序。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/pygobject-tutorial-1/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/45/">&lt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/45/">45</a><span class="page-number current">46</span><a class="page-number" href="/page/47/">47</a><span class="space">&hellip;</span><a class="page-number" href="/page/74/">74</a><a class="extend next" rel="next" href="/page/47/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1464</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">910</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5358884258"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
