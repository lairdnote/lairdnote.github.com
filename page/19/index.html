<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="codeva-HZoIBm8yNp" />
<meta name="bytedance-verification-code" content="xa6iZeY+/XCOJvarHaDY" />








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Liunx Python Rust Goalng DevOPS" />










<meta name="description" content="个人随想，瞎子的世界. Linux Python Rust React Nextjs are my love.">
<meta property="og:type" content="website">
<meta property="og:title" content="逐流小站">
<meta property="og:url" content="https://blog.feedscoin.com/page/19/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="个人随想，瞎子的世界. Linux Python Rust React Nextjs are my love.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="Liunx Python Rust Goalng DevOPS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/page/19/"/>





  <title>逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E6%B8%A9%E6%95%85%E8%80%8C%E7%9F%A5%E6%96%B0%EF%BC%8C%E7%94%B1ADO.NET%E4%B8%8EDapper%E6%89%80%E8%81%94%E6%83%B3%E5%88%B0%E7%9A%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E6%B8%A9%E6%95%85%E8%80%8C%E7%9F%A5%E6%96%B0%EF%BC%8C%E7%94%B1ADO.NET%E4%B8%8EDapper%E6%89%80%E8%81%94%E6%83%B3%E5%88%B0%E7%9A%84/" itemprop="url">温故而知新，由 ADO.NET 与 Dapper 所联想到的</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-30T04:49:47+00:00">
                2020-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p> 这段时间在维护一个“遗产项目”，体验可以说是相当地难受，因为它的数据持久化层完全由 ADO.NET 纯手工打造，所以，你可以在项目中看到无所不在的 DataTable，不论是读操作还是写操作。这个 DataTable 让我这个习惯了 Entity Framework 的人感到非常别扭，我并不排斥写手写 SQL 语句，我只是拥有某种自觉并且清醒地知道，自己写的 SQL 语句未必就比 ORM 生成的 SQL 语句要好。可至少应该是像 Dapper 这种程度的封装啊，因为关系型数据库天生就和面向对象编程存在隔离，所以，频繁地使用 DataTable 无疑意味着你要写很多的转换的代码，当我看到<code>DbConnection</code>、<code>DbCommand</code>、<code>DbDataReader</code>、<code>DbDataAdapter</code>这些熟悉的“底层”的时候，我意识到我可以结合着 Dapper 的实现，从中梳理出一点改善的思路，所以，这篇博客想聊一聊<strong>ADO.NET</strong>、<strong>Dapper</strong>和<strong>Dynamic</strong>这三者间交叉的部分，希望能给大家带来新的启发。</p>
<h1 id="重温-ADO-NET"><a href="#重温-ADO-NET" class="headerlink" title="重温 ADO.NET"></a>重温 ADO.NET</h1><p>相信大家都知道，我这里提到的<code>DbConnection</code>、<code>DbCommand</code>、<code>DbDataReader</code>、<code>DbDataAdapte</code>以及<code>DataTable</code>、<code>DataSet</code>，实际上就是 ADO.NET 中核心的组成部分，譬如<code>DbConnection</code>负责管理数据库连接，<code>DbCommand</code>负责 SQL 语句的执行，<code>DbDataReader</code>和<code>DbDataAdapter</code>负责数据库结果集的读取。需要注意的是，这些类型都是抽象类，而各个数据库的具体实现，则是由对应的厂商来完成，即我们称之为“驱动”的部分，它们都遵循同一套接口规范，而<code>DataTable</code>和<code>DataSet</code>则是“装”数据库结果集的容器。关于 ADO.NET 的设计理念，可以从下图中得到更清晰的答案：</p>
<p><img src="https://i.loli.net/2020/12/31/dEN2tajehboDiTl.png" alt="ADO.NET架构"></p>
<p>在这种理念的指引，使用 ADO.NET 访问数据库通常会是下面的画风。博主相信，大家在各种各样的<code>DbHelper</code>或者<code>DbUtils</code>中都见过类似的代码片段，在更复杂的场景中，我们会使用<code>DbParameter</code>来辅助<code>DbCommand</code>，而这就是所谓的<strong>SQL 参数化查询</strong>。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fileName = Path.Combine(Directory.GetCurrentDirectory(), <span class="string">&quot;Chinook.db&quot;</span>);</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> connection = <span class="keyword">new</span> SQLiteConnection(<span class="string">$&quot;Data Source=<span class="subst">&#123;fileName&#125;</span>&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (connection.State != ConnectionState.Open) connection.Open();</span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> command = connection.CreateCommand())</span><br><span class="line">    &#123;</span><br><span class="line">        command.CommandText = <span class="string">&quot;SELECT AlbumId, Title, ArtistId FROM [Album]&quot;</span>;</span><br><span class="line">        command.CommandType = CommandType.Text;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//套路1：使用DbDataReader读取数据</span></span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> reader = command.ExecuteReader())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (reader.Read())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//各种眼花缭乱的写法:)</span></span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;AlbumId=<span class="subst">&#123;reader.GetValue(<span class="number">0</span>)&#125;</span>&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Title=<span class="subst">&#123;reader.GetFieldValue&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;Title&quot;</span>)&#125;</span>&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;ArtistId=<span class="subst">&#123;reader.GetInt32(<span class="string">&quot;ArtistId&quot;</span>)&#125;</span>&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//套路2：使用DbDataAdapter读取数据</span></span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> adapter = <span class="keyword">new</span> SQLiteDataAdapter(command))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> dataTable = <span class="keyword">new</span> DataTable();</span><br><span class="line">            adapter.Fill(dataTable);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里经常会引发的讨论是，<code>DbDataReader</code>和<code>DbDataAdapter</code>的区别以及各自的使用场景是什么？简单来说，前者是按需读取&#x2F;只读，数据库连接会一直保持；而后者是一次读取，数据全部加载到内存，数据库连接用完就会关掉。从资源释放的角度，听起来后者更友好一点，可显然结果集越大占用的内存就会越多。而如果从易用性上来考虑，后者可以直接填充数据到<code>DataSet</code>或者<code>DataTable</code>，前者则需要费一点周折，你看这段代码是不是有点秀操作的意思：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//各种眼花缭乱的写法:)</span></span><br><span class="line">Console.WriteLine(<span class="string">$&quot;AlbumId=<span class="subst">&#123;reader.GetValue(<span class="number">0</span>)&#125;</span>&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;Title=<span class="subst">&#123;reader.GetFieldValue&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;Title&quot;</span>)&#125;</span>&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;ArtistId=<span class="subst">&#123;reader.GetInt32(<span class="string">&quot;ArtistId&quot;</span>)&#125;</span>&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>在这个“遗产项目”中，<code>DbDataReader</code>和<code>DbDataAdapter</code>都有所涉猎，后者在结果集不大的情况下还是可以的，唯一的遗憾就是<code>DataTable</code>和<code>LINQ</code>的违和感实在太强烈了，虽然可以勉强使用<code>AsEnumerable()</code>拯救一下，而前者就有一点魔幻了，你能看到各种<code>GetValue(1)</code>、<code>GetValue(2)</code>这样的写法，这简直就是成心不想让后面维护的人好过，因为加字段的时候要小心翼翼地，确保字段顺序不会被修改。明明这个世界上有<a target="_blank" rel="noopener" href="https://github.com/StackExchange/Dapper">Dapper</a>、<a target="_blank" rel="noopener" href="https://github.com/donet5/SqlSugar">SqlSugar</a>、<a target="_blank" rel="noopener" href="https://smartsql.net/">SmartSql</a>这样优秀的 ORM 存在，为什么就要如此执著地写这种代码呢？是觉得 MyBatis 在 XML 里写 SQL 语句很时尚吗？</p>
<p>所以，我开始尝试改进这些代码，我希望它可以像 Dapper 一样，提供<code>Query&lt;T&gt;()</code>和<code>Execute()</code>两个方法足矣！如果要把结果集映射到一个具体的类型上，大家都能想到使用反射，我更想实现的是 Dapper 里的<code>DapperRow</code>，它可以通过“·”或者字典的形式来访问字段，现在的问题来了，你能实现类似 Dapper 里 DapperRow 的效果吗？因为想偷懒的时候，dynamic 不比 DataRow 更省事儿吗？那玩意儿光转换类型就要烦死人了，更不用说要映射到某个 DTO 啦！</p>
<h1 id="实现-DynamicRow"><a href="#实现-DynamicRow" class="headerlink" title="实现 DynamicRow"></a>实现 DynamicRow</h1><p>通过阅读 Dapper 的源代码，我们知道，Dapper 中用<a target="_blank" rel="noopener" href="https://github.com/StackExchange/Dapper/blob/main/Dapper/SqlMapper.DapperTable.cs">DapperTable</a>和<a target="_blank" rel="noopener" href="https://github.com/StackExchange/Dapper/blob/main/Dapper/SqlMapper.DapperRowMetaObject.cs">DapperRow</a>替换掉了 DataTable 和 DataRow，可见这两个玩意儿有多不好用，果然，英雄所见略同啊，哈哈哈！其实，这背后的一切的功臣是<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.dynamic.idynamicmetaobjectprovider?view=net-5.0">IDynamicMetaObjectProvider</a>，通过这个接口我们就能实现类似的功能，我们熟悉的<code>ExpendoObject</code>就是最好的例子：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span> person = <span class="keyword">new</span> ExpandoObject(); </span><br><span class="line">person.FirstName = <span class="string">&quot;Sherlock&quot;</span>; </span><br><span class="line">person.LastName = <span class="string">&quot;Holmes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等价形式</span></span><br><span class="line">(person <span class="keyword">as</span> IDctionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt;)[<span class="string">&quot;FirstName&quot;</span>] = <span class="string">&quot;Sherlock&quot;</span>;</span><br><span class="line">(person <span class="keyword">as</span> IDctionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt;)[<span class="string">&quot;LastName&quot;</span>] = <span class="string">&quot;Holmes&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>这里，我们用一种简单的方式，让 DynamicRow 继承者 DynamicObject，下面一起来看具体的代码：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DynamicRow</span> : <span class="title">DynamicObject</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> IDataRecord _record;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DynamicRow</span>(<span class="params">IDataRecord <span class="keyword">record</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _record = <span class="keyword">record</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="built_in">bool</span> <span class="title">TryGetMember</span>(<span class="params">GetMemberBinder binder, <span class="keyword">out</span> <span class="built_in">object</span> result</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> index = _record.GetOrdinal(binder.Name);</span><br><span class="line">        result = index &gt; <span class="number">0</span> ? _record[binder.Name] : <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> index &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//支持像字典一样使用</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">object</span> <span class="keyword">this</span>[<span class="built_in">string</span> field] =&gt;</span><br><span class="line">       _record.GetOrdinal(field) &gt; <span class="number">0</span> ? _record[field] : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于<code>DynamicObject</code>这个类型而言，里面最重要的两个方法其实是<code>TryGetMember()</code>和<code>TrySetMember()</code>，因为这决定了这个动态对象的读和写两个操作。因为我们这里不需要反向地去操作数据库，所以，我们只需要关注<code>TryGetMember()</code>即可，一旦实现这个方法，我们就可以使用类似<code>foo.bar</code>这种形式访问字段，而提供一个索引器，则是为了提供类似<code>foo[&quot;bar&quot;]</code>的访问方式，这一点同样是为了像 Dapper 看齐，无非是 Dapper 的 DynamicRow 本来就是一个字典！</p>
<p>现在，我们来着手实现一个简化版的 Dapper，给<code>IDbConnection</code>这个接口扩展出<code>Query&lt;T&gt;()</code>和<code>Execute()</code>两个方法，我们注意到<code>Query&lt;T&gt;()</code>需要用到<code>DbDataReader</code>或者<code>DbDataAdapter</code>其一，对于<code>DbDataAdapter</code>而言，它的实现完全由具体的子类决定，所以，对于<code>IDbConnection</code>接口而言，它完全不知道对应的子类是什么，此时，我们只能通过判断<code>IDbConnection</code>的类型来返回对应的 DbDataAdapter。读过我之前<a target="_blank" rel="noopener" href="https://blog.yuanpei.me/posts/3086300103/">博客</a>的朋友，应该对 Dapper 里的数据库类型的字典有印象，不好意思，这里历史要再次上演啦！</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IEnumerable&lt;<span class="built_in">dynamic</span>&gt; <span class="title">Query</span>(<span class="params"><span class="keyword">this</span> IDbConnection connection, <span class="built_in">string</span> sql, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="built_in">object</span> param = <span class="literal">null</span>, IDbTransaction trans = <span class="literal">null</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> reader = connection.CreateDataReader(sql);</span><br><span class="line">    <span class="keyword">while</span> (reader.Read())</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">DynamicRow</span>(<span class="params">reader <span class="keyword">as</span> IDataRecord</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="title">IEnumerable</span>&lt;<span class="title">T</span>&gt; <span class="title">Query</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> IDbConnection connection, <span class="built_in">string</span> sql,</span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="built_in">object</span> param = <span class="literal">null</span>, IDbTransaction trans = <span class="literal">null</span></span>) </span></span><br><span class="line"><span class="function">  <span class="keyword">where</span> T : <span class="keyword">class</span>, <span class="keyword">new</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> reader = connection.CreateDataReader(sql);</span><br><span class="line">    <span class="keyword">while</span> (reader.Read())</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="title">return</span> (<span class="params">reader <span class="keyword">as</span> IDataRecord</span>).<span class="title">Cast</span>&lt;<span class="title">T</span>&gt;()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的<code>CreateDataReader()</code>和<code>Cast()</code>都是博主自定义的扩展方法：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> IDataReader <span class="title">CreateDataReader</span>(<span class="params"><span class="keyword">this</span> IDbConnection connection, <span class="built_in">string</span> sql</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> command = connection.CreateCommand();</span><br><span class="line">    command.CommandText = sql;</span><br><span class="line">    command.CommandType = CommandType.Text;</span><br><span class="line">    <span class="keyword">return</span> command.ExecuteReader();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> T <span class="title">Cast</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="keyword">this</span> IDataRecord <span class="keyword">record</span></span>) <span class="keyword">where</span> T:<span class="keyword">class</span>, <span class="keyword">new</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> instance = <span class="keyword">new</span> T();</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="function"><span class="keyword">var</span> property <span class="keyword">in</span> <span class="title">typeof</span>(<span class="params">T</span>).<span class="title">GetProperties</span>())</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> index = <span class="keyword">record</span>.GetOrdinal(property.Name);</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">var</span> propertyType = property.PropertyType;</span><br><span class="line">        <span class="keyword">if</span> (propertyType.IsGenericType &amp;&amp; </span><br><span class="line">          propertyType.GetGenericTypeDefinition() == <span class="keyword">typeof</span>(Nullable&lt;&gt;))</span><br><span class="line">            propertyType = Nullable.GetUnderlyingType(propertyType);</span><br><span class="line">        property.SetValue(instance, </span><br><span class="line">          Convert.ChangeType(<span class="keyword">record</span>[<span class="title">property.Name</span>], <span class="title">propertyType</span>));</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> instance;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而<code>Execute()</code>方法则要简单的多，因为从<code>IDbConnection</code>到<code>IDbCommand</code>的这条线，可以直接通过<code>CreateCommand()</code>来实现：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Execute</span>(<span class="params"><span class="keyword">this</span> IDbConnection connection, <span class="built_in">string</span> sql, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="built_in">object</span> param = <span class="literal">null</span>, IDbTransaction trans = <span class="literal">null</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> command = connection.CreateCommand();</span><br><span class="line">    command.CommandText = sql;</span><br><span class="line">    command.CommandType = CommandType.Text;</span><br><span class="line">    <span class="keyword">return</span> command.ExecuteNonQuery();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="实现参数化查询"><a href="#实现参数化查询" class="headerlink" title="实现参数化查询"></a>实现参数化查询</h1><p>大家可以注意到，我这里的参数 param 完全没有用上，这是因为<code>IDbCommand</code>的<code>Paraneters</code>属性显然是一个抽象类的集合。所以，从<code>IDbConnection</code>的角度来看这个问题的时候，它又不知道这个参数要如何来给了，而且像 Dapper 里的参数，涉及到集合类型会存在<code>IN</code>和<code>NOT IN</code>以及批量操作的问题，比普通的字符串替换还要稍微复杂一点。如果我们只考虑最简单的情况，它还是可以尝试一番的：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SetDbParameter</span>(<span class="params"><span class="keyword">this</span> IDbCommand command, <span class="built_in">object</span> param = <span class="literal">null</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (param == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (param <span class="keyword">is</span> IDictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//使用字典作为参数</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> arg <span class="keyword">in</span> param <span class="keyword">as</span> IDictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt;)</span><br><span class="line">        &#123;</span><br><span class="line">              <span class="keyword">var</span> newParam = command.CreateParameter();</span><br><span class="line">              newParam.ParameterName = <span class="string">$&quot;@<span class="subst">&#123;arg.Key&#125;</span>&quot;</span>;</span><br><span class="line">              newParam.Value = arg.Value;</span><br><span class="line">              command.Parameters.Add(newParam);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//使用匿名对象作为参数</span></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> property <span class="keyword">in</span> param.GetType().GetProperties())</span><br><span class="line">        &#123;</span><br><span class="line">              <span class="keyword">var</span> propVal = property.GetValue(param);</span><br><span class="line">              <span class="keyword">if</span> (propVal == <span class="literal">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">              <span class="keyword">var</span> newParam = command.CreateParameter();</span><br><span class="line">              newParam.ParameterName = <span class="string">$&quot;@<span class="subst">&#123;property.Name&#125;</span>&quot;</span>;</span><br><span class="line">              newParam.Value = propVal;</span><br><span class="line">              command.Parameters.Add(newParam);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>相应地，为了能在<code>Query&lt;T&gt;()</code>和<code>Execute()</code>两个方法中使用参数，我们需要修改相关的方法：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Execute</span>(<span class="params"><span class="keyword">this</span> IDbConnection connection, <span class="built_in">string</span> sql, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="built_in">object</span> param = <span class="literal">null</span>, IDbTransaction trans = <span class="literal">null</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> command = connection.CreateCommand();</span><br><span class="line">    command.CommandText = sql;</span><br><span class="line">    command.CommandType = CommandType.Text;</span><br><span class="line">    command.SetDbParameter(param);</span><br><span class="line">    <span class="keyword">return</span> command.ExecuteNonQuery();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> IDataReader <span class="title">CreateDataReader</span>(<span class="params"><span class="keyword">this</span> IDbConnection connection, <span class="built_in">string</span> sql, </span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="built_in">object</span> param = <span class="literal">null</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> command = connection.CreateCommand();</span><br><span class="line">    command.CommandText = sql;</span><br><span class="line">    command.CommandType = CommandType.Text;</span><br><span class="line">    command.SetDbParameter(param);</span><br><span class="line">    <span class="keyword">return</span> command.ExecuteReader();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在，唯一的问题就剩下<code>DbType</code>和<code>@</code>啦，前者在不同的数据库中可能对应不同的类型，后者则要面临 Oracle 这朵奇葩的兼容性问题，相关内容可以参考在这篇博客：<a target="_blank" rel="noopener" href="https://blog.yuanpei.me/posts/3086300103/">Dapper.Contrib 在 Oracle 环境下引发 ORA-00928 异常问题的解决</a>。到这一步，我们基本上可以实现类似 Dapper 的效果。当然，我并不是为了重复制造轮子，只是像从 Dapper 这样一个结果反推出相关的技术细节，从而可以串联起整个 ASO.NET 甚至是 Entity Framework 的知识体系，工作中解决类似的问题非常简单，直接通过 NuGet 安装 Dapper 即可，可如果你想深入了解某一个事物，最好的方法就是亲自去探寻其中的原理。现在基础设施越来越完善了，可有时候我们再找不回编程的那种快乐，大概是我们内心深处放弃了什么……</p>
<p>考虑到，从微软的角度，它鼓励我们为每一家数据库去实现数据库驱动，所以，它定义了很多的抽象类。而从 ORM 的角度来考虑，它要抹平不同数据库的差异，Dapper 的做法是给<code>IDbConnection</code>写扩展方法，而针对每个数据库的“方言”，实际上不管什么 ORM 都要去做这部分“脏活儿”，以前是分给数据库厂商去做，现在是交给 ORM 设计者去做，我觉得 ADO.NET 里似乎缺少了一部分东西，它需要提供一个 IDbAdapterProvider 的接口，返回 IDbAdapter 接口，这样就可以不用关心它是被如何创建出来的。你看，同样是设计接口，可微软和 ServiceStack 俨然是两种不同的思路，这其中的差异，足可窥见一斑矣！实际上，Entity Framework 就是在以 ADO.NET 为基础发展而来的，在这个过程中，还是由厂商来实现对应的 Provider。此时此刻，你悟到了我所说的“温故而知新”了嘛？</p>
<h1 id="本文小结"><a href="#本文小结" class="headerlink" title="本文小结"></a>本文小结</h1><p>本文实则由针对 DataSet&#x2F;DataTable 的吐槽而引出，在这个过程中，我们重新温习了 ADO.NET 中<code>DbConnection</code>、<code>DbCommand</code>、<code>DbDataReader</code>、<code>DbDataAdapter</code>这些关键的组成部分，而为了解决 DataTable 在使用上的种种不变，我们想到了借鉴 Dapper 中的 DapperRow 来实现“动态查询”，由此引出了.NET 中实现 dynamic 最重要的一个接口：<code>IDynamicMetaObjectProvide</code>，这使得我们可以在查询数据库的时候返回一个 dynamic 的集合。而为了更接近 Dapper 一点，我们基于扩展方法的形式为<code>IDbConnection</code>编写了<code>Query&lt;T&gt;()</code>和<code>Execute()</code>方法，在数据库读写层面上彻底终结了 DataSet&#x2F;DataTable 的生命。最后，我们实现了一个简化版本的参数化查询，同样是借鉴 Dapper 的思路。这说明一件什么事情呢？<strong>当你在一个看似合理、结局固定的现状中无法摆脱的时候，“平躺”虽然能让你获得一丝喘息的机会，但与此同时，你永远失去了跳出这个层级去看待事物的机会</strong>，就像我以前吐槽同事天天用<code>StringBuider</code>拼接字符串一样，一味地吐槽是没有什么用的，重要的是你会选择怎么做，所以，后来我向大家推荐了<a target="_blank" rel="noopener" href="https://github.com/dotliquid/dotliquid">Linquid</a>，<strong>2021 年已经来了，希望你不只是增长了年龄和皱纹</strong>，晚安！</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/12/hexo-to-docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/12/hexo-to-docker/" itemprop="url">使用Docker轻松部署Hexo博客系统</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-27T06:00:00+00:00">
                2020-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index">
                    <span itemprop="name">系统设计</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>我的 <a target="_blank" rel="noopener" href="https://www.fanhaobai.com/">博客</a> 停服已经有几个月了，主要原因是使用的 <a target="_blank" rel="noopener" href="https://cloud.google.com/free/">Google Cloud</a> 免费服务器已经到期了，而整个博客系统的迁移成本很大，因此迟迟没有开启服务。</p>
<p><img src="//www.fanhaobai.com/2020/12/hexo-to-docker/704035c6-348e-439b-9048-d05a2a18ef1f.png" alt="预览图">
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/12/hexo-to-docker/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-12-26-how-to-apply-international-bank-card/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-12-26-how-to-apply-international-bank-card/" itemprop="url">如何申请境外银行卡</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-26T00:36:21+00:00">
                2020-12-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>老有人问我怎么申请的境外银行卡，今天就给大家分享一下我知道的境外银行卡开户方式。</p>
<h2 id="一、肉身出境办理"><a href="#一、肉身出境办理" class="headerlink" title="一、肉身出境办理"></a>一、肉身出境办理</h2><p>现在因为疫情出境游受限，其实平时大家可能都有境外游的机会，这个时候可以考虑直接在当地办卡。香港地区可以直接下卡，也没有资产的限制，美国我几年前旅游的时候，在当地的唐人街中国银行问了一下，只需要提供护照及一个当地固定的接收帐单地址，也可以直接办卡。</p>
<p>这种办理的方法的好处是不用受一些限制，你可以比较随意挑银行来办。性价比最高的应该就是去香港办理了。</p>
<h2 id="二、国内银行"><a href="#二、国内银行" class="headerlink" title="二、国内银行"></a>二、国内银行</h2><p>国内比较大的银行也可以申请办理境外银行卡，比如招商，中行，不过限制都比较多。比如招商银行需要有 500 万的资产在招行才可以办理。中国银行我几年前问的时候，说名额有限，需要预约，然后我登记之后就一直没有消息了。</p>
<p>现在招商银行有针对我司的特别政策，如果是猿辅导的员工，即可办理境外账户的开立服务。包含招商永隆银行（借记卡账户）+招银国际（证券账户）。</p>
<p>除了境外账户的开户，招行还提供了针对性的私人银行服务（无限次机场贵宾厅服务+PP卡）和金葵花理财服务。该两项服务有硬性的资产要求，但都有相关办理的优惠。</p>
<p>所以你也可以考虑<a target="_blank" rel="noopener" href="http://hr.yuanfudao.com/apply/fenbi/29#/">加入猿辅导</a>。</p>
<img src="/images/pp-card.jpeg" class="">

<h2 id="三、境外银行的国内机构"><a href="#三、境外银行的国内机构" class="headerlink" title="三、境外银行的国内机构"></a>三、境外银行的国内机构</h2><p>恒生、汇丰、花旗等银行在国内设有机构网点，所以其实可以去这类银行办理，相关的条件会比国内银行要低得多。</p>
<p>我个人就是在颐堤港的恒生银行办理的香港卡（下图）。2年前的要求是需要办 10 万块的非保本理财（挂钩恒生指数）或者办理 50 万的保本理财。这两种理财均为一年，到期后即可以转出。</p>
<img src="/images/hengseng.jpg" class="">

<p>现在应该这类银行也有政策，不过具体的条件我很久没有关注了，或许有变化。</p>
<h2 id="四、华美银行-Velo"><a href="#四、华美银行-Velo" class="headerlink" title="四、华美银行 Velo"></a>四、华美银行 Velo</h2><img src="/images/velo.jpg" width="300px" />

<p>我有一个同事成功办理了这个银行卡。华美银行是设立在美国，但是专门为华人服务的银行，可以直接在网上申请它的银行卡。华美银行相对于上面那些银行较小，但也是纳斯达克上市公司（股票代号：EWBC）。</p>
<p>具体的申请方式可以参考华美银行的 <a target="_blank" rel="noopener" href="https://www.velobank.com/cn.html">Velo官网</a>。</p>
<h2 id="五、其它"><a href="#五、其它" class="headerlink" title="五、其它"></a>五、其它</h2><h3 id="管理费"><a href="#管理费" class="headerlink" title="管理费"></a>管理费</h3><p>就我所知，似乎所有境外卡在卡内余额小于一定数额时，都会收取一定的小额管理费。不同银行政策不太一样。管理费每月大概需要 100 元人民币左右。</p>
<h3 id="风险提示"><a href="#风险提示" class="headerlink" title="风险提示"></a>风险提示</h3><p>依据中华人民共和国法律法规，中国大陆境内个人办理购汇业务时不得用于境外买房、证券投资、购买人寿保险和投资性返还分红类保险等尚未开放的资本项目。</p>
<p>所以，即使你有境外卡，外汇的来源也需要注意合法合规。</p>
<h2 id="六、小结"><a href="#六、小结" class="headerlink" title="六、小结"></a>六、小结</h2><p>从办理门槛来看，我个人推荐的是恒生银行或者<a target="_blank" rel="noopener" href="https://www.velobank.com/cn.html">华美银行</a>。</p>
<p>从使用体验来看，我推荐有条件的人选择去香港亲自办理，或者在国内的招行、中行办理。</p>
<p>当然，如果你恰好特别巧想换工作又对猿辅导感兴趣，也可以考虑<a target="_blank" rel="noopener" href="http://hr.yuanfudao.com/apply/fenbi/29#/">加入我们</a>，办理招行的永隆银行卡。</p>
<p>就酱~</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E8%A7%86%E9%A2%91%E6%98%AF%E4%B8%8D%E8%83%BDP%E7%9A%84%E7%B3%BB%E5%88%97%EF%BC%9AOpenCV%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E8%A7%86%E9%A2%91%E6%98%AF%E4%B8%8D%E8%83%BDP%E7%9A%84%E7%B3%BB%E5%88%97%EF%BC%9AOpenCV%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B/" itemprop="url">视频是不能 P 的系列：OpenCV 人脸检测</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-25T14:49:47+00:00">
                2020-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>恍惚间，2020 年已接近尾声，回首过去这一年，无论是疫情、失业还是“996”，均以某种特殊的方式铭刻着这一年的记忆。也许，是这个冬天的西安雾霾更少一点。所以，有时透过中午的一抹冬阳，居然意外地觉得春天的脚步渐渐近了，甚至连圣诞节这种“洋节日”都感到亲切而且期待，我想，这大概是我丧了一段时间的缘故吧！可不管怎样，人们对未来的生活时常有一种“迷之自信”，果然生还还是要继续下去的呀！趁着最近的时间比较充裕，我决定开启一个信息的系列：视频是不能 P 的。这是互联网上流传的一个老梗了，正所谓“视频是不能 P 的，所以是真的”。其实，在如今这个亦真亦假的世界里，哪里还有什么东西是不能 PS 的呢？借助人工智能“改头换面”越来越轻而易举，而这背后关于隐私和伦理的一连串问题随之而来，你越来越难以确认屏幕对面的那个是不是真实的人类。所以，这个系列会以 OpenCV 作为起点，去探索那些好玩、有趣的视频&#x2F;图像处理思路，通过技术来证明视频是可以被 PS 的。而作为这个系列的第一篇，我们将从一个最简单的地方开始，它就是人脸检测。</p>
<h1 id="第一个入门示例"><a href="#第一个入门示例" class="headerlink" title="第一个入门示例"></a>第一个入门示例</h1><p>学习 OpenCV 最好的方式，就是从官方的示例开始，我个人非常推荐的两个教程是 <a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/db/d28/tutorial_cascade_classifier.html">OpenCV: Cascade Classifier</a> 和 <a target="_blank" rel="noopener" href="https://pythonexamples.org/python-opencv/">Python OpenCV Tutorial</a>，其次是 <a target="_blank" rel="noopener" href="https://blog.csdn.net/poem_qianmo">浅墨大神</a> 的<a target="_blank" rel="noopener" href="https://blog.csdn.net/poem_qianmo/category_9262318.html">【OpenCV】入门教程</a>，不同的是， <a target="_blank" rel="noopener" href="https://blog.csdn.net/poem_qianmo">浅墨大神</a> 的教程主要是使用 C++，对于像博主这样的“不学无术”的人，这简直无异于从入门到放弃，所以，建议大家结合自己的实际情况，选择适合自己的“难度”。好了，思绪拉回我们这里，在 OpenCV 中实现人脸检测，主要分为以下三个步骤，即，首先，定义联级分类器<strong>CascadeClassifier</strong>并载入指定的模型文件；其次，对待检测目标进行灰度化和直方图均衡化处理；最后，对灰度图调用<code>detectMultiScale()</code>方法进行检测。下面是一个简化过的入门示例，使用世界上最省心的 Python 语言进行编写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤1: 定义联级分类器CascadeClassifier并载入指定的模型文件</span></span><br><span class="line">faceCascade = cv2.CascadeClassifier(<span class="string">&#x27;./haarcascades/haarcascade_frontalface_alt2.xml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤2: 对待检测目标进行灰度化和直方图均衡化处理</span></span><br><span class="line">target = cv2.imread(<span class="string">&#x27;target.jpg&#x27;</span>)</span><br><span class="line">target_gray = cv2.cvtColor(target, cv2.COLOR_BGR2GRAY)</span><br><span class="line">target_gray = cv2.equalizeHist(target_gray)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤3: 人脸检测</span></span><br><span class="line">faces = faceCascade.detectMultiScale(target_gray)</span><br><span class="line"><span class="keyword">for</span> (x,y,w,h) <span class="keyword">in</span> faces:</span><br><span class="line">    cv2.rectangle(target, (x, y), (x + w, y + h), (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤4: 展示结果</span></span><br><span class="line">cv2.imshow(<span class="string">&#x27;Face Detection&#x27;</span>, target)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows() </span><br></pre></td></tr></table></figure>
<p>正常情况下，你会得到下面的结果，这里选取的素材是经典日剧《半泽直树》：</p>
<p><img src="https://i.loli.net/2020/12/25/DcQRW32aUTBx5lY.png" alt="OpenCV人脸检测效果展示"></p>
<p>怎么样？是不是被 OpenCV 的强大给震惊到了？下面我们针对每个步骤做更详细的说明：</p>
<ul>
<li>第 1 行引入 OpenCV，需要我们安装 OpenCV 的<a target="_blank" rel="noopener" href="https://pypi.org/project/opencv-python/">Python 版本</a>。</li>
<li>第 4 行实例化级联分类器 CascadeClassifier，关于这个级联分类器，它是 OpenCV 下做目标检测的模块，内置<strong>Haar</strong>、<strong>HOG</strong>和<strong>LBP</strong>三类特性算法，而所谓“级联”，则是指它通过多个强分类器串联实现最终分类的思路。在初始化级联分类器的时候，需要载入指定的模型文件，这些模型文件是官方提前训练好的，可以从<a target="_blank" rel="noopener" href="https://github.com/opencv/opencv/tree/master/data/haarcascades">Github</a>上进行下载，不同的模型文件对应不同的功能，这里使用的<code>haarcascade_frontalface_alt2.xml</code>主要针对面部检测，而像<code>haarcascade_eye_tree_eyeglasses.xml</code>则可以对眼睛进行检测。除此之外，我们还通过训练获得自己的模型文件，当然，这一切都是后话啦！</li>
<li>第 7~9 行，我们载入了一张图片素材，并对其进行了灰度化和直方图均衡化处理。这里需要关注的三个函数是：<a href=".">imread</a>、<a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab">cvtColor</a> 和 <a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/d6/dc7/group__imgproc__hist.html#ga7e54091f0c937d49bf84152a16f76d6e">equalizeHist</a>，它们的作用分别是读取图片、转换颜色和直方图均衡化处理。其中，对人脸检测而言，灰度图是必要的条件，而直方图均衡化则是可选的一个过程。</li>
<li>第 12~14 行，通过 <a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/d1/de5/classcv_1_1CascadeClassifier.html#aaf8181cb63968136476ec4204ffca498">detectMultiScale</a> 方法我们就可以对待检测目标进行检测，关于它的参数，常用的有 scaleFactor、minNeighbors、minSize、maxSize，它可以对人脸检测做进一步的细节上控制，对于我们而言，我们更关心检测的结果，这里我们将检测到的人脸区域以矩形的方式绘制出来。</li>
<li>第 17~19 行，主要是为了方面大家观察结果，实际使用中可能会输出为文件或者实时渲染，这里需要关注的重点函数是：<a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/df/d24/group__highgui__opengl.html#gaae7e90aa3415c68dba22a5ff2cefc25d">imshow</a>，顾名思义，它可以让图片展示在窗口中，类似我们这个示例中的效果。</li>
</ul>
<h1 id="柴犬界的“网红”"><a href="#柴犬界的“网红”" class="headerlink" title="柴犬界的“网红”"></a>柴犬界的“网红”</h1><p>曾经，有“好事者”分析过微信和 QQ 的年度表情，表情包文化流行的背后，实际上表达方式多样化的一种体现，例如：“笑哭”这一符号，固然有哭笑不得的含义在里面，可又何尝不是<strong>二十多岁人生总是边哭边笑的真实写照</strong>呢？而“捂脸”这一符号在我看来更多的是一种无可奈何，甚至有一种自我嘲讽的意味在里面。至于“呲牙”，<strong>朴实无华的微笑背后，大抵是看惯了庭前花开花落，可以“不以物喜，不以己悲”地笑对人生吧</strong>！其实，在这许许多多地表情里，我最喜欢的是微博里的“Doge”，这个眉清目秀的“狗头”能表达出各种丰富的含义，相比之下，微信里的“Doge”就有一点拙劣的模仿的意味了，俗话说<strong>“狗头保命”</strong>，在一个互联网信仰缺失的时代，用这样一种表情作为人类的保护色，又是不是一种反讽呢？而大家都知道，这个“Doge”表情，实际上是源于一个叫做<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Homestar%20Runner">Homestar Runner</a>的网上动画系列，其原型则来源于一只名为<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1567521374438179&wfr=spider&for=pc">Kabosu</a>的柴犬，由于它融合了萌宠和故意搞笑两大特点，因此在网络上迅速走红，并由此衍生出一系列二次创作。</p>
<p><img src="https://i.loli.net/2020/12/26/i3OZfYwHvugT6JU.png" alt="微信年度表情"></p>
<p><img src="https://i.loli.net/2020/12/26/lN9ZgjuXxfs54cF.jpg" alt="QQ年度表情"></p>
<p>现在，让我们唤醒身体里的中二灵魂，通过 OpenCV 让这个柴犬界的网红出现在我们面前。这里的思路是，在检测到人脸后，在人脸区域绘制一个“狗头”表情，为此，我们需要定义一个<code>copyTo()</code>函数，它可以将一张小图(MaskImage)绘制到大图(SrcImage)的指定位置，我们一起来看它的具体实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">copyTo</span>(<span class="params">srcImage, maskImage, x, y, w, h</span>):</span><br><span class="line">    <span class="comment"># 按照区域大小对maskImage进行缩放</span></span><br><span class="line">    img_h, img_w, _ = maskImage.shape</span><br><span class="line">    img_scale = h / img_h</span><br><span class="line">    new_w = <span class="built_in">int</span>(img_w * img_scale)</span><br><span class="line">    new_h = <span class="built_in">int</span>(img_h * img_scale)</span><br><span class="line">    img_resize = cv2.resize(maskImage ,(new_w ,new_h))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># “粘贴”小图到大图的指定位置</span></span><br><span class="line">    <span class="keyword">if</span> (srcImage.shape[<span class="number">2</span>] != maskImage.shape[<span class="number">2</span>]):</span><br><span class="line">        y1, y2 = y, y + img_resize.shape[<span class="number">0</span>]</span><br><span class="line">        x1, x2 = x, x + img_resize.shape[<span class="number">1</span>]</span><br><span class="line">        alpha_s = img_resize[:, :, <span class="number">3</span>] / <span class="number">255.0</span></span><br><span class="line">        alpha_l = <span class="number">1.0</span> - alpha_s</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">3</span>):</span><br><span class="line">            srcImage[y1:y2, x1:x2, c] = (</span><br><span class="line">                alpha_s * img_resize[:, :, c] + alpha_l * srcImage[y1:y2, x1:x2, c]</span><br><span class="line">            )</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        srcImage[y:y + img_resize.shape[<span class="number">0</span>], x:x + img_resize.shape[<span class="number">1</span>]] = img_resize</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> srcImage</span><br></pre></td></tr></table></figure>
<p>在这里，我们首先要关注这样一件事情，即 OpenCV 默认使用的是由 R、G、B 组成的三通道，可对于像 PNG 这种格式的图片，它会含有一个 Alpha 通道。这样，当我们尝试把一张含 Alpha 通道的小图，“粘贴”到只有 R、G、B 三个通道的大图上时，就会出现通道数对不上的问题，所以，这个函数实际上对这种情况做了特殊处理。其次，每一个 OpenCV 中的图片，即 Mat，其 shape 属性是一个由三个元素组成的元组，依次为图片高度、图片宽度和图片通道数。“黏贴”的过程实际上是修改对应位置处的像素信息。好了，现在，我们来修改一下第一版的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 步骤1: 定义联级分类器CascadeClassifier并载入指定的模型文件</span></span><br><span class="line">faceCascade = cv2.CascadeClassifier(<span class="string">&#x27;./haarcascades/haarcascade_frontalface_alt2.xml&#x27;</span>)</span><br><span class="line"><span class="comment"># cv2.IMREAD_UNCHANGED表示保留Alpha通道信息</span></span><br><span class="line">doge = cv2.imread(<span class="string">&#x27;doge-4.png&#x27;</span>, cv2.IMREAD_UNCHANGED) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤2: 对待检测目标进行灰度化和直方图均衡化处理</span></span><br><span class="line">target = cv2.imread(<span class="string">&#x27;target.jpg&#x27;</span>)</span><br><span class="line">target_gray = cv2.cvtColor(target, cv2.COLOR_BGR2GRAY)</span><br><span class="line">target_gray = cv2.equalizeHist(target_gray)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤3: 人脸检测</span></span><br><span class="line">faces = faceCascade.detectMultiScale(target_gray)</span><br><span class="line"><span class="keyword">for</span> (x,y,w,h) <span class="keyword">in</span> faces:</span><br><span class="line">    target = copyTo(target, doge, x, y, w, h) <span class="comment"># 粘贴“狗头”表情至每一个面部区域</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤4: 展示结果</span></span><br><span class="line">cv2.imshow(<span class="string">&#x27;Face Detection&#x27;</span>, target)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows() </span><br></pre></td></tr></table></figure>

<p>此时，我们就可以得到下面的结果：</p>
<p><img src="https://i.loli.net/2020/12/26/Y9Al67cnvtgWmBz.png" alt="全员Doge!"></p>
<p>其实，我本人更喜欢这张，一张充满精神污染意味的图片：</p>
<p><img src="https://i.loli.net/2020/12/26/8QaJlR5XIxLftCo.png" alt="来自神烦狗的精神污染"></p>
<h1 id="视频级-PS-入门"><a href="#视频级-PS-入门" class="headerlink" title="视频级 PS 入门"></a>视频级 PS 入门</h1><p>OK，相信到这里为止，各位读者朋友，都已经顺着博主的思路实现了图片级别的“PS”，既然我们这个系列叫<strong>做视频是不能 P 的</strong>，那么大家要问了，视频到底能不能 P 呢？答案显然是可以，不然博主写这个系列就不是“人脸检测”而是“人肉打脸”啦！下面，我们来继续对今天的这个例子做一点升级。考虑在 OpenCV 中，<strong>VideoCapture</strong>可以通过摄像头捕捉视频画面，所以，我们只需要把这个“狗头”绘制到每一帧画面上，就可以实现视频级别的 PS 啦！</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 步骤1: 定义联级分类器CascadeClassifier并载入指定的模型文件</span></span><br><span class="line">faceCascade = cv2.CascadeClassifier(<span class="string">&#x27;./haarcascades/haarcascade_frontalface_alt2.xml&#x27;</span>)</span><br><span class="line">doge = cv2.imread(<span class="string">&#x27;doge-4.png&#x27;</span>, cv2.IMREAD_UNCHANGED)</span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>) <span class="comment">#笔记本自带摄像头</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">True</span>):</span><br><span class="line">    ret, frame = cap.read() </span><br><span class="line">    <span class="keyword">if</span> (ret == <span class="literal">False</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 步骤2: 对待检测目标进行灰度化和直方图均衡化处理</span></span><br><span class="line">    <span class="comment"># 读取视频中每一帧</span></span><br><span class="line">    target = frame</span><br><span class="line">    target_gray = cv2.cvtColor(target, cv2.COLOR_BGR2GRAY)</span><br><span class="line">    target_gray = cv2.equalizeHist(target_gray)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 步骤3: 人脸检测</span></span><br><span class="line">    faces = faceCascade.detectMultiScale(target_gray)</span><br><span class="line">    <span class="keyword">for</span> (x,y,w,h) <span class="keyword">in</span> faces:</span><br><span class="line">        target = copyTo(target, doge, x, y, w, h)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 步骤4: 展示结果</span></span><br><span class="line">    cv2.imshow(<span class="string">&#x27;Face Detection&#x27;</span>, target)</span><br><span class="line">    <span class="comment"># 按Q退出</span></span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == <span class="built_in">ord</span>(<span class="string">&#x27;q&#x27;</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">cap.release() </span><br><span class="line">cv2.destroyAllWindows() </span><br></pre></td></tr></table></figure>

<p>一起来看看实现的效果吧！可能当你看完这篇博客的时候，你会觉得我写这玩意儿到底有什么用？不好意思，这玩意儿还真有用！它解决了像博主这样腼腆、不敢在公开场合抛头露面的人的困惑。暴走大事件里“王尼玛”一直戴着头罩，所以，很多人都好奇他本人到底长什么样子，如果当时能考虑这个思路的话，是不是可以不用一直戴着头罩。同样地，还有在浪客剑心真人版里饰演志志雄真实的藤原龙也，全身上下缠满绷带的造型其实对演员来说是非常不友好的，如果当时能考虑这个思路的话，是不是演员可以不用受那么大的罪。如果说这些都有些遥远的话，那么，至少在采访后期希望保护受访者隐私的场景下，这个思路是完全可行的，就像大家看到的它可以完全的遮挡住我的脸，而类似的打马赛克等等技术，本质上还是对图像进行处理，甚至美颜相机里的各种特效，底层都离不开 OpenCV 里的这些算法。怎么样？现在有没有觉得博主其实是一个非常有趣的人，哈哈!</p>
<p><img src="https://i.loli.net/2020/12/26/CZi4SYOgzsoy8Qk.gif" alt="视频级别的“PS”"></p>
<h1 id="本文小结"><a href="#本文小结" class="headerlink" title="本文小结"></a>本文小结</h1><p>这篇博客主要分享了 OpenCV 在人脸检测方面的简单应用，OpenCV 中的 CascadeClassifier 整合<strong>Haar</strong>、<strong>HOG</strong>和<strong>LBP</strong>三类特性算法，通过预置的模型文件可以实现不同程度的目标检测功能，而在人脸检测的基础上，我们可以通过训练来实现简单的人脸识别，正如今年爆发的新冠疫情让人脸识别出现新的挑战一样，虽然人脸识别的场景正在变得越来越复杂，可作为一个世界上最流行的计算机视觉库，OpenCV 中的各种模块、算法还是一如既往的经典。结合 imread()、resize()、cvtColor()等等的方法，我们可以将“狗头”表情贴到图片或者视频中的人脸区域，而这个思路可以为人脸遮挡相关的场景做一点探索。</p>
<p>在一个流行美颜的时代，人们对于别人甚至自己的期望在无限拔高，像博主本人一直不怎么喜欢拍照，有时候我们埋怨别人没有把我们拍得好看一点，可那究竟是你眼中的自己还是别人眼中的自己呢？正如相亲的时候，人们总喜欢把最好的、美化过的一面展示给别人，因为只有这样才能让别人对你产生兴趣，可往往现实的落差会让这种来得快的兴趣消失得更快。所以，我想说，虽然在技术面前万物似乎皆可“PS”，可对于我们自己而言，你是否了解真正的自己呢？关于我博客的写作风格，我一直不确定是要用偏严谨还是偏活泼的方式来表达，因为眼看着被后浪们一点点超越，这实在是种难以言说的感觉，欢迎大家在评论区留下你对博客内容或者观点的想法，祝大家周末愉快，一个人一样要活得浪漫！</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-12-24-2020summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-12-24-2020summary/" itemprop="url">我的 2020 年度总结</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-24T00:00:00+00:00">
                2020-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>2020 年即将过去，这是不平凡的一年，以一个人们始料未及的方式开始，至今在国外依然没有看到好转的趋势。</p>
<p>我中间有好长一段时间没有关注国外的数据，后来在一个群里看到一位网友 @boyzcl 发布的截图，才意识到：它让全人类付出的代价实在是太惨重了。</p>
<p>数据是一串串冰冷的数字，但背后是一条条鲜活的生命，但愿不好的数字能早一刻停滞下来。</p>
<p><img src="http://cdn.penghh.fun/mweb/IMG_7559.jpeg" alt="IMG_7559"></p>
<p>按照去年的做法，我也想试着写一下 2020 年的个人总结。</p>
<h2 id="微信公开课"><a href="#微信公开课" class="headerlink" title="微信公开课"></a>微信公开课</h2><p>今年年初很幸运，通过微博抽奖，免费获得了一张微信公开课的门票，原以为能见到张小龙本人，还进了一个叫「广州市民张小龙个人演唱会」的微信群，但 1 月 9 日开场的时候，只看到了张小龙提前录好的 VCR，虽然票是免费的，但其实我内心还是挺失落的。</p>
<p>张小龙原先就深居简出，不怎么接受外界的采访，后来甚至连朋友圈都不怎么发了，因为他的朋友圈耳目众多，一不小心就给没有道德操守的媒体截图，解读出各种自以为是的内容，而且张小龙还不能放下身段，主动去反驳他们，因为真理总是越辨越黑，所以最好的方式还是——不发朋友圈。</p>
<p>外界要想客观地获得第一手的张小龙产品心法，还得依靠一年一度的「微信公开课」，由于是自己亲手打造的产品，张小龙出来演讲，一方面是为自己的产品代言，看好自己对产品的规划和设计，另一方面，其实也是想借这个机会，来澄清外界对微信这个产品、微信背后的这个团队的误解，解释清楚：为什么许多用户想要的功能，他们不做？</p>
<p>来听张小龙演讲的人，其实也并不轻松，因为不少人可能都是抱着这么一种想法：试图从他的只言片语中，解构出微信下一步的动向，找到新的流量洼地或者所谓的风口。</p>
<p>但我没有那么大的诉求，我只是想听听看，这个已经打造出一个 10 亿级用户的产品经理，他对产品的一些最新思考、对微信这个产品本身的看法（例如为什么要推出某个特性或者某个 idea 是如何想到的）。</p>
<h2 id="知识星球运营"><a href="#知识星球运营" class="headerlink" title="知识星球运营"></a>知识星球运营</h2><p>今年 5 月份我创建了一个免费的知识星球「效率工具指南」，它可以看成是我的另外一个朋友圈，主要分享我遇到的各种效率工具、软件使用技巧，以及有时回答一些朋友的提问，顺便一提，它也是可以匿名提问的。</p>
<p><img src="http://cdn.penghh.fun/mweb/image_88512424255582_4.jpg" alt="image_88512424255582_4"></p>
<p>截至目前，这个星期创建了 211 天，有 497 位朋友加入，发布了 332 条动态，这里的动态包含一些网友的提问、一些网友对我发布的作业的互动和一位网友 @Janenesome 发布的动态。</p>
<p>单看数据，我这个星球运营得确实不怎么样，互动量极少，尤其是前期的点赞和评论都非常少，但幸运的是，有三位朋友经常来给我的动态点赞和评论，其中一位朋友还对我发布的内容给了极大的肯定：</p>
<blockquote>
<p>你那个星球早就应该收费了，要对自己的交付有信心。</p>
</blockquote>
<p><img src="http://cdn.penghh.fun/mweb/1608569144.jpeg" alt="1608569144"></p>
<h2 id="年度-flag-完成情况"><a href="#年度-flag-完成情况" class="headerlink" title="年度 flag 完成情况"></a>年度 flag 完成情况</h2><p>年初的时候，我立下了三个 flag，分别是：</p>
<ul>
<li>脱单</li>
<li>能从写作赚到更多的钱</li>
<li>高质量的输出</li>
</ul>
<p><img src="http://cdn.penghh.fun/mweb/16087427082637.jpg">目前我完成了一个，高质量的输出成了一句空谈，因为今年没有写出一篇自我感觉满意的文章。</p>
<p>质量不够，数量来凑。年中有一段时间进行了连续 30 天的日更，确实有些辛苦，阅读量也没有见长，但至少勉强做到了，以后有更充裕的时间，再立个新的 flag 挑战至少 30 天的日更～</p>
<h2 id="年度音乐"><a href="#年度音乐" class="headerlink" title="年度音乐"></a>年度音乐</h2><ul>
<li>梁博 - 想念</li>
<li>李健 - 美丽生灵</li>
<li>达达乐队 - 南方</li>
<li>五条人 - 梦幻丽莎发廊</li>
<li>Eels - Ordinary Man</li>
<li>Banners - Shine A Light</li>
<li>约翰·列侬 - Imagine</li>
<li>White Cherry - MELANCHOLY</li>
<li>棱镜乐队 - 机场雷雨</li>
<li>失眠飞行（特供版）</li>
</ul>
<p>梁博，中国好声音第一季的冠军，2014 年打工的暑假第一次听到他在好声音翻唱的《私奔》，这几年断断续续听他的歌，例如《男孩》、《日落大道》、《表态》、《我不知道》，创作力旺盛。这首《想念》是今年元旦当天发布的，我喜欢这首歌的第一句歌词「其实孤独从来都和那些节日无关，像外面曾与我无关」。等情况稳定，梁博开演唱会，一定要去看一次。</p>
<p>盼了一年，李健拖了五年的专辑，还是没见到影子，我都想脱粉了。《美丽生灵》是一首初听不觉得惊艳，但越听越觉得耐听的歌曲。我发现我不只是喜欢李健写的歌词，还喜欢他在歌词中加入的拟声词和「吟唱」，例如这首歌里面的「嗯」，《风吹麦浪》里面的「嗯啦嗯啦」。</p>
<p>达达乐队、五条人是看了乐队的夏天 2 后才知道的两支乐队：</p>
<ul>
<li>达达唱的这首《南方》很民谣</li>
<li>五条人给我的感觉是人歌合一，自带笑点，因为他们俩是汕尾人，听他们用方言唱的歌，不会有陌生感，基本都能听得懂</li>
</ul>
<p>这周日要去长隆看五条人和达达的演出，想想就开心（辛苦了同事 @Cherry 苦口婆心说服了我一下午，详见这里《<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/a8tajky5SxJ1Fkpum2TSyA">做人太有趣了，下辈子我还想做人。</a>》）</p>
<p>《Ordinary Man》和《Shine A Light》这两首是美剧《良医》中的背景音乐，前一首沧桑的嗓音，一听就是有故事的人哈哈哈哈，很对我的胃口；后一首听着就觉得激动人心，至于那道光是什么，每个人有每个人的理解。</p>
<p>《MELANCHOLY》是一首纯音乐，最初是在室友刷的一条抖音视频上听到的，通过听歌识曲就找到了歌名，舒缓的旋律，可以用作摇篮曲。</p>
<p>《机场雷雨》是何老师分享给我的歌，应该是我听到的第一首棱镜的歌，喜欢这种白描式的歌词，一句歌词就是一个画面。来自四川的宝藏乐队，还有其他好听的歌，例如《总有一天你会出现在我身边》。</p>
<h2 id="好用的应用"><a href="#好用的应用" class="headerlink" title="好用的应用"></a>好用的应用</h2><p>滴答清单：把待办事项 App 当成我的日记本。  </p>
<p>一个比较欣慰的事情是，昨天有位滴答清单的工作人员加了我的微信，说要给我寄一份礼物，感谢我之前推荐过他们的产品，这可以算是在网上分享带来的一个意外之喜。</p>
<p><img src="http://cdn.penghh.fun/mweb/16087428597229.jpg" alt="-w418">  </p>
<p>Seven：一个付费的运动 App，它让我养成了做每天做运动的微习惯，中途有间断，但至少坚持下来了（比较尴尬的是，年底这 10 多天我又停下来了）。   </p>
<p>小宇宙：即刻团队推出的播客 App，虽然我使用小宇宙的次数不多，但这个应用的交互非常棒，就你一使用，可以明显地感觉到它与其他同类应用的差别，别人还是在做一个凑合可以用的产品，而他们是在用心做产品。    </p>
<p>Day One：这是一款日记软件，有时想起来就会用，由于没有购买会员，使用手机记录的东西不会同步到电脑端。它会记录下你写日记时的地理位置，虽然定位不那么精确，但以后走过（或待过）比较多地方的时候，看起来应该会有一种别样的感觉，就像夜晚的天空，星星飘落在不同的地方。愿你的生命有足够多的星星，来造成一个璀璨的银河。  </p>
<p>OffScreen：它一定程度上帮我减少了手机的使用时间，因为每当看到这个 App 的「你在就寝后又玩了 XX 分钟」、「今天已经拿起手机 XX 次」提醒时，多少会有一种「罪恶感」。<br>谜底时钟：这是 OffScreen 团队的另外一个作品，最吸引我的是时钟的设计，颜值让它在众多同类应用中脱颖而出。   </p>
<p>谜底时钟的出现，可能也可以成为买苹果产品的一个理由：苹果生态吸引人的，不仅是好用的苹果系统，更重要的是，上面有各种各样好用、好看的应用。</p>
<p>良好的生态可以激励更多的开发者到这上面来开发更好的产品，良好的生态包含：</p>
<ul>
<li>开发者可以在这里体面地赚到钱</li>
<li>开发者开发出来的产品，被他人盗版的成本较高</li>
</ul>
<p>此外，苹果在今年主动降低了对开发者的抽成比例：年收入少于 100 万美元的应用，抽成比例由 30% 调整为 15%。</p>
<p>别说了，现在学 iOS 开发，还来得及吗？</p>
<h2 id="友情推荐"><a href="#友情推荐" class="headerlink" title="友情推荐"></a>友情推荐</h2><p>这里还要给一位朋友推荐一下他们家的产品——点赞抽奖，这是微信上的一款抽奖小程序，可用来创建红包抽奖，也可参与他人发起的抽奖。</p>
<p>年底到了，如果你想给支持自己的关注者或小伙伴等发放福利，可以考虑使用这个工具。</p>
<p><img src="http://cdn.penghh.fun/mweb/IMG_7560.jpeg" alt="IMG_7560"></p>
<h2 id="购物清单-一些值得的投资"><a href="#购物清单-一些值得的投资" class="headerlink" title="购物清单&#x2F;一些值得的投资"></a>购物清单&#x2F;一些值得的投资</h2><p>微信周边「阿绿」：好几次出现在我拍的照片中，就是那只绿色萌萌的狗狗，在微信上有它和「阿白」的官方表情包<br>iMac 2020<br>西部数据 2TB 移动硬盘<br>佳能 M50<br>红米路由器 AX6<br>喜马拉雅买 1 送 13 会员：价格好像是 200+，和我家的姐姐弟弟一起分摊的，送的会员各取所需，我拿了其中的网易云和腾讯视频<br>小米冲牙器：刚买没多久，只用了一次，设计有点丑，体积有点大，带出去有些占地方</p>
<p>值得的投资：</p>
<ul>
<li>洗牙</li>
<li>得到电子书年度会员</li>
<li>Seven App</li>
</ul>
<h2 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h2><p>去年一起工作的同事，不少都走了，最开始有些不舍，但后来想了想，这就有点像是大学毕业时的情况，有些人选择继续升学，有些人选择工作，有些人选择回家继承家业……有缘相聚，同时也意味着会有告别的一天。</p>
<h3 id="各自为战"><a href="#各自为战" class="headerlink" title="各自为战"></a>各自为战</h3><p>以前我会以为，一个公司的所有部门会主动联合起来，齐力断金，一致对外，但后来发现是我想多了，不管大公司小公司，到了某个阶段，不同部门明面上是一个整体，但实际上是各自为战，锦上添花不多见，部门间甩锅才是稀松平常的事，工作得越久，这种体会越深刻。</p>
<p>之前看过 caoz 老师写的一篇文章《<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/L8ctSpEiKnlrjG_NH7dK_A">谈谈巨头的逻辑</a>》，其中谈的也是这个现象：</p>
<blockquote>
<p>巨头（内的各部门）从来不是一个整体，也会存在不同部门的利益诉求……巨头内部很多时候也会有一种尴尬，就是为什么明明我们是一家公司，我跟其他部门提个需求，还没有外部合作伙伴的优先级高，这在巨头，是常态，如果你在巨头打工时间比较长，你会有很多类似这样的案例体会。</p>
</blockquote>
<h3 id="工作的焦虑"><a href="#工作的焦虑" class="headerlink" title="工作的焦虑"></a>工作的焦虑</h3><p>每次开始写新的文章，可以说是一个新的轮回或者说开始。每个周末都要想一下，下周要写点什么，其间有过焦虑和抓耳挠腮的时刻。</p>
<p>焦虑的是，有时我觉得自己陷入了一种套路式的重复，总是在重复过去的东西，写工具文章给我带来的新鲜感和刺激变少了，觉得自己停止成长了；抓耳挠腮是因为发愁要写什么东西，其实我从今年年初就开始考虑「选题枯竭」的问题，但侥幸的是，这一年我还是勉强撑过来了。</p>
<h3 id="工作与生活"><a href="#工作与生活" class="headerlink" title="工作与生活"></a>工作与生活</h3><p>在上一家公司的时候，我会主张工作与生活要有明显的界限，而且还非常认同在豆瓣日历上看到的一句话：</p>
<blockquote>
<p>既然为了活命而工作，为什么又要为了工作而卖命？</p>
</blockquote>
<p><img src="http://cdn.penghh.fun/mweb/16086442245901.jpg"></p>
<p>但后来我的工作换成了写东西，这也是我的兴趣所在，即使是在没事的周末，我有时也会想着写东西的事情，选题也好，还是发在自己公众号上的文章，我并不会说刻意区分哪些是工作内的事情，哪些是自己的事情，当然这些事情之间存在着优先级。</p>
<p>重要的是，现在做的事情，和自己的长期目标（建立自己的个人品牌和影响力）是统一的，就还有值得做下去的理由。</p>
<p>说这些并不是想夸自己，因为自己也是个普通人，也会有犯懒、不想工作，只想咸鱼葛优躺的时候，但想着人生漫长，家里无矿，还是要保持一个积极的心态，时不时给自己加油打气。</p>
<p>末了，前两天还看到我喜欢的一位 Up 主 @极地手记 发布的一个视频《<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/C03fCgIPrXbFHaQK6l9pwA">写给三年前辞职拍视频的自己</a>》，视频的形式比较简单，就是这位 Up 主读着一封写好的信，回顾辞职三年以来做全职 Up 主的经历，没有刻意突出自己一路走来有多么不容易，就纯粹是在讲故事，没有过多的叙述技巧，其中提到：</p>
<blockquote>
<p>很抱歉，现在的我对于如何过好这一生，依然没有什么明确的答案，但是找到一份让你热爱的事业，遇到一个人生伴侣，做对别人有价值的事情，是我用这三年的时间写给自己的回答。</p>
</blockquote>
<p>对了，还有一个非常奇妙的事情是，这位 Up 主和我是同一天生日。  </p>
<h2 id="2020-年幸运的事情"><a href="#2020-年幸运的事情" class="headerlink" title="2020 年幸运的事情"></a>2020 年幸运的事情</h2><ul>
<li>公众号有一段时间来了好多新的关注者，从最初的 3000+ 增加到现在的接近 7000（感谢各位朋友的支持）</li>
<li>遇到了何老师</li>
<li>同事帮我过生日，准备了一个蛋糕，给了我一个惊喜</li>
<li>拿到了期待已久的驾驶证（我是 2018 年上半年报名学车的，看到这如果有还在上学的朋友，请在校就把驾照拿了，不要拖。工作之后再来练车，不但费时间更费钱）</li>
</ul>
<h2 id="2021-年的-flag"><a href="#2021-年的-flag" class="headerlink" title="2021 年的 flag"></a>2021 年的 flag</h2><ul>
<li>把公众号做到 1 万关注，希望能接到广告</li>
<li>多做一些视频内容，不然对不起自己买的 Mac</li>
<li>培养一个习惯，早睡早起</li>
<li>多出去走走，看看这个大世界</li>
</ul>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>如果你有幸看到了这里，那我还是想提一个和去年一样的建议：请试着写一下自己的 2020 年度总结。</p>
<p>这个总结可以比较正式，也可以比较随意，重要的是，它是你写给自己的，你不要担心它写得好或坏，开始写就起了一个非常好的头，跟随自己内心的想法写下来，才是最重要的。</p>
<p>相关阅读：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/9kCLzPnY5NRVB9OAKdjRxg">我的 2019 年简短总结</a></p>
<p>以上。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-12-18-2020-stock-trade-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-12-18-2020-stock-trade-summary/" itemprop="url">2020年我的股票交易总结</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-18T14:50:52+00:00">
                2020-12-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="概况"><a href="#概况" class="headerlink" title="概况"></a>概况</h2><p>今年股票美股的收益整体大概是 40% 左右，无图无真相，以下是老虎的统计数据：</p>
<img src="/images/stock-2020.jpg" class="">

<p>比较巧的是，A股的收益整体也是 40% 左右，无图无真相，以下是平安证券的数据：</p>
<img src="/images/stock-2020-a.jpg" class="">

<p>主要收益来自于疫情期间买入的各种股票，主要包括：</p>
<ul>
<li>哔哩哔哩，买入价 22-25 美元</li>
<li>谷歌，买入价 1222 美元</li>
<li>腾讯，买入价 299 元</li>
<li>茅台，美的，格力，海尔等</li>
</ul>
<p>今年我也有亏的，重仓的陌陌亏了大概 30% 。</p>
<p>以下是今年股票交易的一些认知。</p>
<h2 id="贪婪和恐惧是关键"><a href="#贪婪和恐惧是关键" class="headerlink" title="贪婪和恐惧是关键"></a>贪婪和恐惧是关键</h2><p>疫情期间，很多人很恐慌，而我却觉得这是一个很好的机会，于是选择 1&#x2F;4 仓位入市，然后慢慢加到 1&#x2F;2，其间也有过多次犹豫和担心，现在看起来，整体决策还是对的。在别人恐惧的时候贪婪，通常就可以买到极低的价格。</p>
<h2 id="不要做空"><a href="#不要做空" class="headerlink" title="不要做空"></a>不要做空</h2><p>疫情期间尝试了好几个做空，有一些差点得手的，比如游轮股，也有一些差点死很惨的，比如跟谁学。</p>
<p>我一直认为跟谁学没有猿辅导好，现在股价确实证明我是对的，但是跟谁学的那波暴涨，很可能把我的做空给逼爆仓。</p>
<p>这种极度考验心理，并且依赖于保证金的做空，以后我是不愿意再参与的了。</p>
<p>还好最后没赚没赔。</p>
<h2 id="好的股票不应该过早卖"><a href="#好的股票不应该过早卖" class="headerlink" title="好的股票不应该过早卖"></a>好的股票不应该过早卖</h2><p>去年底我持有了 4 支股票，分别是：</p>
<ul>
<li>阿里巴巴，成本价 144</li>
<li>特斯拉，成本价 242</li>
<li>腾讯，成本价 403</li>
<li>拼多多，成本价 24</li>
</ul>
<p>最终我卖掉了特斯拉和拼多多。这两个收益都不到 100%，但如果换成现在的我，我可能会一直持有。如果我一直持有的话，特斯拉应该可以带来 10 倍以上的回报，拼多多可以带来 5 倍以上的回报。</p>
<p>当时我开玩笑说：希望买特斯拉股票可以帮我挣一辆特斯拉，结果如果我不早卖的话，这个玩笑真的就实现了。</p>
<p>不过这也是我应该交的学费。每一笔学费都是用钱来强烈刺激我，让我难忘。</p>
<p>为什么好的股票不应该过早卖呢？我现在的感受是两点：</p>
<ul>
<li>找到好标的难度太大，市场的机会并不多。</li>
<li>好的股票未来的持续成长能力是很强的，即便短期超出你对它的估值，但是不应该太短视，因为市场很多时候并不理性，你如果过早卖掉，你不一定还能买得回来。</li>
</ul>
<h2 id="为何买入哔哩哔哩"><a href="#为何买入哔哩哔哩" class="headerlink" title="为何买入哔哩哔哩"></a>为何买入哔哩哔哩</h2><p>我今年在疫情期间就很看好哔哩哔哩，于是在 25 元左右的价格就买入了很多。也是因为去年把特斯拉卖得太早了，所以我在哔哩哔哩上面就很有耐心。我周围的朋友有 40 多卖掉的，有 50 多卖掉的，但我一直持有到现在。</p>
<p>最近哔哩哔哩涨到了 80 多，我帐面上大概挣了 2 倍多，如下图：</p>
<img src="/images/bilibili-1.jpg" class="">

<p>另外还有一笔即将到期的看涨期权，挣了 4 倍多，如下图：</p>
<img src="/images/bilibili-2.jpg" class="">

<p>我为什么会买哔哩哔哩？主要是我当时发现，年轻人都在用哔哩哔哩，它在视频网站中拥有独特的社区文化和价值。有人说它是中国的 youtube，我觉得有一些道理。我和一些朋友讨论了一下，确定了它是一个好的标的。</p>
<p>然后我就在想如何为它估价，于是我翻了一些估值模型，以下是我 2020年3月14日 的记录：</p>
<blockquote><p>如何估值哔哩哔哩？与 youtube 对标来计算：</p>
<ul>
<li>可以按月活折算可能的收入，然后按收入乘以某一个倍数来计算估值。</li>
<li>如果对标youtube的话，youtube，月活 19亿，收入210亿$，估值 1500 亿</li>
<li>bilibili, 18年全年，收入 41 亿，估值 280 亿人民币？<a target="_blank" rel="noopener" href="https://www.huxiu.com/article/294183.html">https://www.huxiu.com/article/294183.html</a></li>
<li>19年预估，1亿月活，60亿收入，估值 420 亿人民币？60亿美金。</li>
<li>如果保持增速，20 年应该 90 亿美金估值。</li>
<li>收入&#x2F;月活，哔哩哔哩大概是 60，youtube 大概是 77，差不太多。</li>
<li>估值&#x2F;收入，哔哩哔哩大概是 7， youtube 大概是 7，基本一样。</li>
<li>但是因为哔哩哔哩的商业化还没有大规模尝试，所以未来增长会乐观一些。</li>
</ul>
<p>如何估值哔哩哔哩？按单用户价值来计算：</p>
<ul>
<li>youtube ，月活 20 亿，估值 1500 亿$，单用户约 75$ <a target="_blank" rel="noopener" href="https://xw.qq.com/cmsid/20190504A09WCZ00">https://xw.qq.com/cmsid/20190504A09WCZ00</a></li>
<li>哔哩哔哩，月活 1 亿，估值 75 亿$，单用户约 75$</li>
<li>快手，月活3.41亿，286亿$,单用户 84$ <a target="_blank" rel="noopener" href="https://finance.jrj.com.cn/tech/2019/12/04072928486505.shtml">https://finance.jrj.com.cn/tech/2019/12/04072928486505.shtml</a></li>
<li>陌陌，月活1亿，50亿，单用户 50$ <a target="_blank" rel="noopener" href="http://m.ebrun.com/361912.html">http://m.ebrun.com/361912.html</a></li>
<li>单用户价值：youtube(75$), 哔哩哔哩(75$), 快手(84$)，陌陌(50$)</li>
</ul>
</blockquote>

<p>当时哔哩哔哩大概估值 75 亿美元，于是我觉得是符合这个模型的，但是我觉得未来 B 站的用户量还有上涨空间，于是就买入了。</p>
<p>现在拿这个模型看，哔哩哔哩的估值是偏高的，但是这确实反映了它数据增长的优秀，因为不到一年，它的月活就达到了 2 亿。它的商业化也做得很好。</p>
<p>未来 B 站值多少钱？我不知道。我想等它的用户量稳定，收入稳定后，估值可能才会回归到一个合理的水平。在这之前，可能会有很多波动。现在不卖，有可能我挣不到这么多，但是卖掉，也可能失去一个挣 5 - 10 倍收益的标的。</p>
<p>所以这次，我想试试多看个几年，不管结果是好还是坏，它都将再次修正我的认知，这是我看重的。</p>
<h2 id="为什么在陌陌上亏了"><a href="#为什么在陌陌上亏了" class="headerlink" title="为什么在陌陌上亏了"></a>为什么在陌陌上亏了</h2><p>我在陌陌 20 和 15 的时候分别买入了不少，现在陌陌 13 块多，整体我亏了 30% 的样子。</p>
<p>买入陌陌，核心是认为陌陌的估值太便宜。帐上有 20 亿美金的现金，每年挣个几亿美金，而估值才 40 亿美金（现在已经跌到 28 亿美金）。所以现在的陌陌，如果估值减掉自己持有现金，市盈率才不到 4 。</p>
<p>所以直到现在，我仍然认为陌陌是便宜的。如果一家公司一直亏钱，那么它最终可能资不抵债，但陌陌一直在挣钱，所以它不可能一直跌，它帐上的 20 亿美金现金就是它最低的价值。</p>
<p>但是为什么我亏钱了呢，还亏了 30% 呢？我低估了资本市场对于业绩下滑的悲观情绪。</p>
<p>陌陌是挣钱，但是它的月活在慢慢下降，利润也在下降。这背后可能是陌陌背后的金主用户们受疫情影响不太愿意给主播打赏了。在疫情期间，别的视频网站月活都在涨，而陌陌却没有，所以这更让资本市场不看好陌陌长远的发展。唐岩作为陌陌的创始人还离开了 CEO 职位，这让外界更加对陌陌没有信心。</p>
<p>我会卖掉陌陌的股票吗？有可能。取决于我能不能发现更好的标的。当前情况下，我还是持有陌陌的。陌陌虽然便宜，虽然下跌空间有限，但是这种股票也很难翻几倍了，所以很难给我带来很高的预期。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>一些今年的小结：</p>
<ul>
<li>不要做空。</li>
<li>好的标的应该一直持有。</li>
<li>要逆向思维，别人恐惧的时候贪婪。</li>
</ul>
<p>还有，别以为我挣了多少，我只是拿很少一些不影响我生活质量的小钱在玩，主要是为了提升自己的认知而已。如果你心态上玩不起，你就已经输了。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/54-%E7%A7%BB%E5%8A%A8%E5%85%89%E7%8C%AB%E6%94%B9%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E6%8B%A8%E5%8F%B7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/54-%E7%A7%BB%E5%8A%A8%E5%85%89%E7%8C%AB%E6%94%B9%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E6%8B%A8%E5%8F%B7/" itemprop="url">移动光猫改桥接模式拨号</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-11T16:10:00+00:00">
                2020-12-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>家里宽带用的是浙江移动 200M 光纤入户，整体速度和稳定性都还不错。但是因为是用光猫兼作路由器功能，家里连接的设备一多（智能家居设备需要联网的比较多），DHCP 功能就很容易崩溃无法分配 IP 地址，导致无法连接网络。这次宽带到期改成 300M 套餐，就趁着维修安装师傅上门把光猫改成桥接（万一搞坏了可以及时处理 hhhh），用手头的华硕 AC86U 路由器拨号。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/54-%E7%A7%BB%E5%8A%A8%E5%85%89%E7%8C%AB%E6%94%B9%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E6%8B%A8%E5%8F%B7/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/53-%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%B5%99%E6%B1%9F%E8%BF%99%E4%B8%AA%E7%9C%81%E5%85%AC%E5%85%B1%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/53-%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%B5%99%E6%B1%9F%E8%BF%99%E4%B8%AA%E7%9C%81%E5%85%AC%E5%85%B1%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9C%8D%E5%8A%A1/" itemprop="url">如何评价浙江这个省：公共管理与服务</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-10T06:49:04+00:00">
                2020-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%A7%82%E7%82%B9/" itemprop="url" rel="index">
                    <span itemprop="name">观点</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>本文是针对知乎提问「 如何评价浙江这个省？」的一个回答，陆陆续续分享了一些浙江老家小县城的公共管理与服务经历，涉及了社会治安、应急响应、政务服务、环境整治、居家养老等方面。因为部分案例有时效性，所以请留意文末的最后更新时间。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/53-%E5%A6%82%E4%BD%95%E8%AF%84%E4%BB%B7%E6%B5%99%E6%B1%9F%E8%BF%99%E4%B8%AA%E7%9C%81%E5%85%AC%E5%85%B1%E7%AE%A1%E7%90%86%E4%B8%8E%E6%9C%8D%E5%8A%A1/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-12-09-good-strategy-bad-strategy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-12-09-good-strategy-bad-strategy/" itemprop="url">做连贯性活动 - 读《好战略，坏战略》</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-09T13:50:57+00:00">
                2020-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <img src="/images/good-strategy-bad-strategy-book.jpg" width="300px" />

<h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>最近微信群里面流传了《美团清华产品课》的<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/273525610">笔记</a>，演讲人是王慧文。王慧文讲的很多内容都很有启发，里面提到了《好战略，坏战略》这本书，于是我就买来看了一下。以下是一些笔记。</p>
<h2 id="二、好战略"><a href="#二、好战略" class="headerlink" title="二、好战略"></a>二、好战略</h2><h3 id="好战略的基本逻辑结构"><a href="#好战略的基本逻辑结构" class="headerlink" title="好战略的基本逻辑结构"></a>好战略的基本逻辑结构</h3><p>作者认为，一个战略的核心包括三个要素：调查分析、指导方针以及连贯性活动。</p>
<p>其实这三个要素和 <a href="/2019/10/25/thinking-framework/#PDCA">《解决问题的商业框架图鉴》</a>里面提到的 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/PDCA%E5%BE%AA%E7%8E%AF/5091521">PDCA循环</a> 类似。</p>
<p>但是不同的一点在于最后提到的「连贯性活动」。</p>
<h3 id="连贯性活动"><a href="#连贯性活动" class="headerlink" title="连贯性活动"></a>连贯性活动</h3><p>所谓的连贯性活动是指：你的战略方法应该落地。怎么落地呢？无非就是结合自己的特点，发挥自己的优势，这样才可能成功。</p>
<p>对于这个观点，我想到了一个适合 iOS 程序员理解的例子：</p>
<blockquote><ul>
<li><p>假如你是一个刚出生的孩子，你就是 NSObject，没有什么特别的属性和方法。但是随着你长大，你就会添加很多属性和方法。</p>
</li>
<li><p>所谓的战略连贯性活动，就是指你需要结合自己的属性和方法的特点来发展。比如你已经有了 name, address 等属性，那么你可以发展成一个与物流相关的系统。如果你有了 url 这个属性，那么你可以朝着网络库那个方向发展。</p>
</li>
<li><p>任何不考虑自己以前的属性和方法来胡乱定发展方向的，就是一个「坏战略」。因为你的历史会成为你的包袱。</p>
</li>
</ul>
</blockquote>


<p>对于如何发挥自己的优势，书中提出了一些方法和案例。</p>
<h3 id="方法一：聚焦"><a href="#方法一：聚焦" class="headerlink" title="方法一：聚焦"></a>方法一：聚焦</h3><p>书中首先举了苹果的例子。乔布斯回归苹果所做的战略，就是削减产品线，找微软拿投资，想办法活下来，然后等移动互联网的新机会。</p>
<p>值得注意的是：实施聚焦战略通常都会很艰难。因为战略转变必然触及很多人的利益，总是会遭到强烈反对。书中举了美国 DEC 的例子：CEO 让核心高管定战略，结果 3 个高管意见不统一，结果 DEC 的 CEO 奥尔森让他们必须达成统一，最后的结果就是大家把各自的意见综合起来，变成了一个不聚焦的坏战略。最终 DEC 经营不善被收购。</p>
<p>而 Intel 则是一个成功的案例，CEO 格鲁夫放弃了原来的主营业务，转而全力开发微处理器。最终成为了 PC 时代半导体行业的霸主。</p>
<h3 id="方法二：转换视角"><a href="#方法二：转换视角" class="headerlink" title="方法二：转换视角"></a>方法二：转换视角</h3><p>转换视角，将自己的劣势变优势。书中举了两个让我印象深刻的例子。</p>
<ul>
<li>例一是身材矮小的大卫与巨人歌利亚的故事。大卫利用自己的移动性来避免和歌利亚对抗力量。自己身材矮小反而变成了优势。</li>
<li>例二是 IBM 的转型。在 PC 产业分工日趋明确的情况下，IBM 将自己上下游整合的劣势变成优势，强调提供整合性的咨询服务。</li>
</ul>
<h3 id="方法三：设计思维"><a href="#方法三：设计思维" class="headerlink" title="方法三：设计思维"></a>方法三：设计思维</h3><p>好的战略是设计出来的，而不是很多方案投票选出来的。设计出来的战略会考虑到自己目标的渐进性，竞争对手，以及自己资源的有限性而保持聚焦。</p>
<h2 id="三、坏战略"><a href="#三、坏战略" class="headerlink" title="三、坏战略"></a>三、坏战略</h2><p>书中提到了一些坏战略的特点：</p>
<ul>
<li>空话。例如：成为 XX 行业领导者。</li>
<li>不能直面挑战。回避最艰难的挑战，例如不敢裁减业务，聚焦核心。</li>
<li>不能落地的战略。战略需要落地，需要有具体可以实施的步骤。</li>
<li>糟糕的战略目标。不能解决关键问题。</li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>波特的<a href="/2019/09/21/competitive-strategy-summary/">《竞争战略》</a> 里面提到了核心的三个竞争策略：成本优先，差异化，聚焦。而本书从执行层面讲具体应对商业挑战的时候，如何制定战略。</p>
<p>书中提到的聚焦、转换视角、设计思维、直面冲突、连贯性活动都是非常有效的执行上的要素。书中的案例也非常非常多，读起来相对轻松。</p>
<p>推荐给大家~</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E4%BD%BF%E7%94%A8Python%E6%8A%BD%E5%8F%96%E3%80%8A%E5%8D%8A%E6%B3%BD%E7%9B%B4%E6%A0%91%E3%80%8B%E5%8E%9F%E8%91%97%E5%B0%8F%E8%AF%B4%E4%BA%BA%E7%89%A9%E5%85%B3%E7%B3%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E4%BD%BF%E7%94%A8Python%E6%8A%BD%E5%8F%96%E3%80%8A%E5%8D%8A%E6%B3%BD%E7%9B%B4%E6%A0%91%E3%80%8B%E5%8E%9F%E8%91%97%E5%B0%8F%E8%AF%B4%E4%BA%BA%E7%89%A9%E5%85%B3%E7%B3%BB/" itemprop="url">使用 Python 抽取《半泽直树》原著小说人物关系</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-08T14:49:47+00:00">
                2020-12-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" itemprop="url" rel="index">
                    <span itemprop="name">数据分析</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>此时此刻，2020 年的最后一个月，不管过去这一年给我们留下了怎样的记忆，时间终究自顾自地往前走，留给我们的怀念已时日无多。如果要说 2020 年的年度日剧，我想《半泽直树》实至名归，这部在时隔七年后上映的续集，豆瓣评分高达 9.4 分，一度超越 2013 年第一部的 9.3 分，是当之无愧的现象级电视剧，期间甚至因为疫情原因而推迟播出，这不能不感谢为此付出辛勤努力的演职人员们。身为一个“打工人”，主角半泽直树那种百折不挠、恩怨分明的性格，难免会引起你我这种“社畜”们的共鸣，即使做不到“以牙还牙，加倍奉还”，至少可以活得像一个活生生的人。电视剧或许大家都看过了，那么，电视剧相对于原著小说有哪些改动呢？今天，就让我们使用 Python 来抽取半泽直树原著小说中的人物关系吧！</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>在开始今天的博客内容前，我们有一点准备工作要完成。考虑到小说人物关系抽取，属于自然语言处理(<strong>NLP</strong>)领域的内容，所以，除了准备好 Python 环境以外，我们需要提前准备相关的中文语料，在这里主要有：<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/graph-relation/blob/master/input/%E5%8D%8A%E6%B3%BD%E7%9B%B4%E6%A0%91.txt">半泽直树原著小说</a>、 <a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/graph-relation/blob/master/input/%E4%BA%BA%E5%90%8D%E8%AF%8D%E5%85%B8.txt">半泽直树人名词典</a>、<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/graph-relation/blob/master/input/%E5%88%AB%E5%90%8D%E8%AF%8D%E5%85%B8.txt">半泽直树别名词典</a>、<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/graph-relation/blob/master/input/%E5%81%9C%E7%94%A8%E8%AF%8D%E8%AF%8D%E5%85%B8.txt">中文分词停用词表</a>。除此之外，我们需要安装<code>结巴分词</code>、<code>PyECharts</code>两个第三方库(<strong>注，可以通过 pip 直接安装</strong>)，以及用于展示人物关系的软件<code>Gephi</code>(<strong>注，这个软件依赖 Java 环境</strong>)。所以，你基本可以想到，我们会使用结巴分词对小说文本进行分词处理，而半泽直树人名列表则作为用户词典供结巴分词使用，经过一系列处理后，我们最终通过<code>Gephi</code>和<code>PyECharts</code>对结果进行可视化，通过分析人物间的关系，结合我们对电视剧剧情的掌握情况，我们就可以对本文所采用方法的效果进行评估，也许你认为两个人毫无联系，可最终他们以某种特殊的形式建立了联系，这就是我们要做这件事情的意义所在。本项目已托管在 <a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/graph-relation">Github</a>上，供大家自由查阅。</p>
<h1 id="原理说明"><a href="#原理说明" class="headerlink" title="原理说明"></a>原理说明</h1><p>这篇博客主要参考了 <a target="_blank" rel="noopener" href="https://www.shiyanlou.com/courses/677">Python 基于共现提取《釜山行》人物关系</a> 这个课程，该项目已在 Github 上开源，可以参考：<a target="_blank" rel="noopener" href="https://github.com/Forec/text-cooccurrence">https://github.com/Forec/text-cooccurrence</a>。这篇文章中提到了一种称之为“共现网络”的方法，它本质上是一种基于统计的信息提取方法。其基本原理是，当我们在阅读书籍或者观看影视作品时，在同一时间段内同时出现的人物，通常都会存在某种联系。所以，如果我们将小说中的每个人物都看作一个节点，将人物间的关系都看作一条连线，最终我们将会得到一个图(指数据结构中的<strong>Graph</strong>)。因为<code>Gephi</code>和<code>PyECharts</code>以及<code>NetworkX</code>都提供了针对<code>Graph</code>的可视化功能，因此，我们可以使用这种方法，对《半泽直树》原著小说中的人物关系进行抽取。当然，这种方法本身会存在一点局限性，这些我们会放在总结思考这部分来进行说明，而我们之所以需要准备人名词典，主要还是为了排除单纯的分词产生的干扰词汇的影响；准备别名词典，则是考虑到同一个人物，在不同的语境下会有不同的称谓。</p>
<h1 id="过程实现"><a href="#过程实现" class="headerlink" title="过程实现"></a>过程实现</h1><p>这里，我们定义一个<code>RelationExtractor</code>类来实现小说人物关系的抽取。其中，<code>extract()</code>方法用于抽取制定小说文本中的人物关系，<code>exportGephi()</code>方法用于输出 Gephi 格式的节点和边信息， <code>exportECharts()</code>方法则可以使用<code>ECharts</code>对人物关系进行渲染和输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"><span class="keyword">import</span> jieba, codecs, math</span><br><span class="line"><span class="keyword">import</span> jieba.posseg <span class="keyword">as</span> pseg</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options <span class="keyword">as</span> opts</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Graph</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RelationExtractor</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, fpStopWords, fpNameDicts, fpAliasNames</span>):</span><br><span class="line">        <span class="comment"># 人名词典</span></span><br><span class="line">        self.name_dicts = [line.strip().split(<span class="string">&#x27; &#x27;</span>)[<span class="number">0</span>] <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(fpNameDicts,<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).readlines()]</span><br><span class="line">        <span class="comment"># 停止词表</span></span><br><span class="line">        self.stop_words = [line.strip() <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(fpStopWords,<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).readlines()]</span><br><span class="line">        <span class="comment"># 别名词典</span></span><br><span class="line">        self.alias_names = <span class="built_in">dict</span>([(line.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>].strip(), line.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>].strip()) <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(fpAliasNames,<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).readlines()])</span><br><span class="line">        <span class="comment"># 加载词典</span></span><br><span class="line">        jieba.load_userdict(fpNameDicts)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提取指定小说文本中的人物关系</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">extract</span>(<span class="params">self, fpText</span>):</span><br><span class="line">        <span class="comment"># 人物关系</span></span><br><span class="line">        relationships = &#123;&#125;</span><br><span class="line">        <span class="comment"># 人名频次</span></span><br><span class="line">        name_frequency = &#123;&#125;</span><br><span class="line">        <span class="comment"># 每个段落中的人名</span></span><br><span class="line">        name_in_paragraph = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 读取小说文本，统计人名出现的频次，以及每个段落中出现的人名</span></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(fpText, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">                poss = pseg.cut(line)</span><br><span class="line">                name_in_paragraph.append([])</span><br><span class="line">                <span class="keyword">for</span> w <span class="keyword">in</span> poss:</span><br><span class="line">                    <span class="keyword">if</span> w.flag != <span class="string">&quot;nr&quot;</span> <span class="keyword">or</span> <span class="built_in">len</span>(w.word) &lt; <span class="number">2</span>:</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    <span class="keyword">if</span> (w.word <span class="keyword">in</span> self.stop_words):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">not</span> w.word <span class="keyword">in</span> self.name_dicts <span class="keyword">and</span> w.word != <span class="string">&#x27;半泽&#x27;</span>):</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    <span class="comment"># 规范化人物姓名，例：半泽-&gt;半泽直树，大和田-&gt;大和田晓</span></span><br><span class="line">                    word = w.word</span><br><span class="line">                    <span class="keyword">if</span> (self.alias_names.get(word)):</span><br><span class="line">                        word = self.alias_names.get(word)  </span><br><span class="line">                    name_in_paragraph[-<span class="number">1</span>].append(word)</span><br><span class="line">                    <span class="keyword">if</span> name_frequency.get(word) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                        name_frequency[word] = <span class="number">0</span></span><br><span class="line">                        relationships[word] = &#123;&#125;</span><br><span class="line">                    name_frequency[word] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 基于共现组织人物关系</span></span><br><span class="line">        <span class="keyword">for</span> paragraph <span class="keyword">in</span> name_in_paragraph:</span><br><span class="line">            <span class="keyword">for</span> name1 <span class="keyword">in</span> paragraph:</span><br><span class="line">                <span class="keyword">for</span> name2 <span class="keyword">in</span> paragraph:</span><br><span class="line">                    <span class="keyword">if</span> name1 == name2:</span><br><span class="line">                        <span class="keyword">continue</span></span><br><span class="line">                    <span class="keyword">if</span> relationships[name1].get(name2) <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                        relationships[name1][name2] = <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        relationships[name1][name2] += <span class="number">1</span> </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 返回节点和边</span></span><br><span class="line">        <span class="keyword">return</span> name_frequency, relationships</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 输出Gephi格式的节点和边信息</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">exportGephi</span>(<span class="params">self, nodes, relationships</span>):</span><br><span class="line">        <span class="comment"># 输出节点</span></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(<span class="string">&quot;./output/node.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="string">&quot;Id Label Weight\r\n&quot;</span>)</span><br><span class="line">            <span class="keyword">for</span> name, freq <span class="keyword">in</span> nodes.items():</span><br><span class="line">                f.write(name + <span class="string">&quot; &quot;</span> + name + <span class="string">&quot; &quot;</span> + <span class="built_in">str</span>(freq) + <span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 输出边</span></span><br><span class="line">        <span class="keyword">with</span> codecs.<span class="built_in">open</span>(<span class="string">&quot;./output/edge.txt&quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;gbk&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="string">&quot;Source Target Weight\r\n&quot;</span>)</span><br><span class="line">            <span class="keyword">for</span> name, edges <span class="keyword">in</span> relationships.items():</span><br><span class="line">                <span class="keyword">for</span> v, w <span class="keyword">in</span> edges.items():</span><br><span class="line">                    <span class="keyword">if</span> w &gt; <span class="number">0</span>:</span><br><span class="line">                        f.write(name + <span class="string">&quot; &quot;</span> + v + <span class="string">&quot; &quot;</span> + <span class="built_in">str</span>(w) + <span class="string">&quot;\r\n&quot;</span>)   </span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用ECharts对人物关系进行渲染</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">exportECharts</span>(<span class="params">self, nodes, relationships</span>):</span><br><span class="line">        <span class="comment"># 总频次，用于数据的归一化</span></span><br><span class="line">        total = <span class="built_in">sum</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="number">1</span>], nodes.items())))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 输出节点</span></span><br><span class="line">        nodes_data = []</span><br><span class="line">        <span class="keyword">for</span> name, freq <span class="keyword">in</span> nodes.items():</span><br><span class="line">            nodes_data.append(opts.GraphNode(</span><br><span class="line">                name = name, </span><br><span class="line">                symbol_size = <span class="built_in">round</span>(freq / total * <span class="number">100</span>, <span class="number">2</span>), </span><br><span class="line">                value = freq,</span><br><span class="line">            )),</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 输出边</span></span><br><span class="line">        links_data = []</span><br><span class="line">        <span class="keyword">for</span> name, edges <span class="keyword">in</span> relationships.items():</span><br><span class="line">                <span class="keyword">for</span> v, w <span class="keyword">in</span> edges.items():</span><br><span class="line">                    <span class="keyword">if</span> w &gt; <span class="number">0</span>:</span><br><span class="line">                        links_data.append(opts.GraphLink(</span><br><span class="line">                            source = v, </span><br><span class="line">                            target = w, </span><br><span class="line">                            value = w</span><br><span class="line">                        ))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 绘制Graph</span></span><br><span class="line">        c = (</span><br><span class="line">            Graph()</span><br><span class="line">            .add(</span><br><span class="line">                <span class="string">&quot;&quot;</span>,</span><br><span class="line">                nodes_data,</span><br><span class="line">                links_data,</span><br><span class="line">                gravity = <span class="number">0.2</span>,</span><br><span class="line">                repulsion = <span class="number">8000</span>,</span><br><span class="line">                is_draggable = <span class="literal">True</span>,</span><br><span class="line">                symbol = <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">                linestyle_opts = opts.LineStyleOpts(</span><br><span class="line">                    curve = <span class="number">0.3</span>, </span><br><span class="line">                    width = <span class="number">0.5</span>, </span><br><span class="line">                    opacity = <span class="number">0.7</span></span><br><span class="line">                ),</span><br><span class="line">                edge_label = opts.LabelOpts(</span><br><span class="line">                    is_show = <span class="literal">False</span>, </span><br><span class="line">                    position = <span class="string">&quot;middle&quot;</span>, </span><br><span class="line">                    formatter = <span class="string">&quot;&#123;b&#125;-&gt;&#123;c&#125;&quot;</span></span><br><span class="line">                ),</span><br><span class="line">            )</span><br><span class="line">            .set_global_opts(</span><br><span class="line">                title_opts = opts.TitleOpts(title=<span class="string">&quot;半泽直树原著小说人物关系抽取&quot;</span>)</span><br><span class="line">            )</span><br><span class="line">            .render(<span class="string">&quot;./docs/半泽直树原著小说人物关系抽取.html&quot;</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>你可以注意到，在<code>input</code>目录中，博主已经准备好了中文语料。因此，我们可以通过下面的代码来完成任务关系抽取：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extractor = RelationExtractor(<span class="string">&#x27;./input/停用词词典.txt&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;./input/人名词典.txt&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;./input/别名词典.txt&#x27;</span></span><br><span class="line">)</span><br><span class="line">nodes, relationships = extractor.extract(<span class="string">&#x27;./input/半泽直树.txt&#x27;</span>)</span><br><span class="line">extractor.exportGephi(nodes, relationships)</span><br><span class="line">extractor.exportECharts(nodes, relationships)</span><br></pre></td></tr></table></figure>
<p>此时，我们可以分别在<code>output</code>目录和<code>docs</code>目录获得<code>Gephi</code>和<code>ECharts</code>相关的渲染结果。</p>
<h1 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h1><p>这里，通过 Gephi 软件导入生成的节点和边信息，这两个信息默认情况下在<code>output</code>目录下。如果你熟悉这个软件的使用的话，你可以得到下面的结果：</p>
<p><img src="https://i.loli.net/2020/12/09/4TV9CAoE6lksGMg.png" alt="使用Gephi渲染的小说人物关系图"></p>
<p>作为对比，博主这里同时提供了使用 ECharts 渲染的小说人物关系图：</p>
<p><img src="https://i.loli.net/2020/12/09/V5pD6mJKCMsN4uS.png" alt="使用ECharts渲染的小说人物关系图"></p>
<p>或者，可以直接访问博主托管在 Github Pages 上的 <a target="_blank" rel="noopener" href="https://qinyuanpei.github.io/graph-relation/%E5%8D%8A%E6%B3%BD%E7%9B%B4%E6%A0%91%E5%8E%9F%E8%91%97%E5%B0%8F%E8%AF%B4%E4%BA%BA%E7%89%A9%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96.html">在线版本</a> 。关于 Gephi 软件的使用，请参考： <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/86145943695a">Gephi 网络图极简教程</a>。关于 PyECharts 的使用，请参考： <a target="_blank" rel="noopener" href="https://pyecharts.org/#/">PyECharts</a>。</p>
<h1 id="总结思考"><a href="#总结思考" class="headerlink" title="总结思考"></a>总结思考</h1><p>通过生成的人物关系图，可以发现下列规律：</p>
<ul>
<li>大多数人物间的关系是正确的，譬如<strong>东田-&gt;浅野匡-&gt;半泽</strong>这条线，对应的是第一季西大阪钢铁 5 亿贷款的事件，而<strong>箕部-&gt;白井-&gt;半泽</strong>这条线，显然对应的第二季议员利用“炼金术”敛财的事件。</li>
<li>我们发现渡真利拥有仅次于半泽的“连线”数量，这符合他在剧中掌握大量信息来源、职场上八面玲珑的形象设定。相比之下，同样作为半泽好友的近藤和苅田，则没有这样强大的光环。</li>
<li>关于大和田，我们都知道他在第二季属于编剧强行“加戏”，一定程度上是在顶替内藤部长的作用，大和田实际上并未参与第二季的剧情，这一点从图中人物节点的联系和大小可以看出。</li>
<li>日本人似乎更喜欢使用姓氏，由于妻子要跟随丈夫的姓氏，剧中很多女性角色譬如半泽花、浅野利惠等似乎都不太好提取出来，除非是像白井、谷川、藤泽这些重要的剧情人物。</li>
</ul>
<p>考虑到，小说中同一个人的称呼通常会有很多种，与之相关联的领域被称为“中文指代消解问题”，使用姓氏作为关键字会造成“女性角色”的缺失，而这种基于“共现”的理论，无法解决 A 在 B 交谈的过程中提到 C 的问题，此时，C 和 A、C 和 B 可能并没有直接的联系，譬如图中的垣内，理论上与西大阪钢铁 5 亿贷款事件并无直接联系，因为剧情中参与融资的主要是新人中西，更不用说老员工角田居然“孤零零”的一个人，而主流的命名实体识别的理论基本都针对三元组，所以，在这里要心疼下角田这位老人。</p>
<p>在目前的人物关系抽取案例中，这种情况称为“无效的人名实体共现句”，所以，更好的做法是，采用文本分类模型，结合依存句法去识别实体间的关系，比如同事关系、朋友关系或者亲属关系等等，它有一个非常专业的名词，称为命名实体识别(NER)，而这会让我们的这张图变得更加丰富。在这个方向上，我个人推荐使用哈工大的语言技术平台(LTP)作为进一步改进，因为它可以更好地识别人名。好了，以上就是这篇博客的全部内容啦，欢迎大家在博客下面留言，喜欢我的博客话，请一键三连，点赞收藏，谢谢大家！</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E5%8E%89%E5%AE%B3%E4%BA%86%EF%BC%81%E6%89%93%E5%B7%A5%E4%BA%BA%E7%94%A8Python%E5%88%86%E6%9E%90%E8%A5%BF%E5%AE%89%E5%B8%82%E8%81%8C%E4%BD%8D%E4%BF%A1%E6%81%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E5%8E%89%E5%AE%B3%E4%BA%86%EF%BC%81%E6%89%93%E5%B7%A5%E4%BA%BA%E7%94%A8Python%E5%88%86%E6%9E%90%E8%A5%BF%E5%AE%89%E5%B8%82%E8%81%8C%E4%BD%8D%E4%BF%A1%E6%81%AF/" itemprop="url">厉害了！打工人用 Python 分析西安市职位信息</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-05T04:49:47+00:00">
                2020-12-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" itemprop="url" rel="index">
                    <span itemprop="name">数据分析</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>在上一篇博客中，我和大家分享了整个 11 月份找工作的心路历程，而在找工作的过程中，博主发现西安大小周、单休这种变相“996”的公司越来越多，感慨整个行业越来越“内卷”的同时，不免会对未来的人生有一点迷茫，因为深圳已经开始试运行“996”了，如果有一天“996”被合法化并成为一种常态，那么，我们又该如何去面对“人会一天天衰老，总有一天肝不动”的客观规律呢？我注意到 Boss 直聘移动端会展示某个公司的作息时间，所以，我有了抓取西安市职位和公司信息并对其进行数据分析的想法，我想知道，这到底是我一个人的感受呢？还是整个世界的确是这样子的呢？带着这样的想法，博主有了今天这篇博客。所以，在今天这篇博客里，博主会从<a target="_blank" rel="noopener" href="https://www.zhipin.com/">Boss 直聘</a>、<a target="_blank" rel="noopener" href="https://www.zhaopin.com/">智联招聘</a>以及<a target="_blank" rel="noopener" href="https://www.51job.com/">前程无忧</a>上抓取职位和公司信息，并使用 MongoDB 对数据进行持久化，最终通过<a target="_blank" rel="noopener" href="https://pyecharts.org/#/">pyecharts</a>对结果进行可视化展示。虽然不大确定 2021 年会不会变得更好，可生活最迷人的地方就在于它的不确定性，正如数据分析唯一可以做的，就是帮助我们从变化的事物中挖掘出不变的规律一样。</p>
<h1 id="爬虫编写"><a href="#爬虫编写" class="headerlink" title="爬虫编写"></a>爬虫编写</h1><p>其实，这种类似的数据分析，博主此前做过挺多的啦，譬如 <a target="_blank" rel="noopener" href="https://qinyuanpei.blog.csdn.net/article/details/79360703">基于 Python 实现的微信好友数据分析</a> 以及 <a target="_blank" rel="noopener" href="https://qinyuanpei.blog.csdn.net/article/details/79683025">基于新浪微博的男女性择偶观数据分析(下)</a> 这两篇博客。总体上来说，大部分学习 Python 的朋友都是从编写爬虫开始的，而在博主看来，数据分析是最终的目的，编写爬虫则是达到这一目的的手段。而从始至终，“爬”与“反爬”的较量从未停止过，Requests、BeautifulSoup、Selenium、Phantom 等等的技术层出不穷。考虑到现在编写爬虫存在风险，所以，我不会在博客里透露过多的“爬虫”细节，换言之，我不想成为一个教别人写爬虫的人，因为这篇博客的标签是数据分析，关于爬虫的部分，我点到为止，不再过多地去探讨它的实现，希望大家理解。而之所以要从这三个招聘网站上抓取，主要还是为了增加样本的多样性，因为 Boss 直聘上西安市的职位居然只有 3 页，这实在是太让人费解了！</p>
<h2 id="Boss-直聘"><a href="#Boss-直聘" class="headerlink" title="Boss 直聘"></a>Boss 直聘</h2><p>通过抓包，我们可以分析出 Boss 直聘的地址：<code>https://www.zhipin.com/job_detail/?query=&#123;query&#125;&amp;city=&#123;cityCode&#125;&amp;industry=&amp;position=&amp;page=&#123;page&#125;</code>。其中，<code>query</code>为待查询关键词，<code>cityCode</code>为待查询城市代码，<code>page</code>为待查询的页数。可以注意到，<code>industry</code>和<code>position</code>两个参数没有维护，它们分别表示待查询的行业和待查询的职称。因为我们面向的是更一般的“打工人”，所以，这些都可以进行简化。对于<code>cityCode</code>这个参数，我们可以通过下面的接口获得：<code>https://www.zhipin.com/wapi/zpCommon/data/city.json</code>。这里，简单定义一个方法<code>extractCity()</code>来提取城市代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">extractCity</span>(<span class="params">self, cityName=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> (os.path.exists(<span class="string">&#x27;bossCity.json&#x27;</span>) <span class="keyword">and</span> cityName != <span class="literal">None</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;bossCity.json&#x27;</span>, <span class="string">&#x27;rt&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">            cityList = json.load(fp)</span><br><span class="line">            <span class="keyword">for</span> city <span class="keyword">in</span> cityList:</span><br><span class="line">                <span class="keyword">if</span> (city[<span class="string">&#x27;name&#x27;</span>] == cityName):</span><br><span class="line">                    <span class="keyword">return</span> city[<span class="string">&#x27;code&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        response = requests.get(self.cityUrl)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        json_data = response.json();</span><br><span class="line">        <span class="keyword">if</span> (json_data[<span class="string">&#x27;code&#x27;</span>] == <span class="number">0</span> <span class="keyword">and</span> json_data[<span class="string">&#x27;zpData&#x27;</span>] != <span class="literal">None</span>):</span><br><span class="line">            cityList = []</span><br><span class="line">            <span class="keyword">for</span> level <span class="keyword">in</span> json_data[<span class="string">&#x27;zpData&#x27;</span>][<span class="string">&#x27;cityList&#x27;</span>]:</span><br><span class="line">                cityList.extend(self.unfoldLevel(level))</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;bossCity.json&#x27;</span>, <span class="string">&#x27;wt&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">                json.dump(cityList, fp)</span><br><span class="line">            <span class="keyword">if</span> (cityName != <span class="literal">None</span>):</span><br><span class="line">                <span class="keyword">for</span> city <span class="keyword">in</span> cityList:</span><br><span class="line">                    <span class="keyword">if</span> (city[<span class="string">&#x27;name&#x27;</span>] == cityName):</span><br><span class="line">                        <span class="keyword">return</span> city[<span class="string">&#x27;code&#x27;</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> json_data[<span class="string">&#x27;zpData&#x27;</span>][<span class="string">&#x27;locationCity&#x27;</span>][<span class="string">&#x27;code&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>接下来，我们可以编写<code>searchJobs()</code>方法来实现职位的检索：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">searchJobs</span>(<span class="params">self, cityName, query, page=<span class="number">1</span></span>):</span><br><span class="line">    cityCode = self.extractCity(cityName)</span><br><span class="line">    <span class="keyword">if</span> (cityCode  != <span class="literal">None</span>):</span><br><span class="line">        searchUrl = <span class="string">&#x27;https://www.zhipin.com/job_detail/?query=&#123;query&#125;&amp;city=&#123;cityCode&#125;&amp;industry=&amp;position=&amp;page=&#123;page&#125;&#x27;</span>.<span class="built_in">format</span>(cityCode=cityCode, query=query, page=<span class="built_in">str</span>(page))</span><br><span class="line">        html = self.makeRequest(searchUrl)</span><br><span class="line">        soup = BeautifulSoup(html)</span><br><span class="line">        details = soup.find_all(name=<span class="string">&#x27;div&#x27;</span>,attrs=&#123;<span class="string">&#x27;class&#x27;</span>,<span class="string">&#x27;job-primary&#x27;</span>&#125;)</span><br><span class="line">        jobItems = []</span><br><span class="line">        companyItems = []</span><br><span class="line">        <span class="keyword">for</span> detail <span class="keyword">in</span> details:</span><br><span class="line">            jobItem = self.extractJob(detail)</span><br><span class="line">            <span class="keyword">if</span> (jobItem == <span class="literal">None</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                jobItems.append(jobItem)</span><br><span class="line">            companyItem = self.extractCompany(detail)</span><br><span class="line">            <span class="keyword">if</span> (companyItem == <span class="literal">None</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                jobItem[<span class="string">&#x27;company&#x27;</span>] = companyItem[<span class="string">&#x27;title&#x27;</span>]</span><br><span class="line">                jobItem[<span class="string">&#x27;industry&#x27;</span>] = companyItem[<span class="string">&#x27;industry&#x27;</span>]</span><br><span class="line">                companyItems.append(companyItem)</span><br><span class="line">        <span class="keyword">return</span> (jobItems,companyItems)</span><br></pre></td></tr></table></figure>
<p>这里我们会用到<code>requests</code>、<code>fake_useragent</code>以及<code>BeautifulSoup</code>，如果你经常编写爬虫的话，对它们应当不会感到陌生。唯一需要注意的有两点：<strong>第一，Boss 直聘会封杀爬虫的 IP，所以，可以考虑从互联网上抓取免费的代理 IP 作为代理池，每次发起请求时随机选取一个 IP 作为代理 IP，这样可以有效地减少被封杀的可能。第二，Boss 直聘的 Cookie 最多只能使用 4 次，超过 4 次后就需要重新获取 Cookie。</strong>目前，我没有找到好的解决方案，有兴趣的朋友可以参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43116910/article/details/103572131">2019 年末逆向复习系列之 Boss 直聘 Cookie 加密字段__zp_stoken__逆向分析</a> 这篇博客做一点逆向方面的研究，或者考虑使用<code>PyExecJS</code>载入前端 JavaScript 脚本来生成 Cookie，因为逆向并不是我这篇博客的重点。在解决了这两个问题后，我们就可以提取出每一页的岗位和公司信息，而这些都可以通过<code>BeautifulSoup</code>解决，这里不再赘述，关于 Boss 直聘部分的源代码，请参考：<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/job-analyse/blob/master/Spider/bossSpider.py">https://github.com/qinyuanpei/job-analyse/blob/master/Spider/bossSpider.py</a>。</p>
<h2 id="智联招聘"><a href="#智联招聘" class="headerlink" title="智联招聘"></a>智联招聘</h2><p>智联招聘相对于 Boss 直聘要简单一点，通过抓包分析，我们可以找到这样一个地址：<code>https://fe-api.zhaopin.com/c/i/sou?at=&#123;at&#125;&amp;_v=&#123;v&#125;&amp;x-zp-page-request-id=&#123;x-zp-page-request-id&#125;&amp;x-zp-client-id=&#123;v&#125;&amp;MmEwMD=&#123;MmEwMD&#125;</code>。通过这个接口可以直接获得 JSON 格式的数据，可想要构造这几个参数出来，实在是有一点困难，因为它遇到和 Boss 直聘一样的问题，基本都需要一定的逆向功底，而如果尝试去解析 DOM，你会发现它的前端使用了 Vue.js，换句话说，这个网站是由前端完成渲染的，这意味着，如果我直接访问<code>https://sou.zhaopin.com/?jl=854</code>这个地址，是无法拿到可以解析的 DOM 结构的，这就多少会有一点尴尬。所以，实际上博主最后没有实现智联招聘的爬虫，因为在这上面投入太多的精力，实在有一点得不偿失。这里简单说一下思路，基本上我们需要以<code>POST</code>方式调用这个接口，然后在 Body 中写入下面的结构：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;pageSize&quot;</span><span class="punctuation">:</span><span class="string">&quot;30&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cityId&quot;</span><span class="punctuation">:</span><span class="number">854</span><span class="punctuation">,</span><span class="attr">&quot;workExperience&quot;</span><span class="punctuation">:</span><span class="string">&quot;-1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;companyType&quot;</span><span class="punctuation">:</span><span class="string">&quot;-1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;employmentType&quot;</span><span class="punctuation">:</span><span class="string">&quot;-1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;jobWelfareTag&quot;</span><span class="punctuation">:</span><span class="string">&quot;-1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;kt&quot;</span><span class="punctuation">:</span><span class="string">&quot;3&quot;</span><span class="punctuation">,</span><span class="attr">&quot;at&quot;</span><span class="punctuation">:</span><span class="string">&quot;20673d42d62d48c38add329318fb9e2c&quot;</span><span class="punctuation">,</span><span class="attr">&quot;rt&quot;</span><span class="punctuation">:</span><span class="string">&quot;84a950e77e054854b4d2f9d90826d063&quot;</span><span class="punctuation">,</span><span class="attr">&quot;_v&quot;</span><span class="punctuation">:</span><span class="string">&quot;0.97312845&quot;</span><span class="punctuation">,</span><span class="attr">&quot;userCode&quot;</span><span class="punctuation">:</span><span class="number">662040894</span><span class="punctuation">,</span><span class="attr">&quot;eventScenario&quot;</span><span class="punctuation">:</span><span class="string">&quot;pcSearchedSouIndex&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cvNumber&quot;</span><span class="punctuation">:</span><span class="string">&quot;JM620408945R90500002000&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>这里依然要解决 Cookie 的问题，它这个 Cookie 简直不能更恶心，因为参数实在是太多了：</p>
<p><img src="https://i.loli.net/2020/12/05/aKowDF1r69O7yPY.png" alt="这个Cookie相当变态"></p>
<p>那么，我放弃了，感兴趣的朋友可以顺着这个思路继续探索，加油！</p>
<h2 id="前程无忧"><a href="#前程无忧" class="headerlink" title="前程无忧"></a>前程无忧</h2><p>相对于 Boss 直聘和智联招聘，前程无忧要更简单一点，这种简单是从心智体验上来讲。经过分析，它的地址为：<code>https://search.51job.com/list/200200,000000,0000,00,9,99,+,2,&#123;page&#125;.html?lang=c&amp;postchannel=0000&amp;workyear=99&amp;cotype=99&amp;degreefrom=99&amp;jobterm=99&amp;companysize=99&amp;ord_field=0&amp;dibiaoid=0&amp;line=&amp;welfare=</code>。它的简单体现在，可以直接通过修改<code>page</code>这个参数来达到抓取某一页数据的目的，它本身没有特别强大的反爬机制，所以，事实上，它是整个数据分析主要的数据来源，在这个地址里可能有一点大家看不懂的东西，没关系，博主一样看不懂，我们只需要知道它表示西安就可以了，如果想抓取某个城市的职位信息，可以直接在前程无忧上搜索，地址栏会告诉你这一切是如何变化的。需要说明的是，前程无忧的职位信息是存储在<code>window.__SEARCH_RESULT__</code>这个变量里的，所以，我们通过这个正则直接去匹配它即可，不需要再去解析 DOM，这再次体现出了它的简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">searchJobs</span>(<span class="params">self, cityName, query, page=<span class="number">1</span></span>):</span><br><span class="line">    cityCode = cityName</span><br><span class="line">    <span class="keyword">if</span> (cityCode   != <span class="literal">None</span>):</span><br><span class="line">        searchUrl = <span class="string">&#x27;https://search.51job.com/list/200200,000000,0000,00,9,99,+,2,&#123;page&#125;.html?lang=c&amp;postchannel=0000&amp;workyear=99&amp;cotype=99&amp;degreefrom=99&amp;jobterm=99&amp;companysize=99&amp;ord_field=0&amp;dibiaoid=0&amp;line=&amp;welfare=&#x27;</span>.<span class="built_in">format</span>(page=<span class="built_in">str</span>(page))</span><br><span class="line">        html = self.makeRequest(searchUrl)</span><br><span class="line">        data = re.findall(<span class="string">&#x27;window.__SEARCH_RESULT__ =(.+)&#125;&lt;/script&gt;&#x27;</span>, <span class="built_in">str</span>(html))[<span class="number">0</span>] + <span class="string">&quot;&#125;&quot;</span></span><br><span class="line">        details = json.loads(data)[<span class="string">&#x27;engine_search_result&#x27;</span>]</span><br><span class="line">        jobItems = []</span><br><span class="line">        companyItems = []</span><br><span class="line">        <span class="keyword">for</span> detail <span class="keyword">in</span> details:</span><br><span class="line">            jobItem = self.extractJob(detail)</span><br><span class="line">            <span class="keyword">if</span> (jobItem == <span class="literal">None</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                jobItems.append(jobItem)</span><br><span class="line">            companyItem = self.extractCompany(detail)</span><br><span class="line">            <span class="keyword">if</span> (companyItem == <span class="literal">None</span>):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                companyItems.append(companyItem)</span><br><span class="line">            <span class="keyword">return</span> (jobItems,companyItems)</span><br></pre></td></tr></table></figure>
<p>因为这里真正起作用的实际上只有<code>page</code>这个参数，所以，我们只需要循环每一页就可以了，博主就是通过这个方法抓取了大量的职位信息。同样地，我们通过<code>extractJob()</code>和<code>extractCompany()</code>两个方法来组装职位和公司的信息，最终通过元组的形式返回，由调用者自己决定要如何去处理这些数据。虽然，我们选择了 MongoDB 这样的数据库，它不像关系型数据库那样重视 Schema，可为了我们最终分析数据的时候方便一点，还是建议使用一致的数据结构。关于前程无忧部分的源代码，请参考：<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/job-analyse/blob/master/Spider/job51Spider.py">https://github.com/qinyuanpei/job-analyse/blob/master/Spider/job51Spider.py</a>。</p>
<h1 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h1><p>在开始今天的数据分析前，首先向大家展示下爬虫抓取到的数据。截止到写这篇的博客的时间，博主一共收集了 20000 个左右的职位&#x2F;公司信息，如下图所示：</p>
<p><img src="https://i.loli.net/2020/12/05/f1x5WnBUXEVCmLN.png" alt="职位信息展示"></p>
<p><img src="https://i.loli.net/2020/12/05/bqRcud6NCfTU3KP.png" alt="公司信息展示"></p>
<p>接下来，我们从数据库中读取这些数据以开始下面的分析：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">store = Store.mongoStore.MongoStore(<span class="string">&#x27;default&#x27;</span>)</span><br><span class="line">jobs = <span class="built_in">list</span>(store.find(<span class="string">&#x27;job&#x27;</span>,&#123;&#125;))</span><br><span class="line">companies = <span class="built_in">list</span>(store.find(<span class="string">&#x27;company&#x27;</span>,&#123;&#125;))</span><br></pre></td></tr></table></figure>

<h2 id="行业结构分析"><a href="#行业结构分析" class="headerlink" title="行业结构分析"></a>行业结构分析</h2><p>俗话说，“男怕入错行，女怕嫁错郎”。我们今天的社会是一个非常“苛刻”的社会，它要求每一个人在“合适”的年龄做“该做”的事情，可要达到这样一个“标准”则是非常不容易的。在综艺节目《令人心动的 Offer》里，“大龄”、“裸辞”、“背水一战”的丁辉，受到了来自红圈律所的“精英”们的区别对待，仿佛一个人的人生不能有一丁点的差错。或许人生的“试错”成本真的非常高，高到人们在 30 岁左右的时候纷纷遭遇中年危机。所以，我们实在有必要去了解一个行业，它目前的求职现状到底是什么样的，这里以西安市为例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_industry</span>():</span><br><span class="line">    industries = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;industry&#x27;</span>],companies))</span><br><span class="line">    counter = Counter(industries)</span><br><span class="line">    counter = <span class="built_in">sorted</span>(counter.items(),key = <span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse = <span class="literal">True</span>)[<span class="number">0</span>:<span class="number">15</span>]</span><br><span class="line">    counter = <span class="built_in">dict</span>(counter)</span><br><span class="line">    c = (</span><br><span class="line">        Pie()</span><br><span class="line">        .add(<span class="string">&quot;&quot;</span>,[<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(counter.keys(), counter.values())],label_opts=opts.LabelOpts(is_show=<span class="literal">True</span>, position=<span class="string">&quot;center&quot;</span>),)</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(title=<span class="string">&quot;西安市求职招聘行业结构分析(Top15)&quot;</span>,pos_left=<span class="number">325</span>),</span><br><span class="line">            legend_opts=opts.LegendOpts(type_=<span class="string">&quot;scroll&quot;</span>, pos_left=<span class="string">&quot;left&quot;</span>, orient=<span class="string">&quot;vertical&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">        .set_series_opts(label_opts=opts.LabelOpts(formatter=<span class="string">&quot;&#123;b&#125;: &#123;c&#125;&quot;</span>))</span><br><span class="line">        .render(<span class="string">&quot;./Reports/西安市求职招聘行业结构分析(Top15).html&quot;</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>下面是整个西安市求职招聘排名前 15 位的行业结构：</p>
<p><img src="https://i.loli.net/2020/12/05/dLOZe9VuJGMc5zY.png" alt="西安市求职招聘行业结构分析(Top15)"></p>
<p>可以注意到，其中占据份额较大的行业主要有：<strong>房地产、建筑&#x2F;建材&#x2F;工程、计算机软件、电子技术&#x2F;半导体&#x2F;集成电路、教育&#x2F;培训&#x2F;院校</strong>等。</p>
<h2 id="学历结构分析"><a href="#学历结构分析" class="headerlink" title="学历结构分析"></a>学历结构分析</h2><p>作为一个“西漂”，博主对西安最深的一个印象就是，西安有着非常丰富的高校资源，正因为如此，博主一度认为西安遍历都是研究生。因为在过去的四年里，的确接触过不少研究生学历的同事，相比之下，博主这样一个普通 211、非科班的本科生，着实显得有点相形见绌。我在之前的博客里有提到去中兴面试的经历，这个经历让我第一次意识到，学历和非科班的出身，终究有一天会成为你进入国企或者大厂的门槛，所以，博主在考虑要不要去读一个在职的研究生。这种认识到底是不是幸存者偏差呢，我们来看看数据分析的结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_education</span>():</span><br><span class="line">    eduInfos = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;eduInfo&#x27;</span>], jobs))</span><br><span class="line">    counter = Counter(eduInfos)</span><br><span class="line">    counter = <span class="built_in">sorted</span>(counter.items(),key = <span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse = <span class="literal">True</span>)</span><br><span class="line">    counter = <span class="built_in">dict</span>(counter)</span><br><span class="line">    c = (</span><br><span class="line">        Pie()</span><br><span class="line">        .add(<span class="string">&quot;&quot;</span>,[<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(counter.keys(), counter.values())])</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(title=<span class="string">&quot;西安市求职招聘学历结构分析&quot;</span>,pos_left=<span class="number">325</span>),</span><br><span class="line">            legend_opts=opts.LegendOpts(type_=<span class="string">&quot;scroll&quot;</span>, pos_left=<span class="string">&quot;left&quot;</span>, orient=<span class="string">&quot;vertical&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">        .set_series_opts(label_opts=opts.LabelOpts(formatter=<span class="string">&quot;&#123;b&#125;: &#123;c&#125;&quot;</span>))</span><br><span class="line">        .render(<span class="string">&quot;./Reports/西安市求职招聘学历结构分析.html&quot;</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>我承认我在胡说八道，因为结果非常的 Amazing 啊，非常的毕导啊：</p>
<p><img src="https://i.loli.net/2020/12/05/4YZT6XgCs8tRiQB.png" alt="西安市求职招聘学历结构分析"></p>
<p>我没有想到研究生以上的比例这么低，可能是因为我身边这些同事的层次都比较高吧，哈哈！可当学历逐渐成为一种门槛，即使你比本科生多上三年学，最后一样要在这世界上颠沛流离的时候，是不是会和博主有一样的疑问，为什么 IT 行业会变成劳动密集型产业？是因为门槛低让这个行业劣币驱逐良币呢，还是拥有高学历的人才一样要去拧螺丝？</p>
<h2 id="薪资待遇分析"><a href="#薪资待遇分析" class="headerlink" title="薪资待遇分析"></a>薪资待遇分析</h2><p>有时候，我会忍不住想，是不是在任何一个城市里，人们工资增长永远都赶不上房价增长？如果真的是这样，我们为什么又要从三线小城市出来呢？可能是觉得大城市有更好的机会吧，可转眼到了 2020 年，上大学时一心想从事这个行业的我，当时无论如何都想不到若干年后要面对“35 岁”这个问题。当“996”作为一种“福报”的声音越来越强烈，曾经我们认为的那“一点点”机会，真的就是只剩下“一点点”。人有时候就是在靠着那点“不切实际”过日子，譬如固执的认为收入会越来越高，可其实任何工作都是有天花板的存在的，以大多数普通人的努力程度，一辈子连天花板都可能触碰不到，真实的薪资水平到底是什么样的呢？年薪 30 万果真如此寻常等闲？我们一起来看：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_salary</span>():</span><br><span class="line">    salaries = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;avgSalary&#x27;</span>], <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;avgSalary&#x27;</span>] != <span class="number">0</span>, jobs))))</span><br><span class="line">    counter = Counter(salaries)</span><br><span class="line">    counter = <span class="built_in">sorted</span>(counter.items(),key = <span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse = <span class="literal">True</span>)</span><br><span class="line">    records = &#123;<span class="string">&#x27;3000元以下&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;3000元-5000元&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;5000元-8000元&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;8000元-12000元&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;12000元-15000元&#x27;</span>:<span class="number">0</span>, <span class="string">&#x27;15000元以上&#x27;</span>:<span class="number">0</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> (k,v) <span class="keyword">in</span> counter:</span><br><span class="line">        <span class="keyword">if</span> (k &lt; <span class="number">3000</span>):</span><br><span class="line">            records[<span class="string">&#x27;3000元以下&#x27;</span>] += v</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= <span class="number">3000</span> <span class="keyword">and</span> k &lt; <span class="number">5000</span>):</span><br><span class="line">            records[<span class="string">&#x27;3000元-5000元&#x27;</span>] += v</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= <span class="number">5000</span> <span class="keyword">and</span> k &lt; <span class="number">8000</span>):</span><br><span class="line">            records[<span class="string">&#x27;5000元-8000元&#x27;</span>] += v</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= <span class="number">8000</span> <span class="keyword">and</span> k &lt; <span class="number">12000</span>):</span><br><span class="line">            records[<span class="string">&#x27;8000元-12000元&#x27;</span>] += v</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= <span class="number">12000</span> <span class="keyword">and</span> k &lt; <span class="number">15000</span>):</span><br><span class="line">            records[<span class="string">&#x27;12000元-15000元&#x27;</span>] += v</span><br><span class="line">        <span class="keyword">if</span> (k &gt;= <span class="number">15000</span>):</span><br><span class="line">            records[<span class="string">&#x27;15000元以上&#x27;</span>] += v</span><br><span class="line">    counter = <span class="built_in">dict</span>(records)</span><br><span class="line">    c = (</span><br><span class="line">        Pie()</span><br><span class="line">        .add(<span class="string">&quot;&quot;</span>,[<span class="built_in">list</span>(z) <span class="keyword">for</span> z <span class="keyword">in</span> <span class="built_in">zip</span>(counter.keys(), counter.values())])</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(title=<span class="string">&quot;西安市求职招聘平均工资分析&quot;</span>,pos_left=<span class="number">325</span>),</span><br><span class="line">            legend_opts=opts.LegendOpts(type_=<span class="string">&quot;scroll&quot;</span>, pos_left=<span class="string">&quot;left&quot;</span>, orient=<span class="string">&quot;vertical&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">        .set_series_opts(label_opts=opts.LabelOpts(formatter=<span class="string">&quot;&#123;b&#125;: &#123;c&#125;&quot;</span>))</span><br><span class="line">        .render(<span class="string">&quot;./Reports/西安市求职招聘平均工资分析.html&quot;</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>由此，我们得到了整个西安市的收入分布情况。显然，*<em>5000~8000</em>这个收入区间才是大多数普通人的真实写照：</p>
<p><img src="https://i.loli.net/2020/12/05/4BAMeVN1zlLpaFo.png" alt="西安市求职招聘平均工资分析"></p>
<p>我们继续分析，哪些行业的平均工资更高一点，因为这样你会找到同龄人的参考对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_industry_salary</span>():</span><br><span class="line">    filtered = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;avgSalary&#x27;</span>] != <span class="number">0</span>, jobs))</span><br><span class="line">    salaries = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> job <span class="keyword">in</span> filtered:</span><br><span class="line">        <span class="keyword">if</span> (job[<span class="string">&#x27;industry&#x27;</span>] == <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> salaries.get(job[<span class="string">&#x27;industry&#x27;</span>]) == <span class="literal">None</span>:</span><br><span class="line">            salaries[job[<span class="string">&#x27;industry&#x27;</span>]] = [job[<span class="string">&#x27;avgSalary&#x27;</span>]]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            salaries[job[<span class="string">&#x27;industry&#x27;</span>]].append(job[<span class="string">&#x27;avgSalary&#x27;</span>])</span><br><span class="line">    counter = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (industry, data) <span class="keyword">in</span> salaries.items():</span><br><span class="line">        counter[industry] = <span class="built_in">int</span>(<span class="built_in">sum</span>(data) / <span class="built_in">len</span>(data))</span><br><span class="line">    counter = <span class="built_in">sorted</span>(counter.items(),key = <span class="keyword">lambda</span> x:x[<span class="number">1</span>],reverse = <span class="literal">True</span>)[<span class="number">0</span>:<span class="number">15</span>]</span><br><span class="line">    counter = <span class="built_in">dict</span>(counter)</span><br><span class="line">    c = (</span><br><span class="line">        Bar()</span><br><span class="line">        .add_xaxis(<span class="built_in">list</span>(counter.keys()))</span><br><span class="line">        .add_yaxis(<span class="string">&quot;平均工资&quot;</span>, <span class="built_in">list</span>(counter.values()))</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(title=<span class="string">&quot;西安市求职招聘行业工资分析(Top15)&quot;</span>, pos_left=<span class="number">325</span>),</span><br><span class="line">            legend_opts=opts.LegendOpts(type_=<span class="string">&quot;scroll&quot;</span>, pos_left=<span class="string">&quot;left&quot;</span>, orient=<span class="string">&quot;vertical&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">        .render(<span class="string">&quot;./Reports/西安市求职招聘行业工资分析(Top15).html&quot;</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>类似地，我们这里取排名前 15 位的行业进行分析：</p>
<p><img src="https://i.loli.net/2020/12/05/tmCRyAsQoNprwIi.png" alt="西安市求职招聘行业工资分析"></p>
<p>可以注意到，工资收入靠前的行业主要集中在：<strong>互联网&#x2F;移动互联网&#x2F;计算机软件&#x2F;电子商务、信托&#x2F;拍卖&#x2F;典当&#x2F;担保、 智能硬件、法律、学术&#x2F;科研、保险、房地产、金融&#x2F;投资&#x2F;证券、美容&#x2F;保健</strong>等行业。可惜，从一名 IT 行业从业者的角度来看，西安实际上并没有真正的互联网公司。这个世界常常如此，每个月挣 15K 的人感慨自己买不起房，可还有那么多收入在 8K 以下的人群，还能再说什么呢？</p>
<h2 id="学历与薪资关系分析"><a href="#学历与薪资关系分析" class="headerlink" title="学历与薪资关系分析"></a>学历与薪资关系分析</h2><p>通常大家都认为，学历越高，薪资就会越高，那么，这个是否符合实际情况呢，我们一起来看一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_eduInfo_salary</span>(<span class="params">industry=<span class="literal">None</span></span>):</span><br><span class="line">    filtered = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;avgSalary&#x27;</span>] != <span class="number">0</span>, jobs))</span><br><span class="line">    <span class="keyword">if</span> (industry != <span class="literal">None</span>):</span><br><span class="line">        filtered = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;industry&#x27;</span>] == industry, filtered))</span><br><span class="line">    salaries = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> job <span class="keyword">in</span> filtered:</span><br><span class="line">        <span class="keyword">if</span> (job[<span class="string">&#x27;eduInfo&#x27;</span>] == <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        eduInfo = job[<span class="string">&#x27;eduInfo&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> (eduInfo <span class="keyword">in</span> [<span class="string">&#x27;学历不限&#x27;</span>,<span class="string">&#x27;不限&#x27;</span>]):</span><br><span class="line">            eduInfo = <span class="string">&#x27;学历不限&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> salaries.get(eduInfo) == <span class="literal">None</span>:</span><br><span class="line">            salaries[eduInfo] = [job[<span class="string">&#x27;avgSalary&#x27;</span>]]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            salaries[eduInfo].append(job[<span class="string">&#x27;avgSalary&#x27;</span>])</span><br><span class="line">    counter = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (eduInfo, data) <span class="keyword">in</span> salaries.items():</span><br><span class="line">        counter[eduInfo] = <span class="built_in">int</span>(<span class="built_in">sum</span>(data) / <span class="built_in">len</span>(data))</span><br><span class="line">    c = (</span><br><span class="line">        Bar()</span><br><span class="line">        .add_xaxis(<span class="built_in">list</span>(counter.keys()))</span><br><span class="line">        .add_yaxis(<span class="string">&quot;平均工资&quot;</span>, <span class="built_in">list</span>(counter.values()))</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(title=<span class="string">&quot;西安市求职招聘学历与薪资关系分析&quot;</span>, pos_left=<span class="number">325</span>),</span><br><span class="line">            legend_opts=opts.LegendOpts(type_=<span class="string">&quot;scroll&quot;</span>, pos_left=<span class="string">&quot;left&quot;</span>, orient=<span class="string">&quot;vertical&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">        .render(<span class="string">&quot;./Reports/西安市求职招聘学历与薪资关系分析.html&quot;</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>下面给出可视化以后的结果：</p>
<p><img src="https://i.loli.net/2020/12/05/is8xmczXKDFqEvp.png" alt="西安市求职招聘学历与薪资关系分析"></p>
<p>可以发现，整体上学历和薪资是呈正比的，甚至“不限学历”比“高中”的工资还要高一点。可如果有那么多“不限学历”的工作，为什么今年还有那么多人找不到工作呢？我想，这就是我们常说的选择，我们之所以付出努力，无非是想比别人多一点选择，可正如纳什均衡理论所言，如果我们大家都去选择相同的东西，最后的结果可能是大家都得不到这样东西。可话又说回来，明明都知道那个行业热门，如果不做这个选择，反而才是最奇怪的吧……</p>
<h2 id="经验与薪资关系分析"><a href="#经验与薪资关系分析" class="headerlink" title="经验与薪资关系分析"></a>经验与薪资关系分析</h2><p>如果说学历与薪资呈正比，那么经验与薪资则不一定满足这样的关系，因为经验其实是一个不准确的“度量”单位。以 IT 行业为例，在一家公司里，老员工的薪资被新员工的薪资“倒挂”是经常发生的事情。所以，人们似乎达成了某种共识，即期待公司主动涨薪是非常困难的，你唯一能做的就是在面试时争取更多的薪资。这就要说到经验这个话题，IT 行业技术日新月异的特点，实在很难让经验变成一个“褒义词”，因为经验在积累的同时同样在“过期”，更不用说那些一直在“重复”的人了，所以，我觉得掌握通用型的知识譬如算法、数据结构等会更重要。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_exps_salary</span>(<span class="params">industry=<span class="literal">None</span></span>):</span><br><span class="line">    filtered = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;avgSalary&#x27;</span>] != <span class="number">0</span>, jobs))</span><br><span class="line">    <span class="keyword">if</span> (industry != <span class="literal">None</span>):</span><br><span class="line">        filtered = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;industry&#x27;</span>] == industry, filtered))</span><br><span class="line">    salaries = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> job <span class="keyword">in</span> filtered:</span><br><span class="line">        <span class="keyword">if</span> (job[<span class="string">&#x27;exps&#x27;</span>] == <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        exps = job[<span class="string">&#x27;exps&#x27;</span>]</span><br><span class="line">        exps = exps.replace(<span class="string">&#x27;经验&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (exps <span class="keyword">in</span> [<span class="string">&#x27;1年&#x27;</span>,<span class="string">&#x27;1年以内&#x27;</span>,<span class="string">&#x27;2年&#x27;</span>,<span class="string">&#x27;1-3年&#x27;</span>]):</span><br><span class="line">            exps = <span class="string">&#x27;1-3年&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (exps <span class="keyword">in</span> [<span class="string">&#x27;不限&#x27;</span>,<span class="string">&#x27;经验不限&#x27;</span>]):</span><br><span class="line">            exps = <span class="string">&#x27;经验不限&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (exps <span class="keyword">in</span> [<span class="string">&#x27;3到4年&#x27;</span>,<span class="string">&#x27;3到5年&#x27;</span>,<span class="string">&#x27;3-4年&#x27;</span>,<span class="string">&#x27;3-5年&#x27;</span>]):</span><br><span class="line">            exps = <span class="string">&#x27;3-5年&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> (exps <span class="keyword">in</span> [<span class="string">&#x27;8到9年&#x27;</span>,<span class="string">&#x27;5到10年&#x27;</span>,<span class="string">&#x27;5到7年&#x27;</span>,<span class="string">&#x27;8-9年&#x27;</span>,<span class="string">&#x27;5-10年&#x27;</span>,<span class="string">&#x27;5-7年&#x27;</span>]):</span><br><span class="line">            exps = <span class="string">&#x27;5-10年&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> salaries.get(exps) == <span class="literal">None</span>:</span><br><span class="line">            salaries[exps] = [job[<span class="string">&#x27;avgSalary&#x27;</span>]]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            salaries[exps].append(job[<span class="string">&#x27;avgSalary&#x27;</span>])</span><br><span class="line">    counter = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> (industry, data) <span class="keyword">in</span> salaries.items():</span><br><span class="line">        counter[industry] = <span class="built_in">int</span>(<span class="built_in">sum</span>(data) / <span class="built_in">len</span>(data))</span><br><span class="line">    c = (</span><br><span class="line">        Bar()</span><br><span class="line">        .add_xaxis(<span class="built_in">list</span>(counter.keys()))</span><br><span class="line">        .add_yaxis(<span class="string">&quot;平均工资&quot;</span>, <span class="built_in">list</span>(counter.values()))</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(title=<span class="string">&quot;西安市求职招聘工作经验与薪资关系分析&quot;</span>, pos_left=<span class="number">325</span>),</span><br><span class="line">            legend_opts=opts.LegendOpts(type_=<span class="string">&quot;scroll&quot;</span>, pos_left=<span class="string">&quot;left&quot;</span>, orient=<span class="string">&quot;vertical&quot;</span>),</span><br><span class="line">        )</span><br><span class="line">        .render(<span class="string">&quot;./Reports/西安市求职招聘工作经验与薪资关系分析.html&quot;</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>一切都会向着我们期待的方向发展吗？我们拭目以待：</p>
<p><img src="https://i.loli.net/2020/12/05/XOUBgy2AJqHRQWs.png" alt="西安市求职招聘工作经验与薪资关系分析"></p>
<p>可以发现，整体上，经验越丰富，薪资待遇会越高。前提是你真的收获了经验，而不是在岁月的蹉跎里单单收获了皱纹和沧桑。这是我们每个人都应该去反思的一个问题，如果一切的经验都有过时的那一天，至少你真的拥有过它们，就像爱情这种东西一样。</p>
<h2 id="招聘热词分析"><a href="#招聘热词分析" class="headerlink" title="招聘热词分析"></a>招聘热词分析</h2><p>在招聘网站上，一般都会以标签的方式，对职位要求、公司福利等进行描述，譬如五险一金、弹性打卡等等，通过这些标签，我们就能对职位以及公司有个基本印象。所以，我们可以通过分析这些标签，来展示在求职过程中求职者和招聘方各自关注哪些因素。下面，我们将以词云的形式来展示这些标签：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提取岗位关键字</span></span><br><span class="line">job_tags = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;tags&#x27;</span>], jobs):</span><br><span class="line">    <span class="keyword">if</span> (item != <span class="literal">None</span>):</span><br><span class="line">        job_tags.extend(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取公司关键字</span></span><br><span class="line">company_tags = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> <span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="string">&#x27;tags&#x27;</span>], companies):</span><br><span class="line">    <span class="keyword">if</span> (item != <span class="literal">None</span>):</span><br><span class="line">        company_tags.extend(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">analyse_extract_tags</span>(<span class="params">words,title</span>):</span><br><span class="line">    words = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x!=<span class="string">&#x27;&#x27;</span>, words))</span><br><span class="line">    data = Counter(words)</span><br><span class="line">    c= (</span><br><span class="line">        WordCloud()</span><br><span class="line">        .add(series_name=<span class="string">&quot;热门词汇&quot;</span>, data_pair=data.items(), word_size_range=[<span class="number">6</span>, <span class="number">66</span>])</span><br><span class="line">        .set_global_opts(</span><br><span class="line">            title_opts=opts.TitleOpts(</span><br><span class="line">                title=title, title_textstyle_opts=opts.TextStyleOpts(font_size=<span class="number">23</span>)</span><br><span class="line">            ),</span><br><span class="line">            tooltip_opts=opts.TooltipOpts(is_show=<span class="literal">True</span>),</span><br><span class="line">        )</span><br><span class="line">        .render(<span class="string">&#x27;.\Reports\&#123;title&#125;.html&#x27;</span>.<span class="built_in">format</span>(title=title))</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">analyse_extract_tags(</span><br><span class="line">    words=job_tags,</span><br><span class="line">    title=<span class="string">&#x27;西安市求职者热词分析&#x27;</span></span><br><span class="line">)</span><br><span class="line">analyse_extract_tags(</span><br><span class="line">    words=company_tags,</span><br><span class="line">    title=<span class="string">&#x27;西安市招聘者热词分析&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/12/05/FskJfB9ctKQ2yUN.png" alt="西安市求职者热词分析"></p>
<p><img src="https://i.loli.net/2020/12/05/dNmkAXMCDE918xP.png" alt="西安市招聘者热词分析"></p>
<p>可以注意到，<strong>五险一金、年终奖金、专业培训、绩效奖金、节日福利、带薪年假</strong>是大家普遍关注的点。</p>
<h1 id="本文小结"><a href="#本文小结" class="headerlink" title="本文小结"></a>本文小结</h1><p>本文主要抓取了 Boss 直聘、智联招聘、前程无忧三个招聘网站的职位信息和公司信息，并在此基础上对西安市的求职招聘进行了数据分析，主要从行业结构、学历结构、薪资待遇、学历与薪资关系、经验与薪资关系、招聘热词等方面入手，经分析，针对西安市的求职招聘的求职招聘，我们可以得出下面的结论：(1)西安市排名相对靠前的行业主要有：<strong>房地产、建筑&#x2F;建材&#x2F;工程、计算机软件、电子技术&#x2F;半导体&#x2F;集成电路、教育&#x2F;培训&#x2F;院校</strong>等；(2)西安市招聘的职位中<strong>大专和本科</strong>学历约占总职位的 75%左右，硕士以及博士学历相对较低；(3)西安市的平均薪资中，<strong>5000~8000</strong>这个收入区间是大多数普通人的真实写照，工资收入靠前的行业主要集中在：<strong>互联网&#x2F;移动互联网&#x2F;计算机软件&#x2F;电子商务、信托&#x2F;拍卖&#x2F;典当&#x2F;担保、 智能硬件、法律、学术&#x2F;科研、保险、房地产、金融&#x2F;投资&#x2F;证券、美容&#x2F;保健</strong>等行业；(4)拥有高学历的人更有可能拥有高薪资；(5)整体上，经验越丰富，薪资待遇会越高。前提是你真的收获了经验，而不是在岁月的蹉跎里单单收获了皱纹和沧桑；(6)在整个求职招聘中，无论是求职者还是招聘者，普遍看重的因素有：<strong>五险一金、年终奖金、专业培训、绩效奖金、节日福利、带薪年假</strong>等。虽然一开始的目的是想知道西安有多少“996”的公司，不过在后续的实现过程中，发现从 Boss 直聘上抓取不到这些信息，所以，最终呈现出的结果就变成了现在这个样子，考虑到篇幅，关于公司规模、公司类型的分析，没有在这里写出来，如果大家感兴趣，可以参考：<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/job-analyse/tree/master">https://github.com/qinyuanpei/job-analyse/tree/master</a>。以上就是这篇博客的全部内容啦，谢谢大家！</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-12-3-tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-12-3-tools/" itemprop="url">首席工具人的我，是怎样挖到一个又一个神器的｜我的工具观</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-03T00:00:00+00:00">
                2020-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>前两天看到一位网友分享的选择「效率工具」的三原则：</p>
<blockquote>
<p>上手简单<br>核心优势<br>解决问题</p>
</blockquote>
<p>看了他分享的这三个原则，我也想试着说一下，我找了这么多工具形成的「工具观」：</p>
<h2 id="贵精不贵多"><a href="#贵精不贵多" class="headerlink" title="贵精不贵多"></a>贵精不贵多</h2><p>把一个工具用好，远好过你去找多个同类的工具；在满足基本需求的情况下，才去考虑找一些稍微大而全的工具。</p>
<p>例如最开始我是用 TinyPNG 来压缩图片，但这个在线工具有个缺点，它只能在线压缩 5 MB 的图片；后来我找到了一个更好用的替代品——docsmall，它除了可以压缩图片，还可以压缩 Gif 和 PDF 文档，记住了一个工具，其实也让我记住了多个，减轻了大脑的记忆负担。</p>
<h2 id="找到工具的最佳使用场景"><a href="#找到工具的最佳使用场景" class="headerlink" title="找到工具的最佳使用场景"></a>找到工具的最佳使用场景</h2><p>找到符合工具本身的使用场景，或者说明确某个工具的边界（上限）。有些工具在某个场景下非常好用，但一旦超过某个界限，它就会显得力不从心了，但我不会因为它在某个场景下不适用，就把它归类到不好的工具里面。</p>
<p>例如，文件分享工具「蓝奏云」在分享 100 MB 以下的文件时，就非常好用，可以准确监测分享文件的下载量，但当分享的文件超出 100 MB 时，蓝奏云就派不上用场了，但这并不妨碍我称蓝奏云是一个好工具。</p>
<h2 id="转换思路，适当融合"><a href="#转换思路，适当融合" class="headerlink" title="转换思路，适当融合"></a>转换思路，适当融合</h2><p>适当融合，以认知范围内的工具去解决未知的问题。</p>
<p>这个说起来有点虚，还是举个例子：有人遇到一个问题，iPad 自带的录屏功能不能实现长时间录屏，录到一半会自动中断，来询问我该使用什么工具？</p>
<p>起初遇到这个问题，我的首要想法是，找一下 iPad 上有什么好用的第三方录屏工具，但试用了一个 iPad 上的第三方录屏工具后，我就放弃了，因为它需要付费，这对低频使用的工具来说非常不划算。</p>
<p>后来我灵机一动，想到了另外一个免费的解决方法：将 iPad 投屏到电脑上，再使用电脑的录屏软件进行录屏，就顺利地将原先的问题转换为——如何投屏到电脑，以及在电脑上使用什么工具进行录屏？转换之后的两个问题，对我来说都不是问题了。</p>
<blockquote>
<p>投屏工具选择 iTools 投屏大师。<br>电脑录屏工具选择 EV 录屏或者 OBS。</p>
</blockquote>
<p>表面上我们是在找工具，实际上，我们还是在寻找解决问题的最佳方案或者次优方案。   </p>
<h2 id="其他挑选工具的原则"><a href="#其他挑选工具的原则" class="headerlink" title="其他挑选工具的原则"></a>其他挑选工具的原则</h2><ul>
<li>在满足自身需求（能帮你解决遇到的问题）的条件下，再考虑产品的颜值或用户体验。</li>
<li>优先选用行业知名软件。例如做设计的人，可能会优先选用 Adobe 全家桶，而不是使用一些小众产品。</li>
<li>从可靠优质的信息源获得工具推荐。例如小众软件、国外的 Product Hunt。  </li>
<li>注意甄别，识别推广。不管什么平台，有流量的地方就存在付费推广，包括你以为可以信任的某个工具大 V 或博主，之所以推荐某个工具，还是因为他收了钱，不得不一顿瞎吹它有多么好用，实际上它真的没有那么好用。  </li>
<li>开源免费 &gt; 免费 &gt; 收费。多数情况是这样，但这个原则并不是一成不变的，因为有些免费软件的吃相真的很难看，比如 360 浏览器、2345 全家桶，如果市场只剩这些免费的垃圾软件，我还是宁愿使用付费的。 </li>
<li>支持你喜欢的产品。你不氪金我不氪金，良心终会变心。支持并不一定是物质上的，你也可以用你的实际行动，把你喜欢的产品安利给身边的人。</li>
<li>不以使用盗版软件为荣，不以白嫖产品为傲。  </li>
<li>保持好奇心，用好搜索。</li>
</ul>
<p>以上，希望有帮助。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-12-1-25birthday/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-12-1-25birthday/" itemprop="url">25 岁来临前的感言</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-12-01T00:00:00+00:00">
                2020-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>music：Life is wonderful - Jason Mraz<br><audio src="https://win-web-rh01-sycdn.kuwo.cn/36adf0875f39fbcc63c6de199354e5d7/5fc63ec2/resource/n1/62/30/4205227431.mp3" type="audion"></audio></p>
<p>在老家，我们那边的传统都倾向于算虚岁，从妈妈的肚子里出来，就默认是 1 岁了，所以我妈总会把我算「大」了，似乎总想让我快一点长大，在每一年新年伊始的时候，喜欢对我说一些这样的话：</p>
<blockquote>
<p>一年多一岁，你不能再这样了，你得更「会说话」、更成熟一点、找一份更好的职业……</p>
</blockquote>
<p>每年换一句，末了还不忘捎上一句，啥时候娶老婆呢？  </p>
<p>我自认为自己是个腼腆、无趣、在人群中不会发光、不会开玩笑、不幽默、不主动社交、不善于维护关系、没有亲和力、没有人格魅力的人，这么多年下来，只剩下两只手指头数得过来的可以称作朋友的人（异性朋友几乎没有），多少可以算是一种印证。</p>
<p>小时候我爸就看出了我性格内向孤僻，也时常鼓励我说，「不要太内向，要开朗一点」，但我多数时候还是停在原地，任其自然发展，以至于长大之后有一回我爸看见我小时候的照片，发出一声：  </p>
<blockquote>
<p>笑容真灿烂。</p>
</blockquote>
<p><img src="http://cdn.penghh.fun/mweb/IMG_4650.jpg" alt="IMG_4650">那是 2016 年的寒假，当他说那句话的时候，虽然用的不是叹息的语气，但我觉得自己听出了感慨的意味，那时在自己的朋友圈发了一条仅自己可见的动态：</p>
<blockquote>
<p>我是有多久没在爸爸面前灿烂、很放开地笑过一回了。 </p>
</blockquote>
<p>我也自认为自己是个慢性子的人，做啥都慢，好像总比别人慢几拍。在家洗碗拖地慢，干活挑料（这里的挑料是指废弃塑料分类）慢，学习理解得慢。</p>
<p>我妈小时候总在为我的慢性子担忧，她说：</p>
<blockquote>
<p>以后你要是出去给人干活，手脚这样慢，怎么能吃得上饭呢？</p>
</blockquote>
<p>当然，她不仅会为我发愁，也会给我想一些解决方法：</p>
<blockquote>
<p>要是监工的老板来看你干活，你可要把手脚装得麻利一点，不要给人捉住把柄。</p>
</blockquote>
<p>幸运的是，毕业两年多，我还是活得比妈妈以前预想的要好一些，我没有成为一名靠出卖体力挣钱的塑料加工从业者。  </p>
<p>说到塑料加工，它让我想起了遥远的高三毕业后的那个夏天。</p>
<p>那个夏天我第一次去到外面打工，那个工厂在离我家有 50、60 公里的金平区，因而晚上是住在工厂后边的铁皮宿舍。</p>
<p>那是高三的一位朋友给我介绍的工作，起初听他说这个厂是做玩具的，去到里面做了一阵子，和其他人交流之后才知道，这个工厂生产的东西是给去世的人准备的，而且主要销往国外。</p>
<p>看着手里捧着的撒满金粉的塑料花，周边的各种圆形的泡沫制品，起初我是不能理解和接受的，因为我觉得，人死了就死了，为啥还要折磨活着的人呢？</p>
<p>这里活着的人特指我自己，因为那段打工经历确实很辛苦，一天工作十二个小时，傍晚吃完饭还要上夜班，只有 75 块钱，晚上下班后还要奔跑着回宿舍，抢公共厕所洗澡，洗完还要自己手洗衣服。</p>
<p>那时候每天最幸福的时刻，就是晾完衣服，去工厂外边的小卖部或者超市买汽水或冰淇淋，然后就拖着疲惫的身子爬上床，等待睡意来临，一夜睡到天亮，不会受到失眠的困扰。  </p>
<p>这段经历，让我愈发觉得，以后还是得找一份体面一些的工作，至少不要出卖体力，而且有一些空闲时间留给自己。没了空闲的时间，我就不是我自己了。</p>
<p>自己的往事就聊到这，接下来想谈谈我近些年的感悟，也和知乎上以前看到的一个很火的问题「20岁做什么，可在 5 年后受益匪浅」有关。</p>
<p>现在我已经到了 25 岁的年纪，到了可以以一种「上帝视角」来回答这个问题。</p>
<p>如果能让我穿越回去，我一定会：</p>
<h2 id="重视公众号写作"><a href="#重视公众号写作" class="headerlink" title="重视公众号写作"></a>重视公众号写作</h2><p>坚持写公众号，而不是有一搭没一搭地写。多数人对未来的预判总有局限性，在没能足够看清未来的方向时，投入精力或时间做某一件事，总是显得<strong>患得患失</strong>，不够重视，尤其是在那种<strong>短期没有回报、不重要不紧急</strong>的事情上。</p>
<h2 id="大胆追求爱"><a href="#大胆追求爱" class="headerlink" title="大胆追求爱"></a>大胆追求爱</h2><p>大胆去爱，大胆向别人表达自己的情感，不要害怕被拒绝，不要害怕受伤。20-25 岁是一个风华正茂的年纪，不谈恋爱等着老来相亲或懊悔吗？</p>
<p>有些人还没谈恋爱，就提前发愁说，想到以后要和某个人待在一起生活一辈子，觉得这事就不太可能。</p>
<p>首先，可能是他们没做好一个心理准备：接受未来婚姻会出现失败的可能。能接受存在失败的可能性，才能勇敢、无包袱地踏出去。</p>
<p>其次，可能是你所爱非人。我之前曾看过一位博主表达的观点，衡量一个伴侣最重要的标准在于：是否具备成长性思维，即是否愿意改变自己。尽量远离那些口头禅是「我就是这样，你还要我怎么办」的人。</p>
<p>我承认，两个人在一起久了，难免会出现「腻」的情况，但这并不可怕，关键在于两人是否会做出改变，努力试着共同创造新的体验，例如试着一起去做对方喜欢而你还没不感兴趣的东西。  </p>
<p>由于我不是情感博主，感情经历也不丰富，只能点到为止，关于恋爱的更多内容，可以参考这篇文章：</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/OzLVA8iXsQeDmXknwzn9rw">人生最重要的选择是什么？</a></p>
<h2 id="不要说服别人"><a href="#不要说服别人" class="headerlink" title="不要说服别人"></a>不要说服别人</h2><p>有些朋友看到我写的是电脑 &amp; 软件相关的内容，以为我对电子产品了若指掌（其实我懂的只是一点皮毛，真没有别人想象中的那么多），会来咨询我购买手机、电脑和平板电脑的建议，由于我是果粉，我会强烈建议他们买苹果的产品。</p>
<p>但后来我发现我错了，那纯粹就是浪费口舌，也让我明白了一个道理：</p>
<p><strong>世界上最没用的事情，就是说服别人</strong>，例如说服别人买某个东西。</p>
<p>这件事有多浪费时间呢？你要苦口婆心跟他说产品的优点在哪，买哪个型号，给他找好产品的链接……</p>
<p>到最后，来问我的人，大概率都会说：</p>
<blockquote>
<p>算了，还是买 Windows 笔记本 &#x2F; 安卓平板好了。</p>
</blockquote>
<p>听完一口老血差点吐出来。</p>
<p>以后不再劝别人买苹果的东西了，爱咋咋滴。  </p>
<h2 id="不要随便把别人当成朋友"><a href="#不要随便把别人当成朋友" class="headerlink" title="不要随便把别人当成朋友"></a>不要随便把别人当成朋友</h2><p>不要随便把别人当成可以说真心话的朋友，世上真没有多少可以称作朋友的。</p>
<p>你以为某人把你当成朋友，以为可以交心，但这可能只是因为你暂时对他有价值，而不是因为彼此的特质相互欣赏。</p>
<h2 id="不要做一个害怕拒绝别人的「老好人」"><a href="#不要做一个害怕拒绝别人的「老好人」" class="headerlink" title="不要做一个害怕拒绝别人的「老好人」"></a>不要做一个害怕拒绝别人的「老好人」</h2><p>老好人、暖男、中央空调，这三个词好像是等价的，在如今的语境中都算是贬义词。</p>
<p>上大学的时候，有人就给我起了个暖男的外号，为什么呢？因为每次吃饭的时候，我都会从书包里掏出一包抽式的纸巾，不管在场有多少人，一包这样的纸巾基本能满足所有人的需求（我真是体贴到家……），但不开玩笑地说，其实我非常讨厌这个外号……</p>
<p>说回正事，之所以害怕拒绝别人，还是因为我们过于在意我们在别人眼里的形象或者他人的看法，正因为在意，反而越不敢轻易拒绝别人，害怕一次的拒绝，就会让以前建立的「光辉形象」化为乌有……</p>
<p>害怕拒绝别人的人，会让人觉得你没有原则，时间很廉价，可以随意驱使。</p>
<p>不敢拒绝，硬是把超出自己能力范围的事情扛下来，后续接踵而来让你烦恼的事情，可能会远远超出一次拒绝需要花费的心力。</p>
<p>心理学上有个术语叫「<strong>课题分离</strong>」，这是心理学家阿尔弗雷德·阿德勒提出的理论，大意是，要想解决人际关系的烦恼，就要区分什么是你的课题，什么是我的课题。</p>
<p>你是否要拒绝别人是你的课题，别人被拒绝之后心里怎么想是他的课题，区分好这两者，可以解决大多数烦恼和纠结。</p>
<p>对了，一个被拒绝一次之后就觉得很受伤的人，其实也不值得深交。</p>
<p>理智起见，选择适当地拒绝别人，反倒落得轻松自在。</p>
<p>以上。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/post/41f45ee.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/41f45ee.html" itemprop="url">Mac 上配置 MNMP 环境</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-30T13:38:14+00:00">
                2020-11-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天打算实践一下 Wordpress 主题开发，但由于电脑上没有 PHP 和 MySQL 的环境，于是折腾了一下，结果发现安装配置过程一堆的坑，虽然最终选择了 Docker 环境开发，但毕竟已经踩坑了，就记录一下。</p>
<p>本文记录如何在 Mac OS 上配置 Ngnix + PHP + MySQL，以及最后如何成功安装 Wordpress。</p>
<p><a name="UovYc"></a></p>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p><a name="EeiNv"></a></p>
<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><p><a name="8LI7s"></a></p>
<h4 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure>

<p><a name="rc4Yt"></a></p>
<h4 id="2-开启"><a href="#2-开启" class="headerlink" title="2. 开启"></a>2. 开启</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">brew services start nginx</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">brew services stop nginx</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">brew services restart nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开机启动</span></span><br><span class="line">sudo <span class="built_in">cp</span> /usr/local/opt/nginx/homebrew.mxcl.nginx.plist /Library/LaunchDaemons/</span><br><span class="line">sudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.nginx.plist</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭开机启动</span></span><br><span class="line">sudo launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br></pre></td></tr></table></figure>

<p><a name="HpcvU"></a></p>
<h4 id="3-访问"><a href="#3-访问" class="headerlink" title="3. 访问"></a>3. 访问</h4><p>nginx 默认监听 8080 端口，可以这样看一下是否能够访问：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl localhost:8080</span><br><span class="line"></span><br><span class="line"><span class="comment">## 看到这个返回表示 ok</span></span><br><span class="line"></span><br><span class="line">&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><a name="lqRdT"></a></p>
<h4 id="4-配置主机"><a href="#4-配置主机" class="headerlink" title="4. 配置主机"></a>4. 配置主机</h4><p>为了方便管理，我们在 nginx 配置目录下的 <code>servers</code>   新增一个配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/etc/nginx/servers/www.conf</span><br></pre></td></tr></table></figure>

<p>并填充以下内容：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">  	<span class="comment"># 如果需要域名访问的话，注意需要修改 /etc/hosts 文件</span></span><br><span class="line">    <span class="comment"># server_name  4ark.dev;</span></span><br><span class="line">  	<span class="comment"># 项目根目录</span></span><br><span class="line">    <span class="attribute">root</span> /Users/4ark/www;</span><br><span class="line"></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">index</span> index.php index.html;</span><br><span class="line">        <span class="attribute">autoindex</span> <span class="literal">on</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：最好每个项目都单独一个配置文件。</p>
<p>从上面的配置可以看到我们将项目放在用户下的 <code>www</code>   下，在这个目录新建一个 html 文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/www</span><br><span class="line"></span><br><span class="line">vim ~/www/index.html</span><br></pre></td></tr></table></figure>

<p>这时候重启一下 nginx 服务，访问刚刚配置的主机，就可以访问到上面这个 html 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew services restart nginx</span><br><span class="line"></span><br><span class="line">curl localhost</span><br></pre></td></tr></table></figure>

<p><a name="Qdk9Q"></a></p>
<h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><p><a name="CezDV"></a></p>
<h4 id="1-安装-1"><a href="#1-安装-1" class="headerlink" title="1. 安装"></a>1. 安装</h4><p>Mac 已经自带有 PHP，你可以通过以下命令查看本机是否存在 PHP：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew list | grep php</span><br></pre></td></tr></table></figure>

<p>如果没有，或者你想安装其他版本的话，那就先安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以先搜索以下是否有你想要的版本</span></span><br><span class="line">brew search php</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 php 7.3</span></span><br><span class="line">brew search php@7.3</span><br></pre></td></tr></table></figure>

<p><a name="qlUNa"></a></p>
<h4 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h4><p>配置 php-fpm 权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/etc/php/7.3/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>

<p>修改如下：</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- user = _www</span></span><br><span class="line"><span class="addition">+ user = 4ark # 你的用户名</span></span><br><span class="line">group = _www</span><br></pre></td></tr></table></figure>

<p>如果正在运行 php-fpm，那就先关闭</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo killall php-fpm</span><br></pre></td></tr></table></figure>

<p>然后启动：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo php-fpm -D</span><br></pre></td></tr></table></figure>

<p>这时候如果遇到以下报错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR: failed to open configuration file <span class="string">&#x27;/private/etc/php-fpm.conf&#x27;</span>: No such file or directory (2)</span><br><span class="line">ERROR: failed to load configuration file <span class="string">&#x27;/private/etc/php-fpm.conf&#x27;</span></span><br><span class="line">ERROR: FPM initialization failed</span><br></pre></td></tr></table></figure>

<p>错误信息显示，不能打开配置文件， <code>cd /private/etc</code> ，发现没有  <strong>php-fpm.conf</strong>  文件，但是有  <strong>php-fpm.conf.default</strong>  文件。这个文件是默认配置，我们可以复制一份，改名为  <strong>php-fpm.conf</strong>，然后再根据需要改动配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">cp</span> /private/etc/php-fpm.d/www.conf.default /private/etc/php-fpm.d/www.conf</span><br></pre></td></tr></table></figure>

<p>执行   <code>php-fpm</code> ，再次报错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR: failed to open error_log (/usr/var/log/php-fpm.log): No such file or directory (2)</span><br><span class="line">ERROR: failed to post process the configuration</span><br><span class="line">ERROR: FPM initialization failed</span><br></pre></td></tr></table></figure>

<p>错误信息显示，不能打开错误日志文件。 <code>cd /usr/var/log</code>   发现根本没有这个目录，甚至连  <strong>var</strong>  目录都没有，加上为了避免权限问题，干脆配置到  <strong>&#x2F;usr&#x2F;local&#x2F;var&#x2F;log</strong>  目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /private/etc/php-fpm.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 error_log 改为 /usr/local/var/log/php-fpm.log</span></span><br><span class="line">error_log = /usr/local/var/log/php-fpm.log</span><br></pre></td></tr></table></figure>

<p>执行   <code>sudo php-fpm</code> ，再次报错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: unable to <span class="built_in">bind</span> listening socket <span class="keyword">for</span> address <span class="string">&#x27;127.0.0.1:9000&#x27;</span>: Address already <span class="keyword">in</span> use (48)</span><br><span class="line">ERROR: FPM initialization failed</span><br></pre></td></tr></table></figure>

<p>说是 9000 端口被占用了，但 <code>lsof -i:9000</code>   又看不见，于是只能换个端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /private/etc/php-fpm.d/www.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改监听端口为 9999</span></span><br><span class="line">listen = 9999</span><br></pre></td></tr></table></figure>

<p>再执行 <code>sudo php-fpm -D</code>  ，就能够正常启动了。</p>
<p><a name="Ih0Fu"></a></p>
<h4 id="3-配置-nginx"><a href="#3-配置-nginx" class="headerlink" title="3. 配置 nginx"></a>3. 配置 nginx</h4><p>这时候我们修改 nginx 的主机配置，使它支持 PHP</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  4ark.dev;</span><br><span class="line">    root /Users/4ark/www;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        index index.php index.html;</span><br><span class="line">        autoindex on;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="addition">+    location ~ \.php$ &#123;</span></span><br><span class="line"><span class="addition">+        fastcgi_pass   127.0.0.1:9999;</span></span><br><span class="line"><span class="addition">+        fastcgi_index  index.php;</span></span><br><span class="line"><span class="addition">+        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span></span><br><span class="line"><span class="addition">+        include        fastcgi_params;</span></span><br><span class="line"><span class="addition">+    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后重启 nginx 服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services restart nginx</span><br></pre></td></tr></table></figure>

<p>这时候在项目根目录新增一个 php 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim ~/www/index.php</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内容</span></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;hello world!&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>测试一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl localhost</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回结果</span></span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>

<p><a name="zJVB5"></a></p>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><p>通常来说 Mac OS 也是自带有 MySQL，你可以通过以下命令查看本机是否存在 MySQL</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew list --formula | grep mysql</span><br></pre></td></tr></table></figure>

<p>如果没有安装的话，那就先安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure>

<p>安装完成以后，会发现并没有让我们设置密码，运行以下进入密码设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure>

<p>设置完密码之后，就可以登录了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"><span class="comment"># 输入密码</span></span><br></pre></td></tr></table></figure>

<p><a name="HeiO2"></a></p>
<h3 id="Wordpress"><a href="#Wordpress" class="headerlink" title="Wordpress"></a>Wordpress</h3><p>环境终于配置好了，终于可以安装 Wordpress 啦，然而事情并没有这么简单，当我满心欢喜把 wordpress 下载到项目根目录下，就好像这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -r ~/download/wordpress ~/www/wordpress</span><br></pre></td></tr></table></figure>

<p>然后我们创建一个数据库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@host]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:******  <span class="comment"># 登录后进入终端</span></span><br><span class="line"></span><br><span class="line">mysql&gt; create DATABASE `wordpress-test`;</span><br></pre></td></tr></table></figure>

<p>然后我们通过浏览器访问 <code>localhost/wordpress</code>  ，就可以看到一个 Wordpress 的安装界面，输入数据库相关的信息后，本以为可以像往常一样成功进入下一步，结果我看到了这个错误：<strong>WordPress 建立数据库连接时出错</strong>。</p>
<p>结果再尝试了几次，确保所有表单都已经填写正确，依然无法正常建立数据库连接，意识到事情可能并没有这么简单， 于是我在网上找到了一个解决方案，大概就是说无法使用 root 进行登录，需要新增一个用户：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on wordpress-test.* to <span class="string">&#x27;wp-test&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;password&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后使用这个用户进行登录，然后在我这里却行不通，依然显示同样的错误，于是我开启一下 <code>debug</code>  ，看一下导致是什么问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> wp-config-sample.php wp-config.php</span><br><span class="line"></span><br><span class="line">vim wp-config.php</span><br></pre></td></tr></table></figure>

<p>做以下改动：</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 填写以下数据库信息</span><br><span class="line"></span><br><span class="line">// ** MySQL 设置 - 具体信息来自您正在使用的主机 ** //</span><br><span class="line">/** WordPress数据库的名称 */</span><br><span class="line">define( &#x27;DB_NAME&#x27;, &#x27;database_name_here&#x27; );</span><br><span class="line"></span><br><span class="line">/** MySQL数据库用户名 */</span><br><span class="line">define( &#x27;DB_USER&#x27;, &#x27;username_here&#x27; );</span><br><span class="line"></span><br><span class="line">/** MySQL数据库密码 */</span><br><span class="line">define( &#x27;DB_PASSWORD&#x27;, &#x27;password_here&#x27; );</span><br><span class="line"></span><br><span class="line">/** MySQL主机 */</span><br><span class="line">define( &#x27;DB_HOST&#x27;, &#x27;localhost&#x27; );</span><br><span class="line"></span><br><span class="line">// 开启 DEBUG</span><br><span class="line"></span><br><span class="line"><span class="deletion">- define(&#x27;WP_DEBUG&#x27;, false);</span></span><br><span class="line"><span class="addition">+ define(&#x27;WP_DEBUG&#x27;, true);</span></span><br></pre></td></tr></table></figure>

<p>再访问一下，可以看到以下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No such file or directory 建立数据库连接时出错</span><br></pre></td></tr></table></figure>

<p>其实原因是 PHP 配置中的 <code>mysql.sock</code>   与本机的 MySQL 中的路径不一致，可以通过这样查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/www/phpinfo.php</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内容</span></span><br><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br></pre></td></tr></table></figure>

<p>然后打开 <code>localhost/phpinfo</code>  ，搜索 <code>default_socket</code>  。</p>
<p>然后再查看 MySQL 的 <code>socket</code>   路径：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@host]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:******  <span class="comment"># 登录后进入终端</span></span><br><span class="line"></span><br><span class="line">mysql&gt; status;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">mysql  Ver 8.0.22 <span class="keyword">for</span> osx10.16 on x86_64 (Homebrew)</span><br><span class="line"></span><br><span class="line">Connection <span class="built_in">id</span>:		114</span><br><span class="line">Current database:</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not <span class="keyword">in</span> use</span><br><span class="line">Current pager:		less</span><br><span class="line">Using outfile:		<span class="string">&#x27;&#x27;</span></span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		8.0.22 Homebrew</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	utf8mb4</span><br><span class="line">Db     characterset:	utf8mb4</span><br><span class="line">Client characterset:	utf8mb4</span><br><span class="line">Conn.  characterset:	utf8mb4</span><br><span class="line">UNIX socket:		/tmp/mysql.sock</span><br><span class="line">Binary data as:		Hexadecimal</span><br><span class="line">Uptime:			14 hours 59 min 44 sec</span><br></pre></td></tr></table></figure>

<p>如果与 PHP 中的 <code>mysql.sock</code>   路径不一致，则需要修改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /private/etc/php.ini.default /private/etc/php.ini</span><br><span class="line"></span><br><span class="line">vim /private/etc/php.ini</span><br><span class="line"></span><br><span class="line"><span class="comment">## 修改为以下</span></span><br><span class="line"></span><br><span class="line">pdo_mysql.default_socket= /tmp/mysql.sock</span><br><span class="line">mysqli.default_socket = /tmp/mysql.sock</span><br></pre></td></tr></table></figure>

<p>然后重启一下 <code>php-fpm</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo killall php-fpm</span><br><span class="line">sudo php-fpm -D</span><br></pre></td></tr></table></figure>

<p>再看看 <code>phpinfo</code>  ，应该就生效了。</p>
<p>然后再尝试登录一下 Wordpress，又发现了以下错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: The server requested authentication method unknown to the client [duplicate]</span><br></pre></td></tr></table></figure>

<p>解决方案如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@host]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password:******  <span class="comment"># 登录后进入终端</span></span><br><span class="line"></span><br><span class="line">mysql&gt; ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password</span><br><span class="line">BY <span class="string">&#x27;your_root_password&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>应该就可以了。</p>
<p><a name="rgfRu"></a></p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a target="_blank" rel="noopener" href="https://ismdeep.com/posts/2020-04-22-install-nginx-mysql-php-on-macos.html">安装 Nginx + MySQL + PHP 环境（ macOS 篇 ）</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/musicode/test/issues/5">[开发环境]Mac 配置 php-fpm</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/52364415/php-with-mysql-8-0-error-the-server-requested-authentication-method-unknown-to">PHP with MySQL 8.0+ error: The server requested authentication method unknown to the client [duplicate]</a></li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-11-29-women-kind/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-11-29-women-kind/" itemprop="url">解剖学角度的女性 - 读《女人这东西》</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-29T14:44:19+00:00">
                2020-11-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <img src="/images/women-kind-book.jpg" width="300px" />

<h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>本书作者 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%B8%A1%E8%BE%B9%E6%B7%B3%E4%B8%80">渡边淳一</a> 是日本文学大师，一生发表 130 多部作品。代表作是<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%A4%B1%E6%A8%82%E5%9C%92_(%E5%B0%8F%E8%AA%AA)">《失乐园》</a>。渡边淳一的作品多描写两性关系，他本人一度任骨科医生，这本《女人这东西》就是他对于女性的一些见解。</p>
<p>以下我的一些读书感悟。</p>
<h2 id="二、感悟"><a href="#二、感悟" class="headerlink" title="二、感悟"></a>二、感悟</h2><h3 id="2-1-男女天生的差异巨大"><a href="#2-1-男女天生的差异巨大" class="headerlink" title="2.1 男女天生的差异巨大"></a>2.1 男女天生的差异巨大</h3><p>书中举了很多例子，表明男性和女性天生就有着巨大差异，差异大到可以想像成不同的物种。这种差异也带了很多男女沟通之间的矛盾。比如：</p>
<ul>
<li><p>女性投入两性生活会令她表现得更加柔和，心情更加欢愉。而男性却会无精打采，疲惫不堪。</p>
</li>
<li><p>又比如女性通常不会对旧爱藕断丝连，而男性通常对于前女友常保持着总有一天可能会再续前缘的心态。</p>
</li>
<li><p>又比如女性通常不会接受没有爱的性，而男性则会把性看成只是性，没有爱有冲动也可能发生性。</p>
</li>
</ul>
<h3 id="2-2-女性的两种快感"><a href="#2-2-女性的两种快感" class="headerlink" title="2.2 女性的两种快感"></a>2.2 女性的两种快感</h3><p>书中还提到了女性的两种快感：阴蒂高潮和阴道高潮。而前者可以通过自慰达到，后者只能通过与男性的交合达到，同时后者带来的快感远大于前者。</p>
<p>作者说这种快感会让女性不断沉迷于性，而男性则不会。因为男性对于性的感受来源于新鲜感，所以只会越来越觉得无趣。</p>
<h3 id="2-3-男女对于婚姻不满的差别"><a href="#2-3-男女对于婚姻不满的差别" class="headerlink" title="2.3 男女对于婚姻不满的差别"></a>2.3 男女对于婚姻不满的差别</h3><p>女性对于婚姻中的不满常常是非常具体的事情，而男性则是心理层面上的：“我到底能不能一辈子永远爱这个女人？” 这个事情的核心差异是：女性随着夫妻生活的发展，其性体验是越来越好的；而男性的性体验，在结婚刚开始的时候是最高的，之后就慢慢下降。</p>
<p>最终维系男性家庭观的核心是精神层面上的爱，而不再是肉体上的爱。所以，男性对婚姻的不满，通常都是精神层面上的。</p>
<h3 id="2-4-性感缺失的女人"><a href="#2-4-性感缺失的女人" class="headerlink" title="2.4 性感缺失的女人"></a>2.4 性感缺失的女人</h3><p>书中提到对于性的感受低的一类女性，这类女性由于过度神经质、坚持自我主张，而无法在婚姻生活中享受到性快乐。因为性快乐需要女性在心理上达到一种牺牲自我的状态。</p>
<p>现代社会对于女性的地位提升，助长了这一类心理问题，作者把这称作女性的非女性化。</p>
<h3 id="2-5-女性的移情"><a href="#2-5-女性的移情" class="headerlink" title="2.5 女性的移情"></a>2.5 女性的移情</h3><p>女性通常有三次移情，刚开始女性会在学校拥有恋人般的同伴朋友。一旦遇上中意的男人，则会全情投入到男人身上。而最后孩子出生，逐渐成长，她又会全情移至孩子身上，将丈夫抛在脑后。</p>
<p>男人通常不会像女性这么移情，即便转移，也无法做到像女性这么果断。这两性的差异核心是来自于荷尔蒙，女性行为的变化其实是来自生理激素的变化。</p>
<h2 id="三、结束语"><a href="#三、结束语" class="headerlink" title="三、结束语"></a>三、结束语</h2><p>这本书的很多观点让我感同身受。我们人类虽然非常厉害，站在食物链的顶端，但是我们毕竟也是经过千百万年进化而来的哺乳动物。</p>
<p>男性与女性的很多差异，来源于原始社会的自然选择。比如男性为了更多地将 DNA 遗传，所以性体验最高的是最初的时候，为了性男性有时候不择手段；而女性因为要照顾孩子，留住家庭，所以性体验却越来越高并且对家庭很专一。这背后都是基因的设计。</p>
<p>我们对于身体基因层面的东西无法改变，只能理解和尽可能适应他。</p>
<p>整个人类种群的繁衍，其实是牺牲了个体的体验，来保证整个种群的利益，这也是自然法则之一。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-11-22-router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-11-22-router/" itemprop="url">不要忽视长期陪伴你的东西</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-22T03:30:00+00:00">
                2020-11-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>之所以想写这个题目，是因为昨天换了一个新的路由器，有感而发，想写一下流水账。</p>
<p>租的房子提前交了未来 6 个月的网费，作为福利，可以免费将家里的网速由之前的 20 Mbps 免费提升到 50 Mbps。</p>
<blockquote>
<p>这里有个小知识，宽带宣传中经常见到的 100 M 高速宽带，用的度量单位其实是 Mbps，其全称为 Million bits per second，意为每秒传输百万位（比特）数量的数据，这里的 bit（比特，1 比特等于 1 个位）是表示<strong>数字信号</strong>数据的最小单位。<br>而我们日常中常说的下载速度多少多少兆，它对应的度量单位是 MB&#x2F;s，其中的 MB 表示 Million Bytes（百万字节），Byte（字节）是计算机用于计量存储容量（<strong>数据存储</strong>）的一种计量单位，比如计算机中文件的大小就是用字节来表示的。<br>字节与比特之间有个换算：1 Byte（字节）&#x3D; 8 bit（比特&#x2F;位），因而宽带商家宣传的 100 M，它的真实速度其实只有 100&#x2F;8 &#x3D; 12.5 MB&#x2F;s。为了方便记忆，你可以将 100 Mbps 理解为约等于 10 MB&#x2F;s。 </p>
</blockquote>
<p>免费提升网速之后，我并没有感觉到明显的变化，反而是经常出现「手机显示 Wifi 连接正常，但就是上不了网」的情况。  </p>
<p>起初我还把原因归结到网络上，但最近真的是受不了了，用 App 给网络测过上行和下载的速度，和装宽带的人聊了一下之后，她发出了一个灵魂拷问：  </p>
<blockquote>
<p>你的路由器是双频的吗？   </p>
</blockquote>
<p>我内心 OS：哈？双频是个啥？（原谅我，到 0202 年我还不知道路由器的双频是个啥东西）   </p>
<p>后来在网上看了一下之前买过的路由器的参数，才发现双频可以简单理解为「发出两个 Wi-Fi 信号」。      </p>
<p>宽带的工作人员还提了一嘴：最好用双频的路由器，信号会稳定一点。    </p>
<p>吸取了之前贪便宜随意买的路由器的教训之后，购买新的路由器之前，我就在一个群里问了一下，一些有这方面经验的朋友给我安利了几个路由器，分别是：   </p>
<table>
<thead>
<tr>
<th>路由器</th>
<th>价格</th>
<th>参数</th>
<th>适用面积</th>
</tr>
</thead>
<tbody><tr>
<td>荣耀 Pro2</td>
<td>219</td>
<td>海思 4 核芯片，双频，内存容量 256 MB</td>
<td>复式&#x2F;别墅（120㎡ 以上）</td>
</tr>
<tr>
<td>红米 AX6</td>
<td>329</td>
<td>高通 4 核芯片，双频，内存容量 512 MB</td>
<td>大户型（90-120㎡）</td>
</tr>
<tr>
<td>领势 AC2200M</td>
<td>899</td>
<td>高通 4 核芯片，三频，内存容量 512 MB，支持 Mesh</td>
<td>复式&#x2F;别墅（120㎡ 以上）</td>
</tr>
<tr>
<td>领势 MX5300</td>
<td>1999</td>
<td>高通 6 核芯片，三频，内存容量 1 G 及以上，支持 Mesh</td>
<td>复式&#x2F;别墅（120㎡ 以上）</td>
</tr>
</tbody></table>
<p>参数大概看看就行（其实我也不太懂），每个路由器的推荐理由：</p>
<blockquote>
<p>荣耀 Pro2：好用、颜值高。它的外形四四方方，像一个大号的骰子，天线内置，与平常看到的天线外置的路由器与众不同，价格也可以接受。<br>红米：高性价比<br>领势：路由器这种耐用品要买个好的</p>
</blockquote>
<p>我最终选择了红米的 AX6 路由器，看重了高通的芯片，因为最近在看一本科技方面的书《浪潮之巅》，对高通、海思、芯片这些东西有了多一点点的认识。   </p>
<p>买回来之后，从前天用到现在体验良好，暂时还没有出现我前面说到的问题——手机显示 Wifi 连接正常，且没有断开，但就是上不了网。  </p>
<p>我使用一个测速 App——<strong>Speedtest</strong>，粗略对比了相同的带宽（50 Mbps）条件下，更换路由器前后的网络速度，下图红色圆角矩形的三个数据是新的路由器的网速，连接的是 5 GHz 频段的 Wi-Fi 信号，而下方的三个测试记录是早前旧路由器的数据，连接的是 2.4 GHz 频段的信号，且测速的时间点不一致，一个是早上和晚上，一个是下午，故这个对比数据也只能大概做个参考。</p>
<p><img src="http://cdn.penghh.fun/mweb/IMG_BDFBBC52318F-1.jpeg" alt="IMG_BDFBBC52318F-1"></p>
<p>经过这次的经历，我更加明白了一个事情：  </p>
<p>千万不要忽视那些会长期陪伴你的耐用品，尤其是高频使用的耐用品，例如手机、电脑，以及这篇文章说的路由器。  </p>
<p>买个好一些的路由器，真的非常非常值得，毕竟它极大地决定了你在网络世界中的虚拟体验。</p>
<p>耐用品不像易耗品那样，用完即「消失」，相反，它会长时间陪伴在你身边，有些显而易见，有些不易察觉，但其实正是这些东西，日积月累下来，才真正地决定了我们的生活质量。  </p>
<p>对了，我之前图便宜买的路由器其实也是小米的，但这回依旧选择了小米家的产品，虽然被坑过，但我第二次还是选择了它 🤦‍♂️——这或许就是爱吧（这可能就是品牌的力量吧）。</p>
<p>客观地说，小米挺多产品确实挺好的，就像一个朋友 @阿混 老师说过的，大意是：  </p>
<blockquote>
<p>所有未经改造的传统用品（尤指家居用品），都需要被小米改造一次。     </p>
</blockquote>
<h2 id="来个互动"><a href="#来个互动" class="headerlink" title="来个互动"></a>来个互动</h2><p><strong>你买过哪些小米家的产品呢？用过之后有值得推荐的吗？</strong></p>
<p>欢迎留言互动（不会没有人留言吧，不会吧不会吧）     </p>
<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><p>除了这篇文章，建议阅读另外一篇写得比我更有深度的文章，也是和路由器有关的：</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/maj5c6ePqYyilqc2oUsHzA">生活别凑合</a>  </p>
<p>以上，希望有帮助，周末愉快。    </p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-11-20-macOStips01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-11-20-macOStips01/" itemprop="url">Mac 使用技巧 01</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-19T16:00:00+00:00">
                2020-11-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>本文首发地址：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/8RjUszGnObqTKLfrLi-FXw">Mac自带输入法如何输入「犇」和「焱」？Mac使用技巧</a>   </p>
<h2 id="更改屏幕分辨率"><a href="#更改屏幕分辨率" class="headerlink" title="更改屏幕分辨率"></a>更改屏幕分辨率</h2><p>打开「系统偏好设置 &gt;&gt; 显示器」，可以更改显示器的分辨率。对于大屏幕的 Mac 电脑，由于文字比较小，一般需要适当地调低分辨率来放大文字。</p>
<p>将分辨率切换到「缩放」，这里提供了 5 种分辨率，中间的选项是默认的分辨率，左侧「较大文字」对应较小的分辨率，右侧「更多空间」对应更大的分辨率，因而文字更小。</p>
<p>为了放大电脑的文字，你可以选择默认选项左侧的两档分辨率，分别是 2048*1152 和 1600*900。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056173580452.jpg" alt="-w704"><br>之前我以为分辨率就只有这五档可供选择，看了网上的内容，才知道其他分辨率选项被隐藏起来了。</p>
<p>按住 Option，点击「缩放」，就可以查看被隐藏的分辨率选项，最低分辨率为 1280*720，如果你再勾选下方的「显示低分辨率模式」，就会看到，同一种分辨率还会分成两类，一类是正常分辨率，另一类是低分辨率。</p>
<p>切换到低分辨率模式下，屏幕会看起来比较模糊，因此不建议使用。<br><img src="http://cdn.penghh.fun/mweb/16056183664124.jpg" alt="-w704"></p>
<h2 id="复制-VS-剪切"><a href="#复制-VS-剪切" class="headerlink" title="复制 VS 剪切"></a>复制 VS 剪切</h2><p>直接拖拽移动是剪切。<br>按住 Option 键拖拽是复制。</p>
<p>当你拖拽一个文件，文件右下角出现一个绿色的加号时，代表复制操作。<br><img src="http://cdn.penghh.fun/mweb/%E6%8B%96%E6%8B%BD%E5%A4%8D%E5%88%B6.gif" alt="拖拽复制"></p>
<h2 id="调整桌面图标大小"><a href="#调整桌面图标大小" class="headerlink" title="调整桌面图标大小"></a>调整桌面图标大小</h2><p>在处于桌面的状态下，点击「显示」选项卡，选择「查看显示选项」。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056608939239.jpg" alt="-w433"><br>在打开的窗口中，就可以看到调整桌面图标大小的选项，你可以根据电脑屏幕大小选择合适的图标大小。</p>
<p>此外，勾选下方的「显示项目简介」，可以让你在不打开文件夹或不展开叠放文件的情况下，了解文件夹中或叠放文件包含的<strong>文件数量</strong>。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056628245983.jpg" alt="-w272"></p>
<p>桌面的「查看显示选项」与文件夹内部的「查看显示选项」设置是不共享的。</p>
<p>如果你想让文件夹内的图片或视频在名称下方显示<strong>分辨率信息</strong>，需要按照前面类似的操作，点击状态栏的「显示 &gt;&gt; 查看显示选项」，勾选「显示项目简介」。</p>
<p><img src="http://cdn.penghh.fun/mweb/16057482358664.jpg" alt="-w1146"></p>
<h2 id="显示文件夹路径"><a href="#显示文件夹路径" class="headerlink" title="显示文件夹路径"></a>显示文件夹路径</h2><p>macOS 不像 Windows 系统，打开文件默认会在左上角显示文件夹路径，这对刚用 Mac 的人来说不是很习惯。</p>
<p>在打开文件夹的状态下，点击状态栏的「显示 &gt;&gt; 显示路径栏」，快捷键为 Option + Command + P，<strong>文件夹底部</strong>就会显示当前文件所在的路径。</p>
<p>双击路径中的某个文件夹名称，就会跳转到相应的文件夹中。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E6%98%BE%E7%A4%BA%E8%B7%AF%E5%BE%84%E6%A0%8F%E5%89%AF%E6%9C%AC.jpg" alt="显示路径栏副本"></p>
<h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><p>Command + Del：快速删除<br>Command + 空格：打开聚焦搜索<br>Command + Shift + G：前往文件夹，输入路径即可到达特定的文件夹<br><img src="http://cdn.penghh.fun/mweb/16051953205391.jpg" alt="-w465"></p>
<h2 id="管理开机启动项"><a href="#管理开机启动项" class="headerlink" title="管理开机启动项"></a>管理开机启动项</h2><p>为了让电脑开机后迅速进入最适合工作的状态，我们有时会将一些软件设置为「开机启动」。</p>
<p>如果你想查看所有设置为开机启动的软件，可以打开「系统偏好设置 &gt;&gt; 用户与群组」，切换到「登录项」页面，就可以查看所有开机启动项。</p>
<p>点击下方的 + 或 - 按钮，可以添加或删除不必要的开机启动项。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056624412092.jpg" alt="-w704"><br>此外，切换到「密码」页面，将鼠标移动到用户名左侧的头像上，会出现「编辑」的按钮，点击可以修改开机页面显示的用户头像。</p>
<p>这个用户头像与 Apple ID 的头像是不同的，修改这个头像并不会影响 Apple ID 的头像。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056625701806.jpg" alt="-w704"></p>
<h2 id="改变状态栏图标的位置"><a href="#改变状态栏图标的位置" class="headerlink" title="改变状态栏图标的位置"></a>改变状态栏图标的位置</h2><p>改变状态栏图标的位置：按住 Command 键，使用鼠标拖动改变图标的位置</p>
<p><img src="http://cdn.penghh.fun/mweb/%E6%94%B9%E5%8F%98%E5%9B%BE%E6%A0%87%E7%9A%84%E4%BD%8D%E7%BD%AE.gif" alt="改变图标的位置"></p>
<h2 id="聚焦搜索"><a href="#聚焦搜索" class="headerlink" title="聚焦搜索"></a>聚焦搜索</h2><p>查看路径：在聚焦搜索返回的结果中，选择任意一项，按住 Commad 键，可以查看文件所在的文件夹或应用安装的路径</p>
<p>打开文件所在的位置：在搜索返回的结果中，按住 Command 键双击文件，可以打开文件所在的位置</p>
<h2 id="神奇的Option键"><a href="#神奇的Option键" class="headerlink" title="神奇的Option键"></a>神奇的Option键</h2><p>查看更多信息：按住 Option 键点击任务栏的图标，可以查看更多信息，例如点击 Wifi 图标，可以查看 Wifi 的更多信息，例如 IP 地址、BSSID 等信息。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056212205170.jpg" alt="-w328"><br>点击音量图标，面板会增加「输入」的控制项，在连接蓝牙耳机的情况下，你可以将输入设备由电脑的「麦克风」切换为「蓝牙耳机」。  </p>
<p><img src="http://cdn.penghh.fun/mweb/16056213330569.jpg" alt="-w326"></p>
<p>关闭一个软件的多个窗口：按住 Option 键，点击窗口左上角的关闭按钮，可以同时关闭一个软件的多个窗口。  </p>
<p><img src="http://cdn.penghh.fun/mweb/%E5%90%8C%E6%97%B6%E5%85%B3%E9%97%AD%E4%B8%80%E4%B8%AA%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%A4%9A%E4%B8%AA%E7%AA%97%E5%8F%A3.gif" alt="同时关闭一个软件的多个窗口"></p>
<h2 id="触发角"><a href="#触发角" class="headerlink" title="触发角"></a>触发角</h2><p>触发角是 Mac 屏保附带的功能，通过为屏幕四个角落设置不同的触发操作，当你将鼠标移动到屏幕角落时，它会执行相应的命令，例如让电脑快速进入屏保程序。  </p>
<p>打开「系统偏好设置 &gt;&gt; 桌面与屏幕保护程序」，切换到「屏幕保护程序」页面，点击右下角的「触发角」。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056598115539.jpg" alt="-w704"><br>打开的窗口会有四个下拉框，分别对应屏幕的四个角落，你可以从下拉框中选择不同的触发操作。</p>
<p>如下图，我将屏幕右上角的触发操作设置为「启动屏幕保护程序」，当我将鼠标移动到右上角时，电脑就会运行屏保程序。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056603784633.jpg" alt="-w702"><br>如果你觉得单纯通过鼠标移动到屏幕角落触发命令容易导致<strong>误操作</strong>的话，可以在选择触发命令时，同时按住 Option 或 Command 键，为触发操作添加一个额外的按键，减少误操作的情况。</p>
<p>如下图，我在设置触发操作时按下了 Option，如此一来，当我将鼠标移动到屏幕右上角，且按下键盘的 Option 键时，电脑才会进入屏保程序。</p>
<p><img src="http://cdn.penghh.fun/mweb/16056605728240.jpg" alt="-w738"></p>
<h2 id="自带输入法输入不会读的字"><a href="#自带输入法输入不会读的字" class="headerlink" title="自带输入法输入不会读的字"></a>自带输入法输入不会读的字</h2><p>在 Windows 上，当你想输入你不知道拼音的「犇」字时，可在中文拼音的状态下，使用 u + niu + niu + niu 的拆字法，来达到间接输入「犇」的目的。</p>
<p>而在 macOS 上，你也可以使用类似的操作来输入「犇」字：先输入 niu + niu + niu，接着按 Shift + 空格键，自带的输入法就会弹出唯一的备选字「犇」。</p>
<p><img src="http://cdn.penghh.fun/mweb/16058002823333.jpg" alt="-w728"></p>
<p>如此一来，使用苹果自带的输入法输入一些可以拆解的字，是不是变得 So easy 了呢？</p>
<p>以上，就是本次想和你分享的 Mac 使用技巧，希望对你有帮助。关于 Mac 的更多使用技巧，过段时间再见。   </p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-11-19-global-house-market-book-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-11-19-global-house-market-book-summary/" itemprop="url">理解房地产 - 读《全球房地产》</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-19T00:44:44+00:00">
                2020-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <img src="/images/house-market-book.jpg" width="300px" />

<h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>我们这一代人，大部分一辈子挣的工资，都拿来买房了。不信？我帮你算算：</p>
<p>拿北京为例，一个简单的三口之家，至少需要一个两居室，约为 80 平米。在北京，一个 80 平米的房子，大概需要 500-600 万。这还都没有算上不算上老人的居住需求，因为现在带孩子的都是老人，也没有算上学区房的溢价，大部分有孩家庭买房的重要因素是上学。</p>
<p>那 500 万的需要多久才能存下来呢？即便是中国互联网行业的顶层收入阶级：码农。一年平均能够存下 20 - 25 万就算是非常好的情况了。那 500 万需要至少存 20 年。如果你是贷款了 500 万买房，那么其实算上复利，你一共需要还 1000 万。这就是 40 年工作的存款。</p>
<p>所以，在北京的一套 80 平的普通住宅，需要一个码农从 25 岁本科毕业，一直还款到 65 岁退休，才能还完。</p>
<p>当然，实际情况可能好一点，比如：</p>
<ul>
<li>夫妻双方都是高收入，共同承担还款义务的话，20 年可以还完。</li>
<li>双方的老人帮忙提供首付款，使得贷款额度下降。</li>
<li>遇上像拼多多，美团，头条，以及我们猿辅导这样的公司，最终期权收益远大于工资收益。</li>
</ul>
<p>但是对于大多数人来说，<strong>花掉自己半辈子的积蓄买房</strong>，还是一个正常的现象。</p>
<p>所以，既然我们都花了半辈子的钱了，何不花半个小时理解一下中国的房地产环境呢？这就是我读《全球房地产》这本书的原因，以下是我的一些读后感受。</p>
<h2 id="二、房价未来的走势"><a href="#二、房价未来的走势" class="headerlink" title="二、房价未来的走势"></a>二、房价未来的走势</h2><p>简单一句话：虽然房价现在很高，但是房价不会跌。</p>
<p>核心原因是：</p>
<h3 id="2-1-政府主导。"><a href="#2-1-政府主导。" class="headerlink" title="2.1 政府主导。"></a>2.1 政府主导。</h3><p>房市是一个政策主导的市场，不是完全的市场经济，所以政府有多种手段来有效地控制房价的波动。</p>
<ul>
<li>如果房价上涨过快，政府可以增加土地供应，增加首付比例，增加购房限制，调节贷款利率，甚至直接限制最高房价（比如北京就出现过限价房）。</li>
<li>如果房价下跌过快，政府可以减少土地供应，减少预售证的审批，降低首付比例等。</li>
</ul>
<h3 id="2-2-稳定大于一切"><a href="#2-2-稳定大于一切" class="headerlink" title="2.2 稳定大于一切"></a>2.2 稳定大于一切</h3><p>在政府「房住不炒」的原则下，房市价格稳定是一个关乎国家民生稳定的重要指标。中央和地方政府都会花大精力来保证房市的稳定。</p>
<h3 id="2-3-地方财政和-GDP-需要"><a href="#2-3-地方财政和-GDP-需要" class="headerlink" title="2.3 地方财政和 GDP 需要"></a>2.3 地方财政和 GDP 需要</h3><p>之前地方政府一直没钱，但是自从住房市场改革以来，出地出让金持续增长。2018 年，土地出让收入为 6.5 万亿，占地方财政收入的 66.5%。</p>
<p>地方政府有钱之后可以进一步增强城市的基础设施建设，带动经济。中国的 GDP 增长很大程度上来自于房地产业及上下游产业带动，整体在 2018 年占到 GDP 的 15.8% 。</p>
<p>另一方面，商业用地的出让金增长并不高，这使得政府可以用较低的商业用地价格来招商引资，带动产业和就业。</p>
<h2 id="三、购房的需求还在持续"><a href="#三、购房的需求还在持续" class="headerlink" title="三、购房的需求还在持续"></a>三、购房的需求还在持续</h2><p>房地产整体的主要需求来源于以下 3 方面：</p>
<ol>
<li>城镇化率，占比 42% 。</li>
<li>城市更新改造，占比 5% 。</li>
<li>居民的改善型居住需求，占比 53% 。</li>
</ol>
<h3 id="城镇化率"><a href="#城镇化率" class="headerlink" title="城镇化率"></a>城镇化率</h3><p>中国 2020 年的城镇化率为 60%，预期每年增长 1%，到 2030 年到达 70%。之后增速放缓，到 2050 年到达 80% 的城镇化率。</p>
<img src="/images/house-market-book-2.jpg" class="">

<p>城镇化使得大量人口集中到一二线城市。当前来看，三四线城市已经显现出人口净流出的现象。</p>
<h3 id="改善型居住需求"><a href="#改善型居住需求" class="headerlink" title="改善型居住需求"></a>改善型居住需求</h3><p>随着人们生活水平的提高，大家对于居住环境的要求也越来越高。</p>
<p>我最近看了一下新的楼盘，像新风系统，地暖，智能中控都成为了标配。一些新技术还被部分强调科技的开发商应用，比如某茂府的恒温系统，是通过采集深入地下的地底地热，通过纯水将热交换上来，然后在墙上布微循环管道，达到不用加热就可以保证大楼恒温的效果。</p>
<p>现在由于大家见识过各种优质服务，所以对小区物业的服务要求也要提升。老的小区物业服务比较差，业主委员会经常缺失，这也造成很多人都换新房的需求。</p>
<p>改善型居住可以通过把旧房卖掉换稍大的新房，对于大家的资金要求也不算高。</p>
<h2 id="四、房产税是未来-10-年必然的趋势"><a href="#四、房产税是未来-10-年必然的趋势" class="headerlink" title="四、房产税是未来 10 年必然的趋势"></a>四、房产税是未来 10 年必然的趋势</h2><p>本书详细测算了一下现在收房产税和未来收房产税对政府收入的影响。</p>
<p>因为现在住房交易还是以新房为主，地方政府通过卖地就可以维持比较高的财政收入了。所以现阶段上房产税意义不大。</p>
<p>但是未来房地产市场不可能一直是增量市场，总有一天，会慢慢进入以二手房为主的存量房交易市场。这个时候，卖地就很难保证财政收入了。</p>
<p>现在北京二手房交易已经占到了房屋交易的 55%。未来如果这部分占比到达了 80% - 90%，政府因为要提供公共服务，就必须将原有土地出让的财政收入找补回来。</p>
<p>书中也测算了一下，到 2030 年的时候上房产税，相应的税收是与当前的卖地收入同等规模的（不考虑通胀）。</p>
<h2 id="五、小结"><a href="#五、小结" class="headerlink" title="五、小结"></a>五、小结</h2><ul>
<li>房地产行业对中国的经济起到了至关重要的带动作用。</li>
<li>房价未来的趋势是稳定。</li>
<li>城镇化率是影响需求的主要因素，未来 10 年还在持续。</li>
<li>由于进入存量市场，房产税会是 10 年后保证政府提供公共服务的财政来源。</li>
</ul>
<p>书中对于房价也有一个很宏观的总结：「房地产长期看人口，中期看土地，短期看金融」，一并分享给大家~</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/%E4%B8%80%E4%B8%AA%E8%A5%BF%E6%BC%82%E6%89%93%E5%B7%A5%E4%BA%BA%E7%9A%84%E6%B1%82%E8%81%8C%E5%BF%83%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/%E4%B8%80%E4%B8%AA%E8%A5%BF%E6%BC%82%E6%89%93%E5%B7%A5%E4%BA%BA%E7%9A%84%E6%B1%82%E8%81%8C%E5%BF%83%E8%B7%AF/" itemprop="url">一个西漂打工人的求职心路</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-18T04:49:47+00:00">
                2020-11-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" itemprop="url" rel="index">
                    <span itemprop="name">生活感悟</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>其实，这段故事说出来，多少有一点难为情，因为我实在没有想到，这一切会变得这样艰难。</p>
<p>10 月份从上一家公司离职的时候，当时，我手上有两个 Offer，一家是做旅游类产品的创业公司，一家则是声名狼藉的中软国际。因为刚来西安时，面对人生地不熟的新环境，曾经在这里有过一段时间的工作经历，所以，我从本能上排斥再回到那种地方。而创业公司本身的不稳定性，一度让我感到纠结，而最终的结果是，我放弃了这两份 Offer。此时，对于一个工作刚满 5 年的人来说，一个月 13K 或 14K 的薪水，我感到相当的知足，可惜人生常常没有最优解，选择与妥协才是常态。</p>
<p>此后，我面试了奥博杰天(Objectiva)，在一轮面试后被评定为中级以后，我便再没有接到参加复试的通知，后来，HR 告诉我他们只招高级以上的开发人员。关于这家公司，一件非常有趣的事情是，我的一位朋友在获得这家公司的工作后，因为适应不了终日远程办公的痛苦，最终还是选择从这里离开。大概这是为了印证围城里的那句话，“城外的人想进去，城里的人想出来”。虽然“面试造火箭，入职拧螺丝”有时是求职者的常态，可偏偏你连去拧螺丝的机会都没有。</p>
<p>后来找到一家做背调业务的公司，甚至都准备好要在这里开始新的旅程，可当我看到毫无架构可言的项目时，终于还是倒吸了一口冷气。虽然此前和面试官交流了很多相对前沿的内容，可真正入职以后，还是被安排去做维护遗留项目的工作，更让我感到沮丧的是，到第三天的时候，一位老员工突然告诉我，他要转岗去做前端，需要交接一部分工作给我。对于这一件事情，我之前的朋友都安慰我，这些问题你都知道该怎么去解决，因为企业招聘你过来就是希望你去解决这些问题。可从一个普通与昂工的角度来看，一个组织实在很难从底层去做出什么改变，何况这家公司采取了和上家公司一样的策略，寄希望于空降一个某个大公司的架构师。</p>
<p>现在回想起来，在试用期期间离开，或许有一点冲动使然，可听到后来接替我职位的新人，同样在呆了一周后离开了。所以，此时，你问我对这份工作感到后悔嘛？坦白说，我并不知道该怎么去说，而更戏剧性的反转，则是后来一家公司联系到我，问我有没有意向去做这些背调公司的外包，你要知道，在西安几乎没有互联网公司，所以，当绕了一大圈后，再回到原点的时候，我不禁哑然失笑。再后来，经过内推拿到了西安中兴的面试资格，我感觉不管是笔试还是面试，我的完成度都还可以，尤其是在第一轮面试中，从面试官那里收获了很多的东西。而在复试的过程中，领导们对我非科班出身的挑剔，多少让我想起令人心动的 Offer 中，因为非法本 + 年龄大被嫌弃的丁辉，和这些人相比，我们这些普通人根本称不上努力，可至少尊重那些一直在默默努力着的人啊。</p>
<p>这样辗转了一周，终于还是没能等到中兴的电话，我想应该是彻底凉了吧，果然人生没有那么多逆袭的可能，年少时虚度的光阴，终究会在未来某一天让你感到后悔。就这样，一直等一直面，陆陆续续地接到像软通动力这种外包性质的 Offer，在面试中更是见识了大大小小的各种公司，我发现整个行业都在疯狂的内卷，996 在道德上的批判声还没有褪去，人们又开始钻劳动法的空子，搞大小周、周一&#x2F;三&#x2F;四强制加班，这样做的不单单有华为、中兴这样的大厂，同样还有这些小公司。</p>
<p>今年因为疫情的原因，医疗行业应该赚得盆满钵满，可好多公司还是在疯狂地抢占市场，类似的还有物流行业，可在效益还不错的情况下，我只看到了越来越变本加厉的压榨，我看日剧《下町火箭》的时候就在想，虽然佃制作所这样一家小公司一样会加班，可人家的是火箭级别的阀门和加速器啊，人家愿意花时间去钻研工艺技术，而我们只能通过比别人早交付来赢得客户的青睐，那这是否说明，我们和竞争对手间的服务差异化其实并不大呢？</p>
<p>现在，只要是个互联网公司，都能蹭一蹭双十一的热度，可在这场疫情背后，实体经济有多么的不景气，今天人们找工作就有多绝望，毕竟连房地产行业都表现出颓势，互联网行业不可能一直这样”热“下去，终有一天，一切都会回复到冷静。那么，对于没有“互联网”的西安 IT 圈子，程序员未来的退路又在哪里呢？我身边有很多 30 多岁的中年男人，那种说不出来的沉重感，时常让我对未来感到迷茫，他们都曾劝我回到三线小城市、考个公务员了却残生。也许我那个时候不大懂，而此时此刻终于感受到这种无奈，业内 35 岁的内卷化越来越严重，甚至我没想到，有一天大小周和周一&#x2F;三&#x2F;四强制加班会变成一种常态化。</p>
<p>这次面试中兴的经历，让我意识到，虽然进入 IT 行业的门槛非常低，可同样不幸的是，大厂&#x2F;国企对相关岗位的门槛在不断加高，研究生起步基本就是标配啦，我甚至怀疑，我没有通过中兴的面试，是否和我非科班的出身以及没有考过的四级有关，这的确是一个现实问题，不管你想走技术路线，还是想走管理路线，一段大厂的经历能为你增加不少闪光点，可如果你拼进全力依然被这些门槛挡住，你是否会对未来感到迷茫呢？因为西安的 IT 圈子就这么大，你下一次换工作依然会面对这些公司，而人生又有多少个换工作的机会呢？</p>
<p>所以，我一直在想要不要继续留在西安，在这边固然比老家多“一点”可能性，可就真的只是一点点而已，现在再次充满变数的时候，这一点点的优势就变得不再明显。四年前，为了离当时女朋友近一点而来西安，如今四年过去了，渐渐地很多问题再次浮现出来，也许，那个时候的她就想到了未来的各种可能吧！有天晚上，我找一位很久之前认识的朋友，向他询问关于 35 岁这道坎的想法。当多年未曾听到的声音再次传入耳朵，突然感到一阵亲切，他非常平静地对我说，“我今年已经 36 岁了，这道坎对我来说已经是过去了”。的确，我们总是对未来充满各种各样的担忧，可想到两年前，我一样是怀着忐忑的心情去了上家公司。</p>
<p>我和朋友在讨论这些问题的时候，都觉得未来去做个 IT 讲师是个好归宿，虽然再反过头去割新一茬年轻人的韭菜，有一点屠龙少年终成恶龙的意味，可我觉得，人生还是早一点考虑备选答案比较好。我们之所以敢去背负 30 年的房贷，是因为我们愿意去相信“未来越来越好”，可事实上是你的身体每一天都在衰老，虽然现在退休年龄延迟到 60 岁了，可想到还在幸苦忙碌着的父母，还是会觉得羞愧难当，古人说 30 而立，可我还没有立起来，父母已经在老去了。说了这么多，工作我还是会去努力地找，但应该不会不给自己留一点时间，因为除了找对象以外，我给自己订了几个学习计划，比如：软考的中&#x2F;高级证书、英语练习(考个英语证书)、强化公开场合的演讲能力、Google PDE 考试。</p>
<p>一个 30+的朋友和我说，他想自己干点啥，因为他觉得他再找工作就没人要了，也许生活就是永远这么充满变化吧，就像不变的只有变化本身一样，提前焦虑未来没有什么用，现在的规划将来不一样会按部就班，我只能说，多去想想自己有什么，如果你只是比别人能加班，这实在算不上什么过人的长处，因为随时有年轻人可以替换你下来。人活着啊，不能光长年龄和皱纹，想想两度背水一战的丁辉，我们这点努力能叫做拼尽全力吗？这就是我，一个“西漂”四年的外地打工人的一点想法，如果你有更好的解决“内卷”的思路，我会非常感谢你告诉我这些。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020-11-14-bigsur/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020-11-14-bigsur/" itemprop="url">更新完 Big Sur 之后，我觉得电脑越来越像手机了</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-11-14T08:00:00+00:00">
                2020-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>本文首发地址：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/sZ6bWEy_7v-bBRJeSbvYtA">更新完Big Sur之后，我觉得电脑越来越像大号的手机了</a>   </p>
<p>盼星星盼月亮，macOS Big Sur 终于在昨天凌晨推送了正式版，之前看了一些文章，我也迫不及待想体验苹果为搭载自研芯片 M1 的 Mac 推出的新系统。</p>
<p>第一眼觉得它和 iOS 很像，程序坞、系统应用图标和应用窗口边缘，都变得圆滑了。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E6%88%AA%E5%B1%8F2020-11-14%20%E4%B8%8A%E5%8D%8811.04.25.png" alt="截屏2020-11-14 上午11.04.25"></p>
<h2 id="系统兼容性"><a href="#系统兼容性" class="headerlink" title="系统兼容性"></a>系统兼容性</h2><p>更新系统之前，最好先打开「关于本机」，查看电脑的概览，了解电脑的生产年份。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053212113212.jpg" alt="-w622"><br>如果你的电脑是以下或者更新的机型，就可以放心地更新。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053166424868.jpg" alt="-w499"><br>更新系统之前，如果你的电脑有重要的文件，最好先进行备份，可以使用系统自带的「Time Machine」，将文件备份到外置的移动硬盘。</p>
<p>由于我的机器是比较新的，没有放什么重要的文件，因此在没有备份的情况下就进行更新了。（心真大，请勿模仿）</p>
<h2 id="菜单栏图标间距增大"><a href="#菜单栏图标间距增大" class="headerlink" title="菜单栏图标间距增大"></a>菜单栏图标间距增大</h2><p>菜单栏图标的间距变大了，看起来不会像之前那么有压迫感，但也带来了一个新的问题：间距越大，同样大小的区域可以容纳的图标数量就越少。</p>
<p>如果后台运行的程序比较多，就会让原本紧张的菜单栏「雪上加霜」。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E7%8A%B6%E6%80%81%E6%A0%8F%E5%9B%BE%E6%A0%87.png" alt="状态栏图标"></p>
<p>对于不想显示在状态栏的系统图标，可以在「系统偏好设置」中搜索关键字「状态栏」，下方会返回相关的设置。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053249243279.jpg" alt="-w1035"></p>
<h2 id="新增控制中心"><a href="#新增控制中心" class="headerlink" title="新增控制中心"></a>新增控制中心</h2><p>菜单栏新增了控制中心，点击 Siri 左侧的按钮，就可以打开控制中心的面板，第一眼也会觉得和 iOS 上的非常像。</p>
<p>在这里可以控制 Wifi、蓝牙、隔空投送、勿扰模式的开启与关闭，部分控制按钮与菜单栏已有的图标重复。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E6%8E%A7%E5%88%B6%E4%B8%AD%E5%BF%8302.png" alt="控制中心02"></p>
<p>控制中心中常用的按钮，你可以长按拖拽到菜单栏上，将其添加到外部，缩短调节控制按钮的路径。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%8F%9C%E5%8D%95%E6%A0%8F.gif" alt="添加到菜单栏"></p>
<h2 id="通知栏和小组件合并"><a href="#通知栏和小组件合并" class="headerlink" title="通知栏和小组件合并"></a>通知栏和小组件合并</h2><p>原先菜单栏角落的通知栏按钮取消了，你可以通过触控板左滑或者点击菜单栏的「日期和时间」呼出通知栏。</p>
<p>此外，通知栏下方增加了 iOS 14 上的小组件，默认打开的小组件有日期、天气、时钟、股市和屏幕使用时间。</p>
<p>由于 Mac 上没有自带的天气 App，当我点击天气小组件的时候，它会在浏览器中打开天气相关的网页，不像在 iOS 上会打开天气 App，这一点体验不是很好。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E7%BB%84%E4%BB%B6.png" alt="组件"></p>
<p>点击底部的「编辑小组件」，可以打开小组件的编辑面板，左侧栏列出了支持添加小组件的应用，包括系统应用和第三方应用。</p>
<p>有些第三方应用跟进得比较快，例如微博第三方客户端 Maipo，在还没更新到 Big Sur 系统之前，它就提前对 Big Sur 进行了适配，等你更新到 Big Sur 之后，它就在小组件列表中等着你了。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053284305517.jpg" alt="-w1418"></p>
<h2 id="照片编辑功能"><a href="#照片编辑功能" class="headerlink" title="照片编辑功能"></a>照片编辑功能</h2><p>Mac 自带的照片 App，提供了更强大的编辑功能，点击照片右上角的「编辑」按钮，进入照片编辑界面。</p>
<p>右侧提供了多个可供调整的参数，光效、颜色、黑白滤镜、白平衡、曲线等等，其中「润饰」可用来去除人像皮肤或脸部上的斑点，达到美化人像的目的。</p>
<p>如果你懒得动脑子调节这些参数，每个参数右侧都提供了「自动」的选项，勾选即可自动帮你修饰照片。如此一来，以后 Mac 上简单的修图工作，再也不用借助 PS 等第三方工具了。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053349358164.jpg" alt="-w1350"></p>
<h2 id="基于墙纸调整窗口色调"><a href="#基于墙纸调整窗口色调" class="headerlink" title="基于墙纸调整窗口色调"></a>基于墙纸调整窗口色调</h2><p>这是「系统偏好设置 &gt;&gt; 通用」中新增的调节选项，勾选之后，你使用的壁纸，会影响到部分窗口的色调或者说观感。</p>
<p>举个例子，由于我使用的是 Big Sur 默认的流体渐变壁纸。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053372943392.jpg" alt="-w1848"></p>
<p>当我勾选了这个选项，所使用的渐变壁纸就会让当前窗口看起来有点偏红。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053366172501.jpg" alt="-w704"></p>
<p>作为对比，下图是取消勾选之后的状态，窗口的色调就会恢复为白色，我觉得还是正常的白色看着舒服一些。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053374248208.jpg" alt="-w704"></p>
<h2 id="开机播放声音"><a href="#开机播放声音" class="headerlink" title="开机播放声音"></a>开机播放声音</h2><p>「启动时播放声音」是「系统偏好设置 &gt;&gt; 声音」新增的选项，开启之后，当你重启或开机时，伴随着咚的一声苹果 logo 出现了。</p>
<p>其实，在 2016 年初及更早的 Mac 机型在启动时都会发出声音。除 MacBook Air（13 英寸，2017 年）之外，2016 年末及之后生产的 Mac 机型都不会发出启动声，这个声音是四年后的首次回归。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053376097016.jpg" alt="-w704"></p>
<h2 id="Safari-浏览器"><a href="#Safari-浏览器" class="headerlink" title="Safari 浏览器"></a>Safari 浏览器</h2><p>Safari 起始页右下角新增了一个选项，可设置起始页显示的内容，如个人收藏、经常访问的网站、通过 iCloud 同步的在 iPhone 上打开的网页，以及是否设置背景图像。</p>
<p>Safari 起始页默认的背景是灰色的，下图的熊猫是我从「背景图像」挑选的一张背景。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053386529815.jpg" alt="-w1325"></p>
<p>除了我们肉眼容易观察到的变化，Safari 还在隐私保护方面做了改进，页面新增了「智能防跟踪」功能，阻止网站通过获取你的操作行为、个人信息数据，来向你推荐相关的广告。</p>
<p><img src="http://cdn.penghh.fun/mweb/16053390489050.jpg" alt="-w1325">  </p>
<h2 id="更新系统遇到的问题"><a href="#更新系统遇到的问题" class="headerlink" title="更新系统遇到的问题"></a>更新系统遇到的问题</h2><p>更新 Big Sur 系统有两种操作方式，一种是通过「系统偏好设置 &gt;&gt; 软件更新」，一种是在 App Store 搜索 Big Sur 并下载。</p>
<p>活久见，这是我第一次看到这么大的系统安装包——12.18 GB。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E7%B3%BB%E7%BB%9F%E5%A4%A7%E5%B0%8F.png" alt="系统大小"></p>
<p>安装包下载好之后，它会出现在「启动台」中，点击即可运行。   </p>
<p>起初安装的时候，我遇到了一个问题，如下图所示，安装剩余时间停留在了 12 分钟的状态，过一会就提示无法验证 macOS，之后安装程序自动退出。</p>
<p><img src="http://cdn.penghh.fun/mweb/%E5%8D%A1%E5%9C%A812%E5%88%86%E9%92%9F.png" alt="卡在12分钟">   </p>
<p>起初我试过网友提供的解决方法：改 DNS 或者使用富强上网，但还是失败了。</p>
<p>后来选择重启电脑，也没有开启富强上网，反而顺利更新到了新的系统。</p>
<p>以上，就是本次我刚使用这个新系统发现的一些新特性，希望对你有帮助。<br>Have fun，Enjoy!   </p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/18/">&lt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/74/">74</a><a class="extend next" rel="next" href="/page/20/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1464</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">910</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5358884258"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
