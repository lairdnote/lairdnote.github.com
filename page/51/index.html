<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Liunx Python Rust Goalng DevOPS" />










<meta name="description" content="个人随想，瞎子的世界">
<meta property="og:type" content="website">
<meta property="og:title" content="逐流小站">
<meta property="og:url" content="https://blog.feedscoin.com/page/51/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="个人随想，瞎子的世界">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="Liunx Python Rust Goalng DevOPS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/page/51/"/>





  <title>逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/16/2016-07-16-hack-way-through-apple/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/16/2016-07-16-hack-way-through-apple/" itemprop="url">被中国黑客玩坏的苹果</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-16T09:25:21+08:00">
                2016-07-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>最近从几个做 iOS 开发的小伙伴那儿听说了几个发垃圾邮件的黑科技，利用的都是苹果的一些小「漏洞」，实在是让人觉得中国人的「创新」能力太强，分享给大家。</p>
<h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><img src="/images/hack-way-1.jpg" class="">

<p>详细的办法在上面的这个截图中解释了，简单来说就是将自己的帐号名改成广告信息，然后不停修改自己的安全邮箱，于是这些含有自己的帐号名（其实就是广告）的邮件就通过苹果的服务器发送出来了。各大邮箱厂家确实是不敢贸然屏蔽苹果的邮件的，所以垃圾邮件被顺利发送出去。</p>
<p>我有一个小伙伴就收到了这样一封垃圾邮件：</p>
<img src="/images/hack-way-2.jpg" class="">


<p>苹果在发现这个漏洞被利用后，简单把用户昵称在邮件中不再显示了，不过可以看得出来改动非常匆忙：</p>
<img src="/images/hack-way-3.jpg" class="">


<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>在方法一被苹果封堵后，前两天，梁杰发现了一个新的垃圾邮件发送行为。这次利用的是苹果的共享日历的功能。黑客利用将广告以日历日程的形式共享给大家，以便获得展示广告的能力。</p>
<img src="/images/hack-way-4.jpg" class="">

<img src="/images/hack-way-5.jpg" class="">


<h2 id="背后的利益"><a href="#背后的利益" class="headerlink" title="背后的利益"></a>背后的利益</h2><p><del> 由于对岛国大片的热爱，</del> 我还真研究了一下这个垃圾邮件所描述的网址。这个网址打开后跳到一个看起来有各种诱人视频的播放列表中，然后弹出了如下 <a target="_blank" rel="noopener" href="http://www.avv06.com/movie/play_480.html">付款说明</a>：</p>
<img src="/images/hack-way-6.jpg" class="">

<p>这个页面明显是一个骗人的假页面，因为上面描述的是：「付款之后刷新页面，尽享奇妙之旅」。我理解「奇妙之旅」应该就是可以播放视频吧。但是，这个付款的二维码是一个微信支付的二维码，所以，所有用户看到的二维码是一样的。</p>
<p>这就带来一个问题：假如有一个用户付款完，这个时候有两个用户同时按刷新，服务器端根本就无法知道是哪个用户付的款。所以，这根本就是一个诈骗的网站。</p>
<p>这个诈骗网站同时考虑了警察的心理，假如有人受骗报警，诈骗 18.8 元这种事情，对于警察叔叔来说，根本就达不到立案标准。如果警察叔叔要立案，他需要收集到上千个受害人的信息。另外，中国的办案还涉及管辖权，如果这个网站不在北京，那么北京的警察叔叔还需要找网站所在地的警察联合配合，这种事情想想都头大。于是，这个网站到现在还是能够正常打开（已经安全存在快一个月了）。</p>
<p>但是这如果不是一个诈骗网站，而是一个黄色网站，那么性质就完全不一样了。黄赌毒是警方重点的打击对象，警方跨辖区合作起来更有动力。相对诈骗网站来说，黄色网站的站长也会有更大的压力，而且就 18.8 这点钱，估计连站长的流量费都挣不回来。</p>
<h2 id="木马的传播"><a href="#木马的传播" class="headerlink" title="木马的传播"></a>木马的传播</h2><p>除以上面这种骗 18.8 的诈骗网站外，还有一种黑客行为是传播木马。通常的形式是要求你下载一款专用的视频播放器，用于看岛国大片。这类视频播放器通常都含有木马。</p>
<p>对于 Android 来说，视频播放器在安装时会要求大量系统级权限，然后在你不经意的时候，发一条扣费短信。注意，这种扣费短信通常只有 1 毛钱，对于这种报案，你可以想像一下警察叔叔的心理阴影面积了，他可能得收集上万个报案人的信息，才能达到立案的涉案金额，进而合并立案。在黑客界，这种扣费行为被称为最安全的挣钱方式，因为现有的法律使得警方的办案成本非常高。</p>
<p>对于 iOS 来说，视频播放器通常使用企业证书安装。有些小白用户或许觉得我的 iPhone 没有越狱，安装这类 App 没有风险，那么你就 too young too native 了。企业证书的安装的 App 不经苹果审核，黑客可以随意利用私有 API 进行各种信息的窃取。这里我就不教大家太多了，简单说一个过时的技巧吧：在 iOS 9 以前，企业证书的包可以覆盖同名的在 AppStore 上下载的 App。所以黑客可以利用一些小弹窗提示：「你的微信有新版本，是否更新」，从而把你的微信覆盖成它的修改后的版本。之后黑客可以做的事情就太多了。</p>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>安全的故事和事故每天都在上演，我们大家都得小心。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/12/2016/implement-function-reloading-in-php/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/12/2016/implement-function-reloading-in-php/" itemprop="url">PHP 实现函数重载（伪）</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-12T12:02:51+08:00">
                2016-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>众所周知，PHP 作为一门弱类型的语言，是无法直接实现像 C++，Java 那样的函数重载的。然而在某些情况下，这就非常蛋疼了。不过我们可以用一些奇技淫巧来实现「伪函数重载」。</p>
<h3 id="一、使用-func-get-args-函数"><a href="#一、使用-func-get-args-函数" class="headerlink" title="一、使用 func_get_args() 函数"></a>一、使用 <code>func_get_args()</code> 函数</h3><p><a target="_blank" rel="noopener" href="http://php.net/manual/zh/function.func-get-args.php"><code>func_get_args()</code></a> 函数可以获取函数参数列表的数组，我们就可以利用一下这个特性啦。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/07/12/2016/implement-function-reloading-in-php/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/10/%E5%9C%A8Unity3D%E4%B8%AD%E4%BD%BF%E7%94%A8uGUI%E5%AE%9E%E7%8E%B03D%E6%97%8B%E8%BD%AC%E7%89%B9%E6%95%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/10/%E5%9C%A8Unity3D%E4%B8%AD%E4%BD%BF%E7%94%A8uGUI%E5%AE%9E%E7%8E%B03D%E6%97%8B%E8%BD%AC%E7%89%B9%E6%95%88/" itemprop="url">在 Unity3D 中使用 uGUI 实现 3D 旋转特效</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-10T14:29:33+08:00">
                2016-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unity3D/" itemprop="url" rel="index">
                    <span itemprop="name">Unity3D</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          好了，接下来我们会遇到一个新的问题，这些精灵的层级应该是从中间位置向两边依次递减的，所以为了解决这个问题，我们还需要对每个精灵的层级进行计算，这部分代码的实现细节如下：;其实这篇文章我还想继续再往下写的，可是因为我比较懒一直拖着不写，以及接下来相当多的内容都是和界面相关的东西，所以我决定这篇文章就暂时写到这里，目前这个方案可以实现一个简单的“3D”滚动的效果，按照这个思路，接下来我们要做的事情是让滚动更加平滑以及支持鼠标或者触屏操作，毕竟这个需求的出发点是来自一个游戏，所以我们可以考虑在“滚动”的时候增加插值特性，与此同时，为了让它更加具有“3D”的感觉，可以在设置精灵层级的时候为不同的精灵设置不同的缩放比例，这样会更加符合美术中的透视关系，效果应该会更好吧;所以在这里除了确定每个精灵的放置位置以外，我们还有一个问题，如何对这些精灵进行排序，所幸的是在 uGUI 中我们可以通过 SetSiblingIndex 方法来设置一个精灵的深度，当每次通过按钮切换精灵的时候，我们都需要对所有精灵重新计算坐标和深度，而为了更好的视觉表现力，我们可以在切换的时候做一个简单的位移动画，至此我们就可以开始动手实现功能啦
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/07/10/%E5%9C%A8Unity3D%E4%B8%AD%E4%BD%BF%E7%94%A8uGUI%E5%AE%9E%E7%8E%B03D%E6%97%8B%E8%BD%AC%E7%89%B9%E6%95%88/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/09/2016-07-09-lead-by-tech-companys-trap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/09/2016-07-09-lead-by-tech-companys-trap/" itemprop="url">技术主导型公司的困境</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-09T22:39:55+08:00">
                2016-07-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>Google 公司给了全世界的程序员一个理想公司的范例：招最聪明的人、工程师驱动项目、宽松的工作气氛、鼓励创新、20% 的自由时间⋯⋯我早年以为这样的公司一定会成功，但是工作到现在我却发现，那些模仿 Google 文化和工作方式的公司很多却活得很艰难。</p>
<h2 id="豌豆荚的故事"><a href="#豌豆荚的故事" class="headerlink" title="豌豆荚的故事"></a>豌豆荚的故事</h2><p>就在几天前，阿里巴巴宣布 <a target="_blank" rel="noopener" href="http://tech.sina.com.cn/i/2016-07-05/doc-ifxtsatm1409353.shtml">收购豌豆荚</a>，而交易价格并未对外公开。业界传言收购价为 <a target="_blank" rel="noopener" href="http://tech.sina.com.cn/i/2016-07-02/doc-ifxtsatn7967833.shtml">2 亿美金</a>，但是豌豆荚联合创始人王俊煜并未承认。不管是不是 2 亿美金，一个未公开的收购价很可能是为了避免让大家觉得尴尬，这种尴尬很可能是豌豆荚的收购价格并不乐观。</p>
<p>从前面几轮豌豆荚的融资信息来看，豌豆荚仅仅在 2014 年就获得了 1.2 亿美金的融资，当时估值为 <a target="_blank" rel="noopener" href="http://tech.sina.com.cn/i/2016-07-03/doc-ifxtsatn7994939.shtml">10 亿美金</a>，如果最终以 2 亿美金卖掉，那么真正归属给股东的回报应该寥寥无几，而众多员工的期权价值应该也就此成为一张废纸。</p>
<p>豌豆荚有类典型的技术主导型公司的气质。豌豆荚创始团队许多来自 Google，王俊煜从实习到毕业一直都在 Google，豌豆荚内部文化极其自由开放、透明及扁平化。</p>
<p>但是技术主导型公司通常还会有另一个特点，就是会「看不起」运营工作，在 <a target="_blank" rel="noopener" href="http://tech.sina.com.cn/zl/post/detail/i/2016-07-06/pid_8507905.htm">《多面豌豆荚》</a> 一文中，作者写道：</p>
<blockquote>
<p>豌豆荚工程师文化非常强，在公司内部，产品设计师和工程师是项目主导，运营、市场、商务的地位都排在第二位。虽然豌豆荚把产品经理叫做 “产品设计师”，但豌豆荚的产品设计师是几乎不支持运营、市场或商务活动的，这类设计需求全部外包。外包一方面成本很高，另一方面周期比较长，因为设计师不在旁边，沟通成本要高许多。</p>
</blockquote>
<p>作为最早的安卓应用市场，豌豆荚曾经是市场的老大，而它现在已经跌出了第一梯队。﻿豌豆荚在应用内搜索方面的尝试一直不太成功。作为一家技术人才聚集的公司，豌豆荚更喜欢用技术解决问题，应用内搜索看起来更像是一个技术难题，而不是用户需求。随着应用市场业务的萎靡以及新产品没有获得突破，豌豆荚不得已只能卖给阿里。</p>
<h2 id="有道的故事"><a href="#有道的故事" class="headerlink" title="有道的故事"></a>有道的故事</h2><p>网易有道是我第一份正式工作的东家，也是我认为文化非常贴近 Google 文化的公司。有道的创始人周枫是清华的年级第一，在清华读书时就是个风云人物。有道在成立之初，聚集了大量清华的同学。有道良好的技术氛围进而吸引了大量高质量的程序员，在我入职有道时，有道员工大部分都由清华北大的同学构成。有道员工里面不乏大量 ACM 世界总决赛获奖选手和 NOI 金牌获奖选手。公司内部重视代码 code review，重视 wiki，重视技术分享，甚至也有 20% 时间的个人项目。我还记得当时利用个人项目时间和黄东旭一起开发了 Mac 版的有道云笔记。</p>
<p>但是，技术上的优势并没有给有道带来商业上的成功。有道搜索在苦苦挣扎一段时间后，直接放弃了搜索业务。有道云笔记一直没能找到合适的用户增长点和盈利模式。有道惠惠做得非常早，但是仍然用户比较小众。现在看来，只有有道词典算是成功的一个产品，但收入应该远远没有达到支撑有道上市的程度。</p>
<p>有道在商业上的坎坷也造成了人员的动荡。早年的大量高质量工程师，待在有道是为了创业成功，以他们的实力很容易挑选新的公司。所以在有道发展下坡的时候，好多员工去了 Google、BAT 等其他一线互联网公司，而我也是在那个时候选择了加入猿题库创业。﻿</p>
<h2 id="豆瓣的故事"><a href="#豆瓣的故事" class="headerlink" title="豆瓣的故事"></a>豆瓣的故事</h2><p>豆瓣也是一个技术气氛浓厚的公司，阿北自己就是程序员出身，所以豆瓣的工程师氛围特别强，强到产品要做一个功能，技术会挑战他，会问为什么要做这个功能。但是豆瓣按自己节奏做事的风格，很快错过了移动互联网的机会。</p>
<h2 id="技术主导型公司的短板"><a href="#技术主导型公司的短板" class="headerlink" title="技术主导型公司的短板"></a>技术主导型公司的短板</h2><p>豌豆荚、有道、豆瓣，为什么聚集了大量优秀的技术人才还是没能成功？其实从一个侧面说明一个创业项目的成功，技术只是各个条件中的一环而已。除开技术本身，我们还需要在产品，设计，运营，内容，市场推广等多方面努力，才可能在竞争中占据优势。</p>
<p>有道的运营推广在我看来一直是公司的短板，有道背靠网易，习惯于借助网易的大流量来获取用户，间接影响了有道自己在获得用户方面的尝试。</p>
<p>以前听别人说「技术驱动或技术主导」的公司，我会觉得很酷。现在我反倒觉得，一家公司技术太强势，可能就会压制产品或运营的声音，影响整体的竞争力。</p>
<p>看看周围成功的创业企业，也有大量的公司刚开始并没有牛逼的技术，但是毫不影响别人在创业路上的成长。比如滴滴，直到很晚才找到合适的技术合伙人。比如罗永浩，早期的 ROM 团队和硬件团队实力并不强。比如京东，早期用微软的 ASP 技术开发网站。比如现在很火的健身应用 Keep，一直没有很强的技术团队。</p>
<p>但是他们都成功了，现在的滴滴聚集了大量优秀的 iOS 开发者，还拿了苹果 10 亿美金的投资。罗永浩的软硬件团队早已脱胎换骨。京东已经不断地向业界输出着他们的技术积累。我相信 Keep 也会很好地解决掉他们的技术问题。</p>
<p>所以，除了少量像 Google 无人驾驶或者马斯克造火箭这类前沿技术创新项目外，技术在创业之路上，99% 的时候都不是关键因素，所以我们才会看着一家又一家顶着技术光环公司的陨落。</p>
<p>猿题库其实也算是一家顶着技术光环的公司，我们给高于大部分互联网公司的 offer，努力把以前在有道做的好的技术实践给传承下来。但是我们更明白，商业的成功才是最重要的，所以我们更看重按时交付产品，更关注用户数据。当产品上线时间和代码质量产生直接冲突时，我们会选择按时上线产品而做一些 dirty &amp; quick 的技术实现。更进一步地，我认为好的代码质量其实也是为按时上线服务的，我们写好的代码，只是为了以后在修改需求或者增加人手的时候，更节省时间，最终的结果还是减少了开发时间，保证了按时上线。</p>
<p>技术是一家互联网公司成功的基础，但是除了技术本身，产品方向、UI&amp;UE、市场推广、运营活动、内容建设同样重要。作为技术人员，我们不应该抱有技术改变一切的优越感，而应该是以一个谦卑的姿态，让技术更好地为产品服务，因为只有产品的成功才算是一家企业真正的成功。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/08/Unity3D%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E4%B9%8B%E5%9C%A8uGUI%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%8D%E8%A7%84%E5%88%99%E7%B2%BE%E7%81%B5%E5%88%B6%E4%BD%9C%E6%8C%89%E9%92%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/08/Unity3D%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E4%B9%8B%E5%9C%A8uGUI%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%8D%E8%A7%84%E5%88%99%E7%B2%BE%E7%81%B5%E5%88%B6%E4%BD%9C%E6%8C%89%E9%92%AE/" itemprop="url">Unity3D 游戏开发之在 uGUI 中使用不规则精灵制作按钮</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-08T21:58:39+08:00">
                2016-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Unity3D/" itemprop="url" rel="index">
                    <span itemprop="name">Unity3D</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          本文通过对网络上两种比较通用的不规则按钮制作方案进行对比和研究，解决了基于多边形碰撞器实现不规则按钮这个过程中存在的问题，剖析了基于精灵像素检测实现不规则按钮 这个过程的内部原理，从易用性角度来讲，后者要优于前者，而这种方法的缺陷主要来自于它对图片类型的限制以及允许像素可读写这两个方面，它必须是 Advance 类型，所以普通的 Texture 或者 Sprite 拥有的特性在这里它都无法享受，比如我们无法为其做颜色渐变这类 Tween 动画、无法使用精灵特有的图集特性等等，于此同时它必须允许像素可读写，因此在实际使用中它会在内存中复制一份，在执行效率上可能会受到影响;我们必须意识到的一点是，这个方法的空间复杂度为 O(n-1)，所以随着多边形顶点数目的增加，这个方法的执行效率会越来越低，如果对不规则精灵的边界没有十分苛刻的要求的话，我的建议是我们使用多边形碰撞器标记出一个相对模糊的边界即可，因为现在我们这个方法主要依靠数学计算，没有涉及到摄像机相关计算，所以宣雨松[博客](http://www.xuanyusong.com/archives/3492)中有朋友指出他的方法仅仅适用于 Canvas 的模式为 Screen-Space Camera 这种情况，而我目前这个方法对除了 World Space 以外都是可以使用的，我最大的疑虑来自对鼠标位置进行转化的时候是否应该使用 Screen.width 和 Screen.height，因为我担心可能会出现屏幕适配这种需求;mod=viewthread&tid=41050&highlight=uGUI%2B%E4%B8%8D%E8%A7%84%E5%88%99&mobile=2)指出可以使用多边形碰撞器的 OverlapPoint 方法来判断一个点是否在多边形内部，可是经过我测试，这种方式和宣雨松提供的方法有着类似地问题，无论是否对坐标系进行转换，这个方法都返回 false，响应区域与上图完全一致
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/07/08/Unity3D%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E4%B9%8B%E5%9C%A8uGUI%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%B8%8D%E8%A7%84%E5%88%99%E7%B2%BE%E7%81%B5%E5%88%B6%E4%BD%9C%E6%8C%89%E9%92%AE/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/08/2016/big-fish-begonia/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/08/2016/big-fish-begonia/" itemprop="url">「大鱼海棠」观后感</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-08T13:59:17+08:00">
                2016-07-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>今天上午去看了《大鱼海棠》这部电影，颇有感触，在这里写点东西。毕竟只是观后感，并不是影评，所以也不会过多评价。</p>
<p><img src="https://ooo.0o0.ooo/2016/07/20/5790145051c40.jpg" alt="movie post"></p>
<p>这部电影我在初中的时候就看过它的预告片了，直到现在我高三了才上映，不愧是跳票之王（笑</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/07/08/2016/big-fish-begonia/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/07/2016-07-07-the-dictators-handbook-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/07/2016-07-07-the-dictators-handbook-summary/" itemprop="url">永远的致胜联盟 - 读《独裁者手册》</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-07T22:24:17+08:00">
                2016-07-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <img src="/images/dictators-handbook-book.jpg" class="">

<h1 id="读书心得"><a href="#读书心得" class="headerlink" title="读书心得"></a>读书心得</h1><p>我们古代有句名言「水能载舟，亦能覆舟」，意思是一国之君应该尊重民意，执政为民，这样才能造就国家的富强。但是本书通过大量现代社会中的独裁国家的例子来告诉我们，其实独裁者的政治安全与人民的幸福生活并没有什么直接关系。这些独裁者的安危只与一个有关系：他是否能够构建好「致胜联盟」。</p>
<p>很有意思的是，本书中的大量例子来自「民主国家」美国。因为作者看来，独裁国家和民主国家的统治者在本质上都是一样的，都是追求服务于「致胜联盟」，所以我们在本书中看到了一个统一的关于政治生存的理论。</p>
<p>在我介绍本书的理论前，我们看看这个发生在美国的贝尔市的政治丑闻吧。</p>
<blockquote>
<p>罗伯特·里佐是贝尔小城的前市政经理，该城人口大约为36600人，位于洛杉矶周边，是一座主要由西班牙裔和拉丁裔构成的贫困小城。年人均收入远低于加州和全美的平均水平。超过四分之一的劳动人口生活在贫困线以下。</p>
</blockquote>
<blockquote>
<p>罗伯特·里佐做了17年的市政经理。罗伯特·里佐在1993年被聘任时的年薪是72000美元，经过17年到他2010年夏天被迫下台时，他的年薪达到了令人震惊的78万美元。</p>
</blockquote>
<blockquote>
<p>罗伯特·里佐作为市政经理的薪酬与美国其他政府官员相比如何呢？美国总统的年薪是40万美元。加州州长的年薪是20多万美元。与贝尔市紧邻的洛杉矶市市长年薪刚过20万美元。</p>
</blockquote>
<blockquote>
<p>我们自然会认为罗伯特·里佐肯定一直在设法窃取钱财，2010年夏天贝尔市丑闻发生时，加州总检察长承诺将对罗伯特·里佐是否违法展开调查。他的举动含蓄表达了一个清楚的看法：没有人会每年付给一座小城的市政经理近80万美元。然而，事情的真相比预想的要复杂得多。 </p>
</blockquote>
<blockquote>
<p>整件事其实是一种精明的政治操作，是由贝尔市的选民以及代表他们的市议员们间接批准的，再沾一点点盗窃的边。 </p>
</blockquote>
<p>罗伯特·里佐是如何做到这一点的呢？结论就是他构建了一个小的「致胜联盟」。他首先发起了一个投票，那场投票的目的是决定是否将贝尔市由“一般城市”转变为“宪章城市”，啥叫“宪章城市”呢？就是城市的政策由市议员决定，而不是由加州来决定。当然，罗伯特·里佐为此解释说：这可以给贝尔市更多的自治权，以摆脱遥远的州政府。</p>
<p>这样的投票其实很难被人理解其背后的影响，所以全市只吸引了400人来参与投票。于是，这个投票被通过后，罗伯特·里佐和市议员利用“宪章城市”的自治权，制定了很多政策，使得他们可以获得大量利益。于是，里佐和这些市议员合法地领取着高昂薪水。</p>
<p>最终，加州总检察长甚至无法对他们定罪，因为一切都是合法的。最终找的罪名竟然是他们拿了薪水，但是没有开相应的会议。所以，假如罗伯特·里佐每月再和这些议员「聚一聚」，那么真还拿他没办法了。</p>
<p>在本书的理论中，作者将政治分为三个维度和五个基本法则。</p>
<p>先介绍三个维度，对领导人而言，政治情势可以被分解为三种人群：名义选择人集团、实际选择人集团和致胜联盟。</p>
<ul>
<li>名义选择人集团：包含了所有在选择领导人时至少具有某些法定发言权的人。在美国，指的就是所有合格选民，即所有年满18周岁的公民。</li>
<li>实际选择人集团：真正选择领导人的是这个集团。在沙特阿拉伯的君主政体下，指的就是皇室的高级成员；在英国则指的是支持多数党议员的选民。</li>
<li>致胜联盟：最重要的集团。它是实际选择人集团的一个子集，构成了一个致胜联盟。他们的支持对于一个领导人的政治生存至关重要。</li>
</ul>
<p>领导人有五个基本法则可用于在任何体制下获得成功： </p>
<ul>
<li>法则1：让你的致胜联盟越小越好。</li>
<li>法则2：让你的名义选择人集团越大越好。</li>
<li>法则3：掌控收入的分配。</li>
<li>法则4：支付给你的核心支持者刚好足够确保他们忠诚的钱。</li>
<li>法则5：不要从你的支持者的口袋里挪钱去改善人民的生活。</li>
</ul>
<p>以下是一些解释：</p>
<ul>
<li>法则1：越小的致胜联盟越好提供利益输送。</li>
<li>法则2：一个很大的选择人集团提供了充足的替代支持者，让不可或缺者时刻谨记必须保持忠诚、规规矩矩，不然就会被别人取代。</li>
<li>法则3：有钱才能给致胜联盟输送利益。在刚刚那个贝尔市的故事中，罗伯特·里佐将城市的房产税提高了50%。而巴基斯坦总统阿西夫·阿里·扎尔达里的财富估计高达40亿美元，尽管他统治着一个人均国民收入几乎全球垫底的国家。</li>
<li>法则4：钱少了不够收买忠诚，钱多了就浪费了，而且把支持者的胃口给调大了。</li>
<li>法则5：人民根本就不是威胁，致胜联盟才是真正的威胁。</li>
</ul>
<p>在介绍完政治的三个维度和五个基本法则后，作者从多个角度来验证了他的理论。这些角度包括：</p>
<ul>
<li>上台（第3章）：如果反叛者要成功，通常都是需要原有政府领导人无法构造忠诚的致胜联盟导致的。而这一点具体的原因，可能是财政危机或安全危机。</li>
<li>掌权（第4章）：本章比较了民选领导人和独裁者在维护核心支持者这件事情上的难度。最终指出，因为很难构建小的致胜联盟，所以民选领导人更容易下台。而独裁者开始的时候比较容易被人推翻，但是一旦独裁者构建成功致胜联盟，那么就很难下台了。本章还讨论了公司 CEO 在掌权上可以做的尝试，很多故事都可以在最近的<a target="_blank" rel="noopener" href="http://wiki.mbalib.com/wiki/%E4%B8%87%E7%A7%91%E8%82%A1%E6%9D%83%E4%B9%8B%E4%BA%89">万科事件</a>中得到印证。</li>
<li>窃贫济富（第5章）：本章主要是讲的如何获得金钱。政治的5个基本法则中，第3条就是掌控收入的分配。如果无法获得足够的金钱，就无法构建致胜联盟，本章介绍了各种获取金钱的渠道。</li>
<li>获取与花费（第6章）：本章讨论可以把钱花在哪些地方，包括：教育、医疗、清洁的饮用水、基础设施建设、自由（出版自由、言论自由、集会自由等）。非常有意思的是，在独裁国家，领导人除了限制自由之外（这一点很好理解），也会限制教育、医疗或基础设施建设，因为这都有助于推翻独裁者的统治。</li>
<li>腐败使人有权（第7章）：对于独裁国家，腐败是一种提供私人报酬的方式，并且这种方式同时可以让动摇的联盟成员随时可能失去特权并被检控。对于民主国家，腐败的表现形式更加多样化，更多以扭曲的公共政策的形式出现，例如为富人的一些健康问题提供更多研究资金、为富人提供更为温和的税收政策等。</li>
<li>对外援助（第8章）：对于独裁国家的援助，很多时候都进了独裁者的口袋，而援助国很多时候对此是知情的，援助国对此睁一只眼闭一只眼的原因是：他在谋求某种政治交换。</li>
<li>反叛中的人民（第9章）：对于人民来说，反对独裁是非常正常的。但是作者指出，如果人民还能够发出反叛或抗议的声音，就说明政府还是相对温和的。真正的独裁者是不会让人有一丝抗议的声音。本章也详细解释了法则5，为什么人民无法构成有效的威胁。</li>
<li>战争、和平与世界秩序（第10章）：对于民主国家，战争和对外援助都是为了同一目的，只是一个更强势，另一个更温和。从另一个角度说明战争更多时候无关公平正义，只是政治行为。</li>
</ul>
<p>最后，在第11章，作者讨论了一些办法来解决前面提到的独裁问题，最直接的办法就是扩大致胜联盟的规模，使得独裁者无法为海量的联盟成员提供私人报酬，所以只能提供面向所有人的公共服务地方式来获得选票。</p>
<p>书中引用了大量的事例，涉及美国，俄罗斯，还有一些独裁国家，也涉及一些上市公司的治理，很多故事从作者的角度看，又是另外一番景象。</p>
<p>最后，我个人认为，本书将政治生存作为论述基础是成立的，因为<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%9C%80%E6%B1%82%E5%B1%82%E6%AC%A1%E7%90%86%E8%AE%BA">马斯洛的需求理论</a>的最底层除了生理需求就是安全，如果一个人的政治生涯不能拥有安全感，那确实很难谈更高一层的理想。但是，我也不认为此理论就能将政治中所有人性的部分忽视，就像书中也把新加坡的李光耀作为一个特例来解读，这本身就说明本书的理论不是完美的。</p>
<p>这是一本非常有意思的书，推荐给大家，我也画了本书的思维导图（如下所示）。</p>
<img src="/images/dictators-handbook.jpg" class="">

<hr>

<h1 id="读书笔记"><a href="#读书笔记" class="headerlink" title="读书笔记"></a>读书笔记</h1><p>以下是更加详细的读书笔记。</p>
<h2 id="第1章：统治的规则"><a href="#第1章：统治的规则" class="headerlink" title="第1章：统治的规则"></a>第1章：统治的规则</h2><p>本章从美国一个小城市：贝尔市的政治丑闻说起，介绍贝尔市的市长：罗伯特·里佐 通过购建支持者小联盟，从而在这个城市大肆敛财的故事。</p>
<p>所以本书认为，独裁者的统治逻辑就是这样：</p>
<ol>
<li>政治就是获得和维持政治权力。它与“我们，人民”的普遍幸福无关。</li>
<li>确保政治生存的最好方式是只依靠少数人来上位和在位。这意味着，那些拥有一批同伙可以依靠的独裁者—常常寿终正寝—比民主人士更容易长年掌权。</li>
<li>当这个同伙小集团明白外面还有大把人排队等着取而代之大吃公家饭，最高领导层就具有了如何花钱、如何征税的巨大自由裁量权。</li>
<li>依靠一个支持者小联盟，领导人可以放手大肆提高税率，正如贝尔市那样。</li>
</ol>
<h2 id="第2章：政治的法则"><a href="#第2章：政治的法则" class="headerlink" title="第2章：政治的法则"></a>第2章：政治的法则</h2><blockquote>
<p>为了正确理解政治，我们必须修正一个特别的假设：我们必须停止认为领袖们能够独自领导。 </p>
</blockquote>
<p>所有独裁者都是需要一个核心的幕僚来帮助他做事情的，所以构建这个忠于自己的小联盟致关重要。</p>
<h3 id="路易十四的故事"><a href="#路易十四的故事" class="headerlink" title="路易十四的故事"></a>路易十四的故事</h3><p>本章中，作者把路易十四的故事作为例子，来看他是如何构建致胜联盟的。</p>
<blockquote>
<p>他的父王路易十三死后，年仅四岁的路易十四登基。在早期，实际权力掌握在摄政的他母亲手中。她的亲信横征暴敛。到1661年路易十四23岁开始亲政时，法国已处于破产边缘。</p>
</blockquote>
<blockquote>
<p>国家破产的前景让初掌大权的路易十四身处险境，因为保守派贵族、包括军队将领看到他们的财富和特权在逐渐干涸。这一情况促使这些政治上重要但薄情寡义的朋友开始另找他人来确保他们的财富和特权。面对这样的危机，路易十四必须做出改变，否则将丧失统治权。 </p>
</blockquote>
<p>在以前，国家的高层是在贵族中产生的。但是路易十四做了一件事情：他改变了以前提拔人才的方式，通过从平民中提拔更多人才，特别是军队人才，路易十四成功地增强了致胜联盟的竞争，同时又使得这些平民对他更加忠诚。</p>
<blockquote>
<p>通过提拔众多新人，路易建立了一个对他感恩的新阶层。在这一过程中，他更完整地集中了自己的权威，提升了对宫廷里不少老贵族年金的决定权。这样，他就建立起了一个“绝对”控制的体系，它的成功依赖于军队和新贵族的忠诚，也依赖于限制老贵族的权力，将他们的福祉直接转化为他的福祉。 </p>
</blockquote>
<p>这种改革确实非常有效。最终，路易十四在位 72 年，直到1715年寿终正寝。</p>
<h3 id="政治的三个维度"><a href="#政治的三个维度" class="headerlink" title="政治的三个维度"></a>政治的三个维度</h3><p>对领导人而言，政治情势可以被分解为三种人群：名义选择人集团、实际选择人集团和致胜联盟。</p>
<ul>
<li>名义选择人集团：包含了所有在选择领导人时至少具有某些法定发言权的人。在美国，指的就是所有合格选民，即所有年满18周岁的公民。</li>
<li>实际选择人集团：真正选择领导人的是这个集团。在沙特阿拉伯的君主政体下，指的就是皇室的高级成员；在英国则指的是支持多数党议员的选民。</li>
<li>致胜联盟：最重要的集团。它是实际选择人集团的一个子集，构成了一个致胜联盟。他们的支持对于一个领导人的政治生存至关重要。</li>
</ul>
<blockquote>
<p>根本上讲，名义选择人就是领导人的潜在支持者；实际选择人则指那些其对领导人的支持确实有重要影响的人；而致胜联盟只包括那些领导人不可或缺的关键支持者。这三种人可简单概括为：可相互替代者、有影响者以及不可或缺者。 </p>
</blockquote>
<blockquote>
<p>我们的出发点是意识到：任何一个有能力的领导人都希望掌握尽可能多的权力，并尽可能长久地掌握权力。设法利用可相互替代者、有影响者和不可或缺者来达到自己的目的，这就是统治的行为、艺术和科学。</p>
</blockquote>
<h3 id="政治的5个基本法则"><a href="#政治的5个基本法则" class="headerlink" title="政治的5个基本法则"></a>政治的5个基本法则</h3><p>领导人有5个基本法则可用于在任何体制下获得成功： </p>
<ul>
<li>法则1：让你的致胜联盟越小越好。</li>
<li>法则2：让你的名义选择人集团越大越好。一个很大的选择人集团提供了充足的替代支持者，让不可或缺者时刻谨记必须保持忠诚、规规矩矩，不然就会被别人取代。</li>
<li>法则3：掌控收入的分配。巴基斯坦总统阿西夫·阿里·扎尔达里的财富估计高达40亿美元，尽管他统治着一个人均国民收入几乎全球垫底的国家。</li>
<li>法则4：支付给你的核心支持者刚好足够确保他们忠诚的钱。</li>
<li>法则5：不要从你的支持者的口袋里挪钱去改善人民的生活。</li>
</ul>
<h2 id="第3章：上台"><a href="#第3章：上台" class="headerlink" title="第3章：上台"></a>第3章：上台</h2><p>本章从领导人上台的角度，来解释上一章提到的三个维度和五个基本法则。</p>
<p>本章讲了很多故事，基本上都是印证了：如果反叛要成功，通常都是需要原有政府领导人无法构造忠诚的致胜联盟导致的。而这一点具体的原因，可能是财政危机或安全危机。</p>
<h3 id="财政危机"><a href="#财政危机" class="headerlink" title="财政危机"></a>财政危机</h3><p>领导人没有钱了。比如由于自然灾难，造成税收减少。比如俄国政府禁酒，造成税收减少1&#x2F;3。</p>
<blockquote>
<p>饮用伏特加在俄国大众特别是军队中极为盛行。伏特加如此受欢迎且消费量巨大，它构成了俄国政府岁入的三分之一。一旦禁止伏特加买卖，沙皇的收入立刻锐减。而由于战争，他的开销却在持续增长。沙皇很快就没有能力继续收买忠诚。结果就是他的军队拒绝镇压罢工群众和示威者。</p>
</blockquote>
<h3 id="安全危机"><a href="#安全危机" class="headerlink" title="安全危机"></a>安全危机</h3><p>如果领导人因为身体原因快挂了，致胜联盟就会由于安全感缺失，需要寻找新的同盟者。</p>
<blockquote>
<p>王朝式规则在民主国家司空见惯的原因与在独裁国家和君主制国家毫无二致。有谁比家族成员还能更好地保护家族财富和威望？民选官员花小钱赚大钱，享受权力，他们与奥古斯都皇帝或卡洛·甘比诺一样，渴望让自己的子孙享有一样的好处，保护他们的遗产。</p>
</blockquote>
<p>书中还举了阿尔及利来的本·贝拉的愚蠢故事作为例子。</p>
<blockquote>
<p>1965年6月12日，本·贝拉宣布一周之后将举行政治局会议，会上将讨论三个重大事项：（1）改组内阁；（2）撤换军队领导人；（3）清算军中反对派。他随后离开阿尔及尔前往奥兰。 </p>
</blockquote>
<blockquote>
<p>这一宣示无疑等于告诉他的核心支持者，他将撤换掉他们中的一些人。由于他并没有透露打算具体清除谁，共同的危机感使所有人都起念要除掉他。 </p>
</blockquote>
<h2 id="第4章：掌权"><a href="#第4章：掌权" class="headerlink" title="第4章：掌权"></a>第4章：掌权</h2><blockquote>
<p>爬上高位所需的技能与维持大权所需的本领完全不同。</p>
</blockquote>
<p>我们中国也有一句俗话，叫「打江山不易，守江山更难」。对于一个刚刚上台的新领导人，通常都需要调整致胜联盟，使其更加忠诚。韩信帮刘邦打下天下后，韩信本身的存在就成了一个威胁，因为他在军事上太有才能，并且掌握军队大权。范蠡在这一点上就非常聪明，懂得越王勾践「只可共患难不可共富贵」。</p>
<blockquote>
<p>一名老谋深算的新领导人会迅速采取行动将他们当中的一些人清除掉，替换成那些所获利益更能确保其未来忠诚度的人之后，一名领导人的未来权位才有保障。 </p>
</blockquote>
<p>不光是国家领导人符合这种规律，企业的CEO也一样。同国家不同，企业的实际选择人集团很多时候就是公司的董事会成员，而董事会成员因为拥有多数公司股份，加上上市公司的限制，CEO 很难构建致胜联盟。不过，本书中的惠普公司 CEO 的故事中，我们看到了 CEO 菲奥莉娜 通过并购重建董事会成员，以提高致胜联盟的例子。</p>
<blockquote>
<p>也许是为了获得留下来的几位原董事会成员的支持，或也许只是巧合，董事会成员们的报酬发生了显著变化。在菲奥莉娜成为惠普的首席执行官之前，董事会成员获得的报酬（也就是私人好处）在105700美元至110700美元之间。随着菲奥莉娜上台和董事会规模变小，这一数字略微缩减为100000美元至105000美元之间，并在2000年至2003年之间保持不变。但到了2004年，根据惠普公司委托声明书里公布的数据，董事会成员拿到的钱在200000美元至220000美元之间。同一时期，惠普的年化股息稳定在每股0.32美元，惠普的股票表现显著跑输主要股指。事实再清楚不过了：惠普的股价表现低劣、股息不变，而董事们的报酬却翻倍。 </p>
</blockquote>
<p>最近万科的事件当中，王石在投资中引入新的大股东，如果从构建致胜联盟来看，也是非常正确的。新引入的大股东和公司高管很容易处于蜜月期，从而在决策中达成一致。</p>
<blockquote>
<p>一个联盟的最重要的三个特征是：（1）忠诚；（2）忠诚；（3）忠诚。成功的领导人让周围充满自己信赖的朋友和家人，而将任何有野心的支持者清除掉。</p>
</blockquote>
<blockquote>
<p>当然，有些时候拥有一些能干的顾问是必不可少的。拜占庭、莫卧儿、中国、伊斯兰王国以及许多其他国家的君主想出了一种很有创意的方法来防止这些顾问成为敌手：他们全都在不同时期仰赖宦官。</p>
</blockquote>
<blockquote>
<p>就算到了现代，选择无法登顶的亲密顾问这一原则仍然有效。萨达姆·侯赛因作为伊斯兰国家伊拉克的总统，却挑选了一名基督徒塔里克·阿齐兹作为二号人物，这不是偶然的。 </p>
</blockquote>
<p>作者也在本章比较了民选领导人和独裁者在维护核心支持者这件事情上的难度。最终指出，因为很难构建小的致胜联盟，所以民选领导人更容易下台。而独裁者开始的时候比较容易被人推翻，但是一旦独裁者构建成功致胜联盟，那么就很难下台了。</p>
<h2 id="第5章：窃贫济富"><a href="#第5章：窃贫济富" class="headerlink" title="第5章：窃贫济富"></a>第5章：窃贫济富</h2><p>本章主要是讲的如何获得金钱。政治的5个基本法则中，第3条就是获得掌控收入的分配。如果无法获得足够的金钱，就无法构建致胜联盟。在这方面，书中提到了一些办法。</p>
<h3 id="继承财富"><a href="#继承财富" class="headerlink" title="继承财富"></a>继承财富</h3><p>对于民选国家，财政可以从上一任领导班子中获得。但对于独裁者来说，通常这部分金钱是保密的，所以比较难找到。所以，「知道钱在哪里」在独裁国家尤其重要。利比里亚在多伊被推翻后，因为没有人有足够的资源控制全国，每个派别在小范围内收买支持者，所以全国陷入了内战。</p>
<h3 id="征税"><a href="#征税" class="headerlink" title="征税"></a>征税</h3><p>征税面临三个限制：</p>
<ul>
<li>第一，征税会削弱人们工作的热情。</li>
<li>第二，一些税收方面的负担不可避免地会落到领导人的关键支持者身上。</li>
<li>第三，收税需要专业知识和资源。收税的成本限制了领导人能够榨取什么并影响到征税方法的制定。</li>
</ul>
<p>一般来讲，第一点限制了独裁国家的税收，第二点限制了民主国家的税收。</p>
<h3 id="开采资源"><a href="#开采资源" class="headerlink" title="开采资源"></a>开采资源</h3><p>相比于征税，直接从自然资源中获得财富要容易得多。资源丰富的国家使独裁统治者有能力大规模地回报支持者并聚集起庞大的财富。但是，因为基本法则五，所以这些钱并不会用于改善人民的生活。</p>
<blockquote>
<p>拥有丰富可开采自然资源的国家系统性地落后于资源稀缺的国家。资源丰富的国家经济增长较差，容易发生内战，比资源稀缺国家更具有独裁性。 </p>
</blockquote>
<blockquote>
<p>为了确保人民无法协同造反、夺取国家控制权，领导人竭力让联盟以外的人保持贫困、无知和散漫状态。具有讽刺意味的是，原本可以用来解决各种社会问题的石油反倒给领导人提供了将这些问题故意变得更糟的政治动机。 </p>
</blockquote>
<p>在本书中，作者举了尼日利亚的例子，尼日利亚据称拥有世界第十大的石油储备。从1970年到2000年，尼日利亚累计获得3500亿美元的石油收入。但尽管拥有巨大的石油财富，但尼日利亚的人均年收入从1970年的1113美元降至2000年的1084美元，该国成为世界上最穷的国家之一。</p>
<h3 id="借钱-债务减免"><a href="#借钱-债务减免" class="headerlink" title="借钱&amp;债务减免"></a>借钱&amp;债务减免</h3><p>通过向别的国家借钱或债务减免来获得财富，这通常都伴随着一些政治条件的交换。</p>
<h2 id="第6章：获取与花费"><a href="#第6章：获取与花费" class="headerlink" title="第6章：获取与花费"></a>第6章：获取与花费</h2><p>本章讨论可以把钱花在哪些地方，包括：教育、医疗、清洁的饮用水、基础设施建设、自由（出版自由、言论自由、集会自由等）。</p>
<p>非常有意思的是，在独裁国家，领导人除了限制自由之外（这一点很好理解），也会限制教育、医疗或基础设施建设。因为这都有助于推翻独裁者的统治。</p>
<blockquote>
<p>不论是独裁者还是民主领导人都面临相似的问题：什么范围的教育才是适量的？对于那些依赖极少数支持者的领导人来说，答案显而易见。教育机会不能太广泛，以至于普通人，也就是可相互替代者因受到教育而质疑政府的权威。</p>
</blockquote>
<blockquote>
<p>考察领导人对教育的兴趣，有一个更好的衡量办法，就是看顶尖大学在世界上的分布情况。除了几个特例之外，没有任何一个非民主国家拥有排名世界200强的大学。那些人口较少、依赖大量核心支持者的国家，比如以色列、芬兰、挪威、荷兰、比利时、加拿大，无一不拥有多所大学进入世界200强。</p>
</blockquote>
<p>看到这里我顺便查了一下，中国的清华大学、北京大学排在全球<a target="_blank" rel="noopener" href="http://www.qianmu.org/ranking/1528.htm">第25名和第41名</a>。</p>
<h2 id="第7章：腐败使人有权"><a href="#第7章：腐败使人有权" class="headerlink" title="第7章：腐败使人有权"></a>第7章：腐败使人有权</h2><p>对于独裁国家，腐败是一种提供私人报酬的方式，并且这种方式同时可以让动摇的联盟成员随时可能失去特权并被检控。</p>
<blockquote>
<p>尽管私人报偿可以直接由政府财政拨给警察，补偿警察忠诚表现的最简单方式就是给予他们自由腐败的空间。工资这么少，他们必定会意识到腐败不仅可以接受也是必须的。然后他们会加倍效忠于政权：首先，他们会感谢政权给他们敛财的机会；其次，他们会明白，如果他们三心二意，将很可能失去特权并被检控。</p>
</blockquote>
<p>对于民主国家，腐败的表现形式更加多样化，例如以扭曲的公共政策的形式出现。例如为富人的一些健康问题提供更多研究资金、为富人提供更为温和的税收政策等。</p>
<blockquote>
<p>富裕人群和共和党候选人总的来说赞成政府对癌症、阿尔茨海默症以及其他老年病的医学研究提供支持，这些老人恰好构成了美国最富有的年龄层。</p>
</blockquote>
<p>本文讨论了两个小致胜联盟的团体：国际足联和国际奥委会的丑闻，并且指出在这种小团体中，腐败几乎是无法避免的，唯一的办法是扩大致胜联盟的数量。</p>
<p>当独裁者通过腐败给予了致胜联盟合理的回报之后，剩下的钱就是他的自由裁量的资金了。他可以把这个钱存在自己秘密的银行帐号上，也可以用于改善人民的生活。不过文章也指出，很多时候改善人民的生活并不是那么容易的事情。</p>
<blockquote>
<p>赫鲁晓夫计划实施一项农业改革。尽管出发点是善良的，赫鲁晓夫的农业计划和实施却是一场灾难。为了取悦赫鲁晓夫，并出于对达不到期望所带来的政治后果的可能担忧，地方官员们承诺尽力去完成他对于提高产量的要求。以苏联原始的农业技术来说，他们的承诺当然不可能实现。赫鲁晓夫的善意理念的结果就是，农民甚至不得不连种牛都杀掉以完成他们的肉类生产配额。</p>
</blockquote>
<p>这一点和中国的大跃进时期遇到的问题如出一辙。</p>
<h2 id="第8章：对外援助"><a href="#第8章：对外援助" class="headerlink" title="第8章：对外援助"></a>第8章：对外援助</h2><p>对于独裁国家的援助，很多时候都进了独裁者的口袋，而援助国很多时候对此是知情的，援助国对此睁一只眼闭一只眼的原因是：他在谋求某种政治交换。</p>
<blockquote>
<p>很难相信援助机构会天真到不明白他们的资金遭误用。也许真相存在于美国国际开发署的另一个目标上—“增进美国外交政策的利益”。也许美国更感兴趣的是在对抗全球恐怖主义的战略中拥有一个可靠的盟友，以及在打击印度洋的索马里海盗方面获得帮助。 </p>
</blockquote>
<p>由于援助很多时候并没有改善人民的生活，所以援助国的形象甚至都是负面的。</p>
<blockquote>
<p>2002年，皮尤研究中心在42个国家展开了一项民意调查。其中一个问题是问人们对美国的看法。在巴基斯坦，69%的受访者表示对美国极其厌恶。在埃及，这个数字是79%。在其他40个国家，平均只有11%的人对美国持有极端负面的评价。然而2002年巴基斯坦和埃及从美国平均获得了16亿美元的经济和军事援助，而其他40个国家平均只获得9700万美元的援助。这一模式被详细的统计分析所证实。获得大量美国援助的国家的人民看来很仇视美国。</p>
</blockquote>
<h2 id="第9章：反叛中的人民"><a href="#第9章：反叛中的人民" class="headerlink" title="第9章：反叛中的人民"></a>第9章：反叛中的人民</h2><p>对于人民来说，反对独裁是非常正常的。但是作者指出，如果人民还能够发出反叛或抗议的声音，就说明政府还是相对温和的。真正的独裁者是不会让人有一丝抗议的声音。</p>
<blockquote>
<p>谨慎老到的独裁者都将反叛扼杀在萌芽状态。这就是为什么我们一再重申，只有那些愿意做真正肮脏勾当的人才适合盘算成为独裁者。心慈手软的人一眨眼工夫就会被人搞掉。 </p>
</blockquote>
<p>如果军队不对人民的抗议采取措施，通常都表明，独裁者的致胜联盟出现了动摇。「安全部队拿不准是否能保住长期的特权，拒绝镇压群众，两面下注。」这种做法使得安全部队最终是站在胜者的一边的，这是一种更为自保的行为。</p>
<blockquote>
<p>近代以来不少重大政治历史事件，从法国大革命到苏联及其卫星国的崩溃，都缘于政权的核心支持者不愿在关键时刻镇压人民。近年来的所谓“颜色革命”（格鲁吉亚2003年的玫瑰革命、乌克兰2004—2005年的橙色革命以及2005年吉尔吉斯斯坦的郁金香革命），突尼斯的茉莉花革命以及埃及革命，都展现了同一现象。 </p>
</blockquote>
<h2 id="第10章：战争、和平与世界秩序"><a href="#第10章：战争、和平与世界秩序" class="headerlink" title="第10章：战争、和平与世界秩序"></a>第10章：战争、和平与世界秩序</h2><p>对于民主国家，战争和对外援助都是为了同一目的，只是一个更强势，另一个更温和。</p>
<blockquote>
<p>对民主领导人而言，战争不过是达到对外援助想要达到的目标的另一种方式。对外援助收买受援国的政策让步，战争则强加政策让步。</p>
</blockquote>
<p>对于美国来说，中东政策的核心就是能源政策，为的是给美国经济运转带来稳定的能源供给。</p>
<blockquote>
<p>如果说能源政策不是美国中东政策的一个主要决定因素甚至是最主要决定因素，那就太天真了，但这并不意味着是拿士兵的生命去换石油财富。美国的目标是保护石油的供应，因为石油为世界经济机器的运转提供了能源。联盟的目标是经济稳定而不是私人回报。</p>
</blockquote>
<p>由于战争的胜负决定着民主国家领导人的政治安全，所以民主国家更喜欢打肯定赢的战争。</p>
<blockquote>
<p>民主国家专挑软柿子捏毫不稀奇。回顾过去近200年，民主国家赢得了93%由它们挑起的战争。相比之下，非民主国家只赢下60%由它们发起的战争。</p>
</blockquote>
<h2 id="第11章：怎么办"><a href="#第11章：怎么办" class="headerlink" title="第11章：怎么办"></a>第11章：怎么办</h2><p>本章讨论了一些办法来解决前面提到的独裁问题，最直接的办法就是扩大致胜联盟的规模，使得独裁者无法为海量的联盟成员提供私人报酬，所以只能提供面向所有人的公共服务地方式来获得选票。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/04/2016/konosuba-9-aka-no-shukumei/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/04/2016/konosuba-9-aka-no-shukumei/" itemprop="url">「为美好的世界献上祝福」第⑨卷 红之宿命</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-04T16:24:00+08:00">
                2016-07-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%B8%B8/" itemprop="url" rel="index">
                    <span itemprop="name">日常</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <p>我买的实体书还在路上呢，翻译倒是先出来了，现在我的心情很复杂 <img src="https://img.prin.studio/legacy/image.php?di=E0G2" alt="emotion 1"></p>
<p>konosuba 厨的爆肝力真可怕</p>
<p><img src="https://ooo.0o0.ooo/2016/07/20/5790133e49b50.jpg" alt="cover preview"></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/07/04/2016/konosuba-9-aka-no-shukumei/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/07/01/2016/2016-07-01-suggestions-for-beginners/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/01/2016/2016-07-01-suggestions-for-beginners/" itemprop="url">给初入门程序员的建议</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-01T00:00:00+08:00">
                2016-07-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>我们经常看到网络上有很多黑程序员的段子，但那不过是一群居心叵测的人散布的谣言，企图通过给新人们留下负面的印象，进而阻止更多人进入这个行业的方式，来保证不思进取的自己不会被行业淘汰。</p>
<h2 id="解决问题的途径比得到结果更重要"><a href="#解决问题的途径比得到结果更重要" class="headerlink" title="解决问题的途径比得到结果更重要"></a>解决问题的途径比得到结果更重要</h2><p>解决问题是一个通用的能力，本应在学生时代习得，若是不擅长解决问题，怕是短时间内很难提升，但在一个具体的领域里，往往「途径」更加重要。</p>
<p>当你在一个论坛或社区提出一个问题时，有些惜字如金的大牛会直接丢给你一个链接，不会多留下哪怕半个字，不要小看一个链接，它可能比直接告诉你答案更有价值。</p>
<p>当你进入一个新的领域，遇到问题时往往不知道应该去哪寻找答案，这时候你会想如果有一个网站，列出了作为新手可能遇到的一切问题该多好。但世上没有这么好的事情，往往这些问题和解答分散在不同的网站上 —— 从这个链接就可以点过去。</p>
<h2 id="不要相信一句话就可以描述的真理"><a href="#不要相信一句话就可以描述的真理" class="headerlink" title="不要相信一句话就可以描述的真理"></a>不要相信一句话就可以描述的真理</h2><p>网络上的大牛经常提出提出一些简洁有力的口号，例如「抽象可以解决计算机领域的一切问题」、「好的代码不需要注释去解释」、「动态类型语言才能提高编码效率」、「PHP 是世界上最好的编程语言」等等。</p>
<p>并不是说这些观点是错误的，但它们就像「苹果总是会落到地上」这种简单的理论一样，描述的情况是片面的，而非普适的。有些结论是前辈们花了大量的时间和精力探索出来的，但光知道一个结论对你的编程是没有太多指导意义的，更多的细节隐藏在得出这个结论的过程中。</p>
<p>所以如果提出这些观点的人没有深入介绍、你也不打算自行了解，索性不如忘掉这些话。</p>
<h2 id="深入了解你使用的工具"><a href="#深入了解你使用的工具" class="headerlink" title="深入了解你使用的工具"></a>深入了解你使用的工具</h2><p>在编程的过程中，我们需要借助大量的工具来完成版本控制、调试、重构、构建和部署等工作。包括你的编辑器（IDE）和操作系统都是必不可少的工具，选择一组好用的工具，并且不断地学习和配置它们，这样才能逐渐提高工作效率。</p>
<p>每个人在选择工具的过程中都会掺杂大量的个人喜好，但我建议大家在选择工具时考虑下面几个因素：是否是免费软件或开源软件、是否有公司在维护、是否有大量用户和活跃的社区、是否支持插件或拓展、是否支持多种平台。</p>
<h2 id="写出可以运行的代码只是最基本的要求"><a href="#写出可以运行的代码只是最基本的要求" class="headerlink" title="写出可以运行的代码只是最基本的要求"></a>写出可以运行的代码只是最基本的要求</h2><p>当一个程序可以运行起来了，不要高兴得太早，这只是一个开始。例如你是否考虑到了各种边界情况；当程序收到非预期的输入会发生什么；所依赖的外部服务出现异常会怎样，发生错误时是否能从日志中还原出现场；如果程序处理的数据量或运行时间提高几个数量级会发生什么；构建、测试和部署过程是否做到了自动化；代码是否为将来的修改做好了准备等等。</p>
<h2 id="先精通一种语言，再广泛涉猎"><a href="#先精通一种语言，再广泛涉猎" class="headerlink" title="先精通一种语言，再广泛涉猎"></a>先精通一种语言，再广泛涉猎</h2><p>很多新手会各种编程语言搞得头晕目眩，不知道先从哪个学起，索性不如左右开弓，同时学习。</p>
<p>一旦你这样做了就会发现很难将同时学习的两种语言的知识区分开，因为它们实在太像了。但如果你先精通一门语言，了解了它每个语法的工作方式之后再学习其他语言就很轻松了，因为你对已掌握的语言已经足够了解，不会和新语言混淆。而且你会不由自主地用已掌握的语言去和新语言比较，更容易发现它们之间的差异，发现各自语法的内在逻辑。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/26/2016-06-26-why-meituan-is-removed-from-appstore/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/26/2016-06-26-why-meituan-is-removed-from-appstore/" itemprop="url">美团到底为什么从 AppStore 下架</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-26T23:08:39+08:00">
                2016-06-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <img src="/images/meituan.jpg" class="">


<h2 id="故事背景"><a href="#故事背景" class="headerlink" title="故事背景"></a>故事背景</h2><p>6 月 23 日（上周四）晚上，美团公司旗下的所有 App（包括美团团购、美团外卖、猫眼电影等 13 款）被苹果下架。一时间谣言四起，网上传得最多的原因是美团没有支付牌照，被实名举报，所以被下架了。而美团对外称是由于技术原因下架，正在和苹果沟通。</p>
<p>6 月 24 日上午，美团公司的全线产品重新上架成功。而美团和苹果公司均没有对外详细透露此次下架原因。</p>
<p>但是，此次事件里面反映出很多有意思的细节，值得和大家分析一下。</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><h3 id="忘记续费"><a href="#忘记续费" class="headerlink" title="忘记续费"></a>忘记续费</h3><p>首先我们来分析一下美团是否是因为忘记续费而被下架。做 iOS 开发的应该都知道，当我们的开发者帐号快要到期时，iTunesConnect 后台的顶部会出现黄色的警告提示，另外开发者的邮箱也会收到相应的邮件提醒。</p>
<p>美团旗下有 13 款应用，按照应用发版的频率，肯定会有工程师看到 iTunesConnect 后台的警告。因此，忘记续费这种事情实在是不太可能发生的。</p>
<h3 id="牌照问题"><a href="#牌照问题" class="headerlink" title="牌照问题"></a>牌照问题</h3><p>我们再来看看网上传得最多的理由：牌照问题。美团确确实实没有支付牌照，但是，如果真的是因为这个理由被全线下架，那么为什么仅仅过了一天又全线上架了？</p>
<p>美团到现在也没有获得支付牌照，它旗下的 13 款应用在恢复上架后也没有做明显的功能改动。所以如果它因为这个理由被下架，那么理应在获得牌照，或者关闭相应功能后才能重新上架。</p>
<p>我查了一下，在恢复上架后，美团的应用最后更新时间是 6 月 20 日，美团外卖的最后更新时间是 6 月 2 日。这就说明这些 App 并没有做任何功能改动就重新上架了。</p>
<img src="/images/meituanwaimai-updatetime.jpg" class="">

<p>因此，牌照问题这个理由也是站不住脚的。</p>
<h3 id="下架理由猜测"><a href="#下架理由猜测" class="headerlink" title="下架理由猜测"></a>下架理由猜测</h3><p>那么，还有什么可能的下架理由吗？我突然想起来我以前在网易有道听到过的一个故事。</p>
<blockquote>
<p>有一家公司的 App 有个小问题，苹果的审核人员想让他们做一个修改，但是，苹果发现这家公司留的 Agent 帐号里的电话号码打不通（或者没人接），于是苹果就霸气地把人家的 App 直接下架了。这家公司当然慌了，赶紧联系苹果，于是这个小修改迅速被执行了，App 被重新上架。</p>
</blockquote>
<p>美团有可能遇上了类似的遭遇吗？我感觉是很有可能的。因为苹果在应用市场一贯强势的态度，让各大互联网公司都不敢怠慢。</p>
<p>而这种理由，也是最最可能不被苹果和美团公开的。因为对于苹果来说，因为联系不上就把人家全线 App 下架明显做法不太厚道。而对于美团来说，因为不敢得罪苹果，加上自己失误在先，也会选择不公开原因。</p>
<p>于是，技术原因就成了对外的公关说辞了。</p>
<h2 id="我见过的下架事件"><a href="#我见过的下架事件" class="headerlink" title="我见过的下架事件"></a>我见过的下架事件</h2><p>在我的 iOS 开发经历中，除了上面讲的那个沟通不畅带来的下架外，我还知道两次下架事件。</p>
<p>一次下架事件是关于抄袭的。2012 年 9 月，大众点评向苹果举报食神摇摇抄袭大众点评内容，于是食神摇摇被苹果 App Store 下架。这次算是公司维护知识产权的一次正常博弈。</p>
<p>另一次下架事件是关于人人网的。2013 年，人人网旗下的游戏因为在 AppStore 恶劣地刷榜行为，被苹果全线下架。AppStore 的刷榜行为其实到现在也没有停息过，而且做得更加隐蔽，我们公司也深受其害，而且我们向苹果举报也不管用，我本周会另外撰文介绍那些不为人知的刷榜手段。</p>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>这个事情还有一点比较奇怪的是，我私下认识一些美团的 iOS 开发，连他们都不知道这件事情的背后原因，让这件事情更加神秘了。</p>
<p>另外，我了解到像微信这种海量用户的 App，会被苹果的审核团队特别照顾。除了能够获得快速的审核外，审核员也会和微信团队有更加密切的交流，以便微信能够快速响应审核意见。</p>
<p>我个人认为，除了微信以外，像美团这种在中国区 AppStore 总榜前十的应用，也理应受到这样的审核照顾。这种野蛮的下架，对于中国区的 iPhone 用户来说，也是一种伤害。</p>
<p>就在发稿前，美团在 AppStore 排名总榜第五（下图）。</p>
<img src="/images/meituan-rank.jpg" class="">

<p>苹果现在更加重视中国市场了，而应用审核时更加良好的沟通，就是对于中国市场和开发者最大的激励，期望 AppStore 中国区越来越好。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/26/2016-06-26-my-story-about-infoq/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/26/2016-06-26-my-story-about-infoq/" itemprop="url">我与 InfoQ 的故事</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-26T21:28:29+08:00">
                2016-06-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>如果你也喜欢写作，这个真实的故事或许能够帮助你继续坚持下去。</p>
<p>我最早听说 <a target="_blank" rel="noopener" href="http://www.infoq.com/cn">InfoQ</a> ，是因为在上面发现了很多关于敏捷开发的文章。可以说，InfoQ 是最早推广敏捷软件开发的社区。之后 InfoQ 的内容范围开始扩展，除了敏捷外，服务器开发，移动开发的内容也都有了。</p>
<p>在我心目中，InfoQ 网站上的文章一直是「高大上」的，直到有一天，我的老大常圳看到我常常写博客，推荐我向 InfoQ 投稿时，我才发现，或许我可以把「向 InfoQ 投稿」作为一个长远的目标。</p>
<p>我最早的投稿文章都是偏 iOS 开发工具类的，那个时候网上的 iOS 文章很少，有一些好用的工具并不是那么普及，于是我就将我熟悉的 <a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/network-packet-analysis-tool-charles">Charles</a>, Reveal, <a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/crashlytics-crash-statistics-tools">Crashlytics</a> 等工具整理成文章发表到了 InfoQ 上。很感谢 InfoQ 的水哥和杨赛两位编辑，他们对于我这个新手非常 Nice，对于文章内容也提了很多有价值的意见。这些文章在 InfoQ 上的发表给了我最初的信心。</p>
<p>于是我开始写一些更难的 iOS 技术文章，包括分析 Tagged Pointer 实现的：<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/deep-understanding-of-tagged-pointer">《深入理解Tagged Pointer》</a>、block 的实现原理等。</p>
<p>最终，我发现这些文章已经足够汇集成一本书了，于是我就出版了<a target="_blank" rel="noopener" href="http://item.jd.com/11598468.html">《iOS 开发进阶》</a>。所以，如果没有 InfoQ 最初的鼓励，应该就没有这本书的出版。</p>
<p>也正是因为我在 iOS 领域的文章得到了 InfoQ 和读者的认可，也才使得我更加大胆地表达意见。包括推广 ReactiveCocoa 的文章：<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/reactivecocoa-ios-new-develop-framework">《ReactiveCocoa - iOS开发的新框架》</a>，以及警示大家避免过于崇拜 MVVM 和函数式编程的文章：<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/rethinking-mvc-mvvm">《被误解的MVC和被神化的MVVM》</a>，以及关于 Swift 的<a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/swift-brain-gym-monad">一些思考</a>。</p>
<p>现在的我更加自信，我可以明确地表达出自己的技术观点，包括对于 Core Data 的厌恶，对于 Realm 的警慎，对于 React Native 的悲观，对于 Xib 的漠视，对于自动化测试的遗憾。这些观点在新人口中说出很可能会被认为无知，而我有信心坚持自己的观点。</p>
<p>我在快速成长，InfoQ 也是。现在的 InfoQ ，已经成长为极客邦，旗下除了 <a target="_blank" rel="noopener" href="http://www.infoq.com/cn">InfoQ</a>，还包括 <a target="_blank" rel="noopener" href="http://git.geekbang.org/">GIT</a>，<a target="_blank" rel="noopener" href="http://ego.geekbang.org/">EGO</a> 和 <a target="_blank" rel="noopener" href="http://www.stuq.org/">StuQ</a>。而 InfoQ 主办的 QCon 、ArchSummit 已经成为全中国最有名的技术会议。在今年，InfoQ 开始涉足垂直领域，上周刚刚结束的<a target="_blank" rel="noopener" href="http://gmtc.geekbang.org/">全球移动技术大会（GMTC）</a> 就是一次成功的移动端会议。</p>
<p>现在，InfoQ 不但有网站了，也有微信公众号，里面的推送内容有相当一部分都是移动开发相关的，例如：</p>
<ul>
<li>携程移动 App 架构优化之旅（编号 21）</li>
<li>全栈工程师谈微博 iOS 客户端架构与优化之路（编号 22）</li>
<li>京东无线服务端架构演进历程（编号 23）</li>
<li>滴滴 iOS 客户端的架构演变之路（编号 24）</li>
<li>偷师饿了么：怎样用 HTTP&#x2F;2 优化 iOS APP 网络层次架构？（编号 25）</li>
<li>被误解的 MVC 和被神化的 MVVM（我的投稿，编号 28）</li>
</ul>
<img src="/images/infoq-wexin.jpg" class="">
<p>这些文章都是非常有阅读价值的，长按上面的二维码，关注 InfoQ 后，在 InfoQ 的微信公众号回复相应编号，就可以看到相关文章。</p>
<p>感谢 InfoQ 一直以来对我的帮助，如果你也希望像我一样成为技术作者，那么可以从尝试给 InfoQ 投稿做起，相信你一定会收获很多。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/26/2016/2016-06-26-wizard-chess/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/26/2016/2016-06-26-wizard-chess/" itemprop="url">WizardChess: 一个国际象棋 AI 的实现</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-26T00:00:00+08:00">
                2016-06-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <blockquote>
<p>这篇文章由我 6 月末在 LeanCloud 进行的一次技术分享整理而来。</p>
</blockquote>
<p>我高一的时候曾读过一本「代码的力量：C&#x2F;C++ 中国象棋程序入门与提高」，也想自己试着实现一个，连名字都想好了，就叫 Wizard Chess —— 哈利波特中的「巫师棋」。然而直到最近借着 AlphaGo 的热度，我才真正动起手来，代码开源在 <a target="_blank" rel="noopener" href="https://github.com/jysperm/WizardChess">GitHub</a>，因为是纯前端程序，所以你可以直接访问托管在云引擎上的 Demo <a target="_blank" rel="noopener" href="http://wizard-chess.leanapp.cn/">http://wizard-chess.leanapp.cn</a>.</p>
<p>国际象棋是一种「透明」的、「没有随机元素」的博弈游戏，所谓「透明」是说在任一时间，博弈双方对局面的了解都是一致的（而不像牌类游戏看不到对方的手牌），大部分棋类游戏，例如五子棋、围棋都是如此，这类游戏需要的是非常强的逻辑推理能力去预见若干回合之后的局面，本文介绍的方法也大体适用于这些棋类游戏。</p>
<p>在技术选型上，我选择了用 TypeScript 来编写核心代码以便可以同时运行于浏览器和 Node.js, 借助 TypeScript 的编译期类型检查，可以让我们更早地发现和类型有关的错误，同时 Chrome 本身也有着非常好用的调试器和性能分析器来查找性能瓶颈。前端方面我选择用 React 来编写 UI, Web Worker 来运行计算 —— 毕竟如果在主线程进行 CPU 密集的运算会阻塞事件循环。</p>
<p>最近一段时间，我发现在这种偏重于数据结构的程序中，「不可变」的数据类型将会极大地减少复杂度并且提高性能，但在我调研了 Immutable.js 后并没有直接使用它，因为我觉得可能我不需要它提供的那么复杂的数据结构，而是自己在编码时注意不要修改参数、函数总是返回新的对象。</p>
<h3 id="建模"><a href="#建模" class="headerlink" title="建模"></a>建模</h3><p>第一步是将国际象的规则建模到代码中，首先是定义一些数据结构来表示国际象棋中的元素（阵营、棋子、棋盘）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">enum <span class="title class_">ChessType</span> &#123;</span><br><span class="line">  king, queen, rook, bishop, knight, pawn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">enum <span class="title class_">Camp</span> &#123;</span><br><span class="line">  black, white</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">Piece</span> &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">ChessType</span>;</span><br><span class="line">  <span class="attr">camp</span>: <span class="title class_">Camp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">Board</span> &#123;</span><br><span class="line">  <span class="comment">/* from 0 to 63 */</span></span><br><span class="line">  <span class="attr">pieces</span>: <span class="title class_">Array</span>&lt;<span class="title class_">Piece</span>&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后需要为每一种棋子编写一个「生成走法」的函数，以便我们的程序知道一个棋子有哪些走法可走，在此以国王为例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateMovesForKing</span>(<span class="params">board, piece, camp</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> target <span class="keyword">in</span> ([-<span class="number">1</span>, -<span class="number">1</span>], [<span class="number">0</span>, -<span class="number">1</span>], [<span class="number">1</span>, -<span class="number">1</span>], [-<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">                 [<span class="number">1</span>, <span class="number">0</span>], [-<span class="number">1</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">1</span>]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (target on the board and (target is empty or target.<span class="property">camp</span> != piece.<span class="property">camp</span>)) &#123;</span><br><span class="line">      <span class="keyword">yield</span> target</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>按照国际象棋的规则，国王可以以直线或斜线的方式移动一格，因此上面的代码会检查相邻一格的位置是否在棋盘范围内、是否是空的或者有对面的棋子（吃子）。</p>
<p>然后还需要考虑到我们的程序和外部的输入输出，在国际象棋领域已有一个叫 FEN 的标准来表示当前的局势（各个棋子在棋盘上的位置），下面是一段表示开局状态的 FEN:</p>
<pre><code>rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR
</code></pre>
<p>FEN 为每种棋子规定了一个字母、用大小写表示黑棋或者白棋、用斜线分割不同的行、用数字表示空白。在我们的程序的 Web 界面中有一个填写 FEN 的文本框，当你填入一个新的 FEN 时，棋盘上的棋子会随之改变；反过来当你移动棋子时，FEN 也会跟着改变，这将会让我们后续的调试变得非常简单。</p>
<h3 id="局面评估"><a href="#局面评估" class="headerlink" title="局面评估"></a>局面评估</h3><p>我们的程序会在每个回合中，从众多可能的走法中选择一个对自己而言最优的走法，所以我们需要一个函数去评估和量化一个走法对我们而言的优势。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">evaluate</span>(<span class="params">board: Board, camp: camp</span>): number &#123;</span><br><span class="line">  <span class="keyword">var</span> ourScore = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> piece on board &#123;</span><br><span class="line">    <span class="keyword">if</span> (piece.<span class="property">camp</span> == camp) &#123;</span><br><span class="line">      ourScore += <span class="title function_">getScode</span>(board, piece)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ourScore -= <span class="title function_">getScode</span>(board, piece)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ourScore;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个函数会接受一个棋盘（board）和一个阵营（camp）作为参数，这个棋盘其实就是应用了某个走法之后，各个棋子的位置。这个函数会检查棋盘上每个棋子，如果这个棋子是我方的，就将其代表的分数加到「我方的优势分数」上；如果是对方的，就从我方的优势分数中减去对应的分数。</p>
<p>每个棋子所代表的分数则按照下表来计算：</p>
<table>
<thead>
<tr>
<th>棋子</th>
<th>基础分数</th>
<th>每多一种走法的额外分数</th>
</tr>
</thead>
<tbody><tr>
<td>王</td>
<td>10000</td>
<td>2</td>
</tr>
<tr>
<td>皇后</td>
<td>1000</td>
<td>2</td>
</tr>
<tr>
<td>车</td>
<td>500</td>
<td>2</td>
</tr>
<tr>
<td>马</td>
<td>400</td>
<td>2</td>
</tr>
<tr>
<td>象</td>
<td>300</td>
<td>2</td>
</tr>
<tr>
<td>兵</td>
<td>100</td>
<td>2</td>
</tr>
</tbody></table>
<p>在这里我们凭「直觉」，按照棋子的重要性，给了每个棋子一个基础分数。但如果只有基础分数的话就会出现这样的情况：我们只能区分出出现吃子行为时的优势，如果不发生吃子，那么所有局面的优势都是一样的。为了解决这个问题，我们可以为「每一个可能的走法」再增加两点分数，因为在象棋中，我们可以走到一个格子，就说明我们对这个格子有一定的控制能力（如果对方的棋子走到这个格子我们就可以吃掉它），引入这个代表「灵活性」的分数后，我们会认为有更多走法的局面是更具有优势的局面。</p>
<p>关于局面评估函数应该考虑什么、不应该考虑什么是一个值得思考的话题。因为我们的 AI 主要是靠下文介绍的「搜索」算法来找到最优的走法的，搜索函数会模拟双方的走棋，如果棋子之间存在守护关系，会在搜索中得到体现，有时过于「自作聪明」的评估函数反而会影响到搜索。在五子棋这样简单（搜索树小）的游戏中，我们甚至可以将评估函数精简为一个「判断胜负」的函数，因为按照目前的计算力，是有可能直接在搜索中找到获胜的局面的，而在象棋这种搜索树庞大的游戏中，我们还是需要评估函数的。</p>
<p>在我们的程序中，我将「灵活性分数」做成了一个默认不开启的选项，默认只计算棋子的基础分数，这是因为计算走法是一个相对开销较大的运算，会比较明显地减少搜索层数（减少一层）。</p>
<h3 id="极大极小搜索法"><a href="#极大极小搜索法" class="headerlink" title="极大极小搜索法"></a>极大极小搜索法</h3><p>棋类游戏的博弈 AI, 最核心的就是搜索算法，即通过轮流模拟双方走棋，找到最优的走法。搜索的层数就是模拟走棋的回合数，搜索层数越深代表博弈程序可以考虑得越远，能力也就越强，响应地消耗的计算资源也越多。</p>
<p>我们首先介绍一个非常简单的搜索算法 —— 极大极小搜索法，这个算法平淡无奇，只是深度优先地轮流模拟双方走棋：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">negaMaxSearch</span>(<span class="params">depth: number, board: Board, camp: Camp</span>): number &#123;</span><br><span class="line">  <span class="keyword">if</span> (depth &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> evaluate(board, camp);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getAllMoves</span>(board, camp).<span class="title function_">reduce</span>( <span class="function">(<span class="params">best, move</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(best, -<span class="title function_">negaMaxSearch</span>(depth - <span class="number">1</span>, board.<span class="title function_">move</span>(move), <span class="title function_">anotherCamp</span>(camp)));</span><br><span class="line">    &#125;, -<span class="title class_">Infinity</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我将这个算法实现为了递归的形式，参数 depth 用于控制搜索的深度，每递归一层便减少 1, 当减少到 0 的时候结束递归，使用评估函数评估这个局面的优势值；depth 大于 0 时则递归地搜索当前所有可能的走法（getAllMoves），返回其中优势值最大的局面。</p>
<p>注意在进行递归时，我们需要用 anotherCamp 来切换阵营，同时对结果取负值。这是因为在象棋中，博弈双方是轮流走棋的，我们需要先模拟自己走棋，再模拟对方走棋。在模拟对方走棋时，我们需要站在对方的角度来考虑 —— 我们需要找到对我方最不利的走法，因为我们需要假设对方是聪明的，是会尽一切可能针对我方的，所以在递归时我们需要对 negaMaxSearch 的结果取负。</p>
<p><img src="https://o5eoc29h5.qnssl.com/wizard-chess-negamaxsearch.jpg" alt="wizard-chess-negamaxsearch.jpg"></p>
<p>在我的电脑上，这个算法可以在使用单核心的情况下，花费 1 分钟来搜索 4 层。在开局状态下，搜索树有 9341 个节点，最终评估了 220211 个局面：</p>
<pre><code>White &#123;search: 9341, evaluate: 220211&#125;
Black &#123;search: 9341, evaluate: 220211&#125;
</code></pre>
<h3 id="Alpha-Beta-剪支"><a href="#Alpha-Beta-剪支" class="headerlink" title="Alpha&#x2F;Beta 剪支"></a>Alpha&#x2F;Beta 剪支</h3><p>但其实在前面的搜索树中，有很大一部分节点是「没有意义」的，即无论是否搜索这些节点，对最终的结果都不会有影响，我们可以通过接下来介绍的 Alpha&#x2F;Beta 剪支算法来跳过对这些无意义的节点的搜索。</p>
<p><img src="https://o5eoc29h5.qnssl.com/wizard-chess-alphabetasearch.jpg" alt="wizard-chess-alphabetasearch.jpg"></p>
<p>例如在上图中，如果我们从左到右深度优先地搜索走法树，那么右侧灰色的节点就是我们需要跳过的节点。depth&#x3D;1 最右标有 5 的节点的左侧子树（5 - 5 - 5）被搜索出之后，depth&#x3D;1 最右标有 5 的节点的最小值就已经被确定为了 5 —— 因为在 depth&#x3D;2 时我们需要站在对手的角度找到对我方估值最低的走法，既然左侧子树已经找到了 5, 那么无论其他子树的值是多少，这个节点估值都不可能比 5 更大了。</p>
<p>如果 depth&#x3D;1 最右标有 5 的节点的估值小于等于 5, 那么它对于父节点也是没有意义的，因为在 depth&#x3D;1 的层我们需要找到估值最高的走法，既然在 depth&#x3D;1 这层我们已经找到了一个估值为 6 的走法，那么我们就对估值小于等于 5 的走法不感兴趣了，因此图中灰色的节点我们都可以跳过。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">alphaBetaSearch</span>(<span class="params">depth: number, board: Board, camp: Camp, currentCamp: Camp, alpha: number, beta: number</span>): number &#123;</span><br><span class="line">  <span class="keyword">if</span> (depth &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> evaluate(board, camp);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> move <span class="keyword">in</span> <span class="title function_">getAllMoves</span>(<span class="params">board, camp</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (camp == currentCamp) &#123;</span><br><span class="line">        alpha = <span class="title class_">Math</span>.<span class="title function_">max</span>(alpha,</span><br><span class="line">          <span class="title function_">alphaBetaSearch</span>(depth - <span class="number">1</span>, board.<span class="title function_">move</span>(move), camp, <span class="title function_">anotherCamp</span>(currentCamp), alpha, beta)</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        beta = <span class="title class_">Math</span>.<span class="title function_">min</span>(beta,</span><br><span class="line">          <span class="title function_">alphaBetaSearch</span>(depth - <span class="number">1</span>, board.<span class="title function_">move</span>(move), camp, <span class="title function_">anotherCamp</span>(currentCamp), alpha, beta)</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (beta &lt;= alpha) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (camp == currentCamp) &#123;</span><br><span class="line">      <span class="keyword">return</span> alpha;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> beta;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们在极大极小搜索法的基础上进行了修改，得到了带有剪支（跳过图中灰色节点）功能的 alphaBetaSearch, 它多了 currentCamp, alpha, beta 三个参数。alpha 表示在当前搜索路径中，我方至少可以得到 alpha 的分数，任何低于 alpha 的局面都不考虑（剪支）；beta 表示在当前搜索路径中，对方至少可以拿到 beta 的分数，任何高于 beta 的局面都不考虑（剪支），因对方不会放任你拿到更高的分数的；而 currentCamp 和 camp 将用于在搜索中区分「我方」和「对方」。</p>
<p>在递归时，我们会区分当前是「我方」还是「对方」。我方走棋时，将最好的估值保存到 alpha, 对方走棋时，我们将最差的估值保存到 beta, 如果某个局面的估值在 beta 和 alpha 之间则进行剪支（break）。</p>
<table>
<thead>
<tr>
<th>depth</th>
<th>worst case</th>
<th>best case</th>
</tr>
</thead>
<tbody><tr>
<td>n</td>
<td>b^n</td>
<td>b^⌈n&#x2F;2⌉+b^⌊n&#x2F;2⌋−1</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>40</td>
<td>40</td>
</tr>
<tr>
<td>2</td>
<td>1,600</td>
<td>79</td>
</tr>
<tr>
<td>3</td>
<td>64,000</td>
<td>1,639</td>
</tr>
<tr>
<td>4</td>
<td>2,560,000</td>
<td>3,199</td>
</tr>
<tr>
<td>5</td>
<td>102,400,000</td>
<td>65,569</td>
</tr>
<tr>
<td>6</td>
<td>4,096,000,000</td>
<td>127,999</td>
</tr>
<tr>
<td>7</td>
<td>163,840,000,000</td>
<td>2,623,999</td>
</tr>
<tr>
<td>8</td>
<td>6,553,600,000,000</td>
<td>5,119,999</td>
</tr>
</tbody></table>
<p>这个表格列出了 Alpha&#x2F;Beta 剪支搜索在最好和最差的情况下搜索的局面数量级，所谓最好的情况就是每个最左子树都是最理想的估值，其余子树都被剪掉了，最差的情况就是每个子树都有着比左侧子树更理想的估值，因此我们需要搜索所有子树来找到最理想的估值。当然实际情况肯定是会介于最好和最坏的情况之间，在开局状态下，我们的程序表现如下，相比于前面的极大极小搜索，我们剪掉了 95% 的局面，只评估了 15k - 34k 的局面。</p>
<pre><code>White &#123;search: 1748, evaluate: 15854, cut: 1136&#125;
Black &#123;search: 2071, evaluate: 34740, cut: 1547&#125;
</code></pre>
<p>从上面的数据可以看到很有趣的一点，开局状态下明明黑白双方的棋子位置差不多，但搜索的局面数量却差了一倍。这是因为 Alpha&#x2F;Beta 搜索会比较严重地依赖搜索每个走法的顺序 —— 如果先搜索的是估值理想的走法，那么就会触发更多的剪支，搜索更少的节点，反之则会搜索更多的节点。而我们完全没有对走法做排序，所以搜索的顺序会取决于棋子在棋盘上出现的顺序 —— 没错，差别就是这么大。</p>
<p>因此在搜索子树的时候，对子树（走法）做一个预先的排序就显得很重要了，可以很大程度地提高剪支的效率。但同时这又是一个很矛盾的事情 —— 我们搜索就是为了找到最好的走法，但在搜之前却又需要先对走法进行一个排序。所以这个排序必须直观而简单，例如优先搜索皇后、车这类重要的棋子，</p>
<h3 id="写在后"><a href="#写在后" class="headerlink" title="写在后"></a>写在后</h3><ul>
<li>GitHub <a target="_blank" rel="noopener" href="https://github.com/jysperm/WizardChess">https://github.com/jysperm/WizardChess</a></li>
<li>Demo <a target="_blank" rel="noopener" href="http://wizard-chess.leanapp.cn/">http://wizard-chess.leanapp.cn</a></li>
</ul>
<p>说实话，因为我数学基础比较差，也没有进行太多的性能优化，最后实现出来的 AI 非常地弱，基本每一步棋都很「蠢」，但至少实现了一个棋类 AI 应有的骨架。我今后可能不会继续维护这个代码了，所以相比于代码，可能这篇文章对读者的帮助会更大。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><p>国际象棋规则：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%9C%8B%E9%9A%9B%E8%B1%A1%E6%A3%8B">https://zh.wikipedia.org/wiki/%E5%9C%8B%E9%9A%9B%E8%B1%A1%E6%A3%8B</a></li>
</ul>
<p>FEN:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.xqbase.com/protocol/pgnfen2.htm">https://www.xqbase.com/protocol/pgnfen2.htm</a></li>
<li><a target="_blank" rel="noopener" href="https://chessprogramming.wikispaces.com/Forsyth-Edwards+Notation">https://chessprogramming.wikispaces.com/Forsyth-Edwards+Notation</a></li>
</ul>
<p>Alpha&#x2F;Beta 搜索：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://chessprogramming.wikispaces.com/Alpha-Beta">https://chessprogramming.wikispaces.com/Alpha-Beta</a></li>
<li><a target="_blank" rel="noopener" href="https://www.xqbase.com/computer/search_alphabeta.htm">https://www.xqbase.com/computer/search_alphabeta.htm</a></li>
</ul>
<p>测试数据：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.chess.com/analysis-board-editor">https://www.chess.com/analysis-board-editor</a></li>
<li><a target="_blank" rel="noopener" href="http://zh.lichess.org/">http://zh.lichess.org</a></li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/21/2016/06/vim-shortcut/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/21/2016/06/vim-shortcut/" itemprop="url">Vim快捷键整理</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-21T00:00:00+08:00">
                2016-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          <blockquote>
<p>原文：<a target="_blank" rel="noopener" href="http://www.libenfu.com/vim-%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%95%B4%E7%90%86">http://www.libenfu.com/vim-快捷键整理</a></p>
</blockquote>
<p>作为一名后端码农，常用的 vim 快捷键，你了解多少呢？</p>
<p><img src="//www.fanhaobai.com/2016/06/vim-shortcut/SYZgz3rtMAjJutBWOVw9Wxtj.png">
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/06/21/2016/06/vim-shortcut/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/19/2016-06-19-appstore-accident/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/19/2016-06-19-appstore-accident/" itemprop="url">为什么提交 AppStore 总有事故发生</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-19T20:23:24+08:00">
                2016-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>6 月 18 日上午，百度云 iOS 版出现了线上事故，他们在提交 AppStore 审核的时候，把名字给弄错了。用户更新 App 之后，看到的 App 名字是 netdisk_iPhone，如下图所示。此后，百度在当天紧急提交了一个加急版本，修复了该问题。</p>
<img src="/images/baidu-bug-1.jpg" class="">

<p>百度云在 AppStore 总榜中排名 50 名左右，这次事故虽然不太影响用户使用，但是确实会给用户感觉到一些困扰。比如因为它的名字实际上不存在，所以当它想获取 PUSH 消息权限时，弹出来的对话框是如下图这样。用户很可能会觉得奇怪，从而点击 “不允许”。</p>
<img src="/images/baidu-bug-2.jpg" class="">

<p>在大厂里面，不止百度犯过错误，大约在一年前，新浪微博的客户端不小心把调试选项给加包到了正式功能中。于是大家都乐坏了，各种给自己加 VIP 效果，当然，服务器端的验证逻辑还是存在的，所以倒也并没有产生非常大的事故。下图是当时新浪微博事故 App 的截图。</p>
<img src="/images/sina-bug.jpg" class="">

<p>也不能光说别人，其实我们公司前段时间也出现了一个线上事故。猿辅导 App 不小心把测试版给提交到 AppStore 上了，但是由于测试服务器地址不是对外网公开的，于是更新了的同学就无法正常使用 App 了。这个事故大概影响了我们将近一天时间，线上服务完全连不上，算是比较严重的了。</p>
<p>我见过的最最严重的事故，大概是两年前，某个上市公司出的金融类应用，在打包的时候，不小心把源代码打进了 IPA 里面。这个行为恰好被喜欢解 IPA 随意翻翻的 BeeFramework 的老郭看到了，于是大家一起围观了一下它的代码。好在大家都是圈内人，没什么恶意，所以也没有公开此事。不然，用这个代码随意做一些社交机器人或者抓取机器人还是挺容易的。</p>
<p>好了，关键来了。如何防止这类事故发生呢？我觉得做到以下几点应该就可以了：</p>
<ol>
<li>不需要到线上的调试代码，需要用 DEBUG 宏在代码里面明确禁掉。</li>
<li>将整个工程的配置，用 shared scheme 的方式，放在版本管理之下，所有的配置改动，都需要进行 review。</li>
<li>使用自动打包的脚本，不依赖人工进行打包操作。</li>
<li>在正式上线前，用苹果的 TestFlight 进行测试。TestFlight 的测试包可以做到和线上的包完全一致，所以像以上提到的所有问题，都可以在这一个环节发现。</li>
</ol>
<p>百度云的这次事故，很可能的原因是被开发误删除了配置中的 App Name，如果采用上面的步骤，那么在第二步和第四步中，将会发现这个问题。</p>
<p>大家有什么更好的办法吗？欢迎回复讨论。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/19/2016/2016-06-19-why-not-traditional-medicine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/19/2016/2016-06-19-why-not-traditional-medicine/" itemprop="url">为什么我不相信中医</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-19T00:00:00+08:00">
                2016-06-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>其实关于中医的日志已经在我的草稿箱里放了两年多了，没发出来是觉得把知乎和果壳上的观点重复一遍意义并不大，需要时间再沉淀一下，因此直到现在才发出。</p>
<p>根据我们的经验，我们对世界的认知并不总是正确的（其实几乎全部是片面的），所以相比于知识，获得知识的方法有时更为重要。首先我对中医并没有一个深入的了解，因此我也没法说出中医的理论究竟有何谬误，所以我先介绍一下现代医学背后的方法。也希望大家着眼于我所描述的现象，而不是「中医」这个代号本身。</p>
<p>当今的现代医学指导思想之一就是「<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%BE%AA%E8%AF%81%E5%8C%BB%E5%AD%A6">循证医学</a>」，这是对「<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A7%91%E5%AD%A6%E6%96%B9%E6%B3%95">科学方法</a>」的一种拓展。所谓科学方法是人类在最近几百年所总结出的最有效的探索世界的一系列方法，包括观察并总结规律、做出可以测量的预测、证实预测的结果，可以说现在你每天用到的大部分工具都是遵循科学方法被创造出来的。</p>
<p>临床医学是一门应用性很强的学科，最终的目标自然是治好人们的疾病，而循证医学要求医生所做出的诊断、用药都要有证据可循。医生必须通过大样本、可查证、可证伪的实验得到的数据去支持他们的诊断和用药。</p>
<p>从用户的角度，对比中药或中成药的说明书和所谓西药的说明书，几乎中药或中成药的「不良反应」和「禁忌」写的都是「尚不明确」，也不会写药里的哪种成分起什么作用。而西药会写得非常详细，甚至包括每一种成份从多少分钟之后开始生效、和其他药物会有什么互相作用、实验中被观察到的副作用等。</p>
<p>中药或中成药不写这些的原因其实就是没有数据，即使它真的有效果，也伴随着很大的不确定性和风险。所以现代医学将中医称为「经验医学」或「<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9B%BF%E4%BB%A3%E5%8C%BB%E5%AD%A6">替代医学</a>」，意味着最好不要将这些手段作为首选的治疗方法。同时并不仅仅是中国有替代医学，世界各国都有各自的传统医学理论，任何一个理论拿过来看都是很荒谬的，同样在外国人看来中医理论也是同样是荒谬的。</p>
<p>替代医学当然也可以治病，但它和循证医学的区分就在于是否是科学，是否认可科学方法、是否认可诊断和用药需要数据来支撑。所谓因人而异的治疗实际上是在科技不发达时期不得已而为之的做法，在现代如果继续坚持这样的理论就无法得到交叉的、大样本的研究，无法建立一个普适的标准。</p>
<p>例如你服用一个药之后病好了，如何证明是药起了作用，而不是因为病的自愈，或者生活习惯（医生通常会告诉你不要喝酒不要熬夜）的改变呢？循证医学会通过一种「<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%9B%99%E7%9B%B2">双盲实验</a>」的方式来确定药的效果，就是说同时给实验组和对照组的病人用药，前者用的是真正的药物，而后者是安慰剂，来对比药物的效果和副作用，为了排除安慰剂效应的影响，在整个实验的过程中病人并不知道自己是实验组还是对照组，观察的医生也是不知道的。</p>
<p>最后简单做一个总结，我没有否认中医可以在某些情况下起到效果，但我希望说明的是这种有效性是没有经过科学方法的证实的、没有数据支撑的，你可以说我过于信仰科学方法了，没错，我的确如此。</p>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/14/2016-06-14-wwdc-2016-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/14/2016-06-14-wwdc-2016-notes/" itemprop="url">WWDC 2016 随想</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-14T22:32:50+08:00">
                2016-06-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <img src="/images/wwdc-2016.jpg" class="">

<p>今天凌晨 1 点钟，熬夜看了今年的 WWDC，一些随想分享给大家。</p>
<h2 id="花絮"><a href="#花絮" class="headerlink" title="花絮"></a>花絮</h2><p>我为了半夜起来看 WWDC，特意提前 10 点钟就睡觉了。我睡觉前特意带上 Apple watch，并且设置好震动闹钟，免得到时候闹钟吵到家人。结果这傻 watch 在我睡着后先是提醒我看每周运动摘要，然后过半小时又震动提醒我已经静止太久应该活动一下，你妹啊！</p>
<p>不准笑！说你呢！！</p>
<h2 id="时光"><a href="#时光" class="headerlink" title="时光"></a>时光</h2><p>因为刚刚说的原因，结果我到 12 点都还没有睡着，我在迷迷糊糊中躺到了快一点钟，watch 震动了，于是我翻身走到客厅，打开电脑，连上直播地址。对了，还有一些朋友不知道直播地址，大家可以记一下，每年直播地址都是固定的：&lt;wwdc.apple.com&gt; 。</p>
<p>我还记得我刚毕业那阵子，也是熬夜看 WWDC，那个时候我还和老婆租的房子住，并且和校友一起合租的一个两居室。想想也就过去几年，现在自己有了更大的房子住，而整个移动互联网也成就了大量的百亿市值的公司。Tim Cook 在直播中提到，AppStore 是 8 年前出现的，再次感叹到移动互联网真的是好年轻啊。</p>
<h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><p>这次的 WWDC keynote 主要分成 4 个部分，其实就是四个平台：watchOS, tvOS，macOS（原来叫 OS X）, iOS。整个分享中规中矩，分别给大家介绍一下我觉得值得关注的改进吧。</p>
<h3 id="watchOS"><a href="#watchOS" class="headerlink" title="watchOS"></a>watchOS</h3><p>watchOS 推出了 watchOS 3，据说启动速度更快了，但是不知道耗电是不是也是更多了。关于这个，后续有一个 session 主题分享<a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/227/">《Architecting for Performance on watchOS 3》</a>，感兴趣的朋友可以关注。</p>
<p>增加了 scribbles 功能，其实就是一种手写输入，手写居然还支持中文，我当时就在想：你倒是写一个复杂一点的字试试看呢？我对此功能不太看好。</p>
<p>别的改进都很小，比如增加了滑动更换主题，快速报警，现场还花大力气介绍一款叫 breathe 的应用，而这个应用就是指导你深呼吸的。不知道大家喜不喜欢，反正我是不会用的。</p>
<h3 id="tvOS"><a href="#tvOS" class="headerlink" title="tvOS"></a>tvOS</h3><p>这部分直接跳过吧，原因你懂的。</p>
<h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h3><p>OS X 更名为了 macOS，可以支持通过 apple watch 解锁电脑了。哦耶，我的手表终于不再只是用来看时间了 ! </p>
<p>剪切版支持从手机上复制，在电脑上粘贴，这个还是挺有用的，我平常都是用 QQ 或微信的文件传输助手做类似的事情。</p>
<p>optimize storage 功能可以把老文件自动存在云端，据说可以节省大概 100G 的空间。不过我猜想，iCloud 的免费空间应该不够用吧？是不是得花钱买些容量才行。</p>
<p>apple pay 可以在 PC 的浏览器上直接支付，点击支付时，需要在手机上确认授权。整个体验类似于拿微信或支付宝扫二维码付款。</p>
<p>siri 可以在 mac 上使用了，并且 siri 的结果可以 pin 在一个列表中，并可以拖动到别的地方。我有一阵子很喜欢用 iPhone 上的 siri，不过还是不太稳定。mac 上一般办公室是不太方便用 siri 的，家里的话要是没有培养出习惯，估计也不太会使用。所以这个功能到底实用性有多大还不确定。</p>
<p>增加了一个名为 picture in picture 的功能，其实就是看视频的时候可以固定住视频。</p>
<h3 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h3><p>介绍了 10 个特性，我选一些有意思的介绍吧。</p>
<p>Siri 可以和微信整合，这个很赞，你可以直接用 siri 控制发信息给微信中的好友。</p>
<p>系统的 Map 整合了大量的应用，比如可以在上面看大众点评的评价，可以直接叫滴滴打车。如果做得好，Map 很可能成为一个重要的打车入口，想到这儿就能明白为什么苹果投了滴滴 10 亿美金了。不过就苹果系统 Map 的那个糟糕体验，我不确定我是否能够接受它。反正我已经喜欢上了高德地图里面的郭德纲和林志玲的声音，离线的地图和导航也很适合中国这种按流量计费的移动网络环境。相比而言，系统自带的 Map 有些不接地气。</p>
<p>homekit 与智能家居的整合，整体的效果非常酷，但整个还需要依赖生态产业的配合。当前来看，国内的小米在这方面做得比苹果还是要快一些。</p>
<p>电话功能终于支持恶意电话提醒了，现场提到用的是腾讯的解决方案。嗯，360 估计是没有翻身的可能了。另外，phone  extension 似乎可以做更多的事情。</p>
<p>iMessage 可以发更多的内容，tap to replace to emoji 功能的交互设计还是挺有意思的，省却了选择 emoji 的时间。不过现场演示出现了 Bug，还是挺尴尬的。另外，大家都已经习惯了微信，而且 iMessage 只能和 iPhone 用户发，我觉得这些功能做得再有意思，也没有多大用。大家的直觉还是用微信来社交。</p>
<h3 id="中国元素"><a href="#中国元素" class="headerlink" title="中国元素"></a>中国元素</h3><p>这次 WWDC 中多次提到了中国，以及中国的互联网产品，包括微信，大众点评，滴滴。中国为苹果的赢收增长做出了巨大的贡献，我们也能看到苹果越来越重视中国区的需求了。比如恶意来电提醒，就是一个特别针对中国区用户的设计。</p>
<h3 id="Developer"><a href="#Developer" class="headerlink" title="Developer"></a>Developer</h3><p>这次 Tim Cook 专门介绍了针对开发者做的 iPad 版的 Swift Playground，其实这哪是一个 Playground 啊，这就是一个学习编程的 3D 游戏！整个 App 设计得非常用心，效果看起来也非常棒，下面是这个应用的界面，大家感受一下。</p>
<img src="/images/ipad-swift-playground.png" class="">

<p>不过 Tim Cook 毕竟是做销售出身的，他不明白，其实我们真正关心的是，Swift 3 什么时候推出啊！结果他在 keynote 上啥都没说，让我们以为 Swift 3 没戏了，结果，我们事后又发现 Swift 3 的内容安静地躺在苹果的官方网站上：<a target="_blank" rel="noopener" href="https://developer.apple.com/swift/">https://developer.apple.com/swift/</a> 。</p>
<p>所以说，Tim Cook 还是不了解我们， iPad 版的 Swift Playground 太酷，那也就是给小孩学编程入门用的，大量的程序员还是关心的是 Swift 啥时候稳定，Xcode 有啥有意思的功能不，这些都被 Cook 给忽视了。</p>
<p>还算我眼睛尖，我在他的一页大量的 feature list 中，看到了下面的一行字：</p>
<p><img src="http://ww4.sinaimg.cn/mw690/65dc76a3jw1f4u663wkc6j20bv05ct9e.jpg"></p>
<p>这意味着，Xcode 终于官方支持插件了！妈妈再也不用担心升级 Xcode 的时候插件失效了！我今天翻了一下日程，WWDC 中专门有一个 session 做相关的介绍，是：<a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/414/">《Using and Extending the Xcode Source Editor》</a></p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>最后看完 WWDC，已经是零辰 3 点钟了，有一点点失落。今年的内容惊喜不多，但是，我终归是又一次熬夜观看了直播。希望自己能保持这样对技术的激情，也希望苹果明年的 WWDC 能有一些惊喜。</p>
<p>哦，我整理了一个后续值得观注的 session 列表，分享给大家：</p>
<blockquote><p>Improving Existing Apps with Modern Best Practices<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/213/">https://developer.apple.com/videos/play/wwdc2016/213/</a></p>
<p>What’s New in Cocoa Touch<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/205/">https://developer.apple.com/videos/play/wwdc2016/205/</a></p>
<p>What’s New in Foundation for Swift<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/207/">https://developer.apple.com/videos/play/wwdc2016/207/</a></p>
<p>What’s New in UICollectionView in iOS 10<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/219/">https://developer.apple.com/videos/play/wwdc2016/219/</a></p>
<p>Typography and Fonts<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/803/">https://developer.apple.com/videos/play/wwdc2016/803/</a></p>
<p>Advanced Testing and Continuous Integration<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/409/">https://developer.apple.com/videos/play/wwdc2016/409/</a></p>
<p>Debugging Tips and Tricks<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/417/">https://developer.apple.com/videos/play/wwdc2016/417/</a></p>
<p>Getting Started with Swift ( 有最新 Swift 3 的内容）<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/404/">https://developer.apple.com/videos/play/wwdc2016/404/</a></p>
<p>Going Server-side with Swift Open Source<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/415/">https://developer.apple.com/videos/play/wwdc2016/415/</a></p>
<p>Introduction to Xcode ( 看看 Xcode 8 的新功能有啥）<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/413/">https://developer.apple.com/videos/play/wwdc2016/413/</a></p>
<p>Swift API Design Guidelines<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/403/">https://developer.apple.com/videos/play/wwdc2016/403/</a></p>
<p>Understanding Swift Performance<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/416/">https://developer.apple.com/videos/play/wwdc2016/416/</a></p>
<p>Using and Extending the Xcode Source Editor（了解 Xcode 编辑器的插件功能）<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/414/">https://developer.apple.com/videos/play/wwdc2016/414/</a></p>
<p>What’s New in LLVM<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/405/">https://developer.apple.com/videos/play/wwdc2016/405/</a></p>
<p>What’s New in Swift<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/402/">https://developer.apple.com/videos/play/wwdc2016/402/</a></p>
<p>What’s New in Xcode App Signing<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/401/">https://developer.apple.com/videos/play/wwdc2016/401/</a></p>
<p>Concurrent Programming With GCD in Swift 3<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/720/">https://developer.apple.com/videos/play/wwdc2016/720/</a></p>
<p>NSURLSession: New Features and Best Practices<br><a target="_blank" rel="noopener" href="https://developer.apple.com/videos/play/wwdc2016/711/">https://developer.apple.com/videos/play/wwdc2016/711/</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/12/2016/2016-06-12-interesting-javascript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/12/2016/2016-06-12-interesting-javascript/" itemprop="url">从被误解到最流行：论 JavaScript 如何完成华丽转身</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-12T00:00:00+08:00">
                2016-06-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
        
          
            <p>有人说「<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/06/birth_of_javascript.html">JavaScript 是花了 10 天时间匆忙被设计出来的语言</a>」，也有人说「<a target="_blank" rel="noopener" href="https://blog.codinghorror.com/the-principle-of-least-power">凡是能用 JavaScript 写出来的，最终都会用 JavaScript 写出来</a>」。写这篇文并非要对 JavaScript 做一个全面的优劣分析，而是想与大家分享一些存在于 JavaScript 及其生态系统中的、在我看来比较有趣的闪光点。</p>
<h3 id="插件化的语言特征"><a href="#插件化的语言特征" class="headerlink" title="插件化的语言特征"></a>插件化的语言特征</h3><p>JavaScript 曾经是一门兼容性最糟糕、升级最困难的语言。开发者们要苦等到所有用户都升级了浏览器，才敢使用新版本的特征。然而在最近几年，随着 <a target="_blank" rel="noopener" href="https://babeljs.io/">Babel</a> 等编译器的兴起，越来越多的 JavaScript 开发者们都放开了手，开始在生产环境中使用那些尚未被纳入标准的语言特征了。</p>
<p>使用了 Babel 的项目需要在发布之前引入一个「构建」的步骤，将使用了较新的语言特征的源代码转译为兼容性更好、被所有浏览器所支持的早期版本的 JavaScript，所以开发者就不必再去关心用户的浏览器是否支持这项新特征了。</p>
<p>Babel 是一个开源的、插件化的编译器框架，JavaScript 的每个语言特征（包括那些还未被纳入标准的）都被实现成了一个插件，插件可以遍历和替换 <a target="_blank" rel="noopener" href="https://github.com/thejameskyle/babel-handbook/blob/master/translations/en/plugin-handbook.md">AST</a>，进而对编译的结果施加影响。令人兴奋的一点是 Babel 让语言的特征形成了模块化，也就是说开发者可以在构建脚本中来配置要使用的语言特征。</p>
<p>Babel 的出现大大加速了 JavaScript 的进化。因为一旦有人希望在 JavaScript 中加入一个新特征，他首先会去实现一个 Babel 插件，然后很快就会有开发者去使用这个插件（这个过程不过是修改一下构建脚本）。这样新特征会得到来自一线开发者的验证和反馈，并有效地得以改进，如此形成一个良性循环。对比来看，某一些语言的新特征在设计和普及阶段进展非常缓慢。因为如果一个特征无法成为标准，就不会有开发者使用，而没有开发者使用，标准的制定者又无法得到足够的反馈，进而推迟进入标准的时间。</p>
<h3 id="总有一种适合你的方言"><a href="#总有一种适合你的方言" class="headerlink" title="总有一种适合你的方言"></a>总有一种适合你的方言</h3><p>除了对 JavaScript 本身的增强，社区中还有着上百种编译成 JavaScript 的「<a target="_blank" rel="noopener" href="https://github.com/jashkenas/coffeescript/wiki/list-of-languages-that-compile-to-js">方言</a>」。创造一种 JavaScript 的方言并不难，你只要编写一个从源代码到 <a target="_blank" rel="noopener" href="https://github.com/estree/estree">ES AST</a> 的词法和语法分析器，后续的步骤交给 Babel 就好。社区中比较知名的几种方言有：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://coffeescript.org/">CoffeeScript</a>：提供更简洁的语法，可以省略大部分的括号和花括号。</li>
<li><a target="_blank" rel="noopener" href="http://www.typescriptlang.org/">TypeScript</a>：强类型的 JavaScript，提供编译期类型检查。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/clojure/clojurescript">ClojureScript</a>：提供 Clojure（Lisp）风格的语法。</li>
<li><a target="_blank" rel="noopener" href="http://www.purescript.org/">PureScript</a>：<a target="_blank" rel="noopener" href="https://www.infoq.com/news/2014/09/purescript-haskell-javascript">类 Haskell 的语法和类型系统</a>。</li>
<li><a target="_blank" rel="noopener" href="https://facebook.github.io/jsx/">JSX</a>：混写 JavaScript 与 HTML（React DOM）。</li>
</ul>
<p>这些方言有着各自的风格，从外观来看语法完全不同，但它们最终都会编译成标准的 JavaScript，这意味着它们之间是可以互操作的，你可以在一个 TypeScript 的项目中使用 CoffeeScript 编写的库，反之亦然。你甚至可以在一个项目中混用不同的方言。</p>
<p>开发者很少需要担心新特征或方言带来的不稳定性，因为代码最终会被编译成标准的 JavaScript，只要编译的过程没有错误，最后都是交由 JavaScript 引擎来执行，这并没有为 JavaScript 引擎带来新的复杂度。一旦有一天你决定不再使用某个特征或方言时也不要紧，直接使用编译后的 JavaScript 就好了。</p>
<p>这样一来，可以说 JavaScript 不再是一门语言，而是一个 JVM（<em>JavaScript</em> Virtual Machine）了。同时因为浏览器厂商（它们是这个世界上最大的科技巨头）之间的竞争和合作，JavaScript 有着几乎是所有虚拟机语言中最好的性能。</p>
<h3 id="精简而灵活的语言核心"><a href="#精简而灵活的语言核心" class="headerlink" title="精简而灵活的语言核心"></a>精简而灵活的语言核心</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects">JavaScript 的标准库</a>仅包含了非常有限的功能，某种程度上来说这也是件好事 —— 精简的标准库给第三方库留出了充分的竞争空间，真正得到大家认可的库才会被广泛使用，而不仅仅因为它被包含在了标准库中。</p>
<p>JavaScript 语言本身并没有定义得非常好的「范式」，你可以使用函数式的风格，比如函数作为参数和返回值、闭包、<a target="_blank" rel="noopener" href="https://github.com/stoeffel/awesome-fp-js">lodash 等函数式工具</a>、<a target="_blank" rel="noopener" href="https://facebook.github.io/immutable-js">Immutable.js</a> 提供的不可变数据类型（ES2015 甚至还包括了<a target="_blank" rel="noopener" href="https://github.com/v8/v8/commit/6131ab1edd6e78be01ac90b8f0b0f4f27f308071">尾递归优化</a>）；你还可以使用面向对象的风格，比如使用原型 prototype 构造出具有静态成员和实例成员、支持继承和多态的类（ES2015 也添加了 class 这个关键字来更加方便直观地定义类）。</p>
<p>正是 JavaScript 的这种灵活性，赋予了类库的设计者很大的施展空间。很多知名的类库可以说是创造了一种新的编程范式：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://backbonejs.org/">Backbone</a>：面向对象的 ORM，通过事件模型来通知对象的变化。</li>
<li><a target="_blank" rel="noopener" href="http://expressjs.com/">Express</a>：通过定义串联的「中间件」来处理 HTTP 请求。</li>
<li><a target="_blank" rel="noopener" href="https://facebook.github.io/react">React</a>：每当状态发生变化便重新渲染整个页面，减少用户界面状态管理的复杂度。</li>
</ul>
<h3 id="不止于浏览器环境"><a href="#不止于浏览器环境" class="headerlink" title="不止于浏览器环境"></a>不止于浏览器环境</h3><p>JavaScript 不仅可以在浏览器中运行，因为它精简的语言核心（甚至不包括任何 IO 相关的功能），现在已经被移植到了其他很多平台：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/">Node.js</a>：提供了访问文件系统、进行网络操作的 API，用于构建 Web 后端等服务器程序。</li>
<li><a target="_blank" rel="noopener" href="http://ionicframework.com/">Ionic</a> &#x2F; Cordova：提供访问移动设备的 API，使用 Web 技术来构建移动应用。</li>
<li><a target="_blank" rel="noopener" href="http://electron.atom.io/">Electron</a>：让 JavaScript 可以同时访问 Web 和 Node.js 的 API，以便用 Web 技术来构建桌面应用。</li>
<li><a target="_blank" rel="noopener" href="https://facebook.github.io/react-native">React Native</a>：用 JavaScript 去操作原生 UI 组件来构建移动应用。</li>
</ul>
<p>这些环境下有着和浏览器中完全不同的 API，但运行的都是同样的 JavaScript 代码，你的业务逻辑代码可以在这些环境间共用。JavaScript 社区中大部分已有的、不依赖具体运行环境的工具库都可以不加修改地运行在这些新环境中。</p>
<h3 id="异步单线程是把双刃剑"><a href="#异步单线程是把双刃剑" class="headerlink" title="异步单线程是把双刃剑"></a>异步单线程是把双刃剑</h3><p>无论在浏览器还是 Node.js 中，JavaScript 都采用了异步单线程的并发模型，所有的 IO 操作都采取异步执行，并通过「回调函数」来接收结果。以 Node.js 为例，引擎内部使用了一个<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/20346097/does-node-js-use-threads-thread-pool-internally">固定数量的线程池</a>，通过操作系统的「IO 多路复用」功能来进行 IO 操作，这样即使有大量并发的 IO 操作，也不过是多花了一点内存来维护相关的数据结构，并不会创建新的线程。这也是为什么大家都说 Node.js 适合高并发场景的原因了。同时 JavaScript 暴露给开发者的线程只有一个，只有这个线程会执行 JavaScript 代码，所以开发者不必象其他一些多线程语言那样去关心线程同步和线程安全的问题。JavaScript 开发者对于异步任务的接受程度也更高，他们会尽可能地让没有依赖关系的操作并行执行，<a target="_blank" rel="noopener" href="https://jysperm.me/2014/09/1843">让无谓的等待时间最小化</a>。</p>
<p>作为代价，JavaScript 中所有的 IO 操作都需要通过传递 <a target="_blank" rel="noopener" href="http://www.infoq.com/cn/articles/nodejs-callback-hell">回调函数</a> 的方式来获取结果，初学者会为此非常苦恼 —— 编写循环、处理异常时会束手束脚，异步回调的写法也非常繁琐，一不留神<a target="_blank" rel="noopener" href="http://callbackhell.com/">回调函数的嵌套就会失去控制</a>。为此社区创造了很多语言特性和工具来试图解决这个问题，包括 EventEmitter、async.js、Promise、co&#x2F;generator、async&#x2F;await 等。虽然基本可以认为 Promise 是未来的趋势，但目前还并没有普及到所有的 JavaScript 开发者，而且在这几种异步流程控制方案之间互相调用也很令人头痛。此外因为只有一个 JavaScript 线程在运行，所以如果在一个函数中有 CPU 密集的计算任务，它就会阻塞整个事件循环的处理，此时需要开发者手工让出线程，来处理事件循环中其他的事件。</p>
<p>好了，怕篇幅再长反而会分散大家对内容的理解和印象，就此收笔。我这儿还有些其他相关的内容，感兴趣的朋友可以继续读下去。</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.infoq.com/cn/presentations/javascript-the-world-best-programming-language">JavaScript - The World’s Best Programming Language</a>（中文演讲）</li>
</ul>

          
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E5%AE%9E%E7%8E%B0Get%E5%92%8CPost/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E5%AE%9E%E7%8E%B0Get%E5%92%8CPost/" itemprop="url">使用 C#开发 HTTP 服务器系列之实现 Get 和 Post</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-11T15:01:35+08:00">
                2016-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          "分割该行数据以后就可以得到“num1=23&num2=12”这样的结果，这里我们使用一个方法 GetRequestParms 来返回参数字典，这样作做是为了复用方法，因为在处理 Post 请求的时候我们会继续使用这个方法;例如我们传递的两个参数 num1 和 num2 对应的数值分别是 12 和 24，那么在具体的请求报文中我们都能找到类似“num1=12&num2=24”这样的字符结构，所以只要针对这个字符结构进行解析，就可以获得客户端传递给服务器的参数啦;num1=23&num2=12”这样的字样，这就是客户端传递给服务器的参数，我们很容易想到只需要将这个字段串中的“键”和“值”都解析出来，服务器就可以对这些数据进行处理然后返回给客户端了
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E5%AE%9E%E7%8E%B0Get%E5%92%8CPost/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/" itemprop="url">使用 C#开发 HTTP 服务器系列之更简单的实现方式</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-11T15:01:35+08:00">
                2016-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          其次，我们在设计 HTTP 服务器的时候，每次在向客户端返回响应报文以后，我们就关闭了 Socket 连接，这意味着每次的请求和响应完全都是独立的，那么这样是不是就和聊天机器人不能理解上下文非常相似了呢;下面我们再来说说基于 HttpListener 实现请求-响应模型，它和改进 Socket 不同，它对我们编写一个 Web 服务器的意义主要体现在它提供了一个非常规范的接口，类似我这里的 HttpResponse 和 HttpRequest 以及 OnPost、OnGet 等接口这些设计;到目前为止我们了解的 HTTP 服务器开发，实际上由两部分组成，即 Socket 通信和请求-响应模型
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E6%9E%84%E5%BB%BARESTful%20API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E6%9E%84%E5%BB%BARESTful%20API/" itemprop="url">使用C#开发HTTP服务器系列之构建RESTful API</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-11T15:01:35+08:00">
                2016-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      
        
          在REST中表现形式作为我们对资源请求的一个结果的呈现，通过对HTTP协议的学习我们已经知道，服务器会给客户端返回什么形式的信息，这一点取决于服务器响应报文中相关头部字段，而对REST来讲，它通常会采用XML或者JSON来告诉请求者请求的结果，因为JSON相比XML所含的冗余信息较少，所以目前更加倾向于或者说流行使用JSON作为请求结果的表现形式;除此之外，我们注意到REST基于HTTP协议，所以HTTP协议中的状态码对它来讲同样适用，例如最常用的200表示成功、500表示服务器内部错误、404表示无法找到请求资源等等;首先，REST即REpresentational State Transfer，通常被翻译为“表述性状态传输”或者“表述性状态转移”，它最早出自Roy Fielding的《Archltectural Styles and the Design of Network-based Software Arcltechures》这篇论文，作者曾经参与HTTP协议和Apache Web Server的设计，所以REST实际上是一个和HTTP协议联系非常紧密的一种设计思想
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/06/11/%E4%BD%BF%E7%94%A8C#%E5%BC%80%E5%8F%91HTTP%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B3%BB%E5%88%97%E4%B9%8B%E6%9E%84%E5%BB%BARESTful%20API/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/50/">&lt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/50/">50</a><span class="page-number current">51</span><a class="page-number" href="/page/52/">52</a><span class="space">&hellip;</span><a class="page-number" href="/page/82/">82</a><a class="extend next" rel="next" href="/page/52/">&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1622</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
