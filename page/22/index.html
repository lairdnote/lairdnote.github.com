<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Liunx Python Rust Goalng DevOPS" />










<meta name="description" content="个人随想，瞎子的世界">
<meta property="og:type" content="website">
<meta property="og:title" content="逐流小站">
<meta property="og:url" content="https://blog.feedscoin.com/page/22/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="个人随想，瞎子的世界">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="Liunx Python Rust Goalng DevOPS">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/page/22/"/>





  <title>逐流小站</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'G-MW47YH6RH0', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/06/10/2020/2020-06-10-typescript-reinvent-javascript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/10/2020/2020-06-10-typescript-reinvent-javascript/" itemprop="url">TypeScript：重新发明一次 JavaScript</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-10T00:00:00+08:00">
                2020-06-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>作为一个 Node.js 开发者，我很早便了解到了 TypeScript，但又因为我对 CoffeeScript 的喜爱，直到 2016 年才试用了一下 TypeScript，但当时对它的学习并不深入，直到最近又在工作中用 TypeScript 开发了两个后端项目，对 TypeScript 有了一些新的理解。</p>
<h2 id="为-JavaScript-添加类型"><a href="#为-JavaScript-添加类型" class="headerlink" title="为 JavaScript 添加类型"></a>为 JavaScript 添加类型</h2><p>大家总会把 TypeScript 和其他语言去做对比，说它是在模仿 Java 或 C#，我也曾一度相信了这种说法。但其实并非如此，<strong>TypeScript 的类型系统和工作机制是如此的独特，无法简单地描述成是在模仿哪一个语言，更像是在 JavaScript 的基础上重新发明了 JavaScript</strong>。</p>
<p>究其根本，TypeScript 并不是一个全新的语言，它是在一个已有的语言 —— 还是一个非常灵活的动态类型语言上添加静态约束。在官方 Wiki 上的 <a target="_blank" rel="noopener" href="https://github.com/microsoft/TypeScript/wiki/TypeScript-Design-Goals">TypeScript Design Goals</a> 中有提到，TypeScript 并不是要从 JavaScript 中抽取出一个具有静态化语义的子集，而是要尽可能去支持之前社区中已有的编程范式，避免与常见的用法产生不兼容。</p>
<p>这意味着 TypeScript 试图为 JavaScript 已有的大量十分「动态」的特性去提供静态语义。一般认为「静态类型」的标志是在编译时为变量确定类型，但 TypeScript 很特殊，因为 JavaScript 本身的动态性，TypeScript 中的类型更像是一种「约束」，它尊重已有的 JavaScript 设计范式，同时尽可能添加一点静态约束 —— 这种约束不会影响到代码的表达能力。或者说，TypeScript 会以 JavaScript 的表达能力为先、以 JavaScript 的运行时行为为先，而静态约束则次之。</p>
<p>这样听起来 TypeScript 是不是很无聊呢，毕竟 Python 也有 Type Checking，JavaScript 之前也有 Flow。的确如此，但 <strong>TypeScript 的类型系统的表达能力和工具链的支持实在太强了，并不像其他一些静态类型标注仅能覆盖一些简单的情况，而是能够深刻地参与到整个开发过程中，提高开发效率</strong>。</p>
<p>前面提到 TypeScript 并不想发明新的范式，而是要尽可能支持 JavaScript 已有的用法。因此虽然 TypeScript 有着强大的类型系统、大量的特性，但对于 JavaScript 开发者开说学习成本并不高，因为几乎每个特性都可以对应 JavaScript 社区中一种常见的范式。</p>
<h2 id="基于属性的类型系统"><a href="#基于属性的类型系统" class="headerlink" title="基于属性的类型系统"></a>基于属性的类型系统</h2><p>在 JavaScript 中，对象（Object）是最常用的类型之一，我们会使用大量的对象字面量来组织数据，我们经常将很多不同的参数塞进一个对象，或者从一个函数中返回一个对象，对象中还可以再嵌套对象。可以说对象是 JavaScript 中最常用的数据容器，但并没有类型去约束它。</p>
<p>例如 request 这个库会要求使用者将发起请求的所有参数一股脑地以一个对象的形式作为参数传入。这就是非常典型的 JavaScript 风格。再比如 JavaScript 中一个 Promise 对象只需有 then 和 catch 这两个实例方法就可以，而并不真的需要真的来自标准库中的 Promise 构造器，实际上也有很多第三方的 Promise 的实现，或一些返回类 Promise 对象的库（例如一些 ORM）。</p>
<p>在 JavaScript 中我们通常只关注一个对象是否有我们需要的属性和方法，这种范式被称为「<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B">鸭子类型</a>（Duck typing）」，就是说「<strong>当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子</strong>」。</p>
<p>所以 TypeScript 选择了一种基于属性的类型系统（Structural type system），这种类型系统不再关注一个变量被标称的类型（由哪一个构造器构造），而是 <strong>在进行类型检查时，将对象拆开，抽丝剥茧，逐个去比较组成这个对象的每一个不可细分的成员。如果一个对象有着一个类型所要求的所有属性或方法，那么就可以当作这个类型来使用</strong>。</p>
<p>这就是 TypeScript 类型系统的核心 —— Interface（接口）：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">LabeledValue</span> &#123;</span><br><span class="line">  <span class="attr">label</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TypeScript 并不关心 Interface 本身的名字，与其说是「类型」，它更像是一种约束。一个对象只要有一个字符串类型的 label 属性，就可以说它满足了 LabeledValue 的约束。它可以是一个其他类的实例、可以是字面量、可以有额外的属性；只要它满足 LabeledValue 所要求的属性，就可以被赋值给这个类型的变量、传递给这个类型的参数。</p>
<p>前面提到 Interface 实际上是一组属性或一组约束的集合，说到集合，当然就可以进行交集、并集之类的运算。例如 <code>type C = A &amp; B</code> 表示 C 需要同时满足类型 A 和类型 B 的约束，可以简单地实现类型的组合；而 <code>type C = A | B</code> 则表示 C 只需满足 A 和 B 任一类型的约束，可以实现联合类型（Union Type）。</p>
<p>接下来我会挑选一些 TypeScript 具有代表性的一些特性进行介绍，它们之间环环相扣，十分精妙。</p>
<h3 id="字符串魔法：字面量"><a href="#字符串魔法：字面量" class="headerlink" title="字符串魔法：字面量"></a>字符串魔法：字面量</h3><p>在 TypeScript 中，字面量也是一种类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Name</span> = <span class="string">&#x27;ziting&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">myName</span>: <span class="title class_">Name</span> = <span class="string">&#x27;ziting&#x27;</span></span><br></pre></td></tr></table></figure>

<p>在上面的代码中，Name 类型唯一合法的值就是 ziting 这个字符串 —— 这看起来毫无意义，但如果我们引入前面提到的集合运算（联合类型）呢？</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Method</span> = <span class="string">&#x27;GET&#x27;</span> | <span class="string">&#x27;PUT&#x27;</span> | <span class="string">&#x27;DELETE&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Request</span> &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="title class_">Method</span></span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码中我们约束了 Request 的 method 只能是 GET、PUT 和 DELETE 之一，这比单纯地约束它是一个字符串类型要更加准确。这是 JavaScript 开发者经常使用的一种模式 —— 用字符串来表示枚举类型，字符串更灵活也更具有可读性。</p>
<p>在 lodash 之类的库中，JavaScript 开发者还非常喜欢使用字符串来传递属性名，在 JavaScript 中这很容易出错。而 TypeScript 则提供了专门的语法和内建的工具类型来实现对这些字符串字面量的计算，提供静态的类型检查：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">completed</span>: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// keyof 将 interface 的所有属性名提取成一个新的联合类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">KeyOfTodo</span> = keyof <span class="title class_">Todo</span> <span class="comment">// &#x27;title&#x27; | &#x27;description&#x27; | &#x27;completed&#x27;</span></span><br><span class="line"><span class="comment">// Pick 可以从一个 interface 中提取一组属性，生成新的类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">TodoPreview</span> = <span class="title class_">Pick</span>&lt;<span class="title class_">Todo</span>, <span class="string">&#x27;title&#x27;</span> | <span class="string">&#x27;completed&#x27;</span>&gt; <span class="comment">// &#123;title: string, completed: boolean&#125;</span></span><br><span class="line"><span class="comment">// Extract 可以找到两个并集类型的交集，生成新的类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Inter</span> = <span class="title class_">Extract</span>&lt;keyof <span class="title class_">Todo</span>, <span class="string">&quot;title&quot;</span> | <span class="string">&quot;author&quot;</span>&gt; <span class="comment">// &quot;title&quot;</span></span><br></pre></td></tr></table></figure>

<p>借助这些语法和后面提到的泛型能力，JavaScript 中各种以字符串的形式传递属性名、魔法般的对象处理，也都可以得到准确的类型检查。</p>
<h3 id="类型元编程：泛型"><a href="#类型元编程：泛型" class="headerlink" title="类型元编程：泛型"></a>类型元编程：泛型</h3><p>泛型提供了一种将类型参数化的能力，在其他语言中最基本的用途是定义容器类型，使得工具函数可以不必知道被操作的变量的具体类型。JavaScript 中的数组或 Promise 在 TypeScript 中都会被表述为这样的泛型类型，例如 Promise.all 的类型定义可以写成：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> all&lt;T&gt;(<span class="attr">values</span>: <span class="title class_">Array</span>&lt;T | <span class="title class_">Promise</span>&lt;T&gt;&gt;): <span class="title class_">Promise</span>&lt;<span class="title class_">Array</span>&lt;T&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>可以看到类型参数可以被用来构造更复杂的类型，进行集合运算或嵌套。</p>
<p>默认情况下，因为类型参数可以是任意的类型，所以不能假定它有某些属性或方法，也就不能访问它的任何属性，只有添加了约束才能遵循这个约束去使用它，同时 TypeScript 会依照这个约束限制传入的类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Lengthwise</span> &#123;</span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> logLength&lt;T <span class="keyword">extends</span> <span class="title class_">Lengthwise</span>&gt;(<span class="attr">arg</span>: T) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>约束中也可以用到其他的类型参数或使用多个类型参数，在下面的代码中我们限制类型参数 K 必须是 obj 的一个属性名：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> getProperty&lt;T, K <span class="keyword">extends</span> keyof T&gt;(<span class="attr">obj</span>: T, <span class="attr">key</span>: K) &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除了在函数上使用泛型之外，我们还可以定义泛型类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当定义泛型类型时我们实际上是在定义一种处理类型的「函数」，使用泛型参数去生成新的类型，这也被称作「元编程」。例如 Partial 会遍历传入类型 T 的每一个属性，返回一个所有属性都可空的新类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">a</span>: <span class="title class_">Person</span> = &#123;&#125; <span class="comment">// 报错 Property &#x27;name&#x27; is missing in type &#x27;&#123;&#125;&#x27; but required in type &#x27;Person&#x27;.</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">b</span>: <span class="title class_">Partial</span>&lt;<span class="title class_">Person</span>&gt; = &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>前面我们提到的 Pick 和 Extract 都是这样的泛型类型。</p>
<p>在此之外 TypeScript 甚至可以在定义泛型类型时进行条件判断和递归，这使得 TypeScript 的类型系统变成了 <a target="_blank" rel="noopener" href="https://github.com/microsoft/TypeScript/issues/14833">图灵完备的</a>，可以在编译阶段进行任何计算。</p>
<p>你可能会怀疑这样复杂的类型真的有用么？其实这些特性更多地是提供给库开发者使用的，对于 JavaScript 社区中的 ORM、数据结构，或者是 lodash 这样的库来说，如此强大的类型系统是非常必要的，lodash 的 <a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/lodash">类型定义</a> 行数甚至是它本身代码的几十倍。</p>
<h3 id="类型方程式：自动推导"><a href="#类型方程式：自动推导" class="headerlink" title="类型方程式：自动推导"></a>类型方程式：自动推导</h3><p>但其实我们并不一定要掌握这么复杂的类型系统，实际上前面介绍的高级特性在业务代码中都极少被用到。TypeScript 并不希望标注类型给开发者造成太大的负担，因此 TypeScript 会尽可能地进行类型推导，让开发者在大多数情况下不必手动标注类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bool = <span class="literal">true</span> <span class="comment">// bool 是字面量类型 true</span></span><br><span class="line"><span class="keyword">let</span> num = <span class="number">1</span> <span class="comment">// num 是 number</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="string">&#x27;str&#x27;</span>] <span class="comment">// arr 是 (number | string)[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> body = <span class="keyword">await</span> fs.<span class="title function_">readFile</span>() <span class="comment">// body 是 Buffer</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// cpuModels 是 string[]</span></span><br><span class="line"><span class="keyword">let</span> cpuModels = os.<span class="title function_">cpus</span>().<span class="title function_">map</span>( <span class="function"><span class="params">cpu</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// cpu 是 os.CpuInfo</span></span><br><span class="line">  <span class="keyword">return</span> cpu.<span class="property">model</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>类型推导同样可以用在泛型中，例如前面提到的 Promise.all 和 getProperty，我们在使用时都不必去管泛型参数：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用 Promise.all&lt;Buffer&gt;，files 的类型是 Promise&lt;Buffer[]&gt;</span></span><br><span class="line"><span class="keyword">const</span> files = <span class="title class_">Promise</span>.<span class="title function_">all</span>(paths.<span class="title function_">map</span>( <span class="function"><span class="params">path</span> =&gt;</span> fs.<span class="title function_">readFile</span>(path)))</span><br><span class="line"><span class="comment">// 调用 Promise.all&lt;number[]&gt;，numbers 的类型是 Promise&lt;number[]&gt;</span></span><br><span class="line"><span class="keyword">const</span> numbers = <span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 getProperty&lt;&#123;a: number&#125;, &#x27;a&#x27;&gt;，a 的类型是 number</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="title function_">getProperty</span>(&#123;<span class="attr">a</span>: <span class="number">2</span>&#125;, <span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>前面提到泛型是在将类型参数化，引入一个未知数来代替实际的类型，所以说泛型对于 TypeScript 就像是一个方程式一样，只要你提供了能够解开这个方程的其他未知数，TypeScript 就可以推导出剩余的泛型类型。</p>
<h3 id="价值十亿美金的错误"><a href="#价值十亿美金的错误" class="headerlink" title="价值十亿美金的错误"></a>价值十亿美金的错误</h3><p>在很多语言中访问空指针都会报出异常（在 JavaScript 中是从 null 或 undefined 上读取属性时），空指针异常被称为「<a target="_blank" rel="noopener" href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/">价值十亿美元的错误</a>」。TypeScript 则为空值检查也提供了支持（需开启 strictNullChecks），虽然这依赖于类型定义的正确性，并没有运行时的保证，但依然可以提前在编译期发现大部分的错误，提高开发效率。</p>
<p>TypeScript 中的类型是不可为空（undefined 或 null）的，对于可空的类型必须表示成和 undefined 或 null 的并集类型，这样当你试图从一个可能为 undefined 的变量上读取属性时，TypeScript 就会报错了。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logDateValue1</span>(<span class="params">date: <span class="built_in">Date</span></span>) &#123; <span class="comment">// 不可空</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">valueOf</span>())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">logDateValue1</span>(<span class="keyword">new</span> <span class="title class_">Date</span>)</span><br><span class="line"><span class="title function_">logDateValue1</span>() <span class="comment">// 报错 An argument for &#x27;date&#x27; was not provided.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logDateValue2</span>(<span class="params">date: <span class="built_in">Date</span> | <span class="literal">undefined</span></span>) &#123; <span class="comment">// 可空</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">valueOf</span>()) <span class="comment">// 报错 Object is possibly &#x27;undefined&#x27;.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">logDateValue2</span>(<span class="keyword">new</span> <span class="title class_">Date</span>)</span><br><span class="line"><span class="title function_">logDateValue2</span>()</span><br></pre></td></tr></table></figure>

<p>在这种情况下 TypeScript 会要求你先对这个值进行判断，排除其为 undefined 可能性。这就要说到 TypeScript 的另外一项特性 —— 其基于控制流的类型分析。例如在你使用 if 对变量进行非空判断后，在 if 之后的花括号中这个变量就会变成非空类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">str: <span class="built_in">string</span> | <span class="literal">null</span></span>) &#123;</span><br><span class="line">  <span class="comment">// str 在这里的类型是 string | null</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">trim</span>()) <span class="comment">// 报错 Object is possibly &#x27;null&#x27;.</span></span><br><span class="line">  <span class="keyword">if</span> (str !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// str 在这里的类型是 string</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">trim</span>())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样的类型分析也发生在使用 if、switch 等语句对并集类型进行判断时：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&#x27;rectangle&#x27;</span></span><br><span class="line">  <span class="attr">width</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">height</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">  <span class="attr">kind</span>: <span class="string">&#x27;circle&#x27;</span></span><br><span class="line">  <span class="attr">radius</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">area</span>(<span class="params">s: Rectangle | Circle</span>) &#123;</span><br><span class="line">  <span class="comment">// s 在这里的类型是 Rectangle | Circle</span></span><br><span class="line">  <span class="keyword">switch</span> (s.<span class="property">kind</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;rectangle&quot;</span>:</span><br><span class="line">      <span class="comment">// s 在这里的类型是 Rectangle</span></span><br><span class="line">      <span class="keyword">return</span> s.<span class="property">height</span> * s.<span class="property">width</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;circle&quot;</span>:</span><br><span class="line">      <span class="comment">// s 在这里的类型是 Circle</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="property">PI</span> * s.<span class="property">radius</span> ** <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="仅仅工作在编译阶段"><a href="#仅仅工作在编译阶段" class="headerlink" title="仅仅工作在编译阶段"></a>仅仅工作在编译阶段</h2><p>TypeScript 最终仍然会编译到 JavaScript，再被 JavaScript 引擎（如 V8）执行，在生成出的代码中不会包含任何类型信息，TypeScript 也不会添加任何与运行时行为有关的功能。</p>
<p>TypeScript 仅仅提供了类型检查，但它并没有去保证通过检查的代码一定是可以正确运行的。可能一个变量在 TypeScript 的类型声明中是一个数字，但并不能阻止它在运行时变成一个字符串 —— 可能是使用了强制类型转换或使用了其他非 TypeScript 的库且类型定义文件有误。</p>
<p>在 TypeScript 中你可以将类型设置为 any 来绕过几乎所有检查，或者用 as 来强制「转换」类型，当然就像前面提到的那样，这里转换的仅仅是 TypeScript 在编译阶段的类型标注，并不会改变运行时的类型。虽然 TypeScript 设计上要去支持 JavaScript 的所有范式，但难免有一些极端的用例无法覆盖到，这时如何使用 any 就非常考验开发者的经验了。</p>
<p>编程语言的类型系统总是需要在灵活和复杂、简单和死板之间做出权衡，TypeScript 则给出了一个完全不同的答案 —— 将编译期的检查和运行时的行为分别看待。这是 TypeScript 饱受争议的一点，有人认为这样非常没有安全感，即使通过了编译期检查在运行时依然有可能得到错误的类型，也有人认为 <strong>这是一个非常切合工程实际的选择 —— 你可以用 any  来跳过类型检查，添加一些过于复杂或无法实现的代码，虽然这破坏了类型安全，但确实又解决了问题</strong>。</p>
<p>那么这种仅仅工作在编译阶段类型检查有意义么？我认为当然是有的，毕竟 JavaScript 已经提供了足够使用的运行时行为，而且要保持与 JavaScript 的互操作性。大家需要的只是 TypeScript 的类型检查来提高开发效率，除了编译阶段的检查来尽早发现错误以外，TypeScript 的类型信息也可以给编辑器（IDE）非常准确的补全建议。</p>
<h2 id="与-JavaScript-代码一起工作"><a href="#与-JavaScript-代码一起工作" class="headerlink" title="与 JavaScript 代码一起工作"></a>与 JavaScript 代码一起工作</h2><p><strong>任何基于 JavaScript 的技术都要去解决和标准 JavaScript 代码的互操作性</strong> —— TypeScript 不可能创造出一个平行与 JavaScript 的世界，它必须依赖社区中已有的数十万的 JavaScript 包。</p>
<p>因此 TypeScript 引入了一种类型描述文件，允许社区为 JavaScript 编写类型描述文件，来让用到它们的代码可以得到 TypeScript 的类型检查。</p>
<p>描述文件的确是 TypeScript 开发中最大的痛点，毕竟只有当找全了定义文件之后，才会有流畅的开发体验。在开发的过程中不可避免地会用到一些特定领域的、小众的库，这时就必须要去考虑这个库是否有定义文件、定义文件的质量如何、是否需要自己为其编写定义文件。对于不涉及复杂泛型的库来说，写定义文件并不会花太多时间，你也只需要给自己用到的接口写定义，但终究是一个分心的点。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>TypeScript 有着先进的类型系统，而且这个先进并不是「学术」意义上的先进，而是「工程」意义上的先进，能够切实地提高开发效率，减轻动态类型的心理负担，提前发现错误。所以在此建议所有的 JavaScript 开发者都了解和尝试一下 TypeScript，对于 JavaScript 的开发者来说，TypeScript 的入门成本非常低。</p>
<p>在 LeanCloud，控制台在最近的一次的重构中切换到了 TypeScript，提高了前端项目的工程化水平，让代码可以被长时间地维护下去。同时我们一部分既有的基于 Node.js 的后端项目也在切换到 TypeScript。</p>
<p>LeanCloud 的一些内部工具和边缘服务也会优先考虑 TypeScript，较低的学习成本（谁没写过几行 JavaScript 呀！）、静态类型检查和优秀的 IDE 支持，极大地降低了新同事参与不熟悉或长时间无人维护的项目的门槛，提高大家改进内部工具的积极性。</p>
<p>LeanCloud 的 JavaScript SDK、Node SDK 和 Play SDK 都添加了 TypeScript 的定义文件（并且打算在之后的版本中使用 TypeScript 改写），让使用 LeanCloud 的开发者可以在 TypeScript 中使用 SDK，即使不用 TypeScript，定义文件也可以帮助编辑器来改进代码补全和类型提示。</p>
<p>如果你也希望一起来完善这些项目，可以了解一下在 LeanCloud 的 <a target="_blank" rel="noopener" href="https://www.leancloud.cn/jobs/">工作机会</a>。</p>
<p>参考资料：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://mariusschulz.com/blog/series/typescript-evolution">TypeScript Evolution</a></li>
<li><a target="_blank" rel="noopener" href="https://basarat.gitbook.io/typescript/">TypeScript Deep Dive</a>（<a target="_blank" rel="noopener" href="https://jkchao.github.io/typescript-book-chinese/">中文版</a>）</li>
<li><a target="_blank" rel="noopener" href="https://github.com/Microsoft/TypeScript/wiki/TypeScript-Design-Goals">TypeScript Design Goals</a></li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/">The TypeScript Handbook</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/64446259">浅谈 TypeScript 类型系统</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/85655537">TypeScript类型元编程：实现8位数的算术运算</a></li>
<li><a target="_blank" rel="noopener" href="https://www.yinwang.org/blog-cn/2015/11/21/programming-philosophy">编程的智慧</a>（正确处理 null 指针）</li>
<li><a target="_blank" rel="noopener" href="https://www.lucidchart.com/techblog/2015/08/31/the-worst-mistake-of-computer-science/">The worst mistake of computer science</a>（<a target="_blank" rel="noopener" href="https://www.open-open.com/news/view/16166e1">中文版</a>）</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/06/08/%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0Hexo%E5%8D%9A%E5%AE%A2%E6%8E%A8%E8%8D%90%E5%8A%9F%E8%83%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/08/%E5%8E%9F%E7%94%9FJavaScript%E5%AE%9E%E7%8E%B0Hexo%E5%8D%9A%E5%AE%A2%E6%8E%A8%E8%8D%90%E5%8A%9F%E8%83%BD/" itemprop="url">原生 JavaScript 实现 Hexo 博客推荐功能</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-08T12:30:54+08:00">
                2020-06-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2/" itemprop="url" rel="index">
                    <span itemprop="name">独立博客</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有时候，我不禁在想，我们到底处在一个什么样的时代呢？而之所以会有这样的疑问，则是因为我们的习惯在不断地被这个时代向前推进，就像我用了两年多的魅蓝 Note6 屏幕出现了问题，扫视了一圈新手机，居然再找不出一款带实体键的手机，刘海屏、水滴屏、破孔屏、异形屏、曲面屏等等简直令人眼花缭乱，唯独没有一款让我感到熟悉的非全面屏手机。做软件的时候，会不明白那些似是而非的定制需求的差异，可为什么偏偏到了硬件的时候，大家就能被迫适应这些越来越同质化的东西呢？也许有和我一样怀念非全面屏的人，可对于这个时代而言，一切都好像无足轻重，喜欢魅族对产品的设计，喜欢小而美的不妥协，可当大家都越来越相似的时候，<code>也许，是因为我们终于都长大了吧，而怀念则是一种可有可无、甚至有一点多余的东西</code>。在被告知一切向前看的路上，我们能拥有、用留住的东西本就不多，可偏偏我们就在给世间一切东西，努力地刻上时间的温度，经历着花繁叶茂，经历着落叶归根。</p>
<p>写博客，曾经是件很有意思的事情，透过网页去读每条留言背后的人，常常令你产生神交已久的感觉，即便网络如此发达的今天，让一个人失散，无非是动动手指拉黑、删除。<code>陈星汉</code>先生有一款游戏作品叫做<code>《风之旅人》</code>，游戏里的玩家依靠某种微弱的信号相互联系，而一旦失散彼此，将永远迷失在浩瀚无际的沙海里，你说，这是不是有人生本身的意味在里面呢？再后来 140 个字符的微博开始流行，而这些沉迷在博客时代里的人们，或固执地继续在博客这一方天地里挥洒，或搭乘移动互联网的“高铁”通往新的彼岸。有人这样比喻朋友圈和微博，说朋友圈装饰别人梦境的月亮，而微博则是装饰自己梦境的镜子。其实呢，在隐私问题基本荡然无存的今天，我们都只是在装饰资本的“窗户”吧！</p>
<p>曾经运营过一段时间的微信公众号，最后发觉还是博客的载体更适合自己，虽然这些年没少为博客投入“钱财”，在博客时代一去不复返的时间禁锢里，通过博客来盈利的想法堪堪聊以自慰，更不必说后来流行起来的“在线教育”和 Vlog。有人说，靠工资是没有办法挣到钱的，挣钱要靠这些“睡后收入”，可当一件事物风头正盛的时候，彼时的你不足以追逐这一切的时候，这种感觉该如何言明呢？大概就像你在最落魄的时候，遇到一生中最想要保护的那个人一样，这听起来多少有点讽刺，人在不成熟的时候，总是后知后觉，可有一天真成熟了，再难有那时的运气或是豪气。所以呢，继续写下去吧，也许有一天，当你看着从前写的幼稚的文字，或哭或笑皆可入题，这不就是“嬉笑怒骂，皆成文章”了吗？</p>
<p>果然，一不小心又扯远了。虽然说博客平时没什么流量，可像搜索引擎优化(<code>SEO</code>)、前端构建(<code>CI/CD</code>)、<code>PWA</code>等等这些东西倒是有所钻研，提高博客访问量的方式除了增加搜索引擎里的权重和曝光率以外，其实，还有一种方式就是减少跳出时间。换句话说，访客在你博客里停留的时间越长，这意味着你有更多的内容可以被对方访问到，所以，增加内链是一个不错的思路。最直接的方式，就是在每篇博客结束以后推荐相关的博客供访客继续阅读。之前曾经尝试过像 <a target="_blank" rel="noopener" href="https://github.com/huiwang/hexo-recommended-posts">hexo-recommended-posts</a> 这样的插件，坦白说效果不是特别好，因为有时候加载这些站外的内容，导致博客页面打开的时候异常卡顿，所以，我们今天将采用原生的 JavaScript 来为 Hexo 实现博客推理功能，希望对大家有所启发。</p>
<p>首先，我们来说说原理，推荐系统一般是需要一部分量化的指标来表征不同内容的相关性的。譬如通过<code>TF-IDF</code>来计算文本的相似度，通过公共词袋中的词频构造向量再配合余弦公式来计算，通过<code>TextRank</code>这类借鉴<code>PageRank</code>思想的方法来计算等等。这里呢，我们不采用这些方法来实现，主要是考虑到 200 篇左右的博客，两两计算相似度特别耗费时间，对于 Hexo 这种静态博客而言，我们还是应该节省生成静态页面的时间，虽然这部分时间都是<code>Travis CI</code>去跑的(逃……。我们采用的方案是基于标签和日期的推荐方式，即根据当前文章的标签筛选相同标签的文章，根据当前文章的日期筛选相同日期的文章。有了这两种策略，配合 Hexo 中提供的全局变量，我们可以很容易地编写出下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">shuffle</span>(<span class="params">a</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = a.<span class="property">length</span>; i; i--) &#123;</span><br><span class="line">            <span class="keyword">let</span> j = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * i);</span><br><span class="line">            [a[i - <span class="number">1</span>], a[j]] = [a[j], a[i - <span class="number">1</span>]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">recommended_posts</span>(<span class="params">page, site, limit = <span class="number">5</span></span>) &#123;</span><br><span class="line">        page.<span class="property">tags</span> = page.<span class="property">tags</span> || []</span><br><span class="line">        <span class="keyword">if</span> (page.<span class="property">tags</span>.<span class="property">length</span> == <span class="number">0</span>) <span class="keyword">return</span> [];</span><br><span class="line">        <span class="keyword">let</span> pageTags = page.<span class="property">tags</span>.<span class="title function_">map</span>(<span class="function"><span class="params">x</span>=&gt;</span>x.<span class="property">name</span>);</span><br><span class="line">        <span class="keyword">let</span> sitePosts = site.<span class="property">posts</span>.<span class="title function_">toArray</span>().<span class="title function_">map</span>(<span class="function"><span class="params">x</span>=&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">tags</span>:x.<span class="property">tags</span>.<span class="title function_">toArray</span>().<span class="title function_">map</span>(<span class="function"><span class="params">y</span>=&gt;</span>y.<span class="property">name</span>), <span class="attr">title</span>:x.<span class="property">title</span>, <span class="attr">permalink</span>:x.<span class="property">permalink</span>, <span class="attr">date</span>:x.<span class="property">date</span>&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">let</span> relatedPosts = pageTags.<span class="title function_">map</span>(<span class="function"><span class="params">x</span>=&gt;</span>sitePosts.<span class="title function_">filter</span>(<span class="function"><span class="params">y</span>=&gt;</span>y.<span class="property">title</span> != page.<span class="property">title</span>  &amp;&amp; (y.<span class="property">tags</span>.<span class="title function_">indexOf</span>(x) != -<span class="number">1</span> || y.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;MM/DD&#x27;</span>) == page.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;MM/DD&#x27;</span>)))).<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev,next</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> prev.<span class="title function_">concat</span>(next);</span><br><span class="line">        &#125;,[]);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">shuffle</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Set</span>(relatedPosts))).<span class="title function_">slice</span>(<span class="number">0</span>, limit);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;% <span class="keyword">var</span> post_list = <span class="title function_">recommended_posts</span>(page, site, config.<span class="property">recommended_posts</span>.<span class="property">limit</span>) %&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span>(post_list.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; config.<span class="property">recommended_posts</span>.<span class="property">enable</span>) &#123; %&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;recommended_posts&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&lt;%= config.recommended_posts.title %&gt;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;% post_list.forEach(function(link) &#123; %&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= link.permalink %&gt;&quot;</span>&gt;</span>&lt;%= link.title %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;% &#125;) %&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>
<p>代码非常直白，按照标签和日期两种策略筛选出文章，打乱顺序后从中提取出若干个返回，而剩下的工作，就是将其渲染到页面中。在这里，博主单独定义了一个模板文件，所以，我们在博客的适当位置引入即可，博主是放在博客结束以后的位置：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;post-content&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;postContent&quot;</span>&gt;</span></span><br><span class="line">    &lt;%- post.content %&gt;</span><br><span class="line">    &lt;%- partial(&#x27;post/recommended_posts&#x27;) %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>最终实现的效果如下图所示：</p>
<p><img src="https://s1.ax1x.com/2020/06/16/NibBjJ.png" alt="本文实现的相关文章推荐功能"></p>
<p>当然，当你看到这篇博客的时候，你已经看到博主为你推荐的内容了，是否有兴趣继续读下去呢？如果这样的话，就说明这两个内容是相关的。而基于日期的推荐，即所谓的“去年今日”，它本身的相关性可能并不强，但可以让你产生一种强烈的对比感，原来，这一天我是这样度过的啊。好了，这就是这篇博客的内容啦，晚安～</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/05/12/2020/05/use-kafka/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/12/2020/05/use-kafka/" itemprop="url">在分布式系统使用Kafka</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-12T12:30:00+08:00">
                2020-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">语言</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%AD%E8%A8%80/Go/" itemprop="url" rel="index">
                    <span itemprop="name">Go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>在分布式系统中，常常使用消息系统进行系统解耦，并实现一些异步业务逻辑，保证系统最终数据一致性。这里主要介绍在实际中落地使用 Kafka 的一些事项。</p>
<p><img src="//www.fanhaobai.com/2020/05/use-kafka/1589262505081.png" alt="预览图">
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/05/12/2020/05/use-kafka/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/05/08/%E4%BD%BF%E7%94%A8Dynamic_Linq%E6%9E%84%E5%BB%BA%E5%8A%A8%E6%80%81Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/05/08/%E4%BD%BF%E7%94%A8Dynamic_Linq%E6%9E%84%E5%BB%BA%E5%8A%A8%E6%80%81Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url">使用 Dynamic Linq 构建动态 Lambda 表达式</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-08T12:27:11+08:00">
                2020-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          var propertyParam = Expression.Property (parameter, condition.Field);searchParameters.Query.Add(new Condition() { Field = "StringValue", Op = Operation.Contains, Value = "山", OrGroup = "StringValue" });searchParameters.Query.Add(new Condition<Foo>() { Field = x => x.StringValue, Op = Operation.Contains, Value = "有朋", OrGroup = "StringValue" })
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/05/08/%E4%BD%BF%E7%94%A8Dynamic_Linq%E6%9E%84%E5%BB%BA%E5%8A%A8%E6%80%81Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/30/2020/50-Typecho%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B0%9D%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/30/2020/50-Typecho%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B0%9D%E8%AF%95/" itemprop="url">Typecho 博客搭建尝试</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-30T17:00:00+08:00">
                2020-04-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>拥有一台自己的服务器之后就尝试搞一个动态博客了，毕竟有后台管理会方便很多。看到 Typecho 原生支持 Markdown，而且有一个很漂亮、功能强大的主题 Handsome，就决定尝试将我的 Hexo 博客迁移到 Typecho  Handsome 了。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/04/30/2020/50-Typecho%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B0%9D%E8%AF%95/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/24/%E9%80%9A%E8%BF%87EF-Dapper%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A1%E8%AE%A1%E5%8A%9F%E8%83%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/24/%E9%80%9A%E8%BF%87EF-Dapper%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A1%E8%AE%A1%E5%8A%9F%E8%83%BD/" itemprop="url">通过 EF/Dapper 扩展实现数据库审计功能</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-24T08:20:32+08:00">
                2020-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" itemprop="url" rel="index">
                    <span itemprop="name">数据存储</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          整体来看，后者对代码的侵入性要更小一点，理论上我们可以实现`EF`或`EF Core`的仓储模式，这样两者在实现上会更接近一点，当然，更直接的方案是去拦截`SaveChanges()`方法，这和我们使用继承的目的是一样的，由于 Dapper 本身没有`ChangeTracker`，所以，在处理`Update()`相关的仓储接口时，都需要先查询一次数据库，这一点是这个方案里最大的短板;在此基础上，我们可以编写我们实际的 DbContext，这里以 CustomerContext 为例，当我们向其中添加、修改和删除 Customer 的时候，就会触发审计相关的逻辑，默认情况下，审计产生的数据 AuditLog 和 Customer 在同一个数据库上下文中，当然，我们可以通过注入 IAuditStore 来实现更精细的控制，例如，可以将审计日志输入到文本文件，甚至是 Mongodb 这样的非关系型数据库里，因为有依赖注入的存在，这些实现起来会非常的简单;而对于像 Dapper 这种轻量级的 ORM，它本身没有类似 EF/EF Core 的 ChangeTracker 的设计，如果我们在项目中使用 Dapper，并且希望实现审计的相关功能，直观上看就会有一点困难
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/04/24/%E9%80%9A%E8%BF%87EF-Dapper%E6%89%A9%E5%B1%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%A1%E8%AE%A1%E5%8A%9F%E8%83%BD/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/19/2020-04-12-crucial-conversations-book-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/19/2020-04-12-crucial-conversations-book-summary/" itemprop="url">既做正确的事情，又照顾人的情绪 - 读《关键对话》</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-19T22:26:34+08:00">
                2020-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <img src="/images/crucial-conversations-book.jpg" class="">


<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>你是否遇到过这种情况：和朋友、爱人、同事在一些事情上遇到激烈的分歧，然后你觉得你无法说服对方，于是你只有两种选择：</p>
<ul>
<li>方案一：激烈地对抗，但有可能也无法达成目标，反而可能会激怒对方，让沟通变成双方情绪的宣泄。</li>
<li>方案二：选择沉默。被迫接受你内心不认可的观点，不管这个行为带来的影响有多大。</li>
</ul>
<p>这本《关键对话》解决的就是以上问题，希望让你 <strong>「既做正确的事情，又照顾人的情绪」</strong>。</p>
<p>以下是我的一些读书笔记。</p>
<h2 id="确定你的目标"><a href="#确定你的目标" class="headerlink" title="确定你的目标"></a>确定你的目标</h2><p>人天生就有捍卫自己观点的冲动，这容易最后让对话变成双方都试图说服对方，而不是真正和对方沟通。所以，关键对话对话的第一步让你站在「上帝视角」观察自己，了解清楚你的目的，从而不让情绪主导自己的行为。</p>
<p>然后，时刻提醒自己不要做「傻瓜式选择」，「傻瓜式选择」就是我在引言中提到的两种沟通的方式：要么直接对抗，要么放弃沟通。</p>
<h2 id="观察对话的氛围"><a href="#观察对话的氛围" class="headerlink" title="观察对话的氛围"></a>观察对话的氛围</h2><p>拒绝「傻瓜式选择」并不容易，要做到这一点，首先需要的是观察对话的氛围，如果氛围不对，那么对话可能就无法有效进行了，书中列出了三种信号：</p>
<ul>
<li>对话陷入危机的时刻</li>
<li>对方失去安全感的信号（即表现出沉默或暴力）</li>
<li>你应对压力的方式</li>
</ul>
<h2 id="保证安全"><a href="#保证安全" class="headerlink" title="保证安全"></a>保证安全</h2><p>书中介绍了一些在谈话出现安全感问题时，可以使用的技巧：</p>
<ul>
<li>道歉。当你的行为冒犯了对方的时候，先行道歉。</li>
<li>对比说明。当对方误解了你的时候，用对比法消除误会。</li>
<li>创建共同的目的。当目的冲突的时候，寻找共同的目的。</li>
</ul>
<h3 id="道歉"><a href="#道歉" class="headerlink" title="道歉"></a>道歉</h3><p>如果对方的情绪确实由于你的某些错误造成，那么你首先需要道歉。这有助于对方情绪的缓解，进而能够冷静下来理性沟通。</p>
<h3 id="对比说明"><a href="#对比说明" class="headerlink" title="对比说明"></a>对比说明</h3><p>对比说明的结构是：<strong>「否定部分 + 肯定部分」</strong>。否定部分纠正对方的一些误解，肯定部分强化你的真实目的。</p>
<p>书中有一个案例，夫妻双方讨论一个敏感问题，丈夫首先发飙，认为是妻子指责自己。书中建议妻子用「对比说明」回答：我不是说这是你的问题，实际上我觉得这是我们俩的问题。我也不知道应该如何解决，但是我希望和你交流，这样才能更好地了解对方。</p>
<p>书中提供了一个练习的格式：我不希望＿＿＿，而是希望＿＿＿。</p>
<h3 id="创建共同的目的"><a href="#创建共同的目的" class="headerlink" title="创建共同的目的"></a>创建共同的目的</h3><p>有一些时候，很容易找到双方的共同目的。但沟通遇到问题的时候，共同目的就不那么容易创建了。</p>
<p>书中建议对双方的主张背后的真正策略进行讨论，试着问对方：「你为什么想这么做？」。</p>
<p>书中的案例是夫妻之前关于下班后是出去还是在家的争论。在试着问对方「你为什么想这么做？」之后，最终发现：妻子想在家是想安静一点，而丈夫想出去是因为想躲开孩子，享受一下二人少有的独处时光。于是，对话的共同目的就出现了：找到既能够安静一点，又可以享受二人独处时光的方案。在共同目标下，夫妻很快讨论出了方案。</p>
<h2 id="控制情绪"><a href="#控制情绪" class="headerlink" title="控制情绪"></a>控制情绪</h2><h3 id="认识情绪"><a href="#认识情绪" class="headerlink" title="认识情绪"></a>认识情绪</h3><p>在控制情绪之前，我们首先需要认识情绪：</p>
<ul>
<li>让情绪产生的只能而且永远是你自己。</li>
<li>产生负面情绪之后，你要么控制它，要么被它控制。</li>
</ul>
<p>另外，情绪本身没有好坏之分，所有情绪都是合理的。「生气」这种情绪有助于肾上腺素的分泌，在远古时代拥有这种情绪的人会在暴力行为中占据上风（因为那个时候竞争靠力量居多）。「害怕」这种情绪也会让人远离危险，人看到蛇之类的动物天生就会害怕，这也是靠上万年的自然选择留在我们基因深处的情绪触发机制。</p>
<p>虽然情绪没有好坏之分，但是由于情绪不加控制产生的行为，就很难说都是好的了。比如一个人因为生气，杀了人，那他就要承担刑事责任，就可以肯定是一个坏的行为。</p>
<h3 id="控制情绪-1"><a href="#控制情绪-1" class="headerlink" title="控制情绪"></a>控制情绪</h3><p>通过拆解对话中情绪的产生过程，我们发现在信息和情绪之间，我们有一层对于信息的偏主观的理解，如下图：</p>
<img src="/images/cc-book-1.jpg" class="">

<p>书中的案例是一个合作的同事 A 和 B，同事 A 在报告的时候自己独自演示，没有给同事 B 机会说话，这让同事 B 认为自己的功劳被忽略了。但具体的客观分析下来，有可能同事 A 是由于紧张才这样，并不是有意埋没同事 B 的贡献。</p>
<p>在对话的时候，如果我们把对方想得善意一些，就容易建立起平和的情绪进行沟通，避免误解。书中建议我们使用「一个理智而正常的人为什么会这么做」来反问自己，试图给对方一个理性解释，然后再试图通过对话来解决问题。</p>
<p>当然，这种理性解释只是让对话可以开展，不代表最终对方就是这么善意，但是这总比你一开始把别人往坏处想，误会好人要好得多。</p>
<p>书中只是介绍了对话的情绪如何解决，我在以前还看过一些别的情绪的解决方法，比如遇到伤心的事情了，仍不住想哭之类的。首先我们得知道情绪的宣泄是有助于心理健康的，一个人如果老是压抑自己的正常情绪，那么也容易产生各种心理疾病。所以，情绪产生了，最好的办法就是合理的把这个情绪控制住。</p>
<p>控制情绪的办法有很多，以下是我想到的一些。</p>
<p> 1、适当宣泄。比如悲伤的情绪，最简单的方法就是哭出来，倾诉出来就会好很多。又比如焦虑的情绪，可以通过适当地放松来调节。</p>
<p> 2、转移注意力。如果有一件事情你很生气，很冲动，你可以先想想别的事情，让自己的情绪先冷静下来。小朋友发脾气的时候，我们虽然不能让他转移注意力，但是我们通常让他找个安静的地方平静一下，也是类似的道理。一般情况下，给自己 5-10 分钟安静时间，就不会那么冲动了。</p>
<p> 3、上帝视角自嘲。把自己的行为看成第三者犯的，自我嘲笑一下。比如：「哎，我怎么又犯这种低级错误了」，这有助于控制自我否定的情绪。有些时候也可以把一些影响情绪的小事用另外的角度来解读和表达，比如麻烦了大家，说：「我又给大家挖坑了」，再配个下面的图。</p>
<img src="/images/cc-book-2.jpg" class="">

<h2 id="陈述观点"><a href="#陈述观点" class="headerlink" title="陈述观点"></a>陈述观点</h2><p>书中介绍了「综合陈述法」，一共五种技巧：</p>
<ul>
<li>分享事实经过</li>
<li>说出你的想法</li>
<li>征询对方观点</li>
<li>做出试探表述</li>
<li>鼓励做出尝试</li>
</ul>
<p>前面三种是「内容」方面的技巧，后面两种是「方式」方面的技巧。</p>
<p>分享事实经过。这个阶段只陈述事实，不加工对于事实本身的理解。</p>
<p>说出你的想法。这个时候要注意让对方留在安全区，通过刚刚提到的各种方法，保持一种理性的沟通气氛。自己要表现得足够自信和谦逊，即把你的观点毫无保留地表达出来，又对对方表达出足够的尊重。</p>
<p>征询对方观点。这个时候需要认真听取对方的观点，并且将对方的合理观点放到自己的观点库中，以便修正自己的观点。对话不是为了说服对方，而是让双方达成一致。如果是自己的想法有问题，修正就可以了。</p>
<p>做出试探表述。这种表述显示出你的观点不一定成熟，这有助于双方进行讨论，这样的表述常见的格式是：</p>
<ul>
<li>「我很好奇为什么…」</li>
<li>「可能你没有意识到…」</li>
<li>「我有点怀疑是否…」</li>
</ul>
<p>使用试探表述不要走向另一个极端，即表现得特别软弱。因为这会让人感觉到很不自信，这对你的观点非常不利。软弱的说法包括：「我这样说可能有点傻…」，「我可能是错的，不过…」，「我可能太苛刻了，可是…」。</p>
<p>鼓励做出尝试。当沟通双方是上下级关系时，对方可能会担心风险。这个时候鼓励就很重要，要让他们理解你交流的意愿。比如说：「我很想知道大家的意见」。</p>
<p>最后，我们以上的技巧都是为了将注意力放到事情本身而不是情绪上，只有这样才能获得有效地沟通，达成正确的结论。</p>
<h2 id="了解动机"><a href="#了解动机" class="headerlink" title="了解动机"></a>了解动机</h2><p>为了鼓励对方道出行为动机，我们应该用四种有效的倾听技巧来营造安全感。这四种技巧分别是：</p>
<ul>
<li>询问观点。</li>
<li>确认感受。</li>
<li>重新描述。</li>
<li>主动引导。</li>
</ul>
<p>询问观点比较直接，例如：「我想听听你的看法」，「如果你有不同观点，可以直接告诉我」。</p>
<p>如果直接的方式无法让对方开口，可能是因为对方安全感不够，你可以通过确认感受来营造更大的安全感。比如：「你好像对我很生气」，「你嘴上说没事，但是看起来不像是没事的样子」。</p>
<p>用你自己的语言，把对方的话再重复一遍，可以营造更强的安全感。比如：「好的，你看看我的理解是否正确。你感觉不开心是因为…，是这样吗？」。</p>
<p>如果以上办法都没有达成有效的沟通，这个时候不要急于求成，而应该放慢节奏，可以选择退出或者询问对方希望看到的结果。询问对方的目的有助于避免他们陷入攻击或逃避的简单思维模式，转而思考更重要的问题的解决方案。</p>
<p>主动引导是猜测对方想法，主动抛出来的行为，这有一种风险就是有可能会让别人误会。所以需要前面提到的方法没有用，同时你又非常确定他们的想法的时候才可以使用。例如：「你是不是觉得….，对吗？」这是一种承担风险，主动示弱和营造安全感的行为。</p>
<h2 id="开始行动"><a href="#开始行动" class="headerlink" title="开始行动"></a>开始行动</h2><p>当大家建立了安全感，确定了共同的目标，向目标贡献了各种观点和想法，却无法将它们转化成行动。书中建议在确定行动方案之后，明确以下信息：</p>
<ul>
<li>行动人。明确执行人。</li>
<li>行动目标。明确行动的目标，需要非常具体。</li>
<li>行动时间。需要明确完成的时间。</li>
<li>检查方法。比如完成之后通知大家，或者定期检查进度。</li>
</ul>
<p>这有点类似 [SMART 原则](https:&#x2F;SMART 原则&#x2F;baike.baidu.com&#x2F;item&#x2F;SMART%E5%8E%9F%E5%88%99)。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本质上，《关键对话》是一本讲如何做出正确决策的书，只是因为很多错误的决策是由于情绪造成讨论不足分，故意对抗，所以这本书强调要放下自己的主观立场，在一个安全的气氛下「共享观点库」，以便做出正确的决策。</p>
<p>所以，本书最关键的点就是：</p>
<ul>
<li>自省。能够放下自己的观点，为了达成正确的决策做好沟通的基础。</li>
<li>营造安全感。通过道歉、对比陈述、创建共同目标、控制情绪（避免曲解他人）、陈述观点、寻找动机来构建安全的信息沟通方式。</li>
</ul>
<p>最后，用 SMART 原则来做一个明确的、具体的、可检查的、有时间限制的方案，推进方案的实施。</p>
<p>这本书有点类似于去年看的<a href="/2019/10/06/humble-inqiury-book-summary/">《谦逊的探询》</a>，都是为了营造一种安全的沟通气氛而使用的技巧，不过本书针对的是更敏感的问题，《谦逊的探询》更像是针对一些开放性问题，各有侧重。</p>
<p>一本非常好的书，推荐给大家！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/15/2020/49-Docker%E9%83%A8%E7%BD%B2RSSHub%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/15/2020/49-Docker%E9%83%A8%E7%BD%B2RSSHub%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0/" itemprop="url">Docker 部署 RSSHub 和自动签到</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-15T23:30:50+08:00">
                2020-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="1-RSSHub：万物皆可-RSS"><a href="#1-RSSHub：万物皆可-RSS" class="headerlink" title="1. RSSHub：万物皆可 RSS"></a>1. RSSHub：万物皆可 RSS</h2><p>因为有些网站或者媒体没有主动提供 RSS 订阅链接，所以我们就可以依靠 <a target="_blank" rel="noopener" href="https://docs.rsshub.app/">RSSHub</a> 这一个开源、简单易用、易于扩展的 RSS 生成器，给任何奇奇怪怪的内容生成 RSS 订阅源。
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/04/15/2020/49-Docker%E9%83%A8%E7%BD%B2RSSHub%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/15/2020-04-15-how-to-make-decision/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/15/2020-04-15-how-to-make-decision/" itemprop="url">做决策的时候，你相信什么？</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-15T21:23:43+08:00">
                2020-04-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>​</p>
<h2 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h2><p>最近发生了两件事情：</p>
<p>1、同事 A 给我说，有一个产品他想迭代，因为那个产品的视觉他觉得不好。而我觉得那视觉还行。于是我就给他说：是不是要做个调研，让用户们评一下？</p>
<p>2、同事 B 给我说，他想把某个产品的视觉迭代一下。我对新的视觉风格不确定，就问了一些人。有一些人说好，有一些人说不好。我问同事 B，要不要做个用研投个票。同事 B 觉得这样不好，因为他认为专业的判断更靠谱。</p>
<p>就决策来看，我们应该相信自己的判断或感觉，还是相信专家，还是相信一个流程？这引发了我的思考。</p>
<h2 id="二、决策的原则"><a href="#二、决策的原则" class="headerlink" title="二、决策的原则"></a>二、决策的原则</h2><p>更多时候，人性是相信自己的感觉的，然后会靠着自己的感觉，来选择性的相信一些信息。</p>
<p>比如我发现，当我对一件事情怀疑的时候，我就会选择性相信自己看到的证据，忽视或者怀疑别的证据。我不会简单地以证据的多少为决策依据，当支持我的观点少的时候，我会觉得“<strong>真理掌握在少数人手里__”，当支持我的观点多的时候，我会觉得”__应该听取大部分人的观点，减少风险</strong>“。</p>
<p>那么，真正好的决策原则是什么？是相信自己的直观，还是相信专家，还是依赖于投票，调研的结论？</p>
<p>我首先觉得，<strong>盲目自信是不好的</strong>。别人说的信息，应该还是消化吸收进来，对的接受，不对的过滤。</p>
<p>另外，<strong>依赖投票和调研数据来做决策是不对的</strong>。因为投票和调研都非常容易被问题或者场景或者调研样本影响。依赖这个做决策很多时候都会死很惨。比如历史上的 1985 年可口可乐的<a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/e847c601cc175527072208b9.html">换口味事件</a>，依赖于用户盲测，结果最后决策是完全错误的。</p>
<p>桥水基金的创始人 Ray 在公司发明了一种基于置信度的带权重的投票决策机制，但是我觉得这个机制只适用于他们公司，同时这对于大部分人来说做不到。</p>
<p>对于大部分人来说，可能最好的决策方式就是：<strong>客观</strong>。客观是指先把自己的观点放一把，然后把自己的观点和别人的观点都放在一起看一看，逐个分析每个观点是否正确。最后分析完了，还是得”相信自己的分析“。</p>
<p>因为这本质上对于一个决策，<strong>一个人只能相信自己相信的决策</strong> 。对于自己不相信的决策，即使短期妥协，一旦遇到一些相反的信息就会后悔，会坚持不住。</p>
<p>这跟自己没研究透的股票在持续下跌的过程中拿不住是一个道理。这波疫情造成的股市下跌，我发现我最后拿住的股票，都是我坚信会涨回来的，没拿住的，都是不确定能不能涨回来的。</p>
<h2 id="三、决策能力差怎么办"><a href="#三、决策能力差怎么办" class="headerlink" title="三、决策能力差怎么办"></a>三、决策能力差怎么办</h2><p>不是每个人都有很好的决策能力。如果一个人最终决策能力低，那可以不决策，把决策过程完全交给自己信得过的人，这也是可以的。</p>
<p>比如在家里，夫妻可以让决策能力强的人拿主意；工作上，可以让决策能力强的人做负责人；在生活上，也可以多咨询身边决策能力强的朋友的意见。决定把决策交给别人，并坚信别人，也是一种决策。</p>
<p>这就类似于买私募基金，就是一种将理财的方案决策交给专家来做的行为。</p>
<h2 id="四、小结"><a href="#四、小结" class="headerlink" title="四、小结"></a>四、小结</h2><p>1、决策的时候要理性，客观，不能盲目自信。</p>
<p>2、不要轻信专家，投票，用户调查，历史经验，而应该把这些信息当作参考，从底层自己独立思考。</p>
<p>3、只有自己相信的事情，才能持久。</p>
<p>4、精力有限或能力有限的情况下，可以考虑把一些事情的决策交给别人。</p>
<p>就酱~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/15/2020/47-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Hexo%E5%8D%9A%E5%AE%A2%E5%92%8C%E7%9C%8B%E6%9D%BF%E5%A8%98Live2D-API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/15/2020/47-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Hexo%E5%8D%9A%E5%AE%A2%E5%92%8C%E7%9C%8B%E6%9D%BF%E5%A8%98Live2D-API/" itemprop="url">服务器部署静态博客和看板娘 Live2D API</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-15T19:45:00+08:00">
                2020-04-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="1-服务器部署静态博客"><a href="#1-服务器部署静态博客" class="headerlink" title="1. 服务器部署静态博客"></a>1. 服务器部署静态博客</h2><p>在服务器上部署静态博客有两种方案，一是直接在服务器上用博客源代码构建网页文件并部署；二是用 GitHub 作为源代码托管，然后用 GitHub Actions 构建博客，再同步到服务器的网站根目录下。这里，我选择后一种方案。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/04/15/2020/47-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Hexo%E5%8D%9A%E5%AE%A2%E5%92%8C%E7%9C%8B%E6%9D%BF%E5%A8%98Live2D-API/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/11/2020-04-11-snowball-ceo-book-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/11/2020-04-11-snowball-ceo-book-summary/" itemprop="url">方三文的聊天记录 - 读《您厉害，您赚得多》</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-11T23:49:34+08:00">
                2020-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <img src="/images/snowball-ceo-book.jpg" class="">

<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>最近读完了雪球 CEO 方三文的《您厉害，您赚得多》。这是一本比较特别的书，里面很多内容以雪球上的聊天记录的方式呈现，稍微显得体系感没那么强。但是一本书能够给读者带来几个点的思考和总结，也就值回书价和时间了。</p>
<p>整本书给我带来的思考还是挺多的，以下是一些记录。</p>
<h2 id="什么是赌徒"><a href="#什么是赌徒" class="headerlink" title="什么是赌徒"></a>什么是赌徒</h2><p>书中关于「股市与赌徒」让我思考，什么才是真正的价值投资者。结果我发现，实际上基本上所有的投资都带有赌博的成分。</p>
<p>我们通常可能认为，股票挣钱的方式有两种：</p>
<ul>
<li>挣市场的钱</li>
<li>挣交易对手的钱</li>
</ul>
<p>但是，即便是所谓的价值投资者，也是在目标股票价格合理或者极低时买入。这个时候，他如果真的做到了超过平均收益率的回报，那前提是他假定当时和他对手的交易都是傻子，并且事实上确实如此。所以，他其实也是挣的是交易对手的钱。</p>
<p>同时，当你在买入一支股票的时候，你其实就做了两件事情：择股，择时。这两件事情本身都有极大不确定因素：</p>
<ul>
<li>没有人能够预测股票未来的涨跌，所以你的择时就是一种赌博。</li>
<li>没有人能够获得一家公司所有的信息，决策都是不完全信息情况下做出的。这个时候做出的投股决定，虽然有很多信息当作参考，但是因为不完整，所以也是一种赌博。</li>
</ul>
<p>唯一可能没有赌博操作的，可能就只有指数定投了，因为它放弃了择股和择时，它是纯粹挣市场的钱，而其它的都不是。</p>
<h2 id="如何研究公司"><a href="#如何研究公司" class="headerlink" title="如何研究公司"></a>如何研究公司</h2><p>方三文认为研究公司研究 3 件事情就可以了：</p>
<ul>
<li>所处行业是否可持续增长。</li>
<li>商业模式是否有优势和壁垒。</li>
<li>公司的治理结构和创始人人格是否有优势。</li>
</ul>
<h3 id="行业"><a href="#行业" class="headerlink" title="行业"></a>行业</h3><p>书中讲到很多案例，对于行业的案例中，我印象最深的是移动互联网。这是我亲身经历的行业，我是最早的一批 iOS 开发者，经历了移动互联网从 2010 年起步到飞速发展的这十年。</p>
<p>其实移动互联网对于整个行业的影响是巨大的，但是我身处当中对此其实并不敏感，本质上就是一个人拥有了一块随时在线的屏幕。这对于信息交流的便利性，实时性，以及内容展示的个性化，位置化都是极大的改变。</p>
<h3 id="公司治理"><a href="#公司治理" class="headerlink" title="公司治理"></a>公司治理</h3><p>方三文在书中介绍了他是如何研究比亚迪的公司治理的：</p>
<ul>
<li>有空就去比亚迪 4S 店观察，跟销售员和顾客交流</li>
<li>从供应商那儿打听比亚迪的采购体系</li>
<li>看公司对外的承诺是否兑现过</li>
</ul>
<p>有一些公司，治理结构相对不那么重要，反倒显示出这个公司壁垒高，比如茅台。</p>
<h2 id="估值"><a href="#估值" class="headerlink" title="估值"></a>估值</h2><p>书中又一次讲到了「现金流折现法」，我最早是在段永平的一个采访文章中看到的。</p>
<p>现金流折现（discounted cash flow ，DCF）旨在通过将所有未来的现金流折成现值来求得资产内在价值。相关的介绍文章很多，比如知乎上的<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/23005134">这篇文章</a>。</p>
<p>估值方面，段永平介绍过<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/80541445">《谈毛估估的思路与方法》</a>，其实也挺有价值，里面提到的估值法包括：</p>
<ul>
<li>现金流折现法</li>
<li>存银行本金估值法</li>
<li>市盈率（PE）估值法</li>
<li>隐性资产估值法</li>
<li>企业价值（含负债）e&#x2F;e估值法</li>
</ul>
<p>这些计算其实都不算是特别精细，都是估算，所以段永平叫毛估估。但是如果初步算起来，都觉得特别便宜，那可能股价就是便宜的。</p>
<h2 id="什么时候卖出"><a href="#什么时候卖出" class="headerlink" title="什么时候卖出"></a>什么时候卖出</h2><p>有人说，价值投资者就应该永远持有股票，或者至少持有 5 年以上。我去年 220 多买了特斯拉，年底 420 卖出了，很多人评论我这个是伪价值投资。这让我一度思考应该什么时候卖出标的。</p>
<p>我去年觉得特斯拉的估值底部在 300 亿美元，所以我就在那个区间买入，但是涨到多少是合理的，我并不清楚，所以就没拿住，这也算是我能力不行吧。</p>
<p>就巴菲特来看，他既有像可口可乐这种长期持有的案例，也有像中石油，迪士尼这种高价卖出的案例。</p>
<p>就本书的讨论来看，我觉得卖出标的时机还是这个股票的价格远远超过了它的价值。那远远是多远呢？我想了一个办法：如果这家公司的行业&#x2F;模式&#x2F;治理都好，那就以一个偏长期（5-10年）的心态，来计算出公司未来的长期赢利能力，然后买入之后的目标就是持有到这种长期赢利能力达成之后的合理股价。</p>
<p>一般来说，一个行业&#x2F;模式&#x2F;治理都好的公司，10 年之后的复合增长应该是非常夸张的。这个时候计算出来的长期合理股价就会非常高，这个时候中途卖掉之后，不排除就遇不到合理的买回来的机会了，那不如就长期持有了。</p>
<h2 id="资产配置"><a href="#资产配置" class="headerlink" title="资产配置"></a>资产配置</h2><p>其实资产配置就是把钱放在合适风险的产品上。</p>
<ul>
<li>银行活期，零风格，但是利率低。</li>
<li>银行定期，失去一定流动性，但是利率变高。</li>
<li>货币基金，低风险。比活期和短期的定期都好，现在大概 3% 左右。</li>
<li>债券基金，中低风险，平均能到 5% 左右。</li>
<li>信托，风险再高一些，牺牲流动性，收益能再高一些。</li>
<li>股票型基金，中高风险，有可能做到 10% 以上的收益。</li>
<li>股票，高风险。</li>
</ul>
<p>所谓的资产配置，就是你在调几个参数：风险、流动性、波动率。高收益的配置同时也意味着高风险，流动性差，流动率高。</p>
<p>下图是中国的各类资产规模情况：</p>
<img src="/images/distribution.jpg" class="">

<p>具体怎么做呢？</p>
<ul>
<li>把保命的钱放在低风险资产中，这部分的钱至少是家庭未来 6 个月的开销。</li>
<li>把你亏得起、亏光不影响生活的钱放在中高风险的产品中，最多不超过 1&#x2F;3。</li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>方三文的这本书给我带来了一些关于投资的思考，包括：</p>
<ul>
<li>如何研究公司：行业&#x2F;公司&#x2F;管理层</li>
<li>如何估值公司</li>
<li>什么时候卖出股票</li>
<li>资产配置的思考</li>
</ul>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/23005134">https://www.zhihu.com/question/23005134</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/80541445">https://zhuanlan.zhihu.com/p/80541445</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/04/02/WebApiClient%E4%B8%AD%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/02/WebApiClient%E4%B8%AD%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E4%BD%BF%E7%94%A8/" itemprop="url">WebApiClient 中动态路由的实现与使用</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-02T10:26:53+08:00">
                2020-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          博主曾经在「[声明式 RESTful 客户端 WebApiClient 在项目中的应用](https://blog.yuanpei.me/posts/380519286/)」这篇博客中，介绍过.NET 平台下的“Retrofit”——[WebApiClient](https://github.com/dotnetcore/WebApiClient)，它是一种声明式的 RESTful 客户端，通过动态代理来生成 Http 调用过程代码，而调用方只需要定义一个接口，并使用相关“注解”对接口进行修饰即可，类似的实现还有[Refit](https://github.com/reactiveui/refit)，是一种比 HttpWebRequest、HttpClient 和 RestSharp 更为优雅的接口调用方式;是的，你猜对了，实际运作过程中，测试环境和正式环境不单单会使用不同的域名，可能还会使用不同的路由，虽然，理论上两个环境的程序应该完全一样，应该使用相同的路由;在今天这篇博客中，我想聊聊 WebApiClient 中动态路由的实现与使用
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/04/02/WebApiClient%E4%B8%AD%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E4%BD%BF%E7%94%A8/">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/29/2020/45-%E5%85%A8%E7%90%83%E6%96%B0%E5%86%A0%E8%82%BA%E7%82%8E%E7%9A%84%E6%89%A9%E6%95%A3%E4%B8%8E%E9%98%B2%E7%96%AB%E8%A7%82%E5%AF%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/29/2020/45-%E5%85%A8%E7%90%83%E6%96%B0%E5%86%A0%E8%82%BA%E7%82%8E%E7%9A%84%E6%89%A9%E6%95%A3%E4%B8%8E%E9%98%B2%E7%96%AB%E8%A7%82%E5%AF%9F/" itemprop="url">全球新冠肺炎的扩散与防疫观察</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-29T13:50:37+08:00">
                2020-03-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%A7%82%E7%82%B9/" itemprop="url" rel="index">
                    <span itemprop="name">观点</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>从一月开始蔓延的新冠病毒疫情至今已经两个多月了，本以为随着中国疫情的逐渐缓和，病毒蔓延得到了控制，生活也可以逐渐恢复正常了，谁知道本月以来疫情在全世界扩散开来。从一开始报道的韩国新天地教会疫情，到如今的美国、意大利确诊病例纷纷超越中国，形势也是越来越严峻。这个新冠肺炎疫情已经变成了一场影响全球经济社会发展的重大挑战。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/03/29/2020/45-%E5%85%A8%E7%90%83%E6%96%B0%E5%86%A0%E8%82%BA%E7%82%8E%E7%9A%84%E6%89%A9%E6%95%A3%E4%B8%8E%E9%98%B2%E7%96%AB%E8%A7%82%E5%AF%9F/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/25/2020-03-25-automatic-thinking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/25/2020-03-25-automatic-thinking/" itemprop="url">利用 Automator 自动化你的工作</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-25T11:52:39+08:00">
                2020-03-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/shell/" itemprop="url" rel="index">
                    <span itemprop="name">shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <img src="/images/automator.png" class="">

<h2 id="开端"><a href="#开端" class="headerlink" title="开端"></a>开端</h2><p>最近需要压缩一些 MP3 和 MP4 的大小。首先我在网上搜了一下相关的 App，试了好几个都没有理想的，于是我就想用 ffmpeg 或许更方便一些。</p>
<p>安装好 <a target="_blank" rel="noopener" href="https://www.ffmpeg.org/download.html">ffmpeg</a> 之后，我搜了一下，找到了相关的压缩指令：</p>
<p><a target="_blank" rel="noopener" href="https://superuser.com/questions/552817/fastest-way-to-convert-any-audio-file-to-low-bitrate">压缩 MP3</a>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i source.mp3 -map 0:a:0 -b:a 96k dest.mp3</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/28803/how-can-i-reduce-a-videos-size-with-ffmpeg">压缩 MP4</a>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i source.mp4 -vcodec libx265 -crf 26 dest.mp4</span><br></pre></td></tr></table></figure>

<p>于是，我很快就完成了相关的压缩。</p>
<h2 id="存档和同步"><a href="#存档和同步" class="headerlink" title="存档和同步"></a>存档和同步</h2><p>不过，我发现这些指令参数都很长，我很可能下次用的时候还是记不住要查询。于是，我想到了 <a href="hDashttps://kapeli.com/dash">Dash</a>。</p>
<img src="/images/dash-0.jpg" class="">

<p>Dash 是为程序员提供的一个文档查找工具，同时它还有一个代码片段（Snippets）功能，可以帮助你保存和查询常用的代码片段。</p>
<p>我首先把这些命令放到了我的 Dash 的 Snippets 里，这样我以后只需要输入 <code>mp3</code> 或者 <code>compress</code> 或者 <code>ffmpeg</code> 即可调出这条命令（如下图）。</p>
<img src="/images/dash-1.jpg" class="">

<p>我的 Dash 的存储目录是在 Dropbox 下，于是这条命令<strong>自动同步</strong>到了我所有的电脑中。</p>
<h2 id="Automator"><a href="#Automator" class="headerlink" title="Automator"></a>Automator</h2><p>但是这样的使用还是不够方便，因为我还是需要切换到命令行来输入这些指令，我想以后能不能我在 mp3 或 mp4 文件上点击右键，就自动出现相关的压缩指令呢？于是我想到了 Mac 自带的 <a target="_blank" rel="noopener" href="https://support.apple.com/zh-cn/HT2488">Automator</a>。</p>
<p>Automator 可以帮你将一些自动化的流程转换成右键菜单甚至是 App。</p>
<p>首先在 Application 目录下找到 Automator 并启动它。然后选择新建一个 Quick Action:</p>
<img src="/images/quick-action-1.jpg" class="">

<p>接着，设置 workflow 只在音频文件的右键菜单中出现，也只在 Finder 中生效。</p>
<img src="/images/quick-action-2.jpg" class="">

<p>接下来进行 3 步：</p>
<ul>
<li>拖入一个 「Run Shell Script」模块</li>
<li>将「Pass input」设置成 <code>as arguments</code></li>
<li>在 Shell 中填入以下内容</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入文件</span></span><br><span class="line">fileName=<span class="variable">$1</span></span><br><span class="line"><span class="comment"># 输出文件名</span></span><br><span class="line">targetName=<span class="variable">$&#123;fileName:0:-4&#125;</span><span class="string">&quot;-compressed.mp3&quot;</span></span><br><span class="line"></span><br><span class="line">/usr/local/bin/ffmpeg -i <span class="variable">$fileName</span> -map 0:a:0 -b:a 96k <span class="variable">$targetName</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="/images/quick-action-3.jpg" class="">

<p>编辑完成之后保存。找一个 MP3 文件测试，在 finder 中右键已经可以出现我们想到的菜单了：</p>
<img src="/images/quick-action-4.jpg" class="">

<p>以下是最终的操作效果图(用 <a target="_blank" rel="noopener" href="https://ezgif.com/">EZGif</a> 生成）：</p>
<img src="/images/automator-effect.gif" class="">

<h2 id="运行状态"><a href="#运行状态" class="headerlink" title="运行状态"></a>运行状态</h2><p>像这种运行时间挺长的执令，其实可以在系统的顶部状态栏看到一个滚动的小齿轮，点击即可看到运行状态：</p>
<img src="/images/automator-processing.gif" class="">

<h2 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h2><p>~~Service 是保存在本地的，我们还是要备份一下，直接复制到 Dropbox 同步盘即可： cp -r ~&#x2F;Library&#x2F;Services&#x2F;* ~&#x2F;Dropbox&#x2F;Service-backup&#x2F; ~~</p>
<p>可以直接将 workflow 文件保存到 iCloud 上：</p>
<img src="/images/automator-icloud.jpg" class="">

<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p><a target="_blank" rel="noopener" href="https://kapeli.com/dash">Dash</a> 和 <a target="_blank" rel="noopener" href="https://support.apple.com/zh-cn/HT2488">Automator</a> 是你自动化命令的好帮手，再借助 Dropbox、iCloud 等云盘将它们同步到你所有的电脑，你就可以随时随地使用这些命令。</p>
<p>祝大家玩得开心~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/25/2020/google-analytics-api-page-views-counter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/25/2020/google-analytics-api-page-views-counter/" itemprop="url">使用 Google Analytics API 实现博客阅读量统计</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-25T07:07:00+08:00">
                2020-03-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>前段时间，Google Analytics 给我发了封邮件，说二月份我的博客有 9.3K 的 UV。点进去看了看热门的文章，访问量最多的是「<a target="_blank" rel="noopener" href="https://prinsss.github.io/twitter-account-has-been-locked/">Twitter 账号被锁定是种怎样的体验</a>」（17 年的博文了……），其他比较高的还有以前写的教程「<a target="_blank" rel="noopener" href="https://prinsss.github.io/windows-terminal-setup-guide/">Windows Terminal 安装与配置指南</a>」「<a target="_blank" rel="noopener" href="https://prinsss.github.io/wsl-guide/">WSL 配置指北：打造 Windows 最强命令行</a>」，以及后起之秀「<a target="_blank" rel="noopener" href="https://prinsss.github.io/namebase-handshake-airdrop/">记一次 HNS 币空投薅 $500 羊毛的经历</a>」，很真实。</p>
<p>看着报表上的访问量排名，我突然一寻思，这白花花的数据都在眼前，那能不能利用 GA 里的这些数据，给博客加个访问计数、阅读量统计功能呢？</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/03/25/2020/google-analytics-api-page-views-counter/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/23/2020/44-%E8%BF%91%E6%9C%9F%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9%E7%9A%84%E6%9B%B4%E6%96%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/23/2020/44-%E8%BF%91%E6%9C%9F%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9%E7%9A%84%E6%9B%B4%E6%96%B0/" itemprop="url">近期博客站点的更新</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-23T00:10:23+08:00">
                2020-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%9F%E6%B4%BB/" itemprop="url" rel="index">
                    <span itemprop="name">生活</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>最近再次对博客站点进行了一番比较大的更新升级，主要是成功解决了几个历史性遗留问题，例如访问的速度、图片没有缩略图预览、自定义样式代码不太清楚等等。经过这一次的改造，感觉未来短期内大规模的更新变动应该不会有了，毕竟主要的需求都已经实现。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/03/23/2020/44-%E8%BF%91%E6%9C%9F%E5%8D%9A%E5%AE%A2%E7%AB%99%E7%82%B9%E7%9A%84%E6%9B%B4%E6%96%B0/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/22/2020-03-21-option-learning-notes-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/22/2020-03-21-option-learning-notes-4/" itemprop="url">美股期权学习笔记（四）</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-22T21:40:01+08:00">
                2020-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前面写完了 3 篇笔记之后，说说我的一些体会吧。</p>
<h2 id="期权不适合大部分人"><a href="#期权不适合大部分人" class="headerlink" title="期权不适合大部分人"></a>期权不适合大部分人</h2><p>期权的操作太复杂，不适合大部分人，特别是通过期权组合来建立各种头寸，对非专业人士来说很难掌握。</p>
<p>我感觉如果要成为这方面的专家，应该需要投入非常多的时间，对于普通人来说不但不划算，而且即便投入了也不一定能挣到钱。</p>
<h2 id="用裸卖看跌（PUT-期权来买入股票"><a href="#用裸卖看跌（PUT-期权来买入股票" class="headerlink" title="用裸卖看跌（PUT)期权来买入股票"></a>用裸卖看跌（PUT)期权来买入股票</h2><p>用裸卖看跌（PUT)期权来尝试降低买入股票的价格，是我认为<strong>唯一</strong>适合普通投资人尝试的操作。</p>
<p>比如特斯拉现在股票值 450，但是你觉得只有跌到 220 你才愿意买入。那你可以裸卖出一周或一个月到期的 220 元的 PUT 期权。这样：</p>
<ul>
<li>如果到期时股价跌到 220 以下，你则以 220 完成了建仓。</li>
<li>如果到期时股价没有跌到 220 以下，你则收取了权利金。</li>
</ul>
<p>这个事情的风险有几个:</p>
<ul>
<li>如果股价跌得特别多（比如跌到 100），这种操作实际上把买入的价格被锁定到了 220，造成帐面上的亏损。</li>
<li>如果股价上涨很多，这种操作会失去拥有这个股票的机会。</li>
</ul>
<h2 id="产品化的版本"><a href="#产品化的版本" class="headerlink" title="产品化的版本"></a>产品化的版本</h2><p>该操作被一个 App 产品化了，这个 App 叫<a target="_blank" rel="noopener" href="https://www.toweringsecurities.cn/">高格证券</a>。高格证券把该操作称作「优买计划」，如下图所示：</p>
<img src="/images/gaoge.jpg" class="">

<p>我觉得这种产品化的思路还挺好，首先它强化了这个策略应该用来长期持有看好的股票。然后它把权利金描述成现金收益，并且提供了年化收益和买入概率等信息。</p>
<p>如果你打算尝试，可以用我的邀请二维码（下图），这样我们俩各可以获得 5 美金的现金奖励。</p>
<img src="/images/gaoge-invite.jpg" class="">

<p>也说说高格的缺点吧。高格的优势也同时是它的劣势，因为高格把它产品化了，为你隐藏了大量信息，所以你也就无法做各种各样期权的组合以及中途回购期权。另外从保证金角度，如果是深度的虚值期权，保证金会动态变化，大多时候不会到 100%，而高格因为是鼓励以购买为目标来使用「优买计划」，所以你需要交 100% 的保证金。</p>
<h2 id="该操作的风险"><a href="#该操作的风险" class="headerlink" title="该操作的风险"></a>该操作的风险</h2><p>《麦克米伦谈期权》的 2.5.3 章节提到了这种操作。作者认为，如果你目的并不是持有股票，而是通过这种方式获取权利金，那么极端风险情况下，你会有极大的账面损失。书中也讲了一个真实的案例：</p>
<blockquote>
<p>市场上的专业投资者在裸卖空看跌期权的时候，喜欢选择低权利金，低波动率的股票，而 IBM 就是一个这类的股票。当时，IBM 的股价是 100 ~ 105 之间，挂牌的有行价权为 90 的 IBM 长期期权。<br>许多投资者裸卖出了看跌期权，他们的理由是他们不介意有机会以 90 的价格持有 IBM 的股票。<br>结果，IBM 的股价意外下跌到了 45。这个期权由虚值变为了深度实值。虽然期权没有到期，但是因为它是深度实值，很多被对手方提前行权了。<br>最后分析发现，其中很多投资者并没有打算真正地在熊市中持有 IBM 的股票。</p>
</blockquote>
<p>所以，这个故事告诉我们，再好的股票也有经历它自己的熊市的时候，而当事件发生时，裸卖空看跌期权就会遭受损失。</p>
<p>如果你想控制这种情况发生时的风险，有一个办法是用更低的成本买入深度虚值看跌期权，这样就形成了一个牛市价差的期权组合，这将控制你的下行风险。下图是牛市价差的盈亏图。</p>
<img src="/images/sell-put_buy-put.jpg" class="">

<h2 id="我自己的一些体会"><a href="#我自己的一些体会" class="headerlink" title="我自己的一些体会"></a>我自己的一些体会</h2><p>我自己尝试了一段时间裸卖空看跌（PUT)期权，以下是一些感悟：</p>
<ul>
<li><p>期权的到期时间不要过长。最好不要超过 3 个月。主要的原因一个是 3 个月时间波动可能非常大，另一个原因是你的保证金锁定时间太长。我建议过期时间选择 1 周 ~ 1 个月这个范围。</p>
</li>
<li><p>想清楚自己是为了挣权利金还是持有。如果是为了持有，不要将卖空的价格设置得特别低，否则大概率是不可能完成建仓的。而一些极端情况下完成的建仓，真正发生的时候，可能跌幅就不止是当时设置的那个买入价了。</p>
</li>
<li><p>如果是为了挣权利金而裸卖空看跌（PUT)期权。那么需要关注好 Theta 指标和 Vega 指标。因为 Theta 是时间价值指标。如果 Theta 指标特别低，而期权收益又高的话，那很可能是由于波动率（Vega）高带来的。那么这么高的波动率本身可能就意味着买入的风险。最好选低波动率的，同时时间价值高的期权。例如：下图中的一周到期的 Tesla 期权，Theta 值就很高：</p>
</li>
</ul>
<img src="/images/theta-tesla.jpg" class="">

<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>一些朋友告诫我不要操作任何期权，我觉得他们说的很可能是对的。我的以上总结大概率是有一些片面性的，未来我也有极大可能交一些学费。</p>
<p>不过，如果使用完全不影响生活质量的钱，抱着学习的心态，不上杠杆，心里能够接受最后全部赔光，我想这样也没什么大不了。人生苦短，生活总得有些事情不试试不死心，对吧。</p>
<p>愿大家玩得开心！</p>
<p>本系列文章汇总：</p>
<ul>
<li><a href="/2020/02/08/option-learning-note/">美股期权学习笔记（一）</a></li>
<li><a href="/2020/03/15/option-learning-notes-1/">美股期权学习笔记（二）</a></li>
<li><a href="/2020/03/21/option-learning-notes-3/">美股期权学习笔记（三）</a></li>
<li><a href="/2020/03/22/option-learning-notes-4/">美股期权学习笔记（四）</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/21/2020-03-15-option-learning-notes-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/21/2020-03-15-option-learning-notes-3/" itemprop="url">美股期权学习笔记（三）</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-21T11:02:41+08:00">
                2020-03-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这篇再展开讨论一下期权的指标。</p>
<h2 id="影响期权的变量"><a href="#影响期权的变量" class="headerlink" title="影响期权的变量"></a>影响期权的变量</h2><p>期权因为相关的变量很多，包括时间，行权价等。所以任何一个变量变化就会影响期权的价格。人们研究发现，影响期权的价格因素一共有如下 6 个：</p>
<ul>
<li>标的资产价格。对于看涨期权，标的资产上涨，看涨期权也上涨。</li>
<li>期权行权价格。</li>
<li>距离到期时间的长短。</li>
<li>标的波动率。标的波动率越高，期权价格越高。</li>
<li>短期利率，一般是 90 天的短期票据利率。</li>
<li>股息。公司如果提高股息，看涨期权会下跌，看跌期权上涨。因为股价会随着派息后下降，但是期权所有人无法获得股息。</li>
</ul>
<p>实值期权和虚值期权受到期时间的影响不一样：</p>
<ul>
<li>距离到期时间越近，虚值期权的价格越低。所以会出现随着临近，虚值的看涨和看跌期权都下跌的情况。</li>
<li>距离到期时间越近，实值期权的价值越来越接近标的行权价与市场价的差价。</li>
</ul>
<p>对此，《麦克米伦谈期权》1.9.2 节有一个汇总表格：</p>
<img src="/images/option-price-factors.jpg" class="">

<h2 id="期权的指标"><a href="#期权的指标" class="headerlink" title="期权的指标"></a>期权的指标</h2><p>为了更好的理解期权，人们又抽象出一些指标来描述它。</p>
<h3 id="Delta"><a href="#Delta" class="headerlink" title="Delta"></a>Delta</h3><p>Delta 表示随着股价的变化，期权价格的变化速度。Delta 变化区间在 <code>[-1, 1]</code> 之间。其中看涨期权的 Delta 变化区间在 <code>[0, 1]</code>，看跌期权的 Delta 变化区间在 <code>[-1, 0]</code>。</p>
<p>比如 Delta 为 0.5 就表示，股价每变化 1 点，期权变化 0.5 点。比如实值的看涨期权，Delta 就比较高，股价每上涨 1 点，期权几乎也上涨 1 点。</p>
<p>实值看涨期权的 Delta 接近 1，虚值看涨期权的 Delta 接近 0 一些。说明实值看涨期权更像是股票。</p>
<p>如果 Delta 为 0，则表示无论股价怎么变化，该组合的价格都不会变化，这种情况下，我们也称作该组合的 Delta 是中性，这也解释了上面提到的套利为什么被称作 <strong>Delta 中性头寸</strong>。</p>
<p>Delta 随着时间也会变化。比如对于虚值期权来说，随着时间流逝，它的 Delta 会趋于 0。因为时间越接近，股价的波动除非将虚值改变为实值，否则就没有意义。</p>
<p>与虚值期权相反，实值期权随着时间的流逝，它的 Delta 会趋近于 1（或-1）。因为这个时候，期权的时间价值几乎没有了，它的价格反映的就是行权价和股价之间的差。</p>
<p>书中对 Delta 还有一种另类的看待角度：<strong>Delta 可以看作期权最终到期时为实值期权的概率</strong>。虽然数学解释不严谨，但是很有效。</p>
<h3 id="波动率"><a href="#波动率" class="headerlink" title="波动率"></a>波动率</h3><p>波动率是用来衡量标的价格变化速度。</p>
<ul>
<li>历史波动率（historical volatility）是根据股票历史的波动率数据，是算出来的。</li>
<li>隐含波动率（implied volatility）是隐含在场内期权价格中的未来波动率水平。</li>
</ul>
<p>当隐含波动率远高于历史波动率，说明股票在经历一些事件，例如：并购，诉讼，重大合作，重大危机，这些事件因为没有确定，所以买卖双方力量均衡，但事件结束后股票就会有大的变化。</p>
<p>书中 6.6.2 节举了一个有趣的例子：</p>
<blockquote>
<p>1994 年，一家名为 Gensia 的制药公司被 FDA 宣布，将对它的主要药品举行听证会。该公司的股票没有什么巨大的波动，因为 FDA 的结果没有出来，所以看多和看空的双方力量均衡。<br>但是，这家公司的期权的隐含波动率即上升至 140% 左右的区域。这是因为交易者知道 FDA 的结果将决定这家公司的成败。结果 FDA 最终做出了不利于这家公司的决定。<br>这家公司股价瞬间下跌 50%，同时期权的隐含波动率回归到了正常水平。</p>
</blockquote>
<h3 id="Vega"><a href="#Vega" class="headerlink" title="Vega"></a>Vega</h3><p>Vega 描述的是波动率的变化如何影响期权价格（假定其它变量不变）。实际上 Vaga 就是代表的是隐含波动率。</p>
<ul>
<li>Vega 值如果为 -5.0，则表示波动率每增加 1 点，期权会亏损 500 元。</li>
<li>Vega 值如果为 +5.0，则表示波动率每增加 1 点，期权会收益 500 元。</li>
</ul>
<p>所以 Vega 代表的是波动率变化后，期权价格的变化情况。</p>
<h3 id="Theta"><a href="#Theta" class="headerlink" title="Theta"></a>Theta</h3><p>Theta 表示的是期权时间价值的减少。它是用负数来表示的，期权每过一天它的时间价值就会减少一些。</p>
<p>如果一个期权到期时间还很长，那么它的 Theta 值可能非常低。</p>
<p>例如：下图是 哔哩哔哩（BILI）在 3.20 的一份 7.17 到期的 22.5 PUT 合约，可以看到因为到期时间还有 4 个月，所以每天由于时间因素带来的影响只有 -0.014：</p>
<img src="/images/theta.jpg" class="">

<p>而与此对比，只有一周就到期的 3.27 Tesla PUT 的 Theta 则高达 -0.23：</p>
<img src="/images/theta-tesla.jpg" class="">

<h3 id="Rho"><a href="#Rho" class="headerlink" title="Rho"></a>Rho</h3><p>Rho 表示的是利率变化对于期权价格的影响。但是大部分活跃的期权交易因为到期时间都比较短（1-3个月），所以 Rho 的值都很小。</p>
<h3 id="Gamma"><a href="#Gamma" class="headerlink" title="Gamma"></a>Gamma</h3><p>因为 Delta 和 Vaga 值会变化得非常快，不利于构建中性头寸，所以理论家们又引入了 Gamma。</p>
<p>Gamma 是衡量 Delta 变化快慢的指标。如果 Delta 和 Gamma 都是中性的，那么组合保持中性的概率就高了很多。</p>
<p>对于如何建立一个中性头寸组合，书中介绍了详细的方法，但估计一般人都应该用不到，我就不展开介绍了。</p>
<h3 id="时间价值"><a href="#时间价值" class="headerlink" title="时间价值"></a>时间价值</h3><p>期权时间价值是指期权合约的购买者为购买期权而支付的权利金超过期权内在价值的那部分价值。期权购买者之所以愿意支付时间价值，是因为他预期随着时间的推移和市价的变动，期权的内在价值会增加。</p>
<p>期权的内在价值是通过对标的股票价格变化而变化的，如果股票没有超着预期的方向波动，那么期权的内在价值就不会增加，而随着时间流逝，期权的时间价值又会减少，期权的价值就会减少。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>因为期权的影响因素很多，所以人们抽像出来 Delta, Vega, Theta 等指标来更好地理解它。</p>
<p>本系列文章汇总：</p>
<ul>
<li><a href="/2020/02/08/option-learning-note/">美股期权学习笔记（一）</a></li>
<li><a href="/2020/03/15/option-learning-notes-1/">美股期权学习笔记（二）</a></li>
<li><a href="/2020/03/21/option-learning-notes-3/">美股期权学习笔记（三）</a></li>
<li><a href="/2020/03/22/option-learning-notes-4/">美股期权学习笔记（四）</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/18/2020/reverse-proxy-for-126-mail-pop-server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/18/2020/reverse-proxy-for-126-mail-pop-server/" itemprop="url">反向代理解决 Gmail 代收 126 邮箱出现 Connection timed out 的问题</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-18T14:27:58+08:00">
                2020-03-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>我有很多个电子邮箱地址，并且都设置了转发或者代收到 Gmail 上，方便集中处理。其中看重实时性、邮件需要尽快处理的邮箱地址（比如 <a href="mailto:printempw@gmail.com">printempw#gmail.com</a>）是设置的自动转发规则，其他无关紧要的邮箱则是在 Gmail 上设置了 POP3 代收信（<a target="_blank" rel="noopener" href="https://support.google.com/mail/answer/21289">查收其他帐号的邮件</a>），一直用到现在也没什么问题。</p>
<p>然而前段时间我却突然发现，Gmail 里收不到网易 126 邮箱里的邮件了。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/03/18/2020/reverse-proxy-for-126-mail-pop-server/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2020/03/15/2020-03-10-option-learning-notes-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/15/2020-03-10-option-learning-notes-1/" itemprop="url">美股期权学习笔记（二）</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-15T22:41:43+08:00">
                2020-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/summary/" itemprop="url" rel="index">
                    <span itemprop="name">summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近研读了《麦克米伦谈期权》，以下是一些总结。</p>
<h2 id="什么是期权"><a href="#什么是期权" class="headerlink" title="什么是期权"></a>什么是期权</h2><p>期权是以特定价格买入或者卖出特定证券的权利，该权利在特定时间内有效。</p>
<p>期权有几个关键的概念：</p>
<ul>
<li>过期时间（expiration date），到了时间就过期。有期权的一方可以在到期前选择执行期权或放弃执行。</li>
<li>行权价（strike price），买卖双方按行权价执行。</li>
<li>权利金（premium），也就是期权的现金价值。期权的现金价值会随着时间以及股价波动。</li>
<li>类型。分为买入权利（CALL）和卖出权利（PUT）。CAll 又被称为看涨期权，PUT 被称为看跌期权。</li>
<li>标的。指目标期权。</li>
</ul>
<p>期权在美股上按手交易，每手代表 100 份标的。据说历史上有人把 1 手当成 1 股，结果就是多买了 100 倍的期权。</p>
<h2 id="行权时间"><a href="#行权时间" class="headerlink" title="行权时间"></a>行权时间</h2><p>美式期权和欧式期权不一样，美式期权可以在到期前的任意时间随时行权，欧式期权只能在到期时行权。美股上交易的股票期权都是美式期权。大部分的指数期权是欧式期权。</p>
<p>所以，对于美式期权，如果你通过卖 CALL 或者卖 PUT 做空一个期权，即使最终到了过期时间你的期权收益为正，但是有可能在中段波动的时候，你的期权在某一个时间点是亏损的，只要你的对手方提前行权了，你的这个亏损就被确定了。</p>
<p>我使用的期权软件背后的券商是<a target="_blank" rel="noopener" href="https://www.interactivebrokers.com.hk/cn/home.phplink">盈透证券（IB）</a>, 使用它提供的 <a target="_blank" rel="noopener" href="https://www1.interactivebrokers.com/en/index.php?f=16040">TWS 软件</a>，即可将自己的期权提前行权。</p>
<p>具体操作方式是在 TWS 中选择 “账户”-&gt;“期权行权”，然后操作相关的期权选择“提前行权”即可，如下图所示：</p>
<img src="/images/tws-1.jpg" class="">

<img src="/images/tws-2.jpg" class="">

<h2 id="期权拥有方到期的默认操作"><a href="#期权拥有方到期的默认操作" class="headerlink" title="期权拥有方到期的默认操作"></a>期权拥有方到期的默认操作</h2><p>期权拥有方按理说在到期时有行权和不行权的权利，那么如果不进行任何操作，默认的操作是行权还是不行权呢？美股的规则如下：</p>
<ul>
<li><p>到期日，期权在价内 0.01 或以上的股票期权将被自动行权，但是当投资者的保证金不满足行权条件时则会按照市场价平仓。</p>
</li>
<li><p>到期日，价格已低于 0.01 且投资者不主动行权或者平仓。这时候期权会自动失效，您的损失为全部期权费；一般情况下，这时候如果主动行权损失会更多。</p>
</li>
</ul>
<h2 id="实值期权与虚值期权"><a href="#实值期权与虚值期权" class="headerlink" title="实值期权与虚值期权"></a>实值期权与虚值期权</h2><p>如果行权价低于股票的价格，则我们称这个期权是有实值的，是实值期权，反之则称为虚值期权。</p>
<p>虚值期权之所以有交易，是因为它们具有时间价值，随着时间的变化，股价也会变动，有可能当时还是虚值的期权，未来就是实值了。</p>
<p>如果到了期权的到期时间，期权还是一个虚值期权，则它的价值就会归为 0。比如一个以 30 元买入的看涨期权，如果到期时股票价格是 20 元，那么期权所有者肯定不会行权，因为行权的价格比从市场上直接买还贵，这个期权就相当于废纸。</p>
<h2 id="盈亏曲线"><a href="#盈亏曲线" class="headerlink" title="盈亏曲线"></a>盈亏曲线</h2><p>我们假设某家公司的股价是 50 元，然后可以画出不同期权的盈亏曲线。不得不说，画这些图还挺有意思的，笔者用 keynote 完成的所有图的绘制。</p>
<h3 id="买入看涨期权"><a href="#买入看涨期权" class="headerlink" title="买入看涨期权"></a>买入看涨期权</h3><p>买入行权价 52 元的看涨期权的价格是 2 元，则盈亏曲线如下：</p>
<img src="/images/buy-call.jpg" class="">

<p>从图中可以看出，期权到期时：</p>
<ul>
<li>当股价低于 52 元时，损失为 200 元（1手期权的价格）</li>
<li>当股价等于 54 元时，刚好盈亏平衡</li>
<li>当股价高于 54 元时，有盈利</li>
<li>买入看涨期权，最大损失为 200 元，最大盈利无上限</li>
</ul>
<h3 id="卖出看涨期权"><a href="#卖出看涨期权" class="headerlink" title="卖出看涨期权"></a>卖出看涨期权</h3><p>卖出看涨期权的盈亏曲线和买入的刚好上下对称，因为两者互为对手盘。你盈多少，对手就亏多少，所以盈亏曲线如下：</p>
<img src="/images/sell-call.jpg" class="">

<p>从图中可以看出，期权到期时：</p>
<ul>
<li>当股价低于 52 元时，盈利为 200 元（1手期权的价格）</li>
<li>当股价等于 54 元时，刚好盈亏平衡</li>
<li>当股价高于 54 元时，有亏损</li>
<li>卖出看涨期权，最大收益为 200 元，最大亏损无上限</li>
</ul>
<h3 id="买入看空期权"><a href="#买入看空期权" class="headerlink" title="买入看空期权"></a>买入看空期权</h3><p>如果我们买入一个 48 元的期权，期权价格是 2 元，则盈亏曲线如下：</p>
<img src="/images/buy-put.jpg" class="">

<p>从图中可以看出，期权到期时：</p>
<ul>
<li>当股价高于 48 元，则亏损为 200 元（1手期权的价格）</li>
<li>当股价等于 46 元，刚好盈亏平衡</li>
<li>当股价低于 46 元，则有盈利。理论上，最高盈利是 4600 元，对应股价是 0 元。</li>
</ul>
<h3 id="卖出看空期权"><a href="#卖出看空期权" class="headerlink" title="卖出看空期权"></a>卖出看空期权</h3><p>同样，卖出看跌期权的盈亏曲线和买入的刚好上下对称，因为两者互为对手盘。盈亏曲线如下：</p>
<img src="/images/sell-put.jpg" class="">

<p>从图中可以看出，期权到期时：</p>
<ul>
<li>当股价高于 48 元，则盈利为 200 元（1手期权的价格）</li>
<li>当股价等于 46 元，刚好盈亏平衡</li>
<li>当股价低于 46 元，则有亏损。理论上，最高亏损是 4600 元，对应股价是 0 元。</li>
</ul>
<h2 id="保证金"><a href="#保证金" class="headerlink" title="保证金"></a>保证金</h2><p>当你买 CALL 或者买 PUT ，你付出的就是权利金，损失是有限的，最坏情况下就是期权价值变为 0，损失掉所有的权利金。但是你的理论收益是无穷的。</p>
<p>当你卖 CALL 或者卖 PUT，你就会收到权利金，但是你的收益上限就是权利金。当你的对手方行权的时候，你需要执行相应的义务：</p>
<ul>
<li>对于 CALL 期权，你需要按指定价格卖出标的股票</li>
<li>对于 PUT 期权，你需要按指定价格买入标的股票</li>
</ul>
<p>为了保证你有行使这个义务的能力，你需要在帐户中保留足够的保证金。保证金的计算规则比较复杂，与你的期权仓位占比以及期权集中性都有关系，在盈透证券的<a target="_blank" rel="noopener" href="https://www.interactivebrokers.com.hk/cn/index.php?f=27149">帮助页面</a>上有详细的介绍。</p>
<p>如果你的证券价值和现金加起来的保证金不足，则系统会随机平仓你的一部分股票以维持保证金要求。</p>
<h2 id="期权的组合（一）"><a href="#期权的组合（一）" class="headerlink" title="期权的组合（一）"></a>期权的组合（一）</h2><p>期权组合起来，可以构建一些特殊的盈利曲线。比如我们同时卖出看涨和看跌期权，就可以将以下两种曲线叠加。《麦克米伦谈期权》在 2.5.5 小结中介绍了这种被称为跨式期权的组合。</p>
<p>下图中的红色和蓝色分别为卖出看跌和卖出看涨的盈亏曲线，而黄色则表示叠加之后的组合盈亏曲线。</p>
<img src="/images/sell-buy-put.jpg" class="">

<p>这个曲线很有意思，它表示不管股票是上涨还是下跌，只要股价到期时的波动范围在 44 ~ 52 元之间，这个组合就是盈利的。</p>
<p>想当然的，你可以构建一个波动范围极宽的跨式组合期权，虽然这种组合期权盈利不多，但是盈利的概率极大。历史上曾经这种策略很流行，但是市场总是会出现小概率事件，这种跨式期权收益有上限，但是亏损无限的特点，遇上一次极端事件就能让投资者破产。</p>
<h2 id="期权的组合（二）"><a href="#期权的组合（二）" class="headerlink" title="期权的组合（二）"></a>期权的组合（二）</h2><p>相比刚刚介绍的那种组合，以下的期权组合更被做市商所采用，即：买入看涨期权 + 卖出看跌期权。</p>
<p>你看完下图就能明白这个组合的有趣之处了：</p>
<img src="/images/buy-call-sell-put.jpg" class="">

<p>这种组合的收益曲线和直接买入股票是完全一样的。但是在这种组合下，你所需要的资金只是买入股票的一部分，所以你可以以更小的资金成本，达到同样的收益曲线。</p>
<p>实际当中，这种策略与买入股票并不是完全一样收益，因为股票还会涉及分红，而持有期权是没有分红权的。另外则是交易费率和交易次数的差异。</p>
<h2 id="组合套利"><a href="#组合套利" class="headerlink" title="组合套利"></a>组合套利</h2><p>因为买卖价差的原因，有些时候做市商会通过组合，构建一个收益为正，但是风险为零的套利。</p>
<p>刚刚说到<code>期权的组合（二）</code>就是一种持有股票的策略，如果我们用<code>期权组合（二）</code>再加上<code>卖空股票</code>，就构建出一种组合。由于买卖价差的原因，这种组合虽然相当于什么都没干，但是却会有收益。</p>
<p>以下我就以一个实际的案例进行说明。我们拿好未来在美股的真实股价与期权价举例。</p>
<p>好未来在 3 月 6 日的收盘价格是 56.49，同时</p>
<ul>
<li>4.17 到期的 50 元看涨期权挂单价格是 7.8(买) ~ 9.8（卖），最近成交价是 7.62</li>
<li>4.17 到期的 50 元看跌期权挂单价格是 1.45（买）~ 1.95（卖），最近成交价是 1.69</li>
</ul>
<p>我们假设，我们在 3.6 收盘前，以：</p>
<ul>
<li>以 56.49 的价格卖空 100 股股票</li>
<li>以 7.62 的成交价买入 1 手看涨期权</li>
<li>以 1.69 的成交价卖出 1 手看跌期权</li>
</ul>
<p>那我们的收益应该是多少呢？为了计算收益，我们需要搬出初中学习的二元一次方程。如果你不想跟着我计算，可以直接看最后的结论。</p>
<h3 id="计算卖空的收益函数"><a href="#计算卖空的收益函数" class="headerlink" title="计算卖空的收益函数"></a>计算卖空的收益函数</h3><p>假设未来股价为 x，则卖空 100 股股票的收益函数 y1 为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y1 = (56.49 - x) * 100</span><br><span class="line">   = (50 - x) * 100 + 6.49 * 100</span><br><span class="line">   = (50 - x) * 100 + 649</span><br></pre></td></tr></table></figure>
<p>应该很简单对吧？因为是做空，x 越大，则 y1 越小。</p>
<h3 id="计算买入看涨期权的收益函数"><a href="#计算买入看涨期权的收益函数" class="headerlink" title="计算买入看涨期权的收益函数"></a>计算买入看涨期权的收益函数</h3><p>假设未来股价为 x，则期权到期时收益函数 y2 为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x &lt; 50 时：</span><br><span class="line">	y2 = -7.62 * 100 = -762</span><br><span class="line">x &gt;= 50 时：</span><br><span class="line">	y2 = (x - 50) * 100 - 762</span><br></pre></td></tr></table></figure>

<p>能看懂吧？因为期权行权价是 50，所以股价少于 50 则期权就作废了，损失为 762 元的权利金。如果股价高于 50，则可以按上面的公式来计算盈亏。</p>
<h3 id="计算卖出看跌期权的收益函数"><a href="#计算卖出看跌期权的收益函数" class="headerlink" title="计算卖出看跌期权的收益函数"></a>计算卖出看跌期权的收益函数</h3><p>假设未来股价为 x，则期权到期时收益函数 y3 为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x &lt; 50 时：</span><br><span class="line">	y3 = (x - 50) * 100 + 169</span><br><span class="line">x &gt;= 50 时：</span><br><span class="line">	y3 = 1.69 * 100 = 169</span><br></pre></td></tr></table></figure>
<p>因为我们是卖出看跌，所以如果股价高于 50，我们的收益就是 169 的权利金，否则我们就需要按上面的公式计算收益。</p>
<h3 id="求和"><a href="#求和" class="headerlink" title="求和"></a>求和</h3><p>我们将 y1, y2, y3 进行求和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">x &lt; 50时：</span><br><span class="line">	y1 = (50 - x) * 100 + 649</span><br><span class="line">	y2 = -762</span><br><span class="line">	y3 = (x - 50) * 100 + 169</span><br><span class="line">  求和：</span><br><span class="line">	y = y1 + y2 + y3</span><br><span class="line">	  = (50 - x) * 100 + 649 -762</span><br><span class="line">	   + (x - 50) * 100 + 169</span><br><span class="line">	  = 649 - 762 + 169</span><br><span class="line">	  = 56</span><br><span class="line"></span><br><span class="line">y &gt;= 50时：</span><br><span class="line">	y1 = (50 - x) * 100 + 649</span><br><span class="line">	y2 = (x - 50) * 100 - 762</span><br><span class="line">	y3 = 169</span><br><span class="line">  求和：</span><br><span class="line">	y = y1 + y2 + y3</span><br><span class="line">	  = (50 - x) * 100 + 649</span><br><span class="line">	   + (x - 50) * 100 - 762</span><br><span class="line">	   + 169</span><br><span class="line">	  = 649 - 762 + 169</span><br><span class="line">	  = 56</span><br></pre></td></tr></table></figure>

<p>最后，我们发现，x 不管是大于 50 还是小于 50，情况都一样，<code>y = 56</code>。</p>
<p>你看，如果你当时按市场价同时完成了这 3 笔交易，你就构建了一个套利。这也是做市商的生意模式。</p>
<p>这种组合在《麦克米伦谈期权》的 6.2 章节中被称作 <strong>Delta 中性头寸</strong>。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul>
<li>期权是以特定价格买入或者卖出特定证券的权利，该权利在特定时间内有效。</li>
<li>美式期权是可以提前行权的。</li>
<li>卖出期权收到权利金，但是需要帐户中留有足够执行期权义务的保证金。</li>
<li>期权的组合可以用来构建各种特殊的盈利曲线。</li>
<li>如果一个组合与标的股价无关，我们就说这个组合是 Delta 中性的。它可以用来做无风险套利。</li>
</ul>
<p>本系列文章汇总：</p>
<ul>
<li><a href="/2020/02/08/option-learning-note/">美股期权学习笔记（一）</a></li>
<li><a href="/2020/03/15/option-learning-notes-1/">美股期权学习笔记（二）</a></li>
<li><a href="/2020/03/21/option-learning-notes-3/">美股期权学习笔记（三）</a></li>
<li><a href="/2020/03/22/option-learning-notes-4/">美股期权学习笔记（四）</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/21/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/79/">79</a><a class="extend next" rel="next" href="/page/23/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">1579</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">64</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
