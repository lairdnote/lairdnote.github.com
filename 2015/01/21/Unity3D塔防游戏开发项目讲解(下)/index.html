<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="教程,Unity3D,游戏开发,塔防," />










<meta name="description" content="&#x2F;&#x2F;Debug.Log(&quot;敌人&quot; + _enemy.transform.name + &quot;未进入攻击范围,距离为:&quot; + mDis);&#x2F;&#x2F;Debug.Log(&quot;敌人&quot; + _enemy.transform.name + &quot;已进入攻击范围,距离为:&quot; + mDis);好了，现在我们来说说敌人的血条吧，我们知道当怪物沿着寻路路径向我方阵地发起攻击的时候，我方防守单位会自动地对敌人进行防御性攻击，那么此时">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity3D塔防游戏开发项目讲解(下)">
<meta property="og:url" content="https://blog.feedscoin.com/2015/01/21/Unity3D%E5%A1%94%E9%98%B2%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E8%AE%B2%E8%A7%A3(%E4%B8%8B)/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="&#x2F;&#x2F;Debug.Log(&quot;敌人&quot; + _enemy.transform.name + &quot;未进入攻击范围,距离为:&quot; + mDis);&#x2F;&#x2F;Debug.Log(&quot;敌人&quot; + _enemy.transform.name + &quot;已进入攻击范围,距离为:&quot; + mDis);好了，现在我们来说说敌人的血条吧，我们知道当怪物沿着寻路路径向我方阵地发起攻击的时候，我方防守单位会自动地对敌人进行防御性攻击，那么此时">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://img.blog.csdn.net/20150301184316413">
<meta property="og:image" content="http://img.blog.csdn.net/20150301190040972">
<meta property="article:published_time" content="2015-01-21T05:50:48.000Z">
<meta property="article:modified_time" content="2024-01-15T07:50:33.129Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="教程">
<meta property="article:tag" content="Unity3D">
<meta property="article:tag" content="游戏开发">
<meta property="article:tag" content="塔防">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.blog.csdn.net/20150301184316413">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/2015/01/21/Unity3D塔防游戏开发项目讲解(下)/"/>





  <title>Unity3D塔防游戏开发项目讲解(下) | 逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2015/01/21/Unity3D%E5%A1%94%E9%98%B2%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E8%AE%B2%E8%A7%A3(%E4%B8%8B)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Unity3D塔防游戏开发项目讲解(下)</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-01-21T13:50:48+08:00">
                2015-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index">
                    <span itemprop="name">游戏开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  //Debug.Log("敌人" + _enemy.transform.name + "未进入攻击范围,距离为:" + mDis);//Debug.Log("敌人" + _enemy.transform.name + "已进入攻击范围,距离为:" + mDis);好了，现在我们来说说敌人的血条吧，我们知道当怪物沿着寻路路径向我方阵地发起攻击的时候，我方防守单位会自动地对敌人进行防御性攻击，那么此时血条就可以显示敌人的实时血量，从而方便玩家根据战场的情况来调整兵力部署情况
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        <p>各位朋友，大家好，我是秦元培，欢迎大家关注我的博客，我的博客地址是<a target="_blank" rel="noopener" href="http://blog.csdn.net/qinyuanpei">http://blog.csdn.net/qinyuanpei</a>。我们知道一个完整的塔防游戏由地图、敌人、防守单位三个部分组成，在上一篇文章中我们已经对地图这块儿进行了全面的讲解，今天我们来说说敌人和防守单位。</p>
<span id="more"></span>

<h1 id="敌人篇"><a href="#敌人篇" class="headerlink" title="敌人篇"></a>敌人篇</h1><h2 id="敌人自动寻路的实现"><a href="#敌人自动寻路的实现" class="headerlink" title="敌人自动寻路的实现"></a>敌人自动寻路的实现</h2><p>敌人在游戏中有一个基本的行为，即沿着寻路路径向我方阵地移动并发起攻击。在地图篇中，我们详细地介绍了敌人寻路路径的生成原理。既然有了敌人寻路的路线，那么怎么让敌人沿着路线移动呢？其实只要指定敌人寻路的起点就可以了，因为在寻路路径的设计中，我们使用的是一个类似于链表的结构，这样我们就能根据每个结点获取它的目标结点，从而实现敌人沿着寻路路径移动的效果了。因为敌人寻路的路线是定义在PathNode类中的，因此我们可以写出下面这样的代码：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Move</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">	Vector3 mPos1=<span class="keyword">this</span>.transform.position;</span><br><span class="line">	Vector3 mPos2=<span class="keyword">this</span>.StartNode.transform.position;</span><br><span class="line">	<span class="comment">//计算敌人与路径节点间的距离</span></span><br><span class="line">	<span class="built_in">float</span> mDis=Vector2.Distance(<span class="keyword">new</span> Vector2(mPos1.x,mPos1.y),<span class="keyword">new</span> Vector2(mPos2.x,mPos2.y));</span><br><span class="line">	<span class="keyword">if</span>(mDis&lt;<span class="number">0.1F</span>)&#123;</span><br><span class="line">		<span class="keyword">if</span>(StartNode.ThatNode==<span class="literal">null</span>)&#123;</span><br><span class="line">			<span class="comment">//对防守阵地进行摧毁</span></span><br><span class="line">			GameManager.Instance.PlayerHP-=<span class="number">20</span>;</span><br><span class="line">			<span class="comment">//从敌人列表中移除自身</span></span><br><span class="line">			GameManager.Instance.Enemys.Remove(<span class="keyword">this</span>);</span><br><span class="line">			<span class="comment">//销毁自身</span></span><br><span class="line">			Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">			<span class="comment">//销毁血条</span></span><br><span class="line">			Destroy(mHPBar.gameObject);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			StartNode=StartNode.ThatNode;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//计算敌人的移动方向</span></span><br><span class="line">	Vector3 mDir=<span class="keyword">new</span> Vector3(mPos2.x-mPos1.x,mPos2.y-mPos1.y,<span class="number">0</span>).normalized;</span><br><span class="line">	transform.Translate(mDir * MoveSpeed * Time.deltaTime);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p>好了，现在我们来一起分析这段代码。首先，我们计算了敌人与路径结点间的距离，这里我们用0.1来近似地表示敌人已经到了路径结点上，此时如果该结点的目标结点为null则表示此时敌人已经到了最后一个结点处，所以敌人会对我方的阵地造成20点的伤害并销毁敌人。在GameManager我们使用了一个列表来管理和维护当前场景中的所有敌人，因此当当前敌人销毁时需要从列表中移除，GameManager类是一个静态类，负责对游戏的全局维护，这个类我们放到稍后来讲啊。那么如果敌人没有走到最后一个结点怎么办呢？我们只需要将StartNode指向StartNode的目标节点，这样我们就可以对整个路径结点实现遍历。这里是不是有种数据结构的感觉呢？哈哈，数据结构和算法是编程中最基础、最重要的内容，这些内容到了游戏开发领域同样是适用的。那么，好了，既然知道敌人是怎么移动的，现在我们就来对敌人进行移动吧，这里是采用计算移动方向的方式来实现，这个很简单啦。</p>
<p>好了，现在我们来说说敌人的血条吧，我们知道当怪物沿着寻路路径向我方阵地发起攻击的时候，我方防守单位会自动地对敌人进行防御性攻击，那么此时血条就可以显示敌人的实时血量，从而方便玩家根据战场的情况来调整兵力部署情况。我们知道从Unity4.6以后Unity开始使用全新的GUI系统UGUI，因为博主在之前的项目中一直使用NGUI，加上博主不是很喜欢做UI，所以每次用NGUI的时候整个人的心情都是不好的，有段时间被NGUI虐得体无完肤，感觉整个人都不好了。好了，既然现在我们有了新的选择UGUI，那么就让我们先睹为快吧！如图，全新的NGUI位于GameObect-&gt;UI菜单下，基本覆盖了常用的如Button、Image、Slider、ScrollBar等控件，因为UGUI刚推出不久，所以博主希望大家还是能客观、公正的对待UGUI和NGUI，博主认为在短期内这两个GUI系统将处于共存的状态，不存在相互替代的可能性。<br><img src="http://img.blog.csdn.net/20150301184316413" alt="UGUI"/><br> 好了，UGUI所有的控件都是放到一个叫做Canvas的父控件下的，这一点和NGUI的UIRoot有些类似吧！Canvas提供了三种模式的UI系统，即Screen Space-Overlay、Screen Space-Camera、World Space。第一种Screen Space-Overlay它是完全以当前屏幕的像素大小创建的一个矩形范围，即控件是以屏幕坐标来绘制的；第二种Screen Space-Camera它是根据相机的视线范围来确定的一个矩形范围，其控件是根据Camera的ViewPortPoint坐标来绘制的;第三种从名称我们就可以知道，它是完全3D化的UI,使用的是常用的世界坐标。博主是刚开始研究UGUI,如果有不对的地方还希望大家能够原谅啊。好了，下面我们正式来做血条吧，在这里我们使用的是默认的Slider控件，用Slider控件来制作血条需要将Slider控件自带的滑块删除，然后我们通过改变value就可以实现一个简单的血条了。在UGUI中所有的图片素材都是以Sprite的形式来出现的，所以UGUI可以自己生成图集，不需要像NGUI在做UI前首先要生成图集。这是博主做的一个简单的血条。现在血条做好了，可是问题来了：这UGUI的所有控件都必须要放到Canvas下面啊，所以我们没法像NGUI一样直接把做好的血条放到怪物下面。怎么办呢？既然不能放到怪物下面，那我们就放到Canvas下面吧，不过我们需要自己计算血条的位置。好了，下面来看代码：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Enemy</span> : <span class="title">MonoBehaviour</span> </span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//敌人的生命值</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> MaxHP;</span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> HP;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//敌人的初始路径节点</span></span><br><span class="line">	<span class="keyword">public</span> PathNode StartNode;</span><br><span class="line">	<span class="comment">//敌人的移动速度</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> MoveSpeed=<span class="number">0.15F</span>;</span><br><span class="line">	<span class="comment">//敌人的旋转速度</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> RotateSpeed=<span class="number">0.3F</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//敌人血条预制件</span></span><br><span class="line">	<span class="keyword">public</span> GameObject HPBar;</span><br><span class="line">	<span class="comment">//敌人血条组件</span></span><br><span class="line">	<span class="keyword">private</span> Slider mHPBar;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//public EnemySpawn mSpawn;</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//在敌人列表中增加一个敌人</span></span><br><span class="line">		GameManager.Instance.Enemys.Add(<span class="keyword">this</span>.GetComponent&lt;Enemy&gt;());</span><br><span class="line">		<span class="comment">//查找UI</span></span><br><span class="line">		Transform mUiRoot=GameObject.Find(<span class="string">&quot;UIManager&quot;</span>).transform;</span><br><span class="line">		<span class="comment">//计算血条位置</span></span><br><span class="line">		Vector3 mPos=<span class="keyword">this</span>.transform.FindChild(<span class="string">&quot;EnemyHP&quot;</span>).transform.position;</span><br><span class="line">		<span class="comment">//mPos=Camera.main.WorldToViewportPoint(mPos);</span></span><br><span class="line">		mPos.z=<span class="number">-5</span>;</span><br><span class="line">		<span class="comment">//生成血条</span></span><br><span class="line">		GameObject go=(GameObject)Instantiate(HPBar,mPos,Quaternion.identity);</span><br><span class="line">		<span class="comment">//使血条成为Canvas的子物体</span></span><br><span class="line">		go.transform.parent=mUiRoot;</span><br><span class="line">		<span class="comment">//对血条进行放缩</span></span><br><span class="line">		go.GetComponent&lt;RectTransform&gt;().localScale=<span class="keyword">new</span> Vector3(<span class="number">0.5F</span>,<span class="number">0.30F</span>,<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//获取Slider</span></span><br><span class="line">		mHPBar=go.transform.GetComponent&lt;Slider&gt;();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Move</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		Vector3 mPos1=<span class="keyword">this</span>.transform.position;</span><br><span class="line">		Vector3 mPos2=<span class="keyword">this</span>.StartNode.transform.position;</span><br><span class="line">		<span class="comment">//计算敌人与路径节点间的距离</span></span><br><span class="line">		<span class="built_in">float</span> mDis=Vector2.Distance(<span class="keyword">new</span> Vector2(mPos1.x,mPos1.y),<span class="keyword">new</span> Vector2(mPos2.x,mPos2.y));</span><br><span class="line">		<span class="keyword">if</span>(mDis&lt;<span class="number">0.1F</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(StartNode.ThatNode==<span class="literal">null</span>)&#123;</span><br><span class="line">				<span class="comment">//对防守阵地进行摧毁</span></span><br><span class="line">				GameManager.Instance.PlayerHP-=<span class="number">20</span>;</span><br><span class="line">				<span class="comment">//从敌人列表中移除自身</span></span><br><span class="line">				GameManager.Instance.Enemys.Remove(<span class="keyword">this</span>);</span><br><span class="line">				<span class="comment">//销毁自身</span></span><br><span class="line">				Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">				<span class="comment">//销毁血条</span></span><br><span class="line">				Destroy(mHPBar.gameObject);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				StartNode=StartNode.ThatNode;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//计算敌人的移动方向</span></span><br><span class="line">		Vector3 mDir=<span class="keyword">new</span> Vector3(mPos2.x-mPos1.x,mPos2.y-mPos1.y,<span class="number">0</span>).normalized;</span><br><span class="line">		transform.Translate(mDir * MoveSpeed * Time.deltaTime);</span><br><span class="line">	&#125; </span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Rotate</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//初始角度</span></span><br><span class="line">		<span class="built_in">float</span> mStartAngle=<span class="keyword">this</span>.transform.eulerAngles.z;</span><br><span class="line">		transform.LookAt(StartNode.transform);</span><br><span class="line">		<span class="comment">//目标角度</span></span><br><span class="line">		<span class="built_in">float</span> mTargetAngle=<span class="keyword">this</span>.transform.eulerAngles.z;</span><br><span class="line">		<span class="comment">//计算旋转量</span></span><br><span class="line">		<span class="built_in">float</span> mAngle=Mathf.MoveTowardsAngle(mStartAngle,mTargetAngle,RotateSpeed *Time.deltaTime);</span><br><span class="line">		<span class="keyword">this</span>.transform.eulerAngles = <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,mAngle);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Update</span> ()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		Move();</span><br><span class="line">		UpdateHPBar();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UpdateHPBar</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//更新血条位置</span></span><br><span class="line">		Vector3 mPos=<span class="keyword">this</span>.transform.FindChild(<span class="string">&quot;EnemyHP&quot;</span>).transform.position;</span><br><span class="line">		<span class="comment">//使血条位于顶层</span></span><br><span class="line">		mPos.z=<span class="number">-5</span>;</span><br><span class="line">		mHPBar.transform.position=mPos;</span><br><span class="line">		<span class="comment">//更新血量</span></span><br><span class="line">		mHPBar.<span class="keyword">value</span>=(<span class="built_in">float</span>)HP/MaxHP;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetDamage</span>(<span class="params"><span class="built_in">int</span> mValue</span>)</span></span><br><span class="line">	&#123;</span><br><span class="line">		HP-=mValue;</span><br><span class="line">		<span class="keyword">if</span>(HP&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">		  Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">		  Destroy(mHPBar.gameObject);</span><br><span class="line">		  GameManager.Instance.Enemys.Remove(<span class="keyword">this</span>.GetCopmonent&lt;Enemy&gt;());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这里我们做了三件事情：</p>
<ul>
<li>第一，在Awake方法中我们首先计算出血条的位置然后在这个位置生成血条，并取得相关的变量备用。</li>
<li>第二，在Update方法中增加一个UpdateHPBar方法以实现对血条血量的更新。</li>
<li>第三，增加了一个SetDamage方法，当敌人血量为0时销毁自身、销毁血条、从敌人列表中移除敌人</li>
</ul>
<h2 id="敌人按波次进攻的实现"><a href="#敌人按波次进攻的实现" class="headerlink" title="敌人按波次进攻的实现"></a>敌人按波次进攻的实现</h2><p>好了，到现在为止，对于敌人的逻辑我们就全部实现了。可是我们知道在塔防游戏中敌人通常是一波一波出现的，所以我们需要一个敌人生成器EnemySpawn。那么，怎么来生成敌人呢，这里我们使用Xml文件来配置要生成的敌人列表，首先我们来构建一个Xml文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot;?&gt;</span><br><span class="line">&lt;Enemies&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;1&quot; EnemyName=&quot;Enemy&quot; Level=&quot;1&quot; Wait=&quot;0.5&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;2&quot; EnemyName=&quot;Enemy&quot; Level=&quot;2&quot; Wait=&quot;0.45&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;2&quot; EnemyName=&quot;Enemy&quot; Level=&quot;2&quot; Wait=&quot;0.45&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;3&quot; EnemyName=&quot;Enemy&quot; Level=&quot;3&quot; Wait=&quot;0.4&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;3&quot; EnemyName=&quot;Enemy&quot; Level=&quot;3&quot; Wait=&quot;0.4&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;3&quot; EnemyName=&quot;Enemy&quot; Level=&quot;3&quot; Wait=&quot;0.4&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;4&quot; EnemyName=&quot;Enemy&quot; Level=&quot;4&quot; Wait=&quot;0.35&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;4&quot; EnemyName=&quot;Enemy&quot; Level=&quot;4&quot; Wait=&quot;0.35&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;4&quot; EnemyName=&quot;Enemy&quot; Level=&quot;4&quot; Wait=&quot;0.35&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;4&quot; EnemyName=&quot;Enemy&quot; Level=&quot;4&quot; Wait=&quot;0.35&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;5&quot; EnemyName=&quot;Enemy&quot; Level=&quot;5&quot; Wait=&quot;0.3&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;5&quot; EnemyName=&quot;Enemy&quot; Level=&quot;5&quot; Wait=&quot;0.3&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;5&quot; EnemyName=&quot;Enemy&quot; Level=&quot;5&quot; Wait=&quot;0.3&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;5&quot; EnemyName=&quot;Enemy&quot; Level=&quot;5&quot; Wait=&quot;0.3&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;5&quot; EnemyName=&quot;Enemy&quot; Level=&quot;5&quot; Wait=&quot;0.3&quot;/&gt;</span><br><span class="line">	&lt;Enemy Wave=&quot;6&quot; EnemyName=&quot;Enemy&quot; Level=&quot;99&quot; Wait=&quot;0.15&quot;/&gt;</span><br><span class="line">&lt;/Enemies&gt;</span><br></pre></td></tr></table></figure>
<p>从这个Xml文件中我们可以看到这样一个结构：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Xml;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpawnData</span> </span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//敌人进攻波数</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> Wave;</span><br><span class="line">	<span class="comment"><span class="doctag">///</span>敌人名称，我们将根据这个名称来生成不同的敌人</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">string</span> EnemyName;</span><br><span class="line">	<span class="comment">//敌人等级，我们将根据这个值来调整敌人的生命值和移动速度</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">int</span> Level;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> Wait;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在SpawnData这个结构中，我们可以得到敌人攻击的波数、敌人的名称、敌人等级、敌人生成需要等待的时间，因为博主在游戏中只有一种敌人，所以敌人的名称都是一样的。好了，现在我们可以开始解析Xml了：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//解析Xml文件</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ReadXml</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//创建一个字典以存储敌人列表</span></span><br><span class="line">	mEnemyDatas=<span class="keyword">new</span> List&lt;SpawnData&gt;();</span><br><span class="line">	<span class="comment">//加载Xml文档</span></span><br><span class="line">	XmlDocument mDocument=<span class="keyword">new</span> XmlDocument();</span><br><span class="line">	mDocument.LoadXml(ConfigFile.text);</span><br><span class="line">	XmlElement mRoot=mDocument.DocumentElement;</span><br><span class="line">	<span class="comment">//解析Xml文档</span></span><br><span class="line">	XmlNodeList mNodes=mRoot.SelectNodes(<span class="string">&quot;/Enemies/Enemy&quot;</span>);</span><br><span class="line">	<span class="keyword">foreach</span>(XmlNode mNode <span class="keyword">in</span> mNodes)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//为每一个SpawnData赋值</span></span><br><span class="line">		SpawnData mData=<span class="keyword">new</span> SpawnData();</span><br><span class="line">		mData.Wave=<span class="built_in">int</span>.Parse(mNode.Attributes[<span class="number">0</span>].Value);</span><br><span class="line">		mData.EnemyName=mNode.Attributes[<span class="number">1</span>].Value;</span><br><span class="line">		mData.Level=<span class="built_in">int</span>.Parse(mNode.Attributes[<span class="number">2</span>].Value);</span><br><span class="line">		mData.Wait=<span class="built_in">float</span>.Parse(mNode.Attributes[<span class="number">3</span>].Value);</span><br><span class="line"></span><br><span class="line">		mEnemyDatas.Add(mData);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么好了，在解析完Xml后我们得到了所有的敌人数据，接下来我们只需要按照顺序生成敌人就可以了。具体怎么做呢，我们知道在塔防游戏中生成敌人有两种情况：</p>
<ul>
<li>一个是要生成的敌人和当前敌人是同一波的，这种情况只要继续生成就好了。</li>
<li>一个是要生成的敌人的波数大于当前波数，这种情况需要等待这一波敌人被消灭完。</li>
</ul>
<p>好了，现在来写代码：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Xml;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EnemySpawn</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//敌人寻路起点</span></span><br><span class="line">	<span class="keyword">public</span> PathNode SpawnPath;</span><br><span class="line">	<span class="comment">//敌人预制件</span></span><br><span class="line">	<span class="keyword">public</span> GameObject Enemy;</span><br><span class="line">	<span class="comment">//Xml文件</span></span><br><span class="line">	<span class="keyword">public</span> TextAsset ConfigFile;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//存放敌人的数组</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;SpawnData&gt; mEnemyDatas;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//当前敌人进攻波数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">int</span> mWave=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//当前敌人索引</span></span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">int</span> mIndex=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//当前等待的时间</span></span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">float</span> mWait;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//读取Xml数据</span></span><br><span class="line">		ReadXml();</span><br><span class="line">		Debug.Log(mEnemyDatas.Count);</span><br><span class="line">		<span class="comment">//初始化攻击波数</span></span><br><span class="line">		SpawnData mData=mEnemyDatas[mIndex];</span><br><span class="line">		<span class="comment">//设置攻击波数和等待时间</span></span><br><span class="line">		mWave=mData.Wave;</span><br><span class="line">		mWait=mData.Wait;</span><br><span class="line">		GameManager.Instance.AttackWave=mWave;</span><br><span class="line">		<span class="comment">//生成第一个敌人</span></span><br><span class="line">		CreateEnemy(mData);</span><br><span class="line">		mIndex+=<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">CreateEnemy</span>(<span class="params">SpawnData mData</span>)</span></span><br><span class="line">	&#123;</span><br><span class="line">		GameObject go=(GameObject)Instantiate(Enemy,SpawnPath.transform.position,Quaternion.identity);</span><br><span class="line">		Enemy _Enemy=go.GetComponent&lt;Enemy&gt;();</span><br><span class="line">		<span class="comment">//根据Level计算敌人的生命值和移动速度</span></span><br><span class="line">		_Enemy.MaxHP= (<span class="built_in">float</span>)mData.Level*<span class="number">0.25F</span> * <span class="number">100</span>;</span><br><span class="line">		_Enemy.HP= (<span class="built_in">float</span>)mData.Level*<span class="number">0.25F</span> * <span class="number">100</span>;</span><br><span class="line">		go.GetComponent&lt;Enemy&gt;().MoveSpeed=(<span class="built_in">float</span>)mData.Level * <span class="number">0.15F</span>;</span><br><span class="line">		go.GetComponent&lt;Enemy&gt;().StartNode=SpawnPath;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Update</span> ()</span> </span><br><span class="line">	&#123;</span><br><span class="line">	   <span class="keyword">if</span>(mIndex&lt;=mEnemyDatas.Count<span class="number">-1</span>)&#123;</span><br><span class="line">	     SpawnEnemy();</span><br><span class="line">	   &#125;<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//当索引数目大于敌人列表中的数目时，表示所有敌人以及生成完毕，此时</span></span><br><span class="line">			<span class="comment">//如果所有的敌人都被消灭，则表示玩家获胜。</span></span><br><span class="line">			<span class="keyword">if</span>(GameManager.Instance.Enemys.Count==<span class="number">0</span>)&#123;</span><br><span class="line">				GameManager.Instance.IsWin=<span class="literal">true</span>;</span><br><span class="line">				Debug.Log(<span class="string">&quot;玩家胜&quot;</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">SpawnEnemy</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//取得下一个生成的敌人的数据</span></span><br><span class="line">		SpawnData mData=mEnemyDatas[mIndex];</span><br><span class="line"></span><br><span class="line">		<span class="comment">//开始计时</span></span><br><span class="line">		mWait-=Time.deltaTime;</span><br><span class="line">		<span class="keyword">if</span>(mWait&lt;=<span class="number">0</span> )&#123;</span><br><span class="line">			<span class="comment">//如果当前是同一波敌人，则继续生成敌人</span></span><br><span class="line">		    <span class="keyword">if</span>(mWave==mData.Wave)&#123;</span><br><span class="line">			   <span class="comment">//设置等待时间</span></span><br><span class="line">			   mWait=mEnemyDatas[mIndex].Wait;</span><br><span class="line">			   <span class="comment">//设置进攻波数</span></span><br><span class="line">			   mWave=mEnemyDatas[mIndex].Wave;</span><br><span class="line">			   GameManager.Instance.AttackWave=mWave;</span><br><span class="line">			   <span class="comment">//生成一个敌人</span></span><br><span class="line">			   <span class="keyword">if</span>(mData!=<span class="literal">null</span>)&#123;</span><br><span class="line">			   CreateEnemy(mData);</span><br><span class="line">			   &#125;</span><br><span class="line">			   mIndex+=<span class="number">1</span>;</span><br><span class="line">			&#125;<span class="comment">//如果是下一波敌人，则需要等待这一波敌人全部死亡后再生成</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(mWave&lt;mData.Wave &amp;&amp; GameManager.Instance.Enemys.Count==<span class="number">0</span>)&#123;</span><br><span class="line">				<span class="comment">//设置等待时间</span></span><br><span class="line">				mWait=mData.Wait;</span><br><span class="line">				<span class="comment">//设置进攻波数</span></span><br><span class="line">				mWave=mData.Wave;</span><br><span class="line">				GameManager.Instance.AttackWave=mWave;</span><br><span class="line">				<span class="comment">//生成一个敌人</span></span><br><span class="line">				CreateEnemy(mData);</span><br><span class="line">				mIndex+=<span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//解析Xml文件</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ReadXml</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//创建一个字典以存储敌人列表</span></span><br><span class="line">		mEnemyDatas=<span class="keyword">new</span> List&lt;SpawnData&gt;();</span><br><span class="line">		<span class="comment">//加载Xml文档</span></span><br><span class="line">		XmlDocument mDocument=<span class="keyword">new</span> XmlDocument();</span><br><span class="line">		mDocument.LoadXml(ConfigFile.text);</span><br><span class="line">		XmlElement mRoot=mDocument.DocumentElement;</span><br><span class="line">		<span class="comment">//解析Xml文档</span></span><br><span class="line">		XmlNodeList mNodes=mRoot.SelectNodes(<span class="string">&quot;/Enemies/Enemy&quot;</span>);</span><br><span class="line">		<span class="keyword">foreach</span>(XmlNode mNode <span class="keyword">in</span> mNodes)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//为每一个SpawnData赋值</span></span><br><span class="line">			SpawnData mData=<span class="keyword">new</span> SpawnData();</span><br><span class="line">			mData.Wave=<span class="built_in">int</span>.Parse(mNode.Attributes[<span class="number">0</span>].Value);</span><br><span class="line">			mData.EnemyName=mNode.Attributes[<span class="number">1</span>].Value;</span><br><span class="line">			mData.Level=<span class="built_in">int</span>.Parse(mNode.Attributes[<span class="number">2</span>].Value);</span><br><span class="line">			mData.Wait=<span class="built_in">float</span>.Parse(mNode.Attributes[<span class="number">3</span>].Value);</span><br><span class="line"></span><br><span class="line">			mEnemyDatas.Add(mData);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以注意到，到现在为止敌人相关的内容博主都已经为大家讲解完了，这里博主和大家开了一个小玩笑，不知道大家有没有发现，在敌人的Xml配置文件中博主最后设计了一个等级为99级的敌人，哈哈，这个敌人在游戏中的特点大家要自己从代码中来探索了，大家可以按照博主的思路做出这个塔防游戏然后自己去试试看，相信大家会更加深刻地理解数值平衡的重要性吧！</p>
<h1 id="防守单位篇"><a href="#防守单位篇" class="headerlink" title="防守单位篇"></a>防守单位篇</h1><p>防守单位是塔防游戏中玩家可以支配和控制的一种资源，玩家通过合理地分布防守单位的位置来对玩家的防守阵地进行防御，当玩家的防守阵地被摧毁时玩家将无法继续部署防守单位。这就是防守单位在游戏中的主要作用。通常为了增加游戏的可玩性，游戏设计者往往会设计多种防守单位，在博主的这个小游戏中，我们只设计了一种防守单位，更多的防守单位的设计大家可以参考《保卫萝卜》和《植物大战僵尸》这两个游戏。好了，说了这么多，那么防守单位在整个塔防游戏中主要的作用是什么呢？答案就是防守，哈哈，这是一句不折不扣的废话。可是就是这样一句废话，却足以让我们知道防守单位需要对敌人进行自动攻击，这就要涉及到简单的AI算法了。好了，我们来看下面的脚本：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Defender</span> : <span class="title">MonoBehaviour</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//目标敌人</span></span><br><span class="line">	<span class="keyword">private</span> Enemy mTarget;</span><br><span class="line">	<span class="comment">//攻击半径</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> AttackArea=<span class="number">2.5F</span>;</span><br><span class="line">	<span class="comment">//与敌人的距离</span></span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">float</span> mDistance=<span class="number">0</span>;</span><br><span class="line">	<span class="comment">//防守单位的旋转速度</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> RotateSpeed=<span class="number">1.5F</span>;</span><br><span class="line">	<span class="comment">//防守单位攻击间隔</span></span><br><span class="line">	<span class="keyword">public</span> <span class="built_in">float</span> AttakTime=<span class="number">2.5F</span>;</span><br><span class="line">	<span class="comment">//防守单位攻击间隔</span></span><br><span class="line">	<span class="keyword">private</span> <span class="built_in">float</span> mTime=<span class="number">0.0F</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//炮弹预设</span></span><br><span class="line">	<span class="keyword">public</span> GameObject BulletObject;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Start</span> ()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//初始化防守单位攻击间隔</span></span><br><span class="line">		mTime=AttakTime;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//查找攻击范围内的敌人</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">FindEnemy</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//初始化目标敌人</span></span><br><span class="line">		mTarget=<span class="literal">null</span>;</span><br><span class="line">		<span class="comment">//获取敌人列表</span></span><br><span class="line">		ArrayList mEnemys=GameManager.Instance.Enemys;</span><br><span class="line">		<span class="comment">//遍历每个敌人</span></span><br><span class="line">		<span class="keyword">foreach</span>(Enemy _enemy <span class="keyword">in</span> mEnemys)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//忽略生命值为0的敌人</span></span><br><span class="line">			<span class="keyword">if</span>(_enemy.HP==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">			<span class="comment">//计算防守单位与敌人间的距离</span></span><br><span class="line">			Vector3 mPos1=transform.position;</span><br><span class="line">			Vector3 mPos2=_enemy.transform.position;</span><br><span class="line">			<span class="built_in">float</span> mDis=Vector2.Distance(<span class="keyword">new</span> Vector2(mPos1.x,mPos1.y),<span class="keyword">new</span> Vector2(mPos2.x,mPos2.y));</span><br><span class="line">			<span class="keyword">if</span>(mDis&gt;AttackArea)&#123;</span><br><span class="line">				<span class="comment">//Debug.Log(&quot;敌人&quot; + _enemy.transform.name + &quot;未进入攻击范围,距离为:&quot; + mDis);</span></span><br><span class="line">				<span class="comment">//return;</span></span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="comment">//Debug.Log(&quot;敌人&quot; + _enemy.transform.name + &quot;已进入攻击范围,距离为:&quot; + mDis);</span></span><br><span class="line">				<span class="comment">//选择最近的敌人</span></span><br><span class="line">				<span class="keyword">if</span>(mDistance==<span class="number">0</span> || mDistance &gt; mDis)&#123;</span><br><span class="line">					mTarget=_enemy;</span><br><span class="line">					mDistance=mDis;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">/*//选择生命值最低的敌人</span></span><br><span class="line"><span class="comment">				if(mLife==0 || mLife &gt; _enemy.HP)&#123;</span></span><br><span class="line"><span class="comment">					mTarget=_enemy;</span></span><br><span class="line"><span class="comment">					mLife=_enemy.HP;</span></span><br><span class="line"><span class="comment">				&#125;</span></span><br><span class="line"><span class="comment">				*/</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		mDistance=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">RotateTo</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//判断目标敌人是否为空</span></span><br><span class="line">		<span class="keyword">if</span>(mTarget==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">		<span class="comment">//计算要旋转到敌人方向的角度</span></span><br><span class="line">		Vector3 mPos1=<span class="keyword">this</span>.transform.position;</span><br><span class="line">		Vector3 mPos2=mTarget.transform.position;</span><br><span class="line">		Vector3 mDir=(mPos2-mPos1).normalized;</span><br><span class="line">		<span class="comment">//使得两向量共面</span></span><br><span class="line">		mDir.z=<span class="number">0</span>;</span><br><span class="line">		<span class="comment">//计算两向量角度</span></span><br><span class="line">		<span class="built_in">float</span> mAngle=getAngle(Vector3.up,mDir);</span><br><span class="line">		<span class="keyword">this</span>.transform.eulerAngles=<span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,mAngle) * RotateSpeed;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//根据向量数学计算角度</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="built_in">float</span> <span class="title">getAngle</span>(<span class="params">Vector3 v1,Vector3 v2</span>)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">float</span> mDot=Vector3.Dot(v1,v2);</span><br><span class="line">		<span class="built_in">float</span> mv1=Mathf.Sqrt(v1.x*v1.x+v1.y*v1.y+v1.z*v1.z);</span><br><span class="line">		<span class="built_in">float</span> mv2=Mathf.Sqrt(v2.x*v2.x+v2.y*v2.y+v2.z*v2.z);</span><br><span class="line">		<span class="keyword">if</span>(v2.x&gt;v1.x)&#123;</span><br><span class="line">			<span class="keyword">return</span> -Mathf.Acos(mDot/(mv1*mv2))* Mathf.Rad2Deg ;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> Mathf.Acos(mDot/(mv1*mv2))* Mathf.Rad2Deg ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Attack</span>()</span></span><br><span class="line">	&#123;</span><br><span class="line">		RotateTo();</span><br><span class="line">		<span class="keyword">if</span>(mTarget==<span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">		<span class="comment">//以下添加攻击逻辑</span></span><br><span class="line">		mTime-=Time.deltaTime;</span><br><span class="line">		<span class="keyword">if</span>(mTime&lt;<span class="number">0</span>)&#123;</span><br><span class="line">			Vector3 _angle=transform.Find(<span class="string">&quot;Bullet&quot;</span>).eulerAngles;</span><br><span class="line">			Vector3 _pos=<span class="keyword">new</span> Vector3(<span class="keyword">this</span>.transform.position.x,<span class="keyword">this</span>.transform.position.y,<span class="number">-2</span>);</span><br><span class="line">			Instantiate(BulletObject,_pos,Quaternion.Euler(_angle));</span><br><span class="line">			mTime=AttakTime;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">Update</span> ()</span> </span><br><span class="line">	&#123;</span><br><span class="line">		FindEnemy();</span><br><span class="line">		Attack();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>防守单位的脚本定义在Defender这个类中，主要的行为有两个，即发现敌人后转向敌人、向敌人发射炮弹，这块的代码较为简单，大家自己去领会就好啦。我们知道在塔防游戏中玩家可以通过点击屏幕来自由地增加或移动防守单位，这部分的内容主要是和GUI相关的，因为目前博主对UGUI掌握地还不是很熟，所以就等以后博主有时间了再来补充吧！好了，这个塔防游戏的讲解教程就是这样了，希望大家能够喜欢，我知道大家等这篇下篇已经好久了，哈哈！<br><img src="http://img.blog.csdn.net/20150301190040972" alt="效果演示"/><br>最后想说的是，博主的独立博客<a target="_blank" rel="noopener" href="http://qinyuanpei.github.io/">http://qinyuanpei.github.io</a>正式开始使用了，以后发表的文章会在独立博客和CSDN同时更新，希望大家能继续关注博主的博客！谢谢大家</p>

      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%95%99%E7%A8%8B/" rel="tag"># 教程</a>
          
            <a href="/tags/Unity3D/" rel="tag"># Unity3D</a>
          
            <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" rel="tag"># 游戏开发</a>
          
            <a href="/tags/%E5%A1%94%E9%98%B2/" rel="tag"># 塔防</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/01/20/%E5%89%91%E6%8C%87Offer%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0(1)/" rel="next" title="剑指 Offer 读书笔记(1)">
                <i class="fa fa-chevron-left"></i> 剑指 Offer 读书笔记(1)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/01/22/2015-01-22-pgy-usage-guide/" rel="prev" title="使用蒲公英来做iOS测试应用的分发">
                使用蒲公英来做iOS测试应用的分发 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1579</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">64</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%8C%E4%BA%BA%E7%AF%87"><span class="nav-number">1.</span> <span class="nav-text">敌人篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%8C%E4%BA%BA%E8%87%AA%E5%8A%A8%E5%AF%BB%E8%B7%AF%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.1.</span> <span class="nav-text">敌人自动寻路的实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%8C%E4%BA%BA%E6%8C%89%E6%B3%A2%E6%AC%A1%E8%BF%9B%E6%94%BB%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.2.</span> <span class="nav-text">敌人按波次进攻的实现</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%98%B2%E5%AE%88%E5%8D%95%E4%BD%8D%E7%AF%87"><span class="nav-number">2.</span> <span class="nav-text">防守单位篇</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
