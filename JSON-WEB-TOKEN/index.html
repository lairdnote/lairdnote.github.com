<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="codeva-HZoIBm8yNp" />
<meta name="bytedance-verification-code" content="xa6iZeY+/XCOJvarHaDY" />








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="JWT,Nodejs,Token," />










<meta name="description" content="JSONWebToken APIAn implementation of JSON Web Tokens.This was developed against draft-ietf-oauth-json-web-token-08. It makes use of node-jws. 安装123$ npm install jsonwebtoken  版本迁移From v7 to v8">
<meta property="og:type" content="article">
<meta property="og:title" content="JSON WEB TOKEN">
<meta property="og:url" content="https://blog.feedscoin.com/JSON-WEB-TOKEN/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="JSONWebToken APIAn implementation of JSON Web Tokens.This was developed against draft-ietf-oauth-json-web-token-08. It makes use of node-jws. 安装123$ npm install jsonwebtoken  版本迁移From v7 to v8">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2016-10-31T07:58:04.000Z">
<meta property="article:modified_time" content="2024-01-15T06:36:52.903Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="JWT">
<meta property="article:tag" content="Nodejs">
<meta property="article:tag" content="Token">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/JSON-WEB-TOKEN/"/>





  <title>JSON WEB TOKEN | 逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/JSON-WEB-TOKEN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">JSON WEB TOKEN</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-31T07:58:04+00:00">
                2016-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      

        <h2 id="JSONWebToken-API"><a href="#JSONWebToken-API" class="headerlink" title="JSONWebToken API"></a>JSONWebToken API</h2><p>An implementation of JSON Web Tokens.This was developed against draft-ietf-oauth-json-web-token-08. It makes use of <a href="https://github.com/xulayen/node-jsonwebtoken" title="" target="">node-jws</a>.</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ npm install jsonwebtoken</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="版本迁移"><a href="#版本迁移" class="headerlink" title="版本迁移"></a>版本迁移</h3><a href="https://github.com/xulayen/node-jsonwebtoken/wiki/Migration-Notes:-v7-to-v8" title="" target="">From v7 to v8</a>

<span id="more"></span>

<h3 id="用法API"><a href="#用法API" class="headerlink" title="用法API"></a>用法API</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jwt.sign(payload, secretOrPrivateKey, [options, callback])</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote><p>(Asynchronous) If a callback is supplied, the callback is called with the err or the JWT.</p>
<p>(Synchronous) Returns the JsonWebToken as string</p>
<p>payload could be an object literal, buffer or string. Please note that exp is only set if the payload is an object literal.</p>
<p>secretOrPrivateKey is a string, buffer, or object containing either the secret for HMAC algorithms or the PEM encoded private key for RSA and ECDSA. In case of a private key with passphrase an object { key, passphrase } can be used (based on crypto documentation), in this case be sure you pass the algorithm option.</p>
<footer><strong>@Auth0</strong><cite><a target="_blank" rel="noopener" href="https://github.com/xulayen/node-jsonwebtoken">github.com/xulayen/node-jsonwebtoken</a></cite></footer></blockquote>



<ul>
<li>sign with default (HMAC SHA256)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// sign with default (HMAC SHA256)</span><br><span class="line">var jwt = require(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line">var token = jwt.sign(&#123; foo: <span class="string">&#x27;bar&#x27;</span> &#125;, <span class="string">&#x27;secret&#x27;</span>);</span><br><span class="line">console.log(token)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>sign with RSA SHA256</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// sign with RSA SHA256</span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;private.key&#x27;</span>);  // get private key</span><br><span class="line">var token = jwt.sign(&#123; foo: <span class="string">&#x27;bar&#x27;</span> &#125;, cert, &#123; algorithm: <span class="string">&#x27;RS256&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">// sign asynchronously</span><br><span class="line">jwt.sign(&#123; foo: <span class="string">&#x27;bar&#x27;</span> &#125;, cert, &#123; algorithm: <span class="string">&#x27;RS256&#x27;</span> &#125;, <span class="keyword">function</span>(err, token) &#123;</span><br><span class="line">  console.log(token);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="TOKEN失效"><a href="#TOKEN失效" class="headerlink" title="TOKEN失效"></a>TOKEN失效</h3><blockquote><p>The standard for JWT defines an exp claim for expiration. The expiration is represented as a NumericDate:<br>A JSON numeric value representing the number of seconds from 1970-01-01T00:00:00Z UTC until the specified UTC date&#x2F;time, ignoring leap seconds. This is equivalent to the IEEE Std 1003.1, 2013 Edition [POSIX.1] definition “Seconds Since the Epoch”, in which each day is accounted for by exactly 86400 seconds, other than that non-integer values can be represented. See RFC 3339 [RFC3339] for details regarding date&#x2F;times in general and UTC in particular.<br>This means that the exp field should contain the number of seconds since the epoch.</p>
<footer><strong>@Auth0</strong><cite><a target="_blank" rel="noopener" href="https://github.com/xulayen/node-jsonwebtoken">github.com/xulayen/node-jsonwebtoken</a></cite></footer></blockquote>

<ul>
<li>产生一个token1小时后失效：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jwt.sign(&#123;</span><br><span class="line">  exp: Math.floor(Date.now() / 1000) + (60 * 60),</span><br><span class="line">  data: <span class="string">&#x27;foobar&#x27;</span></span><br><span class="line">&#125;, <span class="string">&#x27;secret&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>另外一个方式产生token并且有失效机制<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jwt.sign(&#123;</span><br><span class="line">  data: <span class="string">&#x27;foobar&#x27;</span></span><br><span class="line">&#125;, <span class="string">&#x27;secret&#x27;</span>, &#123; expiresIn: 60 * 60 &#125;);</span><br><span class="line"></span><br><span class="line">//or even better:</span><br><span class="line"></span><br><span class="line">jwt.sign(&#123;</span><br><span class="line">  data: <span class="string">&#x27;foobar&#x27;</span></span><br><span class="line">&#125;, <span class="string">&#x27;secret&#x27;</span>, &#123; expiresIn: <span class="string">&#x27;1h&#x27;</span> &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="验证token"><a href="#验证token" class="headerlink" title="验证token"></a>验证token</h3><p>token是一个JsonWebToken字符窜</p>
<blockquote><p>(Asynchronous) If a callback is supplied, function acts asynchronously. The callback is called with the decoded payload if the signature is valid and optional expiration, audience, or issuer are valid. If not, it will be called with the error.</p>
<p>(Synchronous) If a callback is not supplied, function acts synchronously. Returns the payload decoded if the signature is valid and optional expiration, audience, or issuer are valid. If not, it will throw the error.</p>
<footer><strong>@Auth0</strong><cite><a target="_blank" rel="noopener" href="https://github.com/xulayen/node-jsonwebtoken">github.com/xulayen/node-jsonwebtoken</a></cite></footer></blockquote>

<p><code>secretOrPublicKey</code>是一个字符窜或者<code>HMAC algorithms</code>缓冲区中的任何一个PEM编码了RSA和ECDSA的公钥。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//verify a token symmetric - synchronous</span><br><span class="line">var decoded = jwt.verify(token, <span class="string">&#x27;secret&#x27;</span>);</span><br><span class="line">console.log(decoded.foo) // bar</span><br><span class="line"></span><br><span class="line">// verify a token symmetric</span><br><span class="line">jwt.verify(token, <span class="string">&#x27;shhhhh&#x27;</span>, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  console.log(decoded.foo) // bar</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// invalid token - synchronous</span><br><span class="line">try &#123;</span><br><span class="line">  var decoded = jwt.verify(token, <span class="string">&#x27;wrong-secret&#x27;</span>);</span><br><span class="line">&#125; catch(err) &#123;</span><br><span class="line">  // err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// invalid token</span><br><span class="line">jwt.verify(token, <span class="string">&#x27;wrong-secret&#x27;</span>, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  // err</span><br><span class="line">  // decoded undefined</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// verify a token asymmetric</span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;public.pem&#x27;</span>);  // get public key</span><br><span class="line">jwt.verify(token, cert, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  console.log(decoded.foo) // bar</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// verify audience</span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;public.pem&#x27;</span>);  // get public key</span><br><span class="line">jwt.verify(token, cert, &#123; audience: <span class="string">&#x27;urn:foo&#x27;</span> &#125;, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  // <span class="keyword">if</span> audience mismatch, err == invalid audience</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// verify issuer</span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;public.pem&#x27;</span>);  // get public key</span><br><span class="line">jwt.verify(token, cert, &#123; audience: <span class="string">&#x27;urn:foo&#x27;</span>, issuer: <span class="string">&#x27;urn:issuer&#x27;</span> &#125;, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  // <span class="keyword">if</span> issuer mismatch, err == invalid issuer</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// verify jwt <span class="built_in">id</span></span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;public.pem&#x27;</span>);  // get public key</span><br><span class="line">jwt.verify(token, cert, &#123; audience: <span class="string">&#x27;urn:foo&#x27;</span>, issuer: <span class="string">&#x27;urn:issuer&#x27;</span>, jwtid: <span class="string">&#x27;jwtid&#x27;</span> &#125;, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  // <span class="keyword">if</span> jwt <span class="built_in">id</span> mismatch, err == invalid jwt <span class="built_in">id</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// verify subject</span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;public.pem&#x27;</span>);  // get public key</span><br><span class="line">jwt.verify(token, cert, &#123; audience: <span class="string">&#x27;urn:foo&#x27;</span>, issuer: <span class="string">&#x27;urn:issuer&#x27;</span>, jwtid: <span class="string">&#x27;jwtid&#x27;</span>, subject: <span class="string">&#x27;subject&#x27;</span> &#125;, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  // <span class="keyword">if</span> subject mismatch, err == invalid subject</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// alg mismatch</span><br><span class="line">var cert = fs.readFileSync(<span class="string">&#x27;public.pem&#x27;</span>); // get public key</span><br><span class="line">jwt.verify(token, cert, &#123; algorithms: [<span class="string">&#x27;RS256&#x27;</span>] &#125;, <span class="keyword">function</span> (err, payload) &#123;</span><br><span class="line">  // <span class="keyword">if</span> token alg != RS256,  err == invalid signature</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="解码token"><a href="#解码token" class="headerlink" title="解码token"></a>解码token</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jwt.decode(token [, options])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>token is the JsonWebToken string</p>
</li>
<li><p>options:</p>
</li>
<li><p>json: force JSON.parse on the payload even if the header does not contain “typ”:”JWT”.</p>
</li>
<li><p>complete: return an object with the decoded payload and header.</p>
</li>
</ul>
<p>Example</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// get the decoded payload ignoring signature, no secretOrPrivateKey needed</span><br><span class="line">var decoded = jwt.decode(token);</span><br><span class="line"></span><br><span class="line">// get the decoded payload and header</span><br><span class="line">var decoded = jwt.decode(token, &#123;complete: <span class="literal">true</span>&#125;);</span><br><span class="line">console.log(decoded.header);</span><br><span class="line">console.log(decoded.payload)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="token失效异常"><a href="#token失效异常" class="headerlink" title="token失效异常"></a>token失效异常</h3><h4 id="TokenExpiredError"><a href="#TokenExpiredError" class="headerlink" title="TokenExpiredError"></a>TokenExpiredError</h4><ul>
<li>Thrown error if the token is expired.</li>
<li>Error object:<ul>
<li>name: ‘TokenExpiredError’</li>
<li>message: ‘jwt expired’</li>
<li>expiredAt: [ExpDate]</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jwt.verify(token, <span class="string">&#x27;wrongsecret&#x27;</span>, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    /*</span><br><span class="line">      err = &#123;</span><br><span class="line">        name: <span class="string">&#x27;TokenExpiredError&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;jwt expired&#x27;</span>,</span><br><span class="line">        expiredAt: 1408621000</span><br><span class="line">      &#125;</span><br><span class="line">    */</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="JsonWebTokenError"><a href="#JsonWebTokenError" class="headerlink" title="JsonWebTokenError"></a>JsonWebTokenError</h4><ul>
<li>Error object:<ul>
<li>name: JsonWebTokenError</li>
<li>message:<ul>
<li>‘jwt malformed’</li>
<li>‘jwt signature is required’</li>
<li>‘invalid signature’</li>
<li>‘jwt audience invalid. expected: [OPTIONS AUDIENCE]’</li>
<li>‘jwt issuer invalid. expected: [OPTIONS ISSUER]’</li>
<li>‘jwt id invalid. expected: [OPTIONS JWT ID]’</li>
<li>‘jwt subject invalid. expected: [OPTIONS SUBJECT]’</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jwt.verify(token, <span class="string">&#x27;woringsecret&#x27;</span>, <span class="keyword">function</span>(err, decoded) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    /*</span><br><span class="line">      err = &#123;</span><br><span class="line">        name: <span class="string">&#x27;JsonWebTokenError&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;jwt malformed&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    */</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JWT/" rel="tag"># JWT</a>
          
            <a href="/tags/Nodejs/" rel="tag"># Nodejs</a>
          
            <a href="/tags/Token/" rel="tag"># Token</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/%E5%B2%B3%E9%98%B3%E6%A5%BC%E8%AE%B0/" rel="next" title="岳阳楼记">
                <i class="fa fa-chevron-left"></i> 岳阳楼记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/how-to-load-gist-dynamically-via-clicking-button/" rel="prev" title="实现点击按钮加载 Gist 代码块">
                实现点击按钮加载 Gist 代码块 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1464</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">73</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">910</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5358884258"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#JSONWebToken-API"><span class="nav-number">1.</span> <span class="nav-text">JSONWebToken API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%88%E6%9C%AC%E8%BF%81%E7%A7%BB"><span class="nav-number">1.2.</span> <span class="nav-text">版本迁移</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%B3%95API"><span class="nav-number">1.3.</span> <span class="nav-text">用法API</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TOKEN%E5%A4%B1%E6%95%88"><span class="nav-number">1.4.</span> <span class="nav-text">TOKEN失效</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81token"><span class="nav-number">1.5.</span> <span class="nav-text">验证token</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%A0%81token"><span class="nav-number">1.6.</span> <span class="nav-text">解码token</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#token%E5%A4%B1%E6%95%88%E5%BC%82%E5%B8%B8"><span class="nav-number">1.7.</span> <span class="nav-text">token失效异常</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TokenExpiredError"><span class="nav-number">1.7.1.</span> <span class="nav-text">TokenExpiredError</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JsonWebTokenError"><span class="nav-number">1.7.2.</span> <span class="nav-text">JsonWebTokenError</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
