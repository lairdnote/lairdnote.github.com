<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="conference," />










<meta name="description" content="Faster than lightning was a set of talks around web performance during Internetdagarna 2015 in Stockholm, Sweden">
<meta property="og:type" content="article">
<meta property="og:title" content="Web Performance talk in Stockholm - Internet Days">
<meta property="og:url" content="https://blog.feedscoin.com/internetdagarna-2015">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="Faster than lightning was a set of talks around web performance during Internetdagarna 2015 in Stockholm, Sweden">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-logo.jpg">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-hall.jpg">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-tobias-baldauf.jpg">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-barbara-bermes.jpg">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-andy-davies.jpg">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-tobias-jarlund.jpg">
<meta property="og:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-meri-williams.jpg">
<meta property="article:published_time" content="2015-11-23T11:00:00.000Z">
<meta property="article:modified_time" content="2024-01-15T07:11:20.000Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="conference">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.feedscoin.com/assets/images/posts/internetdagarna-logo.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/internetdagarna-2015"/>





  <title>Web Performance talk in Stockholm - Internet Days | 逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/internetdagarna-2015">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Web Performance talk in Stockholm - Internet Days</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-23T19:00:00+08:00">
                2015-11-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  Faster than lightning was a set of talks around web performance during Internetdagarna 2015 in Stockholm, Sweden
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      

        <p>Today I have had the chance of attending the <a target="_blank" rel="noopener" href="https://internetdagarna.se/arkiv/2015/internetdagarna.se/index.html%3Fp=17396.html">Faster than lightning track</a> of <a target="_blank" rel="noopener" href="https://internetdagarna.se/arkiv/2015/internetdagarna.se/index.html">Internetdagarna 2015</a>. There have been talks about web performance, and some broader topics like big data and UI, how data is important for large companies offering free services, and the need for public Governments to build compelling competitive services. <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=7G0Xz0JsiFg&index=1&list=PLtDs7N_g_eiZ5ag.e-xntFYydij0xSPL42">The videos are already online</a>.<img src="/assets/images/posts/internetdagarna-logo.jpg" alt="The Heart logo @ Internetdagarna 2015"></p>
<span id="more"></span>
<h2 id="Internetdagarna"><a href="#Internetdagarna" class="headerlink" title="Internetdagarna"></a>Internetdagarna</h2><p>A couple of weeks ago I attended <a target="_blank" rel="noopener" href="http://www.meetup.com/es/Stockholm-Web-Performance-Group/events/226316269/">Monitoring web performance using Open Source tools and AMP</a> by the <a target="_blank" rel="noopener" href="http://www.meetup.com/es/Stockholm-Web-Performance-Group/">Stockholm Web Performance Group</a>. I was lucky and got a ticket at a raffle where they gave out a couple of tickets to Internetdagarna.</p>
<p>I have only attended the first of the two days of the conference. It has been very well organized, and the quality of the talks very high. Well, I pretty much every talk about web performance :) Also, I love their 8-bit theme and the <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=sQvgCPNtSGk#t=01h26m36s">looping animations with the logo</a>.<br><a href="/assets/images/posts/internetdagarna-hall.jpg"><img src="/assets/images/posts/internetdagarna-hall.jpg" alt="Main room at Internetdagarna 2015"></a></p>
<h2 id="Talks"><a href="#Talks" class="headerlink" title="Talks"></a>Talks</h2><h3 id="High-Performance-Images-by-Tobias-Baldauf"><a href="#High-Performance-Images-by-Tobias-Baldauf" class="headerlink" title="High Performance Images, by Tobias Baldauf"></a>High Performance Images, by Tobias Baldauf</h3><p>Great talk! If you care about images, their size and format, please watch this. Instead of just explaining the typical tips about resizing and optimising images, Tobias focuses on formats and compression.</p>
<p>He goes through the history of formats, and the multiple formats that have tried to replace JPEG (WebP and JPEG-XR). Then, he goes back to JPEG demoing <a target="_blank" rel="noopener" href="https://github.com/mozilla/mozjpeg">mozjpeg</a> as an enhancement for encoding JPEGs. The question is “what quality to use?”</p>
<p>The answer is measuring image dissimilarity, to find out how much different is the compressed version compared to the original one. Good news: there is a tool for that, called <a target="_blank" rel="noopener" href="https://github.com/pornel/dssim">dssim</a>. Then, one can run a script that compresses an image with different values until it reaches a certain dissimilarity threshold, like <a target="_blank" rel="noopener" href="https://github.com/technopagan/cjpeg-dssim">Tobias’ cjpeg-dssim</a>.</p>
<p>Tobias goes beyond this, and explains <a target="_blank" rel="noopener" href="https://github.com/technopagan/adept-jpg-compressor">his Adept script</a>, based on the idea of using different compression levels for different areas of the image, aka adaptive JPEG compression. The script takes a long time, but it can be worth it for doing one-shot optimisations for important assets like a hero image.<br><a href="/assets/images/posts/internetdagarna-tobias-baldauf.jpg"><img src="/assets/images/posts/internetdagarna-tobias-baldauf.jpg" alt="Tobias Baldauf presenting in Internetdagarna 2015"></a><br><em>&uarr; Tobias Baldauf about to talk about mozjpeg</em></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=j5sRzAOt4nE">Video on Youtube</a></p>
<h3 id="Cheat-Sheet-To-A-Lean-Website-by-Barbara-Bermes"><a href="#Cheat-Sheet-To-A-Lean-Website-by-Barbara-Bermes" class="headerlink" title="Cheat Sheet To A Lean Website, by Barbara Bermes"></a>Cheat Sheet To A Lean Website, by Barbara Bermes</h3><p>Barbara talks about performance culture, and the need to feel empowered and encouraged to say “no” when implementing features or designs that affect performance.</p>
<p>This is something I have been hearing lately, especially around the ad-blocker and bloated sites topic. I wish all developers could feel free to discuss decisions that affect user’s experience.</p>
<p>And when it comes to performance culture, it’s almost impossible not to mention Etsy.</p>
<p>Barbara then goes through some good ideas, like having a performance budget, or defining mockups of the important areas that need to be rendered quickly, being aware of the critical rendering path, and the rest of Steve Souders’s principles.<br><a href="/assets/images/posts/internetdagarna-barbara-bermes.jpg"><img src="/assets/images/posts/internetdagarna-barbara-bermes.jpg" alt="Barbara Bermes presenting in Internetdagarna 2015"></a><br><em>&uarr; Barbara Bermes talking about performance culture</em></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=QQZigZiQ9Gg">Video on Youtube</a></p>
<h3 id="The-Case-for-HTTP-2-by-Andy-Davies"><a href="#The-Case-for-HTTP-2-by-Andy-Davies" class="headerlink" title="The Case for HTTP&#x2F;2, by Andy Davies"></a>The Case for HTTP&#x2F;2, by Andy Davies</h3><p>Andy explains the history of HTTP 1.1, its limitations and the workarounds we came up with to overcome its limitations. I find particularly interesting how inlining critical CSS in the HTML or inlining images in CSS using data URIs means that we are overriding browser’s priorities, based on heuristics to determine what resources should be downloaded first. I had never thought about it from this perspective.</p>
<p>But Andy doesn’t try to just sell HTTP&#x2F;2. He explains HTTP&#x2F;2 through some real examples applied to real sites. In some cases there is almost no improvement in loading time, and it is still difficult to implement a server push approach that takes into account whether the browser already has the filed being pushed. He also shows some issues in some server implementations that developers need to be aware of.<br><a href="/assets/images/posts/internetdagarna-andy-davies.jpg"><img src="/assets/images/posts/internetdagarna-andy-davies.jpg" alt="Andy Davies presenting in Internetdagarna 2015"></a><br><em>&uarr; Andy Davies showing how to debug HTTP&#x2F;2 connections with Chrome tools</em></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=m1b_VQk73SI">Video on Youtube</a></p>
<h3 id="Working-with-performance-by-Tobias-J-228-rlund"><a href="#Working-with-performance-by-Tobias-J-228-rlund" class="headerlink" title="Working with performance, by Tobias J&#228;rlund"></a>Working with performance, by Tobias J&#228;rlund</h3><p>Tobias explains how Aftonbladet.se, the main news site in Sweden, approaches web performance, and what problems they have faced when trying to make everyone aware of the performance implications of the content (ads, large images…).<br><a href="/assets/images/posts/internetdagarna-tobias-jarlund.jpg"><img src="/assets/images/posts/internetdagarna-tobias-jarlund.jpg" alt="Tobias Järlund presenting in Internetdagarna 2015"></a><br><em>&uarr; Tobias Järlund talking about blocking 3rd party content. I personally don’t like the quote depicted in that slide, since I think Aftonbladet’s most important content should be, of course, news.</em></p>
<p><em>No video available yet</em></p>
<h3 id="Baking-in-Performance-with-Agile-by-Meri-Williams"><a href="#Baking-in-Performance-with-Agile-by-Meri-Williams" class="headerlink" title="Baking in Performance with Agile, by Meri Williams"></a>Baking in Performance with Agile, by Meri Williams</h3><p>Meri goes through some ideas to implement performance culture within teams. Also, she encourages everyone to similar devices and network connections to those from real users browsing our site. This can also help out when taking into account performance in other teams within the company.<br><a href="/assets/images/posts/internetdagarna-meri-williams.jpg"><img src="/assets/images/posts/internetdagarna-meri-williams.jpg" alt="Meri Williams presenting in Internetdagarna 2015"></a><br><em>&uarr; Meri Williams about unexpected events that can affect your traffic</em></p>
<p><em>No video available yet</em></p>

      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/conference/" rel="tag"># conference</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/11/22/2015/customize-zsh-prompt/" rel="next" title="自定义 Zsh 提示符">
                <i class="fa fa-chevron-left"></i> 自定义 Zsh 提示符
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/11/26/2015-11-26-yykit-auther-interview/" rel="prev" title="专访 YYKit 作者 ibireme: 开源大牛是怎样炼成的">
                专访 YYKit 作者 ibireme: 开源大牛是怎样炼成的 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1451</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Internetdagarna"><span class="nav-number">1.</span> <span class="nav-text">Internetdagarna</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Talks"><span class="nav-number">2.</span> <span class="nav-text">Talks</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#High-Performance-Images-by-Tobias-Baldauf"><span class="nav-number">2.1.</span> <span class="nav-text">High Performance Images, by Tobias Baldauf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cheat-Sheet-To-A-Lean-Website-by-Barbara-Bermes"><span class="nav-number">2.2.</span> <span class="nav-text">Cheat Sheet To A Lean Website, by Barbara Bermes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Case-for-HTTP-2-by-Andy-Davies"><span class="nav-number">2.3.</span> <span class="nav-text">The Case for HTTP&#x2F;2, by Andy Davies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Working-with-performance-by-Tobias-J-228-rlund"><span class="nav-number">2.4.</span> <span class="nav-text">Working with performance, by Tobias Järlund</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Baking-in-Performance-with-Agile-by-Meri-Williams"><span class="nav-number">2.5.</span> <span class="nav-text">Baking in Performance with Agile, by Meri Williams</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  

  

  

</body>
</html>
