<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="codeva-HZoIBm8yNp" />
<meta name="bytedance-verification-code" content="xa6iZeY+/XCOJvarHaDY" />








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="图论,tarjan,树形DP," />










<meta name="description" content="Time Limit: 2000&#x2F;1000 MS (Java&#x2F;Others)    Memory Limit: 65768&#x2F;65768 K (Java&#x2F;Others)Total Submission(s): 1992    Accepted Submission(s): 440 Problem Description In the war, the inte">
<meta property="og:type" content="article">
<meta property="og:title" content="HDU4005 The war">
<meta property="og:url" content="https://blog.feedscoin.com/hdu4005-the-war/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="Time Limit: 2000&#x2F;1000 MS (Java&#x2F;Others)    Memory Limit: 65768&#x2F;65768 K (Java&#x2F;Others)Total Submission(s): 1992    Accepted Submission(s): 440 Problem Description In the war, the inte">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2014-07-30T11:50:40.000Z">
<meta property="article:modified_time" content="2024-01-15T07:23:38.723Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="图论">
<meta property="article:tag" content="tarjan">
<meta property="article:tag" content="树形DP">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/hdu4005-the-war/"/>





  <title>HDU4005 The war | 逐流小站</title>
  





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MW47YH6RH0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MW47YH6RH0');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/hdu4005-the-war/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">HDU4005 The war</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-07-30T11:50:40+00:00">
                2014-07-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5167312561"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
      
      

      

        <p><strong><span style="font-family: Arial; font-size: 12px; font-weight: bold; color: green;">Time Limit: 2000&#x2F;1000 MS (Java&#x2F;Others)    Memory Limit: 65768&#x2F;65768 K (Java&#x2F;Others)<br>Total Submission(s): 1992    Accepted Submission(s): 440<br></span></strong></p>
<div class="panel_title" align="left">Problem Description</div>
<div class="panel_content">In the war, the intelligence about the enemy is very important. Now, our troop has mastered the situation of the enemy's war zones, and known that these war zones can communicate to each other directly or indirectly through the network. We also know the enemy is going to build a new communication line to strengthen their communication network. Our task is to destroy their communication network, so that some of their war zones can't communicate. Each line has its "cost of destroy". If we want to destroy a line, we must spend the "cost of destroy" of this line. We want to finish this task using the least cost, but our enemy is very clever. Now, we know the network they have already built, but we know nothing about the new line which our enemy is going to build. In this condition, your task is to find the minimum cost that no matter where our enemy builds the new line, you can destroy it using the fixed money. Please give the minimum cost. For efficiency, we can only destroy one communication line.</div>
<span id="more"></span>
<div class="panel_bottom"></div>
&nbsp;
<div class="panel_title" align="left">Input</div>
<div class="panel_content">The input contains several cases. For each cases, the first line contains two positive integers n, m (1&lt;=n&lt;=10000, 0&lt;=m&lt;=100000) standing for the number of the enemy's war zones (numbered from 1 to n), and the number of lines that our enemy has already build. Then m lines follow. For each line there are three positive integer a, b, c (1&lt;=a, b&lt;=n, 1&lt;=c&lt;=100000), meaning between war zone A and war zone B there is a communication line with the "cost of destroy " c.</div>
<div class="panel_bottom"></div>
&nbsp;
<div class="panel_title" align="left">Output</div>
<div class="panel_content">For each case, if the task can be finished output the minimum cost, or output ‐1.</div>
<div class="panel_bottom"></div>
&nbsp;
<div class="panel_title" align="left">Sample Input</div>
<div class="panel_content">
<div style="font-family: Courier New,Courier,monospace;">3 2 1 2 1 2 3 2 4 3 1 2 1 1 3 2 1 4 3</div>
</div>
<div class="panel_bottom"></div>
&nbsp;
<div class="panel_title" align="left">Sample Output</div>
<div class="panel_content">
<div style="font-family: Courier New,Courier,monospace;">-1 3
<div style="font-family: Times New Roman; font-size: 14px; background-color: f4fbff; border: #B7CBFF 1px dashed; padding: 6px;">
<div style="font-family: Arial; font-weight: bold; color: #7ca9ed; border-bottom: #B7CBFF 1px dashed;">_Hint_</div>
For the second sample input: our enemy may build line 2 to 3, 2 to 4, 3 to 4\. If they build line 2 to 3, we will destroy line 1 to 4, cost 3\. If they build line 2 to 4, we will destroy line 1 to 3, cost 2\. If they build line 3 to 4, we will destroy line 1 to 2, cost 1\. So, if we want to make sure that we can destroy successfully, the minimum cost is 3.

</div>
&nbsp;

</div>
</div>
<div class="panel_bottom"></div>
&nbsp;
<div class="panel_title" align="left">Source</div>
<div class="panel_content">[ The 36th ACM/ICPC Asia Regional Dalian Site —— Online Contest ](http://acm.hdu.edu.cn/search.php?field=problem&amp;key=The%2036th%20ACM/ICPC%20Asia%20Regional%20Dalian%20Site%20%E2%80%94%E2%80%94%20Online%20Contest&amp;source=1&amp;searchmode=source)</div>
<div class="panel_content"></div>
<div class="panel_content"></div>
<div class="panel_content">求无向图边双连通分量缩点，然后DP求第二长边。</div>
<div class="panel_content">
<pre class="EnlighterJSRAW" data-enlighter-language="null">//#pragma comment(linker, "/STACK:1024000000,1024000000")//C++加栈
#include
#include
#include
#include
#include
#include
#include
#include<map>
#include
#include
#include
using namespace std;
#if defined (_WIN32) || defined (__WIN32) || defined (WIN32) || defined (__WIN32__)
#define LL __int64
#define LLS "%" "I" "6" "4" "d"
#define LLU "%" "I" "6" "4" "u"
#define LL_MAX _I64_MAX

<p>#else<br>#define LL long long<br>#define LLS “%” “l” “l” “d”<br>#define LLU “%” “l” “l” “u”<br>#define LL_MAX _I64_MAX<br>#endif<br>#define N 10005<br>#define M 100005<br>int n, m;<br>const int inf &#x3D; <del>0u &gt;&gt; 1;<br>const LL lnf &#x3D; ~0ull &gt;&gt; 1;<br>struct edge {<br>    int v, w, nxt;<br>    bool mark;<br>} e[M &lt;&lt; 1];<br>struct bridge {<br>    int u, v, w;<br>    bridge(int u, int v, int w) {<br>        this-&gt;u &#x3D; u;<br>        this-&gt;w &#x3D; w;<br>        this-&gt;v &#x3D; v;<br>    }<br>};<br>int pos, head[N];<br>int top, stk[N];<br>int pre[N], dfs_clock, belong[N], bcnt;<br>vector brg;<br>void InitEdge() {<br>    memset(head, -1, sizeof(head));<br>    pos &#x3D; 0;<br>}<br>void add(int u, int v, int w) {<br>    e[pos].v &#x3D; v;<br>    e[pos].w &#x3D; w;<br>    e[pos].nxt &#x3D; head[u];<br>    head[u] &#x3D; pos++;<br>}<br>int dfs(int u,int fa) {<br>    int lowu &#x3D; pre[u] &#x3D; ++dfs_clock;<br>    stk[top++] &#x3D; u;<br>    bool vis&#x3D;true;<br>    for (int i &#x3D; head[u]; ~i; i &#x3D; e[i].nxt) {<br>        int v &#x3D; e[i].v;<br>        if(v&#x3D;&#x3D;fa &amp;&amp; vis){<br>            vis&#x3D;false;&#x2F;&#x2F;重边<br>            continue;<br>        }<br>        if (!pre[v]) {<br>            int lowv &#x3D; dfs(v,u);<br>            lowu &#x3D; min(lowu, lowv);<br>            if (lowv &gt; pre[u]) { &#x2F;&#x2F;u-v为桥<br>                brg.push_back(bridge(u, v, e[i].w));<br>            }<br>        } else lowu &#x3D; min(lowu, pre[v]);<br>    }<br>    if (pre[u] &#x3D;&#x3D; lowu) {<br>        bcnt++;<br>        do {<br>            belong[stk[–top]] &#x3D; bcnt;<br>        } while (stk[top] !&#x3D; u);<br>    }<br>    return lowu;<br>}<br>void tarjan() {<br>    top &#x3D; bcnt &#x3D; dfs_clock &#x3D; 0;<br>    memset(pre, 0, sizeof(pre));<br>    memset(belong, 0, sizeof(belong));<br>    brg.clear();<br>    for (int i &#x3D; 1; i &lt;&#x3D; n; i++) {<br>        if (!pre[i])dfs(i,-1);<br>    }<br>}<br>void rebuild() { &#x2F;&#x2F;根据桥来缩点重构图<br>    InitEdge();<br>    for (int i &#x3D; 0; i &lt; (int) brg.size(); i++) {<br>        int u &#x3D; belong[brg[i].u];<br>        int v &#x3D; belong[brg[i].v];<br>        int w &#x3D; brg[i].w;<br>        add(u, v, w);<br>        add(v, u, w);<br>    }<br>}<br>int res;<br>int DP(int u, int fa) {<br>    int Min &#x3D; inf;<br>    for (int i &#x3D; head[u]; ~i; i &#x3D; e[i].nxt) {<br>        int v &#x3D; e[i].v;<br>        if (v &#x3D;&#x3D; fa)continue;<br>        int w &#x3D; DP(v, u);<br>        w &#x3D; min(w, e[i].w);<br>        if (Min &gt; w) {<br>            res &#x3D; min(res, Min);<br>            Min &#x3D; w;<br>        } else res &#x3D; min(res, w);<br>    }<br>    return Min;<br>}<br>int main() {<br>    while (</del>scanf(“%d%d”, &amp;n, &amp;m)) {<br>        int u, v, w;<br>        InitEdge();<br>        for (int i &#x3D; 0; i &lt; m; i++) {<br>            scanf(“%d%d%d”, &amp;u, &amp;v, &amp;w);<br>            add(u, v, w);<br>            add(v, u, w);<br>        }<br>        tarjan();<br>        rebuild();<br>        bridge minbrg(-1, -1, inf);<br>        for (int i &#x3D; 0; i &lt; (int) brg.size(); i++) {<br>            if (brg[i].w &lt; minbrg.w) {<br>                minbrg &#x3D; brg[i];<br>            }<br>        }<br>        res &#x3D; inf;<br>        DP(belong[minbrg.u], belong[minbrg.v]);<br>        DP(belong[minbrg.v], belong[minbrg.u]);<br>        if(res&#x3D;&#x3D;inf)res&#x3D;-1;<br>        printf(“%d\n”, res);<br>    }<br>}<br></pre></p>
</div>
      
    </div>
    
    
    

    


    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E5%9B%BE%E8%AE%BA/" rel="tag"># 图论</a>
          
            <a href="/tags/tarjan/" rel="tag"># tarjan</a>
          
            <a href="/tags/%E6%A0%91%E5%BD%A2DP/" rel="tag"># 树形DP</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/hdu4612-warm-up/" rel="next" title="HDU4612 Warm up">
                <i class="fa fa-chevron-left"></i> HDU4612 Warm up
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014-multi-university-training-contest-4/" rel="prev" title="2014 Multi-University Training Contest 4">
                2014 Multi-University Training Contest 4 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">1458</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">72</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">890</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4522670236044605"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-4522670236044605"
     data-ad-slot="5358884258"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
