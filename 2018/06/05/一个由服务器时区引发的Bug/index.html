<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="时区,时间,格式化," />










<meta name="description" content="博主有一个 Python[脚本](https:&#x2F;&#x2F;github.com&#x2F;qinyuanpei&#x2F;BlogScripts&#x2F;blob&#x2F;master&#x2F;HexoBlog.py)运行在 TravisCI 的服务器上，而 TravisCI 来自一家法国的技术公司，因此在不指定时区的情况下，会默认使用 TravisCI 服务器上的时间，这并不是我想要的结果，所以，我们需要 pytz 来解决这个问题，至于这里为什么">
<meta property="og:type" content="article">
<meta property="og:title" content="一个由服务器时区引发的 Bug">
<meta property="og:url" content="https://blog.feedscoin.com/2018/06/05/%E4%B8%80%E4%B8%AA%E7%94%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6%E5%8C%BA%E5%BC%95%E5%8F%91%E7%9A%84Bug/index.html">
<meta property="og:site_name" content="逐流小站">
<meta property="og:description" content="博主有一个 Python[脚本](https:&#x2F;&#x2F;github.com&#x2F;qinyuanpei&#x2F;BlogScripts&#x2F;blob&#x2F;master&#x2F;HexoBlog.py)运行在 TravisCI 的服务器上，而 TravisCI 来自一家法国的技术公司，因此在不指定时区的情况下，会默认使用 TravisCI 服务器上的时间，这并不是我想要的结果，所以，我们需要 pytz 来解决这个问题，至于这里为什么">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/4c36074fly1fyzcwolhguj218q0u0qo4.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/4c36074fly1fyzcui209oj213l0qeqbg.jpg">
<meta property="article:published_time" content="2018-06-05T03:03:57.000Z">
<meta property="article:modified_time" content="2024-01-15T07:50:33.148Z">
<meta property="article:author" content="Laird Lau">
<meta property="article:tag" content="时区">
<meta property="article:tag" content="时间">
<meta property="article:tag" content="格式化">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ww1.sinaimg.cn/large/4c36074fly1fyzcwolhguj218q0u0qo4.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.feedscoin.com/2018/06/05/一个由服务器时区引发的Bug/"/>





  <title>一个由服务器时区引发的 Bug | 逐流小站</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'G-MW47YH6RH0', 'auto');
  ga('send', 'pageview');
</script>





<meta name="generator" content="Hexo 7.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逐流小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">想回到那个能随便跳槽的年代</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.feedscoin.com/2018/06/05/%E4%B8%80%E4%B8%AA%E7%94%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6%E5%8C%BA%E5%BC%95%E5%8F%91%E7%9A%84Bug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逐流小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">一个由服务器时区引发的 Bug</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-05T11:03:57+08:00">
                2018-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index">
                    <span itemprop="name">编程语言</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  博主有一个 Python[脚本](https://github.com/qinyuanpei/BlogScripts/blob/master/HexoBlog.py)运行在 TravisCI 的服务器上，而 TravisCI 来自一家法国的技术公司，因此在不指定时区的情况下，会默认使用 TravisCI 服务器上的时间，这并不是我想要的结果，所以，我们需要 pytz 来解决这个问题，至于这里为什么我们使用的是上海而不是北京，这是因为中国横跨 5 个时区，在国内大家习惯使用北京时间，而在国外这些时区数据没有做及时更新，所以这算是一个关于时区的历史遗留问题吧;* Time 类型仅存储时间，不存储日期，需要 7 个字节的存储空间，默认格式为 hh:mm:ss.nnnnnnn，可以注意到默认的秒分量小数部分为 7 位，建议使用字符串或者 SysDateTime()这两种方式赋值，不建议使用 GetDate()，因为该方法返回值为 DateTime 类型，其时间部分的精度没有 Time 类型的经度高;简单来说，在 Python 中我们只需要给定时区，即可将本地时间转化为指定时区对应的 UTC 时间，这里我们使用的是 Python 中的 pytz 这个库，如果你打开这个库的安装目录，就会发现其实它有大量时区相关的数据组成，如果我们直接调用 pytz.timezone()就可以获得所有的时区信息
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>太阳照常升起，在每个需要挤公交车上班的日子里，即使窗外早已大雨如注。想来只有在周末，太阳会陪着我一起起床，所谓睡觉睡到自然醒，在雨天里保持晴天的心情，相当大的程度上，是因为今天不必上班。因此，一周里的心情晴雨表，简直就是活生生的天气预报，可惜我并不能预测我的心情，因为 Bug 会在某一瞬间发动突然袭击。一周前测试同事小 J 得到用户的反馈，我们某一笔订单突然无法从系统中查到，可就在数分钟前用户创建了这笔订单。前端同事小 Q 立刻追踪了这个问题，发现查询交易的接口调用正常，而后端同事小 L 确认数据库中是有这条交易记录的。于是，为了解决这样一个诡异的问题，几乎花费了大家大半天的时间。而最后的问题根源，居然充满了无厘头的意味，如本文主题所言，这是一个由服务器时区引发的 Bug。在这篇文章中，我想和大家聊一聊，关于时区以及日期&#x2F;时间格式化的相关问题，希望大家会喜欢这个话题，就如同我希望大家会喜欢我一样。<br>可能大家都不会意识到时区会成为一个问题，因为对大多数中国人而言，我们唯一的时间概念就是北京时间。我们不得不承认，互联网在弱化了空间地域性的同时，无形中疏远了人与人之间的距离，尤其当我们处在一个分布式架构的时代，云的存在让我们的 Service 分布在无数个服务器节点上去，我们甚至意识不到它们的存在。比如我们在阿里云上选购主机的时候，阿里云会让我们去选择主机所在的地域，因为选择离自己更近的地域，意味着可以更快的访问速度。再比如像亚马逊这样的云计算服务商，会在国内(<strong>宁夏·中卫</strong>)部署自己的资源，这显然是为了服务国内用户。那么，我们不得不去思考一个问题，假如我们要同时服务国内、外的用户，那么这些 Service 可能会被同时部署到国内和国外的服务器上面。因此，我们就可能会遇到国内、外服务器时区不一致的问题，通常我们会以服务器时间为准并将其储到数据库中。此时，因为时区不一致，难免会产生本文中遇到的这个问题。</p>
<h1 id="时区为什么会不同"><a href="#时区为什么会不同" class="headerlink" title="时区为什么会不同"></a>时区为什么会不同</h1><p>既然时区是本文里的**”罪魁祸首”**，那么我们就会不由得思考这样一个问题，即为社么时区会不同。我们知道，地球是自西向东自转的，因此东边会比西边先看到太阳。相应地，东边的时间会比西边的早。这意味着时间并不是一个绝对的概念，即东边的时间与西边的事件存在时差。现实中的时差不单单要以小时计，而且还要以分和秒计，这给人们带来了不便和困扰。因此，1884 年在华盛顿召开的国际子午线会议上，规定将全球划分为 24 个时区(东、西各十二个时区)，其中以英国格林尼治天文台旧址作为零时区，每个时区横跨经度 15 度，时间恰好为 1 小时，而东、西第 12 时区各跨经度 7.5 度，以东、西经 180 度为界。每个时区内时间，统一以该时区的中央经线的时间为主，相邻的两个时区间总是相差一个小时，这就是时区的由来，时区的出现解决了人们换算时间的问题。<br><img src="https://ww1.sinaimg.cn/large/4c36074fly1fyzcwolhguj218q0u0qo4.jpg" alt="世界时区分布"><br>事实上，时区的划分并不是一个严谨的事情，因为常常会出现一种情况，一个国家或者一个省份同时跨着 2 个或者更多的时区。以中国为例，中国幅员辽阔，差不多横跨 5 个时区，理论上在国内应该有 5 个时间，但为了使用起来方便，我们统一使用的是北京时间，即东八区时间。什么叫做东八区呢？即东半球第八个时区，其中央经度为东经 120 度。时区的计算非常简单，当你往西走时，每经过一个时区，时间会慢一个小时；当你往东走时，每经过一个时区，时间会快一个小时。例如，日本的东京位于东九区，因此，北京时间 2018 年 6 月 9 日 8 点整，对应的东京时间应该是 2018 年 6 月 9 日 9 点。这样，我们就会遇到一个非常有趣的问题，如果一个人到世界各地去旅行，它就需要不停地去将手表拨快或者拨慢，即使我们现在有了智能手机，它一样会提供不同时区的时间选择，假如我们偷懒选择了网络时间，那么它将永远和当地时间保持一致，因为我十分地确信，东京的运营商绝对不会选择使用北京时间。</p>
<h1 id="数据库里如何存储时间"><a href="#数据库里如何存储时间" class="headerlink" title="数据库里如何存储时间"></a>数据库里如何存储时间</h1><p>截至到目前为止，我们可以搞清楚的一件事情是，在不同的地域使用的时间是不同的，因为我们所使用的时间，本质上都是相对于格林尼治时间的相对时间，即使这些时间会因为地域存在差异，可从整个宇宙的角度来看，时间分明又是在绝对地流逝着，它对我们每一个人而言都是客观而公正的，当你发现时间越来越不够用的时候，你需要思考时间到底被浪费到什么地方去。我无意像霍金先生一样，去追溯时间的起源以及它的未来，在这篇文章里，我更关心的是，数据库里究竟是怎么样存储时间的，因为最根本的问题是，用户作为查询条件的时间，服务器上存储记录的时间，这两个时间的上下文发生了混乱。人类更喜欢在工作中不停地切换上下文，尤其是在面对无休止的会议、需求分析、Review 等等诸如此类的中断的时候，你是否会想到频繁地切换上下文，本质上是需要付出代价的呢？<br><img src="https://ww1.sinaimg.cn/large/4c36074fly1fyzcui209oj213l0qeqbg.jpg" alt="Time is All"><br>回到这个问题本身，我们现在来看看数据库中是如何存储时间的，这里我们选择三种最为常见的数据库来分析，它们分别是 MySQL、Oracle 和 SQL Server。</p>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>对 MySQL 来说，它支持 YEAR、DATE、TIME、DATETIME 和 TIMPSTAMP 共 5 种数据类型。其中，</p>
<ul>
<li>YEAR 类型占 1 个字节，取值范围为 1901~2155，可以采用 4 位字符串或者 4 位数字赋值，不建议使用 2 位数字或者 2 为字符串赋值，因为容易混淆 0 和‘0’。</li>
<li>DATE 类型占 4 个字节，取值范围为 1000-01-01 ~ 9999-12-31，采用 YYYY-MM-DD 的格式赋值，不建议使用@或.这样的分隔符，不建议将年份表示为 YY，理由同上。</li>
<li>TIME 类型占 3 个字节，取值范围为-838:59:59 ~ 838:59:59，采用 HH:MM:SS 的格式赋值，不建议使用 HH:MM 或者 SS 的简写格式，以及混合使用 D 的格式。</li>
<li>DATETIME 类型占 8 个字节，取值范围为 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59，标准格式为 YYYY-MM-DD HH:MM:SS，规则同上</li>
<li>TIMESTAMP 类型占 4 个字节，取值范围为 19700101080001 ~ 20380119111407，系统可以使用 CURRENT_TIMESTAMP 或者自动输入当前的 TIMESTAMP，需要注意的是，该数值与时区有关。</li>
</ul>
<h2 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h2><p>对 Oracle 来说，它支持 DATE、TIMPSTAMP 和 INTERVAL 共 3 种数据类型。其中，</p>
<ul>
<li>DATE 类型占 7 个字节，是一种表示日期&#x2F;时间的数据类型，本身包含世纪、世纪中的哪一天、月份、月份中的哪一天、小时、分钟和秒 7 个属性，例如 2005-12-05 12:30:43 对应的表示是 120、105、12、5、12、31、44，我们注意到这里世纪和世纪中的年份，都被相应地增加了 100，而分钟数和秒数分别增加了 1，这里增加的 100 是为了区分公元前和公元后，一般在写入该类型的数据时，最好能显式地指定日期或者时间的格式。</li>
<li>TIMPSTAMP 类型，同 DATE 类型类似，不同的是，TIMESTAMP 类型可以支持秒分量的小数位数以及时区。秒分量的小数部分最多可以支持 9 位，当秒分量的小数部分为 0 时，它和 DATE 类型在功能上完全一致。</li>
<li>INTERVAL 类型，顾名思义，这是一个表示时间间隔的数据类型，同.NET 中的 TimeSpan 类型相似，它可以用来存储一个时间间隔，比如 8 个小时或者是 30 天，两个 DATE 或者 TIMESTAMP 相减可以得到 INTERVAL，而 DATE 或者 TIMESTAMP 增加一个 INTERVAL 就可以得到相应的 DATE 或者 TIMESTAMP。</li>
</ul>
<h2 id="SQL-Server"><a href="#SQL-Server" class="headerlink" title="SQL Server"></a>SQL Server</h2><p>对 SQL Server 来说，它支持 Date、Time、DateTime 和 DateTime2 共 4 种数据类型。其中，</p>
<ul>
<li>Date 类型仅存储日期，不存储时间，需要 3 个字节的存储空间，默认格式为 yyyy-MM-dd(PS:为什么没有一个标准来统一这些占位符的大小写)，取值范围为 0001-01-01 ~ 9999-12-31，可以采用字符串、GetDate()、SysDateTime()三种方式赋值。</li>
<li>Time 类型仅存储时间，不存储日期，需要 7 个字节的存储空间，默认格式为 hh:mm:ss.nnnnnnn，可以注意到默认的秒分量小数部分为 7 位，建议使用字符串或者 SysDateTime()这两种方式赋值，不建议使用 GetDate()，因为该方法返回值为 DateTime 类型，其时间部分的精度没有 Time 类型的经度高。</li>
<li>DateTime&#x2F;DateTime2，这个命名好 COM+啊，其中 DateTime 类型存储日期和时间，需要 8 个字节的固定存储空间，相对应地，DateTime2 的存储空间则是不固定的，因为它可以指定秒分量的小数位。DateTime 的默认格式为 yyyy-MM-dd hh:mm:ss.xxx，取值范围为 1753-01-01 00:00:00.000 ~ 9999-1-3123:59:59.997，精确度为 3.33 毫秒，相应地，DateTime2 的秒分量小数位默认可达到 7 位。通过 GetDate()和 GetUTCDate()两个函数，可以为 DateTime 类型赋值；通过 SysDateTime()和 SysUTCDateTime()函数，可以为 DateTime2 类型赋值。通常来说，DateTime2 相比 DateTime，具有更好的性能表现。<br>此时此刻，我们不得不面对这样一个现实，那就是：不同的数据库中对日期&#x2F;时间的存储处理是不同的。看起来这像是一个显而易见的结论，因为这就像 SQL 这门语言一样，即使我们有着相同的标准，可最终我们面对的还是各种“方言”版本的 SQL，甚至连这些难以统一的内置函数，都会成为某次面试中的题目。我们注意到，这些和日期&#x2F;事件相关的数据类型，在对时区的支持上差异明显，MySQL 中的 DATESTAMP 是标准的 UNIX 时间戳，存储的是自 1970-01-01 至今经过的秒数，这个数据的存取都是相对简单的，因为 MySQL 内部帮你做了大量的转换的工作，<br>可它的缺点是什么呢？由于 4 个字节长度的限制，它最多到 2038 年，可现在都 2018 年了啊！DATETIME 类型的数据范围好像可以解决这个问题，遗憾的是它没有办法包含时区信息，这就尴尬了啊！或许有人会想到能不能用 int 类型来存储日期，这理论上是没有问题啊，可你愿意每次存取都要做一遍转换吗？这意味着我们需要一种同时支持日期、时间和时区的表示方法，所以，下面我们来说一说 DateTime 相关的格式化，这里特指 UTC 时间、GMT 时间、本地时间和 Unix 时间。</li>
</ul>
<h1 id="繁杂的日期格式"><a href="#繁杂的日期格式" class="headerlink" title="繁杂的日期格式"></a>繁杂的日期格式</h1><p>我对日期&#x2F;时间的格式化的厌恶，最早来自为 Excel 编写读写库，人们发明了各种各样的样式，虽然常用的无非那么多种，可对于一个编写 Excel 读写库的人来说，你不得不去在读写过程中面对各种各样的格式，或者是从字符串变为 DateTime 类型，或者是从 DateTime 变为字符串。我本人非常喜欢 OADate 这种方式，因为它真正地做到了样式与数据分离，我们大多数时候面对的时间，它到底是一种什么数据类型，为什么你在 Excel 里输入日期&#x2F;时间字符串会被当作是日期&#x2F;时间，而通过快捷键插入的系统时间同样会被当作是日期&#x2F;时间，有没有一种统一的可以描述时间的方式呢？这里需要介绍 UTC 时间、GMT 时间、本地时间和 Unix 时间 4 个概念。</p>
<h2 id="UTC-时间"><a href="#UTC-时间" class="headerlink" title="UTC 时间"></a>UTC 时间</h2><p>UTC 时间，即 Coordinate Universal Time。它是一种通用的时间表示方法，UTC 是根据原子钟来计算时间，它是经过平均太阳时、地轴运动综合修正计算后的一个结果，使用秒作为计量单位，由于原子钟计量的时间精度非常高，因此，可以认为 UTC 一个世界标准时间。</p>
<h2 id="GMT-时间"><a href="#GMT-时间" class="headerlink" title="GMT 时间"></a>GMT 时间</h2><p>GMT 时间，即 Greenwhich Mean Time。如果大家对这个名词不熟悉，那么我相信，对于格林威治天文台，大家一定非常熟悉啦！ 十七世纪，为了满足英国海上霸权的扩张，格林威治皇家天文台开始对天文进行观测。历史上每一次霸权主义的扩张，其初衷必然是非正义的，可伴随着这个过程中而产生的文明，可谓是是泽被后世，前文中提到的时区划分，就是以格林尼治天文台旧址作为零时区，所以 GMT 时间和 UTC 时间等价，前者提出较早，基于天文观测；后者提出较晚，基于现代物理。</p>
<h2 id="本地时间"><a href="#本地时间" class="headerlink" title="本地时间"></a>本地时间</h2><p>本地时间，即 LocalTime。从定以上来讲，本地时间&#x3D;UTC 时间+时差，其中东半球时区记为正，西半球时区记为负。以东八区为例，UTC+0800，即为本地时间，这就是我们所熟悉的北京时间。因为同时存在 UTC 和 GMT 两种标准，所以我们在某些场合下会看到 GMT+0800，这两者表示的实际上是同一个时间，都以秒作为单位。</p>
<h2 id="Unix-时间"><a href="#Unix-时间" class="headerlink" title="Unix 时间"></a>Unix 时间</h2><p>Unix 时间，又称 Unix 时间戳，顾名思义，这是一种在 Unix 及类 Unix 操作系统中表示时间的方法。Unix 时间戳其实就是 UTC 时间在计算机领域的一个应用，我们所看到的计算时间，其实都是从 1970-01-01 00:00:00 开始，截止到此时此刻的总秒数，这个方案被 Unix 及类 Unix 操作系统继承下来，甚至影响到了大量非 Unix 操作系统，这个方案后来被称为 POSIX 标准，因为该时间又被称为 POSIX 时间。或许有朋友会感到疑惑，计算机是会关机和断电的啊，那么这个时间不就会丢失吗？事实上计算机内部有一个称为 RCT 的硬件模块，该模块内部独立供电，所以可以准确记录下这个时间。一个有趣的事情是，计算机内部使用 32 位整型来表示时间，而 32 位整型最大能表示为 2147483647 秒，我们做个简单计算:2147483647&#x2F;365&#x2F;24&#x2F;60&#x2F;60，就可以知道这个数值为 68.1 年，这意味着计算机内部能表示最大年份为 1970+68&#x3D;2038。想想看今天已经是 2018 年啦，难道在我们有生之年会有幸见到这个 Bug 吗？这对整个数字时代来说算不算一次世界末日呢？哈哈，实际上我们有了 64 位以后这个问题就可以解决了，至于 64 位出现类似问题，这个只能交给时间来解决啦，因为那时你和我都早已不复存在。</p>
<h2 id="ISO8601"><a href="#ISO8601" class="headerlink" title="ISO8601"></a>ISO8601</h2><p>OK，现在我们来一起看一个实际的格式化问题，我们在调用后端提供的 API 接口时，前端同事使用日期格式是：2018-06-05T03:03:57.000Z，而后端同事使用的日期格式是：2018-03-16T19:14:22.077+0800。这两种不同的日期格式到底是什么呢？和我们这篇文章中提到的内容又有什么关联呢？因为博主曾经在写一个小工具的时候，遇到无法解析这种格式日期的问题，所以对这两种日期格式可谓是记忆犹新。这两种日期格式实际源于一个国际标准<a target="_blank" rel="noopener" href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO8601</a>。<br>根据该格式的定义，当日期和时间组合使用时，需要在时间面前增加一个大写字母 T，而 Z 表示时区，且默认表示 0 时区，因此字母 Z 可以省略，以我国为例，我国是东八区，所以正确的写法是+08:00，由此可以得知，第二种写法实际上就是一个表示东八区时间的表示方法，虽然这个写法是错误的。第一种写法有什么问题呢？它表示的是 0 时区的时间，因此对中国用户而言，他们需要在这个时间上增加 8 个小时的时差，可如果这个时间是经过时区修正后的时间会怎么办呢？时间对每一个人都很重要，可看到它的稀奇古怪的表示方法，难免会让人感到风中凌乱啊……<br>我们知道，<a target="_blank" rel="noopener" href="https://bridge.net/go/newtonsoft/">Json.Net</a>是.NET 中一个非常流行的 JSON 解析和生成库，而我们在对一个实体进行序列化的时候，如果实体中属性的数据类型为 DateTime，那么在序列化的时候就会出现一个非常有趣的现象。假如我们在数据库中有一个字段 dateCreated，那么通过这个库转换出来的结果可能会是”/Date(1269582661683+0800)/“这样的结果，例如下面这段 JSON：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;DateCreated&quot;</span><span class="punctuation">:</span><span class="string">&quot;\/Date(1528687303302)\/&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;UserName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Payne Qin&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>出现这个结果的原因，是因为我们使用微软提供的 JavaScriptSerializer，而这个序列化器遵循的实际上是 Unix 时间标准，换句话说，这里展示的这个数值是 1970-01-01 00:00:00 至今的毫秒数， 这一点我们通过一个简单的计算就可以得到验证。Json.Net 中默认使用 ISO8601 风格的序列化器，我们一起来看下面的例子，这里我们定义一个简单的数据结构，按照惯例，这个数据结构用 Foo 类表示：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Foo</span></span><br><span class="line">&#123;</span><br><span class="line">  [<span class="meta">JsonConverter(typeof(IsoDateTimeConverter))</span>]</span><br><span class="line">  <span class="keyword">public</span> DateTime IsoDateTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">  [<span class="meta">JsonConverter(typeof(JavaScriptDateTimeConverter))</span>]</span><br><span class="line">  <span class="keyword">public</span> DateTime JSDateTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="built_in">string</span> UserName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时，我们可以注意到序列化后的结果如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;IsoDateTime&quot;</span><span class="punctuation">:</span><span class="string">&quot;2018-06-11T11:35:45.898768+08:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;JSDateTime&quot;</span><span class="punctuation">:</span>new Date(<span class="number">1528688145898</span>)<span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;UserName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Payne Qin&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>为了将这两种统一起来，建议通过 JsonSerializerSettings，因为我们可以定制日期的样式：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> settings = <span class="keyword">new</span> JsonSerializerSettings();</span><br><span class="line">settings.DateFormatHandling = DateFormatHandling.IsoDateFormat;</span><br><span class="line">settings.DateFormatString = <span class="string">&quot;yyyy-MM-ddTHH:mm:ss.fffzzz&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> json = JsonConvert.SerializeObject(entity,settings);</span><br></pre></td></tr></table></figure>
<p>此时，可以注意到结果为：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;IsoDateTime&quot;</span><span class="punctuation">:</span><span class="string">&quot;2018-06-11T11:45:46.981+08:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;JSDateTime&quot;</span><span class="punctuation">:</span><span class="string">&quot;2018-06-11T11:45:46.981+08:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;UserName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Payne Qin&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>JavaScriptDateTimeConverter 和 IsoDateTimeConverter，均是 DateTimeConverter 的子类，因此我们可以定义更多的转换器，毕竟喜欢折腾的人类永远不会满足，除了本文中介绍到的时间表示方法以外，我们还有 CST 和 DST 等不同的表示方法，对了，关于格式化参数 fff&#x2F;zzz 等请参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/JiYF/p/7831547.html">这里</a>，你就会知道人类是多么的无聊啊。</p>
<h1 id="不同语言中对时区的处理"><a href="#不同语言中对时区的处理" class="headerlink" title="不同语言中对时区的处理"></a>不同语言中对时区的处理</h1><p>好了，这篇文章基本上通篇都在讲时间，我们最初的问题是，服务器上的时区和当前时区不一致，导致在查询的时候时间无法对应起来。现在，我们应该可以达到一个共识，不管什么时候，我们都应该使用 UTC 时间或者 GMT 时间，而在拿到这样一个时间后，如果有必要请转换为本地时间，而当相关流程结束以后，最好将这个时间转换为 UTC 时间或者是 GTM 时间。现在，我们来看看不同的语言中是如何处理时区问题的，按照博主对语言的熟悉程度，博主选择了 C#和 Python 两门语言来说明问题。</p>
<h2 id="CSharp"><a href="#CSharp" class="headerlink" title="CSharp"></a>CSharp</h2><p>C#中关于日期&#x2F;时间的 API 都集中在 DateTime 类中，而关于时区的 API 则集中在 TimeZone 和 TimeZoneInfo 类中，我们一起来看下面的代码：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当前时区：中国夏令时</span></span><br><span class="line"><span class="keyword">var</span> timezone = TimeZone.CurrentTimeZone;</span><br><span class="line"><span class="comment">//获取所有时区</span></span><br><span class="line"><span class="keyword">var</span> timezones = TimeZoneInfo.GetSystemTimeZones();</span><br><span class="line"><span class="comment">//获取时区ID：北京时间+08:00/China Standard Time</span></span><br><span class="line"><span class="keyword">var</span> timezoneId = TimeZoneInfo.GetSystemTimeZones()[<span class="number">102</span>].Id;</span><br><span class="line"><span class="comment">//当前系统时区：(UTC+08:00) 北京，重庆，香港特别行政区，乌鲁木齐</span></span><br><span class="line"><span class="keyword">var</span> currentTimeZone = TimeZoneInfo.Local;</span><br><span class="line"><span class="comment">//本地时间转换为UTC时间：2018/6/11 5:13:49</span></span><br><span class="line"><span class="keyword">var</span> dtUTC2 = TimeZoneInfo.ConvertTimeToUtc(DateTime.Now);</span><br><span class="line"><span class="comment">//将本地时间转换为指定时区的UTC时间：2018/6/11 5:13:49</span></span><br><span class="line"><span class="keyword">var</span> dt = DateTime.SpecifyKind(DateTime.Now, DateTimeKind.Local);</span><br><span class="line"><span class="keyword">var</span> dtUTC1 = TimeZoneInfo.ConvertTimeToUtc(dt, TimeZoneInfo.Local);</span><br><span class="line"><span class="comment">//将指定时间从指定时区转换至目标时区的时间：2018/6/11 1:13:49</span></span><br><span class="line"><span class="keyword">var</span> dtUTC3 = TimeZoneInfo.ConvertTime(dt, TimeZoneInfo.Local, TimeZoneInfo.GetSystemTimeZones()[<span class="number">30</span>]);</span><br><span class="line"><span class="comment">//当前UTC时间：2018/6/11 5:13:49</span></span><br><span class="line"><span class="keyword">var</span> dtUTC = DateTime.UtcNow;</span><br><span class="line"><span class="comment">//当前Unix时间：1528694152</span></span><br><span class="line"><span class="keyword">var</span> startTime = TimeZone.CurrentTimeZone.ToLocalTime(<span class="keyword">new</span> System.DateTime(<span class="number">1970</span>, <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line"><span class="keyword">var</span> dtUnix = (<span class="built_in">int</span>)(DateTime.Now - startTime).TotalSeconds;</span><br></pre></td></tr></table></figure>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>Python 中针对时区的处理，发扬了 Python 一贯主张简单的传统，有多传统呢，大概只需要两行代码，是的，你没有听错，只需要两行代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tz = pytz.timezone(<span class="string">&#x27;Asia/Shanghai&#x27;</span>)</span><br><span class="line">dt = datetime.datetime.now(tz)</span><br></pre></td></tr></table></figure>
<p>简单来说，在 Python 中我们只需要给定时区，即可将本地时间转化为指定时区对应的 UTC 时间，这里我们使用的是 Python 中的 pytz 这个库，如果你打开这个库的安装目录，就会发现其实它有大量时区相关的数据组成，如果我们直接调用 pytz.timezone()就可以获得所有的时区信息。博主有一个 Python<a target="_blank" rel="noopener" href="https://github.com/qinyuanpei/BlogScripts/blob/master/HexoBlog.py">脚本</a>运行在 TravisCI 的服务器上，而 TravisCI 来自一家法国的技术公司，因此在不指定时区的情况下，会默认使用 TravisCI 服务器上的时间，这并不是我想要的结果，所以，我们需要 pytz 来解决这个问题，至于这里为什么我们使用的是上海而不是北京，这是因为中国横跨 5 个时区，在国内大家习惯使用北京时间，而在国外这些时区数据没有做及时更新，所以这算是一个关于时区的历史遗留问题吧！</p>
<h1 id="本文小结"><a href="#本文小结" class="headerlink" title="本文小结"></a>本文小结</h1><p>本文从实际生活中一个案例入手，首先，向大家解释了为什么我们需要时区，以及为什么地球上不同地域拥有不同的时间。接下来，我们以 MySQL、Oracle 和 SQL Server 三种数据库为例，了解了在数据库中是如何存储时间的，可以注意到大多数数据库都使用了时间戳来存储时间。由此，我们引出了 UTC 时间、GMT 时间、本地时间以及 Unix 时间，并讲述了它们之间的区别。其中，UTC 和 GMT 可以看作是等价的时间表示方法，两者仅仅是计量工具不同，在历史上提出的先后顺序不同，并且 GMT 时间是以 UTC 时间为基准的。而 Unix 时间是计算中表示时间的方法，其含义是自 1970-01-01 00:00:00 至今经过的总秒数，在此基础上我们引出了为什么 32 位计算机下能表示的最大年份是 2037。在文章的最后，博主选择了最熟悉的 C#和 Python，向大家展示了和时区相关的操作。<br>我承认，这篇文章相当地细碎，可能因此牵扯了太多的概念，我一直在犹豫要不要发到博客上来。其实，有太多的时候，越来越发觉自己写不出来一篇好的文章，大概我需要去读更多的书，或者去解决更多的问题，可坚持写博客的一个重要原因，无非是我觉得我需要花点时间区整理这些东西，因为别人没有去关注的一个问题，而我去尝试关注或者解决了，这就是我的收获啊，总而言之，在这篇相当细碎的文章背后，我收获的可能并不比这篇文章里写出来的少，原谅我这些唠叨的碎碎念吧，这篇文章就是这样啦，谢谢大家！</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E6%97%B6%E5%8C%BA/" rel="tag"># 时区</a>
          
            <a href="/tags/%E6%97%B6%E9%97%B4/" rel="tag"># 时间</a>
          
            <a href="/tags/%E6%A0%BC%E5%BC%8F%E5%8C%96/" rel="tag"># 格式化</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/fostering-web-performance-culture" rel="next" title="Fostering a Web Performance Culture">
                <i class="fa fa-chevron-left"></i> Fostering a Web Performance Culture
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/10/2018/2018-06-10-cities-skylines/" rel="prev" title="游戏：城市天际线（Cities: Skylines）">
                游戏：城市天际线（Cities: Skylines） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">1579</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">64</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">914</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%B6%E5%8C%BA%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E4%B8%8D%E5%90%8C"><span class="nav-number">1.</span> <span class="nav-text">时区为什么会不同</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%87%8C%E5%A6%82%E4%BD%95%E5%AD%98%E5%82%A8%E6%97%B6%E9%97%B4"><span class="nav-number">2.</span> <span class="nav-text">数据库里如何存储时间</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL"><span class="nav-number">2.1.</span> <span class="nav-text">MySQL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle"><span class="nav-number">2.2.</span> <span class="nav-text">Oracle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-Server"><span class="nav-number">2.3.</span> <span class="nav-text">SQL Server</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B9%81%E6%9D%82%E7%9A%84%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">繁杂的日期格式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#UTC-%E6%97%B6%E9%97%B4"><span class="nav-number">3.1.</span> <span class="nav-text">UTC 时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GMT-%E6%97%B6%E9%97%B4"><span class="nav-number">3.2.</span> <span class="nav-text">GMT 时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E6%97%B6%E9%97%B4"><span class="nav-number">3.3.</span> <span class="nav-text">本地时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Unix-%E6%97%B6%E9%97%B4"><span class="nav-number">3.4.</span> <span class="nav-text">Unix 时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ISO8601"><span class="nav-number">3.5.</span> <span class="nav-text">ISO8601</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E8%AF%AD%E8%A8%80%E4%B8%AD%E5%AF%B9%E6%97%B6%E5%8C%BA%E7%9A%84%E5%A4%84%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">不同语言中对时区的处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CSharp"><span class="nav-number">4.1.</span> <span class="nav-text">CSharp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python"><span class="nav-number">4.2.</span> <span class="nav-text">Python</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%AC%E6%96%87%E5%B0%8F%E7%BB%93"><span class="nav-number">5.</span> <span class="nav-text">本文小结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laird Lau</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
